(this["webpackJsonpvolca-sampler"]=this["webpackJsonpvolca-sampler"]||[]).push([[0],{13:function(Ie,q,I){},21:function(Ie,q,I){"use strict";I.r(q);var m=I(0),d=I.n(m),Ce=I(6),Ee=I.n(Ce),Ua=I(13),F=I(1);const Ne=F.a.div({height:"100%",overflow:"auto"}),ee=F.a.div({padding:"0.5rem",border:"1px solid grey",cursor:"pointer",backgroundColor:({$selected:e})=>e?"#f3f3f3":"unset"});function Pe({samples:e,selectedSampleId:t,readonly:a,onNewSample:r,onSampleSelect:n}){return d.a.createElement(Ne,null,d.a.createElement(ee,{"data-disabled":a,onClick:()=>!a&&r()},"New Sample"),[...e].map(([o,s])=>d.a.createElement(ee,{key:o,$selected:o===t,"data-disabled":a,onClick:()=>!a&&n(o)},d.a.createElement("div",null,s.metadata.name),d.a.createElement("div",null,"Updated ",new Date(s.metadata.dateModified).toLocaleString()))))}var Oe=Pe,De=I(7),Ae=I.n(De),ke=I(2),k=I.n(ke),ae=I(23),te=[{name:"Kick 1",sourceFileId:"factory-samples/00 Kick 1.wav",id:"532d9ea7-68d2-4ae8-a04a-d77ca846eaf4",slotNumber:0,dateSampled:14121216e5},{name:"Kick 2",sourceFileId:"factory-samples/01 Kick 2.wav",id:"2c02cc42-fbc2-465b-a4a3-255a7a30b15e",slotNumber:1,dateSampled:14121216e5},{name:"Kick 3",sourceFileId:"factory-samples/02 Kick 3.wav",id:"72d9c6d6-6e99-4b6b-b01a-63e1439f371a",slotNumber:2,dateSampled:14121216e5},{name:"Kick 4",sourceFileId:"factory-samples/03 Kick 4.wav",id:"3c96acbe-076b-48a3-afe9-51e828e37974",slotNumber:3,dateSampled:14121216e5},{name:"Kick 5",sourceFileId:"factory-samples/04 Kick 5.wav",id:"3a733799-b8fb-4c3b-a42e-dc7fa6c1d455",slotNumber:4,dateSampled:14121216e5},{name:"Kick 6",sourceFileId:"factory-samples/05 Kick 6.wav",id:"60437205-d894-45a1-b96c-ecf731b79998",slotNumber:5,dateSampled:14121216e5},{name:"Kick 7",sourceFileId:"factory-samples/06 Kick 7.wav",id:"0b98be31-7481-4c04-8b70-54ef9d0b29ed",slotNumber:6,dateSampled:14121216e5},{name:"Kick 8",sourceFileId:"factory-samples/07 Kick 8.wav",id:"136f1f35-680c-4368-9dda-02151767ba3c",slotNumber:7,dateSampled:14121216e5},{name:"Kick 9",sourceFileId:"factory-samples/08 Kick 9.wav",id:"4ceeb5c4-aa88-43a5-976a-05b48ab6d113",slotNumber:8,dateSampled:14121216e5},{name:"Kick 10",sourceFileId:"factory-samples/09 Kick 10.wav",id:"44970d9e-f138-408a-b2b0-ac9e89b79e4b",slotNumber:9,dateSampled:14121216e5},{name:"Snare 1",sourceFileId:"factory-samples/10 Snare 1.wav",id:"7f5e74b9-1449-48ea-b386-f5cc874a8a93",slotNumber:10,dateSampled:14121216e5},{name:"Snare 2",sourceFileId:"factory-samples/11 Snare 2.wav",id:"b5bb806d-2f90-4808-bdc0-b5d11c55cb61",slotNumber:11,dateSampled:14121216e5},{name:"Snare 3",sourceFileId:"factory-samples/12 Snare 3.wav",id:"fa53587b-9271-437b-b117-8522bee81b27",slotNumber:12,dateSampled:14121216e5},{name:"Snare 4",sourceFileId:"factory-samples/13 Snare 4.wav",id:"f672dc32-573a-4a07-a531-532b2b07e9b8",slotNumber:13,dateSampled:14121216e5},{name:"Snare 5",sourceFileId:"factory-samples/14 Snare 5.wav",id:"98d5a8a1-f460-4603-891f-556416a1f1d8",slotNumber:14,dateSampled:14121216e5},{name:"Snare 6",sourceFileId:"factory-samples/15 Snare 6.wav",id:"b139e9f5-1f45-4910-b831-c772849c709b",slotNumber:15,dateSampled:14121216e5},{name:"Snare 7",sourceFileId:"factory-samples/16 Snare 7.wav",id:"e9dee8da-7bf4-49f2-8812-a859ea4660fa",slotNumber:16,dateSampled:14121216e5},{name:"Snare 8",sourceFileId:"factory-samples/17 Snare 8.wav",id:"5c64f7c9-203e-41a7-8c17-5efddf3f0e2c",slotNumber:17,dateSampled:14121216e5},{name:"Snare 9",sourceFileId:"factory-samples/18 Snare 9.wav",id:"8b46a4ba-0a91-4463-af39-0d47dc635a74",slotNumber:18,dateSampled:14121216e5},{name:"Snare 10",sourceFileId:"factory-samples/19 Snare 10.wav",id:"018704c5-2a0f-4367-8db1-3302270bc152",slotNumber:19,dateSampled:14121216e5},{name:"Snare 11",sourceFileId:"factory-samples/20 Snare 11.wav",id:"ac18e017-5df3-421c-9802-033d000c4f01",slotNumber:20,dateSampled:14121216e5},{name:"Snare 12",sourceFileId:"factory-samples/21 Snare 12.wav",id:"5a0ab3f0-5f82-4c96-9dd8-1f4a8715bc96",slotNumber:21,dateSampled:14121216e5},{name:"Clap 1",sourceFileId:"factory-samples/22 Clap 1.wav",id:"6d196928-5f5f-48d3-924c-aaa698a3c520",slotNumber:22,dateSampled:14121216e5},{name:"Clap 2",sourceFileId:"factory-samples/23 Clap 2.wav",id:"e3952972-e23d-4003-8a7d-66a5f96ed3f4",slotNumber:23,dateSampled:14121216e5},{name:"Clap 3",sourceFileId:"factory-samples/24 Clap 3.wav",id:"53280ff9-034b-4764-b5d5-b18a87f428fa",slotNumber:24,dateSampled:14121216e5},{name:"Clap 4",sourceFileId:"factory-samples/25 Clap 4.wav",id:"32e2f536-2206-495f-92ae-96aacfeb5faa",slotNumber:25,dateSampled:14121216e5},{name:"Clap 5",sourceFileId:"factory-samples/26 Clap 5.wav",id:"40d8b34f-7bfe-4720-a008-c3ad15c68442",slotNumber:26,dateSampled:14121216e5},{name:"Clap 6",sourceFileId:"factory-samples/27 Clap 6.wav",id:"143901a6-741f-4ac2-8cdf-b8df56ee7dc3",slotNumber:27,dateSampled:14121216e5},{name:"Clap 7",sourceFileId:"factory-samples/28 Clap 7.wav",id:"cf9be332-a4a9-48d7-a7b5-9656a6563706",slotNumber:28,dateSampled:14121216e5},{name:"Clap 8",sourceFileId:"factory-samples/29 Clap 8.wav",id:"e940db81-d23d-4afc-82b5-4e31bf2afe8d",slotNumber:29,dateSampled:14121216e5},{name:"Hihat 1",sourceFileId:"factory-samples/30 Hihat 1.wav",id:"0aeebe13-6226-4d52-a185-e3d3bb66319e",slotNumber:30,dateSampled:14121216e5},{name:"Hihat 2",sourceFileId:"factory-samples/31 Hihat 2.wav",id:"a95c7744-4957-464c-86bf-eb6719feb5f4",slotNumber:31,dateSampled:14121216e5},{name:"Hihat 3",sourceFileId:"factory-samples/32 Hihat 3.wav",id:"ac047fbe-5029-4099-beec-74c5f3a6edc9",slotNumber:32,dateSampled:14121216e5},{name:"Hihat 4",sourceFileId:"factory-samples/33 Hihat 4.wav",id:"298ec467-02e6-465e-8408-c4e8055bbf1b",slotNumber:33,dateSampled:14121216e5},{name:"Hihat 5",sourceFileId:"factory-samples/34 Hihat 5.wav",id:"6565b986-4cd7-44c0-98a2-bcc86bc97d32",slotNumber:34,dateSampled:14121216e5},{name:"Hihat 6",sourceFileId:"factory-samples/35 Hihat 6.wav",id:"82215816-6ca6-4d4a-b6ed-e164e68cffdc",slotNumber:35,dateSampled:14121216e5},{name:"Hihat 7",sourceFileId:"factory-samples/36 Hihat 7.wav",id:"63bd1a36-9f42-4409-a4dd-27c83c6ce46c",slotNumber:36,dateSampled:14121216e5},{name:"Hihat 8",sourceFileId:"factory-samples/37 Hihat 8.wav",id:"bf47420d-498f-46cc-875c-9fc9614d53d9",slotNumber:37,dateSampled:14121216e5},{name:"Hihat 9",sourceFileId:"factory-samples/38 Hihat 9.wav",id:"f628e650-12d0-4b4c-bb91-7bb64fa2e39e",slotNumber:38,dateSampled:14121216e5},{name:"Hihat 10",sourceFileId:"factory-samples/39 Hihat 10.wav",id:"8a21640b-f16b-4b87-930f-7d9f88435041",slotNumber:39,dateSampled:14121216e5},{name:"Crash",sourceFileId:"factory-samples/40 Crash.wav",id:"42c8bdb0-7562-466c-b0a0-5abd4108faa0",slotNumber:40,dateSampled:14121216e5},{name:"Ride",sourceFileId:"factory-samples/41 Ride.wav",id:"177fab98-417f-4872-92e1-1ed8e493abb1",slotNumber:41,dateSampled:14121216e5},{name:"Swoosh",sourceFileId:"factory-samples/42 Swoosh.wav",id:"edf63812-b9b4-4a30-b5c4-b5932b189a3c",slotNumber:42,dateSampled:14121216e5},{name:"SynthRim",sourceFileId:"factory-samples/43 SynthRim.wav",id:"665f7021-1e46-40e8-b411-4fde9fb2b404",slotNumber:43,dateSampled:14121216e5},{name:"SynthTom 1",sourceFileId:"factory-samples/44 SynthTom 1.wav",id:"3dbc03e6-e4b2-464f-9b1c-c52e3fa20a2b",slotNumber:44,dateSampled:14121216e5},{name:"SynthTom 2",sourceFileId:"factory-samples/45 SynthTom 2.wav",id:"c0b465b4-90ff-48dc-b3a4-8433371863b9",slotNumber:45,dateSampled:14121216e5},{name:"SynthTom 3",sourceFileId:"factory-samples/46 SynthTom 3.wav",id:"ccd3d40e-9314-4716-957f-1a4310bc5e7a",slotNumber:46,dateSampled:14121216e5},{name:"SynthTom 4",sourceFileId:"factory-samples/47 SynthTom 4.wav",id:"40cf4c67-ef4f-45c9-aba0-086c635588e3",slotNumber:47,dateSampled:14121216e5},{name:"Tom 1",sourceFileId:"factory-samples/48 Tom 1.wav",id:"258498bf-2214-448a-ad59-2a6604303062",slotNumber:48,dateSampled:14121216e5},{name:"Tom 2",sourceFileId:"factory-samples/49 Tom 2.wav",id:"76745927-e8ae-4cc9-aacd-df520c67e53b",slotNumber:49,dateSampled:14121216e5},{name:"SynthCow",sourceFileId:"factory-samples/50 SynthCow.wav",id:"4f3f4db5-6ac4-44be-977a-b85fe28a22fa",slotNumber:50,dateSampled:14121216e5},{name:"Bongo",sourceFileId:"factory-samples/51 Bongo.wav",id:"9f75c65d-c3f0-4c77-a6f4-3bec01b6690e",slotNumber:51,dateSampled:14121216e5},{name:"DoncaClaves",sourceFileId:"factory-samples/52 DoncaClaves.wav",id:"a5bc878c-65de-40d3-978d-c7bc7dbe4247",slotNumber:52,dateSampled:14121216e5},{name:"SynthShaker",sourceFileId:"factory-samples/53 SynthShaker.wav",id:"46d63232-454b-4a77-8851-43a459d77110",slotNumber:53,dateSampled:14121216e5},{name:"Tambourine",sourceFileId:"factory-samples/54 Tambourine.wav",id:"33d8c8be-887c-4718-8813-8c2ba4341335",slotNumber:54,dateSampled:14121216e5},{name:"Cowbell",sourceFileId:"factory-samples/55 Cowbell.wav",id:"b21a2d76-a568-4f85-8fad-3b3314e95e85",slotNumber:55,dateSampled:14121216e5},{name:"DoncaSConga",sourceFileId:"factory-samples/56 DoncaSConga.wav",id:"2aeed069-974f-4e8e-aad1-7c97a460b3c8",slotNumber:56,dateSampled:14121216e5},{name:"DoncaLBongo",sourceFileId:"factory-samples/57 DoncaLBongo.wav",id:"4d7929a0-d1c7-4bd0-a4f2-d218cd29cc8e",slotNumber:57,dateSampled:14121216e5},{name:"SynthPerc",sourceFileId:"factory-samples/58 SynthPerc.wav",id:"28d100b4-a1cb-4d95-bae5-692c24cc07ef",slotNumber:58,dateSampled:14121216e5},{name:"WhiteNoise",sourceFileId:"factory-samples/59 WhiteNoise.wav",id:"6bb0571b-c9de-4aa8-8c15-5924c278da1e",slotNumber:59,dateSampled:14121216e5},{name:"SynthHit 1",sourceFileId:"factory-samples/60 SynthHit 1.wav",id:"668a76fe-d748-4f99-bfa1-115ae378d364",slotNumber:60,dateSampled:14121216e5},{name:"SynthHit 2",sourceFileId:"factory-samples/61 SynthHit 2.wav",id:"ec130f7d-2562-4cfe-abaa-38e68c345f93",slotNumber:61,dateSampled:14121216e5},{name:"SynthHit 3",sourceFileId:"factory-samples/62 SynthHit 3.wav",id:"e4548eca-20a9-413f-8a5c-ff999e38e40b",slotNumber:62,dateSampled:14121216e5},{name:"SynthHit 4",sourceFileId:"factory-samples/63 SynthHit 4.wav",id:"f73b63a1-43b6-4a69-be8b-d23285b1f395",slotNumber:63,dateSampled:14121216e5},{name:"SynthHit 5",sourceFileId:"factory-samples/64 SynthHit 5.wav",id:"553cebd0-6f8d-4c09-bf7a-b2e54f41e6eb",slotNumber:64,dateSampled:14121216e5},{name:"SynthHit 6",sourceFileId:"factory-samples/65 SynthHit 6.wav",id:"2c042a7f-04e4-47e7-976d-5c83af823c38",slotNumber:65,dateSampled:14121216e5},{name:"SynthHit 7",sourceFileId:"factory-samples/66 SynthHit 7.wav",id:"86103fb1-7e67-4f6b-a2c8-134c0162fdd6",slotNumber:66,dateSampled:14121216e5},{name:"SynthHit 8",sourceFileId:"factory-samples/67 SynthHit 8.wav",id:"8dd3a15c-21ba-4f66-bb18-4f0eacc322c0",slotNumber:67,dateSampled:14121216e5},{name:"SynthHit 9",sourceFileId:"factory-samples/68 SynthHit 9.wav",id:"db43ca10-35fc-407f-8b4f-a50b46b437e6",slotNumber:68,dateSampled:14121216e5},{name:"SynthHit 10",sourceFileId:"factory-samples/69 SynthHit 10.wav",id:"3e47a74d-c0ed-407d-9181-f04d7d5ae737",slotNumber:69,dateSampled:14121216e5},{name:"PianoChord 1",sourceFileId:"factory-samples/70 PianoChord 1.wav",id:"d0cb5f10-e808-44ba-891b-68927d5963c2",slotNumber:70,dateSampled:14121216e5},{name:"PianoChord 2",sourceFileId:"factory-samples/71 PianoChord 2.wav",id:"c36a1fb2-2a3a-4eda-9421-b9906b94d073",slotNumber:71,dateSampled:14121216e5},{name:"PianoChord 3",sourceFileId:"factory-samples/72 PianoChord 3.wav",id:"3400b6a4-e649-41d6-b76e-de70413984f9",slotNumber:72,dateSampled:14121216e5},{name:"EPChord 1",sourceFileId:"factory-samples/73 EPChord 1.wav",id:"c0d219a6-556e-44af-a41a-2fe4eb8364ae",slotNumber:73,dateSampled:14121216e5},{name:"EPChord 2",sourceFileId:"factory-samples/74 EPChord 2.wav",id:"95c7b48f-1953-4728-959b-c2d745716135",slotNumber:74,dateSampled:14121216e5},{name:"EPChord 3",sourceFileId:"factory-samples/75 EPChord 3.wav",id:"424dc317-ce6f-4183-879c-34b045fdcaa5",slotNumber:75,dateSampled:14121216e5},{name:"EPChord 4",sourceFileId:"factory-samples/76 EPChord 4.wav",id:"73838f71-751d-4dee-9315-f99029ebef6b",slotNumber:76,dateSampled:14121216e5},{name:"OrganChord",sourceFileId:"factory-samples/77 OrganChord.wav",id:"f0cd369f-bc38-497f-a730-e11fb889c725",slotNumber:77,dateSampled:14121216e5},{name:"BandHit 1",sourceFileId:"factory-samples/78 BandHit 1.wav",id:"c570c9cb-2409-4db6-8c13-eee2bb0299c7",slotNumber:78,dateSampled:14121216e5},{name:"BandHit 2",sourceFileId:"factory-samples/79 BandHit 2.wav",id:"f28238ce-7641-4367-8873-76823f24a314",slotNumber:79,dateSampled:14121216e5},{name:"BandHit 3",sourceFileId:"factory-samples/80 BandHit 3.wav",id:"ae1a1a41-d573-40a8-94d4-ec608efd39ed",slotNumber:80,dateSampled:14121216e5},{name:"StringsHit 1",sourceFileId:"factory-samples/81 StringsHit 1.wav",id:"e13d0000-b4c8-47fd-b625-9a1fa774b098",slotNumber:81,dateSampled:14121216e5},{name:"Choir",sourceFileId:"factory-samples/82 Choir.wav",id:"0d4895f4-3f66-4192-9078-ece068ac7bc9",slotNumber:82,dateSampled:14121216e5},{name:"GuitarHit 1",sourceFileId:"factory-samples/83 GuitarHit 1.wav",id:"ee42a6b1-0ccf-4868-a3a3-681a35557fac",slotNumber:83,dateSampled:14121216e5},{name:"GuitarHit 2",sourceFileId:"factory-samples/84 GuitarHit 2.wav",id:"32ae637c-bd6b-4c34-8eb2-a06170d4d652",slotNumber:84,dateSampled:14121216e5},{name:"KalimbaChord",sourceFileId:"factory-samples/85 KalimbaChord.wav",id:"afdf5485-a62b-4b77-a889-fe7744389528",slotNumber:85,dateSampled:14121216e5},{name:"SynChord",sourceFileId:"factory-samples/86 SynChord.wav",id:"7edc0655-63b6-4563-87ee-3b8f773450aa",slotNumber:86,dateSampled:14121216e5},{name:"BellChord",sourceFileId:"factory-samples/87 BellChord.wav",id:"88f345dd-e77f-471a-b5db-af5548dd285f",slotNumber:87,dateSampled:14121216e5},{name:"WindChime",sourceFileId:"factory-samples/88 WindChime.wav",id:"7d8f1df3-4479-40f6-821c-f7ec78899c06",slotNumber:88,dateSampled:14121216e5},{name:"Airhorn",sourceFileId:"factory-samples/89 Airhorn.wav",id:"655142f7-cc68-40a2-a0ab-f772a4f38f1f",slotNumber:89,dateSampled:14121216e5},{name:"VocalHit 1",sourceFileId:"factory-samples/90 VocalHit 1.wav",id:"8a693d6c-da20-4c07-beed-eca84dad9d4a",slotNumber:90,dateSampled:14121216e5},{name:"VocalHit 2",sourceFileId:"factory-samples/91 VocalHit 2.wav",id:"50b7b83c-86d3-4e99-87eb-e9e3bd68bc43",slotNumber:91,dateSampled:14121216e5},{name:"VocalHit 3",sourceFileId:"factory-samples/92 VocalHit 3.wav",id:"2428d49a-7ff7-451e-aafb-9893083ce60e",slotNumber:92,dateSampled:14121216e5},{name:"VocalHit 4",sourceFileId:"factory-samples/93 VocalHit 4.wav",id:"cc8814ca-44aa-405f-9789-611599b1da45",slotNumber:93,dateSampled:14121216e5},{name:"VocalHit 5",sourceFileId:"factory-samples/94 VocalHit 5.wav",id:"6c622c48-f830-42c9-8a0e-617b384794f2",slotNumber:94,dateSampled:14121216e5},{name:"VocalHit 6",sourceFileId:"factory-samples/95 VocalHit 6.wav",id:"22c47a01-7f62-419b-b65b-0afad6fa9094",slotNumber:95,dateSampled:14121216e5},{name:"VocalHit 7",sourceFileId:"factory-samples/96 VocalHit 7.wav",id:"6b508746-2228-4015-b621-5edddfa50158",slotNumber:96,dateSampled:14121216e5},{name:"VocalHit 8",sourceFileId:"factory-samples/97 VocalHit 8.wav",id:"61852d62-38d9-4487-8d15-2ad5f9192da6",slotNumber:97,dateSampled:14121216e5},{name:"VocalHit 9",sourceFileId:"factory-samples/98 VocalHit 9.wav",id:"c1e09230-3fb6-4d45-9b08-a615e8e5ad0b",slotNumber:98,dateSampled:14121216e5},{name:"Doncamatic",sourceFileId:"factory-samples/99 Doncamatic.wav",id:"959d37c9-440b-422d-b429-40b94338b0ab",slotNumber:99,dateSampled:14121216e5}];const B=31250;var Be=Object.defineProperty,xe=Object.defineProperties,He=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,K=(e,t,a)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,O=(e,t)=>{for(var a in t||(t={}))re.call(t,a)&&K(e,a,t[a]);if(x)for(var a of x(t))ne.call(t,a)&&K(e,a,t[a]);return e},$=(e,t)=>xe(e,He(t)),Me=(e,t)=>{var a={};for(var r in e)re.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&x)for(var r of x(e))t.indexOf(r)<0&&ne.call(e,r)&&(a[r]=e[r]);return a},H=(e,t,a)=>(K(e,typeof t!="symbol"?t+"":t,a),a),P=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});const M=k.a.createInstance({name:"audio_file_data",driver:k.a.INDEXEDDB}),j=k.a.createInstance({name:"sample_metadata",driver:k.a.INDEXEDDB});function je(e){return P(this,null,function*(){const t=Object(ae.a)();return yield M.setItem(t,e),t})}const U="0.2.0",Re={"0.1.0":e=>{const t=e,{clip:a}=t,r=Me(t,["clip"]);return $(O({},r),{trimFrames:a.map(o=>Math.round(o*B)),metadataVersion:"0.2.0"})}};function Te(e){let t=e;for(;t.metadataVersion!==U;){const a=Re[e.metadataVersion];if(!a){console.warn(`Failed to properly upgrade metadata for sample "${t.name}"`),t={name:t.name,sourceFileId:t.sourceFileId,id:t.id,metadataVersion:U};break}t=a(t)}return t}const D=class{constructor({name:e,sourceFileId:t,id:a=Object(ae.a)(),userFileInfo:r=null,slotNumber:n=0,dateSampled:o=Date.now(),dateModified:s=o,useCompression:c=!0,qualityBitDepth:l=16,scaleCoefficient:i=1,trimFrames:p=[0,0]}){this.id=a,this.metadata={name:e,sourceFileId:t,userFileInfo:r,slotNumber:n,dateSampled:o,dateModified:s,useCompression:c,qualityBitDepth:l,scaleCoefficient:i,trimFrames:p,metadataVersion:U}}duplicate(){const e=new D.Mutable($(O({},this.metadata),{name:`${this.metadata.name} (copy)`,dateModified:Date.now()}));return e.persist(),e}static cacheSourceFileData(e,t){this.sourceFileData.set(e,t),this.recentlyCachedSourceFileIds=[e,...this.recentlyCachedSourceFileIds.filter(r=>r!==e)];const a=this.recentlyCachedSourceFileIds.slice(this.MAX_CACHED);for(const r of a)this.sourceFileData.delete(r);this.recentlyCachedSourceFileIds=this.recentlyCachedSourceFileIds.slice(0,this.MAX_CACHED)}static getSourceFileData(e){return P(this,null,function*(){{const a=this.sourceFileData.get(e);if(a)return a}if(e.includes(".")){const a=yield fetch(e);if(a.status>=400)return Promise.reject(new Error(`Failed to fetch source file "${e}"`));const r=yield a.arrayBuffer(),n=new Uint8Array(r);return this.cacheSourceFileData(e,n),n}const t=yield M.getItem(e);return t?t instanceof Uint8Array?(this.cacheSourceFileData(e,t),t):Promise.reject("Source data is of unexpected type"):Promise.reject("Missing source data")})}static getAllMetadataFromStore(){return P(this,null,function*(){const e=new Map;return yield j.iterate((t,a)=>{if(t){const r=Te(t);e.set(a,r)}}),e})}static getAllFromStorage(){return P(this,null,function*(){const e=yield this.getAllMetadataFromStore(),t=(yield M.keys()).concat(te.map(({sourceFileId:r})=>r));return[...e].map(([r,n])=>{const{sourceFileId:o}=n;return t.includes(o)?new D.Mutable(O({id:r},n)):(console.warn(`Found metadata "${n.name||r}" with missing data "${o}; ignoring.`),null)}).filter(Boolean).sort((r,n)=>n.metadata.dateModified-r.metadata.dateModified)})}};let N=D;H(N,"Mutable",class extends D{constructor(e){super(e);setTimeout(()=>P(this,null,function*(){(yield j.keys()).includes(this.id)||console.warn(`Expected sample metadata container ${this.id} to be persisted`)}))}persist(){return P(this,null,function*(){yield j.setItem(this.id,this.metadata)})}update(e){const{id:t,metadata:a}=this;if(Object.keys(e).every(o=>e[o]===a[o]))return this;const r=$(O(O({},a),e),{dateModified:Date.now()}),n=new D.Mutable(O({id:t},r));return n.persist(),n}remove(){return P(this,null,function*(){if(yield j.removeItem(this.id),this.metadata.sourceFileId.includes("."))return;const e=yield D.getAllMetadataFromStore();for(const[,{sourceFileId:t}]of e)if(t===this.metadata.sourceFileId)return;yield M.removeItem(this.metadata.sourceFileId)})}}),H(N,"sourceFileData",new Map),H(N,"recentlyCachedSourceFileIds",[]),H(N,"MAX_CACHED",10);const Ve=new Map(te.map(e=>[e.id,new N(e)]));var le=Math.pow,G=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});function z(e,t){const a=4,r=t[0]*a,n=e.length-t[0]-t[1];return new Float32Array(e.buffer,r,n)}function oe(e,t){const a=e.length-t[0]-t[1],r=new Float32Array(a),n=Array(e.numberOfChannels).fill().map((o,s)=>z(e.getChannelData(s),t));for(let o=0;o<a;o++){let s=0;for(let c=0;c<n.length;c++)s+=n[c][o];s/=n.length,r[o]=s}return r}function We(e){let t=0;for(const a of e){const r=Math.abs(a);r>t&&(t=r)}return t}function Le(e,t){if(t!==1)for(let a=0;a<e.length;a++)e[a]*=t}function _e(e,t){const a=le(2,t-1);for(let r=0;r<e.length;r++)e[r]=Math.round(e[r]*a)/a}function ce(e){for(let t=0;t<e.length;t++)e[t]>1?e[t]=1:e[t]<-1&&(e[t]=-1)}function Ke(e){const t=new Int16Array(e.length),a=le(2,15);for(let r=0;r<e.length;r++)t[r]=e[r]===1?a-1:a*e[r];return t}let de;function ie(){return de=de||new AudioContext({sampleRate:B})}function R(e){return G(this,null,function*(){const t=new Uint8Array(e);return yield new Promise((r,n)=>{ie().decodeAudioData(t.buffer,r,n)})})}function X(e,t){return G(this,null,function*(){const a=yield N.getSourceFileData(e),r=yield R(a);if(t)for(let n=0;n<r.numberOfChannels;n++)ce(r.getChannelData(n));return r})}function J(e){return G(this,null,function*(){const{qualityBitDepth:t,sourceFileId:a,userFileInfo:r,scaleCoefficient:n,trimFrames:o}=e.metadata;if(t<8||t>16||!Number.isInteger(t))throw new Error(`Expected bit depth between 8 and 16. Received: ${t}`);const s=yield X(a,Boolean(r)),c=s.numberOfChannels===1?z(s.getChannelData(0),o):oe(s,o);n!==1&&Le(c,n),t<16&&_e(c,t);const l=Ke(c),i=l.length*2,p=Ae()({channels:1,sampleRate:s.sampleRate,bitDepth:16,dataLength:i}),f=new Uint8Array(p.length+i);return f.set(p),f.set(new Uint8Array(l.buffer),p.length),{data:f,sampleRate:16}})}const $e={playAudioBuffer(e,t){throw new Error("Must render AudioPlaybackContextProvider")},isAudioBusy:!1},se=Object(m.createContext)($e);function Ue({children:e}){const[t,a]=Object(m.useState)(!1),r=Object(m.useCallback)((o,{onTimeUpdate:s=()=>null,onEnded:c=()=>null}={})=>{if(t)throw new Error("Wait until audio playback has finished to start new playback");a(!0);let l,i;try{l=ie(),i=l.createBufferSource(),i.buffer=o,i.connect(l.destination),i.start()}catch(u){throw a(!1),u}const p=l.currentTime;s(0);let f=requestAnimationFrame(y);function y(){s(l.currentTime-p),f=requestAnimationFrame(y)}let b=!1;return i.addEventListener("ended",()=>{b||(s(o.duration),c()),a(!1),cancelAnimationFrame(f)}),function(){i.stop(),b=!0}},[t]),n=Object(m.useMemo)(()=>({playAudioBuffer:r,isAudioBusy:t}),[r,t]);return Object(m.createElement)(se.Provider,{value:n},e)}function ue(){return Object(m.useContext)(se)}var Ge=Object.defineProperty,ze=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,pe=(e,t,a)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Je=(e,t)=>{for(var a in t||(t={}))me.call(t,a)&&pe(e,a,t[a]);if(T)for(var a of T(t))fe.call(t,a)&&pe(e,a,t[a]);return e},Ye=(e,t)=>ze(e,Xe(t)),Qe=(e,t)=>{var a={};for(var r in e)me.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&T)for(var r of T(e))t.indexOf(r)<0&&fe.call(e,r)&&(a[r]=e[r]);return a},Ze=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});const be=6,qe=F.a.div({width:"100%",height:"100%",position:"relative",overflow:"hidden"}),ea=F.a.div({width:"100%",height:({$positive:e})=>e?"67%":"33%",display:"flex",alignItems:({$positive:e})=>e?"flex-end":"flex-start"}),aa=F.a.div({width:"100%",height:({$scaleCoefficient:e})=>`${100*e}%`,willChange:"height",display:"flex",alignItems:({$positive:e})=>e?"flex-end":"flex-start"}),ta=F.a.div({width:`${be}px`,height:({$amplitude:e,$positive:t})=>`${100*(t?1:-1)*e}%`,paddingRight:"1px"}),ra=F.a.div({backgroundColor:({$positive:e})=>e?"red":"darkred",height:"100%"}),na=F.a.input({position:"absolute",top:0,left:0});function la(e,t){const a=new Float32Array(Math.floor(e.length/t)),r=new Float32Array(Math.floor(e.length/t));for(let n=0;n<a.length;n++){const o=new Float32Array(e.buffer,n*t*4,t);let s=0,c=0;for(const l of o)l>s&&(s=l),l<c&&(c=l);a[n]=s,r[n]=c}return{positive:a,negative:r}}function oa({sourceAudioBuffer:e,sample:{metadata:{trimFrames:t,scaleCoefficient:a}},onSetTrimFrames:r,onSetScaleCoefficient:n}){const o=Object(m.useMemo)(()=>e?oe(e,[0,0]):new Float32Array,[e]),s=Object(m.useRef)(null),c=Object(m.useMemo)(()=>{const f=s.current&&s.current.offsetWidth;if(!f||!o.length)return{positive:new Float32Array,negative:new Float32Array};const y=Math.floor(be*o.length/f);return la(o,y)},[o]),l=Object(m.useMemo)(()=>{if(!e)return 0;const f=z(o,t);return We(f)},[e,o,t]),i=1/l;Object(m.useLayoutEffect)(()=>{a>i&&n(i)},[a,i,n]);const p=a*l;return d.a.createElement(d.a.Fragment,null,d.a.createElement(qe,{ref:s},[!0,!1].map(f=>{const y=f?"positive":"negative";return d.a.createElement(ea,{key:y,$positive:f},d.a.createElement(aa,{$scaleCoefficient:a,$positive:f},[].map.call(c[y],(b,u)=>d.a.createElement(ta,{key:u,$amplitude:b,$positive:f},d.a.createElement(ra,{$positive:f})))))}),d.a.createElement(na,{type:"range",disabled:l===0,value:p,min:.1,max:1,step:.01,onChange:f=>{l!==0&&n(Number(f.target.value)/l)}})),d.a.createElement("button",{type:"button",disabled:a===i,onClick:()=>n(i)},"Normalize"),d.a.createElement("button",{type:"button",disabled:a===1,onClick:()=>n(1)},"Original level"))}function ca(e){var t=e,{sample:a}=t,r=Qe(t,["sample"]);const[n,o]=Object(m.useState)(null);Object(m.useEffect)(()=>{let c=!1;return(()=>Ze(this,null,function*(){if(c)return;const l=yield X(a.metadata.sourceFileId,Boolean(a.metadata.userFileInfo));c||o([a.metadata.sourceFileId,l])}))(),()=>{c=!0}},[a.metadata.sourceFileId,a.metadata.userFileInfo]);const s=Object(m.useRef)(a);return n&&a.metadata.sourceFileId===n[0]&&(s.current=a),d.a.createElement(oa,Ye(Je({},r),{sample:s.current,sourceAudioBuffer:n&&n[1]}))}var da=ca,ia=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});let ve;function sa(){return ia(this,null,function*(){if(typeof window.CREATE_SYRO_BINDINGS!="function")return Promise.reject("Expected CREATE_SYRO_BINDINGS global function to exist");const e=yield window.CREATE_SYRO_BINDINGS();return ve=ve||new Promise((t,a)=>{let r;try{r={prepareSampleBufferFromWavData:e.cwrap("prepareSampleBufferFromWavData",null,["array","number","number","number","number"]),prepareSampleBufferFrom16BitPcmData(){throw new Error("This function does not work. Use prepareSampleBufferFromWavData.")},getSampleBufferPointer:e.cwrap("getSampleBufferPointer","number",["number"]),getSampleBufferSize:e.cwrap("getSampleBufferSize","number",["number"]),getSampleBufferProgress:e.cwrap("getSampleBufferProgress","number",["number"]),registerUpdateCallback(n){return e.addFunction(n,"vi")},unregisterUpdateCallback(n){e.removeFunction(n)},heap8Buffer(){return e.HEAP8.buffer}}}catch(n){a(n);return}t(r)})})}var ua=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});function ma(e,t){return ua(this,null,function*(){const{prepareSampleBufferFromWavData:a,getSampleBufferPointer:r,getSampleBufferSize:n,getSampleBufferProgress:o,registerUpdateCallback:s,unregisterUpdateCallback:c,heap8Buffer:l}=yield sa(),{data:i}=yield J(e);let p,f=0;const y=s(b=>{const u=r(b),h=n(b);p||(p=new Uint8Array(h)),p.set(new Uint8Array(l(),u,h)),f=o(b)/h});a(i,i.length,e.metadata.slotNumber,e.metadata.qualityBitDepth,e.metadata.useCompression?1:0,y),t(f);try{yield new Promise(b=>{u();function u(){if(f&&(t(f),f>=1)){b();return}requestAnimationFrame(u)}})}finally{c(y)}if(!p)throw new Error("Unexpected condition: sampleBuffer should be defined");return p})}var fa=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});function pa({sample:e}){const[t,a]=Object(m.useState)(0),[r,n]=Object(m.useState)("idle"),o=Object(m.useRef)(()=>{});Object(m.useEffect)(()=>()=>o.current(),[e]);const{playAudioBuffer:s,isAudioBusy:c}=ue();return d.a.createElement(d.a.Fragment,null,d.a.createElement("button",{type:"button",onClick:()=>fa(this,null,function*(){try{let l=!1;o.current=()=>{n("idle"),l=!0},a(0),n("loading");const i=yield ma(e,y=>{l||a(y)});if(l)return;n("transferring");const p=yield R(i);if(l)return;const f=s(p,{onTimeUpdate:y=>a(y/p.duration),onEnded:()=>n("idle")});o.current=()=>{f(),n("idle")}}catch(l){console.error(l),n("error")}}),disabled:c||r==="loading"||r==="transferring"},"transfer to volca sample"),d.a.createElement("br",null),r==="idle"?null:r==="error"?"Error transferring":d.a.createElement(d.a.Fragment,null,d.a.createElement("p",null,r==="loading"?"Preparing sample transfer...":"Transferring to Volca Sample..."),d.a.createElement("progress",{value:t}),d.a.createElement("br",null),d.a.createElement("button",{onClick:()=>o.current()},"Cancel")),d.a.createElement("br",null))}var ba=pa,Y=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});const va=F.a.div({paddingLeft:"2rem"}),ha=F.a.div({height:"200px",backgroundColor:"#f3f3f3",maxWidth:"400px"});function he(e,t){const a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download=t,r.style.display="none",document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(a)}function ya({sample:e,onSampleUpdate:t,onSampleDuplicate:a,onSampleDelete:r}){const[n,o]=Object(m.useState)(0),s=e&&e.metadata.sourceFileId;Object(m.useEffect)(()=>{o(0),s&&X(s,!1).then(b=>o(b.length))},[s]);const c=e&&e.id,l=Object(m.useCallback)(b=>c&&t(c,{scaleCoefficient:b}),[c,t]),{playAudioBuffer:i,isAudioBusy:p}=ue();if(!e)return null;const f=Math.max(0,n-e.metadata.trimFrames[1]),y=Math.max(0,n-e.metadata.trimFrames[0]);return d.a.createElement(va,null,d.a.createElement("h3",null,e.metadata.name),d.a.createElement("button",{type:"button",onClick:()=>a(e.id)},"Duplicate"),d.a.createElement("button",{type:"button",onClick:()=>{window.confirm(`Are you sure you want to delete ${e.metadata.name}?`)&&r(e.id)}},"Remove"),d.a.createElement("h4",null,"Last edited: ",new Date(e.metadata.dateModified).toLocaleString()),d.a.createElement("h4",null,"Sampled: ",new Date(e.metadata.dateSampled).toLocaleString()),d.a.createElement("label",null,d.a.createElement("h4",null,"Trim start"),d.a.createElement("input",{type:"number",value:e.metadata.trimFrames[0],step:1,min:0,max:f,onChange:b=>{if(n){const u=Number(b.target.value);t(e.id,{trimFrames:[Math.min(u,f),e.metadata.trimFrames[1]]})}else t(e.id,{trimFrames:[...e.metadata.trimFrames]})}})),d.a.createElement("label",null,d.a.createElement("h4",null,"Trim end"),d.a.createElement("input",{type:"number",value:e.metadata.trimFrames[1],step:1,min:0,max:y,onChange:b=>{if(n){const u=Number(b.target.value);t(e.id,{trimFrames:[e.metadata.trimFrames[0],Math.min(u,y)]})}else t(e.id,{trimFrames:[...e.metadata.trimFrames]})}})),d.a.createElement(ha,null,d.a.createElement(da,{onSetTrimFrames:()=>null,onSetScaleCoefficient:l,sample:e}),d.a.createElement("button",{type:"button",onClick:()=>Y(this,null,function*(){const{data:b}=yield J(e),u=yield R(b);i(u)}),disabled:p},"play"),d.a.createElement("button",{type:"button",onClick:()=>Y(this,null,function*(){const{data:b}=yield J(e),u=new Blob([b],{type:"audio/x-wav"});he(u,`${e.metadata.name}.wav`)})},"download"),d.a.createElement("button",{type:"button",onClick:()=>Y(this,null,function*(){const{sourceFileId:b,userFileInfo:u}=e.metadata,h=yield N.getSourceFileData(b),w=new Blob([h],{type:u?u.type:"audio/x-wav"});he(w,`${e.metadata.name}${u?u.ext:".wav"}`)})},"download (orig)")),d.a.createElement("h4",null,"Quality bit depth: ",e.metadata.qualityBitDepth),d.a.createElement("input",{type:"range",value:e.metadata.qualityBitDepth,step:1,min:8,max:16,onChange:b=>{const u=Number(b.target.value);t(e.id,{qualityBitDepth:u})}}),d.a.createElement("label",null,d.a.createElement("h4",null,"Slot number"),d.a.createElement("input",{type:"number",value:e.metadata.slotNumber,step:1,min:0,max:99,onChange:b=>{const u=Number(b.target.value);t(e.id,{slotNumber:u})}})),d.a.createElement(ba,{sample:e}))}var Sa=ya,wa=I(8),V=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});let ye;function Q(){return ye=ye||new AudioContext(navigator.mediaDevices.getSupportedConstraints().sampleRate?{sampleRate:B}:{})}function ga(){return V(this,null,function*(){const t=(yield navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="audioinput"),a=[];for(const r of t){const n=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:r.deviceId,channelCount:2},video:!1}),o=(yield navigator.mediaDevices.enumerateDevices()).find(({deviceId:c})=>r.deviceId===c).label,s=n.getAudioTracks().length;for(const c of n.getTracks())c.stop();a.push({device:{deviceId:r.deviceId,label:o},channelsAvailable:s})}return a})}let Z;function Fa(e){return V(this,arguments,function*({onData:t,onFinish:a}){const r=Q();Z=Z||r.audioWorklet.addModule("recorderWorkletProcessor.js"),yield Z;const n=new AudioWorkletNode(r,"recorder-worklet",{parameterData:{bufferSize:1024}});n.port.onmessage=s=>{if(s.data.eventType==="data"){const c=s.data.audioChannels;t(c)}s.data.eventType==="stop"&&a()};const o=n.parameters.get("isRecording");return o.setValueAtTime(1,r.currentTime),{recorderNode:n,stop(){o.setValueAtTime(0,r.currentTime)}}})}function Ia({channelCount:e,onData:t,onFinish:a}){const n=Q().createScriptProcessor(1024,e,e);let o=!1;return n.onaudioprocess=s=>{const c=Array(e).fill().map((l,i)=>s.inputBuffer.getChannelData(i));t(c),o&&a()},{recorderNode:n,stop(){o=!0}}}function Ca(e){return V(this,null,function*(){return typeof AudioWorkletNode=="undefined"?Ia(e):yield Fa(e)})}function Ea(e){return V(this,arguments,function*({deviceId:t,channelCount:a,onStart:r}){const n=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:t,channelCount:a,sampleRate:B,echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},video:!1}),o=Q(),s=o.createMediaStreamSource(n),{recorderNode:c,stop:l}=yield Ca({channelCount:a,onData:b,onFinish:S});s.connect(c),c.connect(o.destination),r();const p=10*o.sampleRate;let f=0;const y=Array(a).fill([]);function b(C){let g=0;for(let E=0;E<a;E++){const W=C[E],L=W.length,A=W.slice(0,Math.min(L,p-f));ce(A),g||(g=A.length),y[E].push(A)}f+=g,f>=p&&(S(),l())}let u,h;const w=new Promise((C,g)=>{u=C,h=g});let v=!1;function S(){if(v)return;try{const g=y.map(L=>{const A=new Float32Array(L.reduce((_,$a)=>_+$a.length,0));let Fe=0;for(const _ of L)A.set(_,Fe),Fe+=_.length;return A}),E=new wa.a;E.fromScratch(g.length,o.sampleRate,"32f",g);const W=E.toBuffer();u(W)}catch(g){h(g)}const C=n.getTracks();for(const g of C)g.stop();c.disconnect(o.destination),s.disconnect(c),v=!0}return{stop:l,mediaRecording:w}})}var Se=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,Oa=(e,t)=>{var a={};for(var r in e)Na.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&Se)for(var r of Se(e))t.indexOf(r)<0&&Pa.call(e,r)&&(a[r]=e[r]);return a},we=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});const Da=F.a.div({padding:"2rem"});let ge=null;function Aa({onRecordStart:e,onRecordFinish:t,onRecordError:a}){const[r,n]=Object(m.useState)(ge),[o,s]=Object(m.useState)(r?"ok":"pending"),[c,l]=Object(m.useState)("");Object(m.useEffect)(()=>{ge=r,s("ok")},[r]);const i=Object(m.useCallback)(()=>{ga().then(v=>{v.length&&(n(new Map(v.map(S=>[S.device.deviceId,S]))),l(S=>S||v[0].device.deviceId))}).catch(v=>{if(v instanceof DOMException){if(v.name==="NotAllowedError"){s("denied");return}if(v.name==="NotFoundError"){s("unavailable");return}}throw v})},[]);Object(m.useEffect)(i,[i]);const[p,f]=Object(m.useState)(1);Object(m.useEffect)(()=>{const v=r&&r.get(c);v&&f(v.channelsAvailable)},[r,c]);const[y,b]=Object(m.useState)(null);Object(m.useEffect)(()=>{y&&a(y)},[y,a]);const[u,h]=Object(m.useState)({fn:()=>{}}),w=Object(m.useCallback)(()=>we(this,null,function*(){const{mediaRecording:v,stop:S}=yield Ea({deviceId:c,channelCount:p,onStart:e});h({fn:S});let C;try{C=yield v}catch(g){b(g);return}t(C)}),[c,p,e,t]);return{captureDevices:r,accessState:o,selectedCaptureDeviceId:c,selectedChannelCount:p,recordingError:y,refreshCaptureDevices:i,setSelectedCaptureDeviceId:l,setSelectedChannelCount:f,beginRecording:w,stopRecording:u.fn}}function ka(e){var t=e,{captureState:a}=t,r=Oa(t,["captureState"]);const{captureDevices:n,accessState:o,selectedCaptureDeviceId:s,selectedChannelCount:c,recordingError:l,refreshCaptureDevices:i,setSelectedCaptureDeviceId:p,setSelectedChannelCount:f,beginRecording:y,stopRecording:b}=Aa(r);return d.a.createElement(Da,null,o==="denied"?d.a.createElement("p",null,"Looks like you didn't grant access to your audio input device. Please give Volca Sampler access, then"," ",d.a.createElement("button",{type:"button",onClick:i},"try again")):o==="unavailable"?d.a.createElement("p",null,"Volca Sampler couldn't find any audio input devices. Please connect one, then"," ",d.a.createElement("button",{type:"button",onClick:i},"try again")):d.a.createElement("div",null,d.a.createElement("label",null,"Capture Device",d.a.createElement("select",{value:s,onChange:u=>p(u.target.value)},n&&o==="ok"?[...n].map(([u,{device:h}])=>d.a.createElement("option",{key:u,value:u},h.label||u)):d.a.createElement("option",{value:"",disabled:!0},"Loading devices..."))),d.a.createElement("label",null,"Channel count",d.a.createElement("select",{value:c,onChange:u=>f(Number(u.target.value))},[1,2].map(u=>d.a.createElement("option",{key:u,value:u,disabled:!n||!n.has(s)||n.get(s).channelsAvailable<u},u))))),d.a.createElement("button",{type:"button",onClick:a==="capturing"?b:y,disabled:a==="preparing"},["capturing","preparing"].includes(a)?"Stop":"Record"),d.a.createElement("input",{type:"file",accept:"audio/*,.wav,.mp3,.ogg",onChange:u=>{if(u.target.files&&u.target.files.length){const h=u.target.files[0];h.arrayBuffer().then(w=>we(this,null,function*(){const v=new Uint8Array(w);let S;try{S=yield R(v)}catch(C){alert("Unsupported audio format detected");return}if(S.length>10*S.sampleRate){alert("Please select an audio file no more than 10 seconds long");return}r.onRecordFinish(v,h)}))}}}),a==="error"&&l||null)}var Ba=ka,xa=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});const Ha=F.a.h1({display:"flex",alignItems:"center",padding:"2rem",paddingBottom:"0px",marginBottom:"0px"}),Ma=F.a.span({color:"red"}),ja=F.a.span({textTransform:"uppercase",textDecoration:"underline"}),Ra=F.a.img({height:"1.6em",paddingLeft:"1rem"}),Ta=F.a.div({padding:"2rem",display:"flex",height:"100%"}),Va=F.a.div({width:"200px",flexShrink:0,paddingRight:"0.5rem",height:"100%"}),Wa=F.a.div({flexGrow:1});function La(){const[e,t]=Object(m.useState)(!1),[a,r]=Object(m.useState)(new Map),[n,o]=Object(m.useState)(null),[s,c]=Object(m.useState)(!0),[l,i]=Object(m.useState)("idle"),p=e?Ve:a;Object(m.useEffect)(()=>{N.getAllFromStorage().then(h=>{r(w=>new Map([...w,...h.map(v=>[v.id,v])]))}).finally(()=>{c(!1)})},[]),Object(m.useEffect)(()=>{p.size&&!(n&&p.has(n))&&o([...p.values()][0].id)},[p,n]);const f=Object(m.useCallback)(()=>i("capturing"),[]),y=Object(m.useCallback)((h,w)=>xa(this,null,function*(){i("preparing");const v=yield je(h);let S="",C="";if(w){const E=w.name.lastIndexOf(".");E>0?(S=w.name.slice(0,E),C=w.name.slice(E)):S=w.name}else S="New one";const g=new N.Mutable({name:S,sourceFileId:v,userFileInfo:w&&{type:w.type,ext:C}});yield g.persist(),r(E=>new Map([[g.id,g],...E])),t(!1),o(g.id),i("idle")}),[]),b=Object(m.useCallback)(h=>{console.error(h),i("error")},[]),u=Object(m.useCallback)((h,w)=>{r(v=>{const S=v.get(h);if(S&&S instanceof N.Mutable){const C=S.update(w);if(C!==S)return new Map(v).set(S.id,C)}return v})},[]);return d.a.createElement("div",null,d.a.createElement(Ha,null,d.a.createElement(Ma,null,"Volca Sample",d.a.createElement(ja,null,"r")),d.a.createElement(Ra,{src:"volca_sample.png",alt:""})),d.a.createElement(Ta,null,d.a.createElement("select",{value:JSON.stringify(e),onChange:h=>t(JSON.parse(h.target.value))},d.a.createElement("option",{value:"false"},"Your Samples"),d.a.createElement("option",{value:"true"},"Factory Samples")),d.a.createElement(Va,null,s?"Loading...":null,d.a.createElement(Oe,{samples:p,selectedSampleId:l==="idle"?n:null,readonly:["capturing","preparing"].includes(l),onNewSample:()=>i("ready"),onSampleSelect:h=>{o(h),i("idle")}})),d.a.createElement(Wa,null,l==="idle"&&d.a.createElement(Sa,{sample:n&&p.get(n)||null,onSampleUpdate:u,onSampleDuplicate:h=>{const w=p.get(h);if(w){const v=w.duplicate();r(S=>new Map([[v.id,v],...S])),t(!1),o(v.id)}},onSampleDelete:h=>{const w=p.get(h);w&&w instanceof N.Mutable&&(w.remove(),r(v=>{const S=new Map(v);return S.delete(w.id),S}))}}),l!=="idle"&&d.a.createElement(Ba,{captureState:l,onRecordStart:f,onRecordFinish:y,onRecordError:b}))))}var _a=La,Ka=e=>{e&&e instanceof Function&&I.e(3).then(I.bind(null,24)).then(({getCLS:t,getFID:a,getFCP:r,getLCP:n,getTTFB:o})=>{t(e),a(e),r(e),n(e),o(e)})};Ee.a.render(d.a.createElement(d.a.StrictMode,null,d.a.createElement(Ue,null,d.a.createElement(_a,null))),document.getElementById("root")),Ka()}},[[21,1,2]]]);

//# sourceMappingURL=main.3a6fdf08.chunk.js.map