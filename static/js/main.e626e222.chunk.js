(this["webpackJsonpvolca-sampler"]=this["webpackJsonpvolca-sampler"]||[]).push([[0],{22:function(W,V,w){W.exports={title:"Header_title__R3bRx",menuIcon:"Header_menuIcon__swn7p",titleText:"Header_titleText__3e5ME",titleR:"Header_titleR__3QRgv",titleStarburst:"Header_titleStarburst__1oLYP",titleGraphic:"Header_titleGraphic__3S89F"}},58:function(W,V,w){W.exports={recordButton:"SampleRecord_recordButton__3R-KX"}},65:function(W,V,w){},66:function(W,V,w){},77:function(W,V,w){"use strict";w.r(V);var f=w(0),c=w.n(f),Ye=w(13),Je=w.n(Ye),ba=w(65),Sa=w(66),z=w(15),_e=w(22),L=w.n(_e);function Ze({onMenuOpen:e,onHeaderClick:a}){return c.a.createElement("h1",{className:L.a.title,onClick:a},c.a.createElement("span",{className:L.a.menuIcon,onClick:t=>{t.stopPropagation(),e()}},"\u2630"),c.a.createElement("span",{className:L.a.titleText,"data-text":"Volca Sample"},"Volca Sample",c.a.createElement("span",{className:L.a.titleR},"r"),c.a.createElement("div",{className:L.a.titleStarburst},Array(24).fill().map((t,n,{length:o})=>c.a.createElement("span",{key:n,style:{"--rotation":`${n*360/o}deg`}})))),c.a.createElement("img",{className:L.a.titleGraphic,src:"volca_sample.png",alt:""}),c.a.createElement("svg",{width:0,height:0},c.a.createElement("filter",{id:"outline"},c.a.createElement("feMorphology",{in:"SourceAlpha",result:"DILATED",operator:"dilate",radius:"1"}),c.a.createElement("feFlood",{floodColor:"var(--stroke-color)",floodOpacity:"1",result:"PINK"}),c.a.createElement("feComposite",{in:"PINK",in2:"DILATED",operator:"in",result:"OUTLINE"}),c.a.createElement("feMerge",null,c.a.createElement("feMergeNode",{in:"OUTLINE"}),c.a.createElement("feMergeNode",{in:"SourceGraphic"})))))}var qe=Ze,G=w(89),et=w(41),he=w.n(et),tt=w(37),K=w.n(tt),ve=w(90),ye=w(53);const Q=31250;var at=Object.defineProperty,nt=Object.defineProperties,rt=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,ne=(e,a,t)=>a in e?at(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,x=(e,a)=>{for(var t in a||(a={}))ge.call(a,t)&&ne(e,t,a[t]);if(Y)for(var t of Y(a))be.call(a,t)&&ne(e,t,a[t]);return e},U=(e,a)=>nt(e,rt(a)),Se=(e,a)=>{var t={};for(var n in e)ge.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&Y)for(var n of Y(e))a.indexOf(n)<0&&be.call(e,n)&&(t[n]=e[n]);return t},J=(e,a,t)=>(ne(e,typeof a!="symbol"?a+"":a,t),t),I=(e,a,t)=>new Promise((n,o)=>{var l=r=>{try{i(t.next(r))}catch(u){o(u)}},s=r=>{try{i(t.throw(r))}catch(u){o(u)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,s);i((t=t.apply(e,a)).next())});const _=K.a.createInstance({name:"audio_file_data",driver:K.a.INDEXEDDB}),Z=K.a.createInstance({name:"sample_metadata",driver:K.a.INDEXEDDB});function ot(e){return I(this,null,function*(){const a=Object(ve.a)();return yield _.setItem(a,e),a})}const re="0.3.0",lt={"0.1.0":e=>{const a=e,{clip:t}=a,n=Se(a,["clip"]);return U(x({},n),{trimFrames:t.map(l=>Math.round(l*Q)),metadataVersion:"0.2.0"})},"0.2.0":e=>I(void 0,null,function*(){const a=e,{trimFrames:t}=a,n=Se(a,["trimFrames"]),o=yield xe(n.sourceFileId,t),l={frames:t,waveformPeaks:o};return U(x({},n),{trim:l,metadataVersion:"0.3.0"})})};function ct(e){return I(this,null,function*(){let a=e;for(;a.metadataVersion!==re;){const t=lt[e.metadataVersion];if(!t){console.warn(`Failed to properly upgrade metadata for sample "${a.name}"`),a={name:a.name,sourceFileId:a.sourceFileId,id:a.id,metadataVersion:re};break}a=yield t(a)}return a})}const N=class{constructor({name:e,sourceFileId:a,trim:t,id:n=Object(ve.a)(),userFileInfo:o=null,slotNumber:l=0,dateSampled:s=Date.now(),dateModified:i=s,useCompression:r=!0,qualityBitDepth:u=16,scaleCoefficient:C=1}){this.id=n,this.metadata={name:e,sourceFileId:a,trim:t,userFileInfo:o,slotNumber:l,dateSampled:s,dateModified:i,useCompression:r,qualityBitDepth:u,scaleCoefficient:C,metadataVersion:re}}duplicate(){const e=new N.Mutable(U(x({},this.metadata),{name:`${this.metadata.name} (copy)`,dateModified:Date.now()}));return e.persist(),e}static cacheSourceFileData(e,a){this.sourceFileData.set(e,a),this.recentlyCachedSourceFileIds=[e,...this.recentlyCachedSourceFileIds.filter(n=>n!==e)];const t=this.recentlyCachedSourceFileIds.slice(this.MAX_CACHED);for(const n of t)this.sourceFileData.delete(n);this.recentlyCachedSourceFileIds=this.recentlyCachedSourceFileIds.slice(0,this.MAX_CACHED)}static getSourceFileData(e){return I(this,null,function*(){{const t=this.sourceFileData.get(e);if(t)return t}if(e.includes(".")){const t=yield fetch(e);if(t.status>=400)return Promise.reject(new Error(`Failed to fetch source file "${e}"`));const n=yield t.arrayBuffer(),o=new Uint8Array(n);return this.cacheSourceFileData(e,o),o}const a=yield _.getItem(e);return a?a instanceof Uint8Array?(this.cacheSourceFileData(e,a),a):Promise.reject("Source data is of unexpected type"):Promise.reject("Missing source data")})}static getAllMetadataFromStore(){return I(this,null,function*(){const e=new Map,a=[];return yield Z.iterate((t,n)=>{t&&a.push(ct(t).then(o=>{e.set(n,o)}).catch(o=>{console.error(o),console.warn(`Failed to upgrade metadata "${n}" (${t.name}); ignoring.`)}))}),yield Promise.all(a),e})}static getAllFromStorage(){return I(this,null,function*(){const e=yield this.getAllMetadataFromStore(),a=yield we(),t=(yield _.keys()).concat(a.map(({sourceFileId:o})=>o));return[...e].map(([o,l])=>{const{sourceFileId:s}=l;return t.includes(s)?new N.Mutable(x({id:o},l)):(console.warn(`Found metadata "${l.name||o}" with missing data "${s}; ignoring.`),null)}).filter(Boolean).sort((o,l)=>l.metadata.dateModified-o.metadata.dateModified)})}};let j=N;J(j,"Mutable",class extends N{constructor(e){super(e);setTimeout(()=>I(this,null,function*(){(yield Z.keys()).includes(this.id)||console.warn(`Expected sample metadata container ${this.id} to be persisted`)}))}persist(){return I(this,null,function*(){yield Z.setItem(this.id,this.metadata)})}update(e){const{id:a,metadata:t}=this,n=typeof e=="function"?e(t):e;if(Object.keys(n).every(s=>n[s]===t[s]))return this;const o=U(x(x({},t),n),{dateModified:Date.now()}),l=new N.Mutable(x({id:a},o));return l.persist(),l}remove(){return I(this,null,function*(){if(yield Z.removeItem(this.id),this.metadata.sourceFileId.includes("."))return;const e=yield N.getAllMetadataFromStore();for(const[,{sourceFileId:a}]of e)if(a===this.metadata.sourceFileId)return;yield _.removeItem(this.metadata.sourceFileId)})}}),J(j,"sourceFileData",new Map),J(j,"recentlyCachedSourceFileIds",[]),J(j,"MAX_CACHED",10);let oe;function we(){return oe||(oe=fetch("factory-samples.json").then(e=>e.json())),oe}function it(){return I(this,null,function*(){const e=yield we();return new Map(e.map(a=>[a.id,new j(U(x({},a),{trim:{frames:[a.trim.frames[0],a.trim.frames[1]],waveformPeaks:{positive:new Float32Array(Object(ye.a)(a.trim.waveformPeaks.positive)),negative:new Float32Array(Object(ye.a)(a.trim.waveformPeaks.negative))}}}))]))})}var Ee=Math.pow,le=(e,a,t)=>new Promise((n,o)=>{var l=r=>{try{i(t.next(r))}catch(u){o(u)}},s=r=>{try{i(t.throw(r))}catch(u){o(u)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,s);i((t=t.apply(e,a)).next())});function ce(e,a){const t=4,n=a[0]*t,o=e.length-a[0]-a[1];return new Float32Array(e.buffer,n,o)}function ie(e,a){const t=e.length-a[0]-a[1],n=new Float32Array(t),o=Array(e.numberOfChannels).fill().map((l,s)=>ce(e.getChannelData(s),a));for(let l=0;l<t;l++){let s=0;for(let i=0;i<o.length;i++)s+=o[i][l];s/=o.length,n[l]=s}return n}function Ce(e){let a=0;for(const t of e){const n=Math.abs(t);n>a&&(a=n)}return a}function st(e,a){if(a!==1)for(let t=0;t<e.length;t++)e[t]*=a}function ut(e,a){const t=Ee(2,a-1);for(let n=0;n<e.length;n++)e[n]=Math.round(e[n]*t)/t}function Oe(e){for(let a=0;a<e.length;a++)e[a]>1?e[a]=1:e[a]<-1&&(e[a]=-1)}function dt(e){const a=e.length,t=e[0].length,n=new Float32Array(a*t);for(let o=0;o<n.length;o++){const l=a*o;for(let s=0;s<a;s++)n[l+s]=e[s][o]}return n}function Pe(e,a){const t=a===16?Int16Array:Int32Array,n=new t(e.length),o=Ee(2,a-1);for(let l=0;l<e.length;l++)n[l]=e[l]===1?o-1:o*e[l];return n}function Ae(){return window.AudioContext||window.webkitAudioContext}let De;function Be(){const e=Ae();return De=De||new e({sampleRate:Q})}function q(e){return le(this,null,function*(){const a=new Uint8Array(e);return yield new Promise((n,o)=>{Be().decodeAudioData(a.buffer,n,o)})})}function se(e,a){return le(this,null,function*(){const t=yield j.getSourceFileData(e),n=yield q(t);if(a)for(let o=0;o<n.numberOfChannels;o++)Oe(n.getChannelData(o));return n})}function Me(e){return le(this,null,function*(){const{qualityBitDepth:a,sourceFileId:t,userFileInfo:n,scaleCoefficient:o,trim:{frames:l}}=e.metadata;if(a<8||a>16||!Number.isInteger(a))throw new Error(`Expected bit depth between 8 and 16. Received: ${a}`);const s=yield se(t,Boolean(n)),i=s.numberOfChannels===1?ce(s.getChannelData(0),l):ie(s,l);o!==1&&st(i,o),a<16&&ut(i,a);const r=Pe(i,16),u=r.length*2,C=he()({channels:1,sampleRate:s.sampleRate,bitDepth:16,dataLength:u}),b=new Uint8Array(C.length+u);return b.set(C),b.set(new Uint8Array(r.buffer),C.length),{data:b,sampleRate:16}})}const ft={playAudioBuffer(e,a){throw new Error("Must render AudioPlaybackContextProvider")},isAudioBusy:!1},ke=Object(f.createContext)(ft);function mt({children:e}){const[a,t]=Object(f.useState)(!1),n=Object(f.useCallback)((l,{onTimeUpdate:s=()=>null,onEnded:i=()=>null}={})=>{if(a)throw new Error("Wait until audio playback has finished to start new playback");t(!0);let r,u;try{r=Be(),u=r.createBufferSource(),u.buffer=l,u.connect(r.destination),u.start()}catch(y){throw t(!1),y}const C=r.currentTime;s(0);let b=requestAnimationFrame(S);function S(){s(r.currentTime-C),b=requestAnimationFrame(S)}let v=!1;return u.addEventListener("ended",()=>{v||(s(l.duration),i()),t(!1),cancelAnimationFrame(b)}),function(){u.stop(),v=!0}},[a]),o=Object(f.useMemo)(()=>({playAudioBuffer:n,isAudioBusy:a}),[n,a]);return Object(f.createElement)(ke.Provider,{value:o},e)}function je(){return Object(f.useContext)(ke)}var pt=(e,a,t)=>new Promise((n,o)=>{var l=r=>{try{i(t.next(r))}catch(u){o(u)}},s=r=>{try{i(t.throw(r))}catch(u){o(u)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,s);i((t=t.apply(e,a)).next())});const H=6,Ie=H*44;function Re(e,a){const t=Math.floor(H*e.length/a),n=new Float32Array(Math.floor(e.length/t)),o=new Float32Array(Math.floor(e.length/t));for(let l=0;l<n.length;l++){const s=new Float32Array(e.buffer,l*t*4,t);let i=0,r=0;for(const u of s)u>i&&(i=u),u<r&&(r=u);n[l]=Math.min(1,i),o[l]=Math.max(-1,r)}return{positive:n,negative:o}}function xe(e,a){return pt(this,null,function*(){const t=yield se(e,!1),n=ie(t,a);return Re(n,Ie)})}var ht=w(54);const vt=z.a.canvas({width:"100%",height:"100%",display:"block",imageRendering:"pixelated"});function yt(e,a){function t(o,l){e.width=o,e.height=l}t(e.offsetWidth,e.offsetHeight),a({width:e.offsetWidth,height:e.offsetHeight});const n=new ht.a(([o])=>{const{width:l,height:s}=o.contentRect;t(l,s),a({width:l,height:s})});return n.observe(e),()=>n.disconnect()}function gt(e,a,t){const n=getComputedStyle(document.documentElement),o=n.getPropertyValue("--bs-primary"),l=n.getPropertyValue("--bs-primary-darkened"),s=e.getContext("2d");s.imageSmoothingEnabled=!1;const{width:i,height:r}=e;s.clearRect(0,0,i,r);const u=Math.floor(r*(2/3))+1;s.fillStyle=o,a.positive.forEach((b,S)=>{const v=u*b,y=Math.max(Math.round(t*v),1);s.fillRect(S*H,u-y,H-1,y)});const C=r-u;s.fillStyle=l,a.negative.forEach((b,S)=>{const v=C*b*-1,y=Math.round(t*v);s.fillRect(S*H,u,H-1,y)})}function bt({peaks:e,scaleCoefficient:a,waveformRef:t}){const n=Object(f.useRef)(null);Object(f.useImperativeHandle)(t,()=>n.current);const[o,l]=Object(f.useState)(Symbol()),s=Object(f.useRef)({width:0,height:0});return Object(f.useLayoutEffect)(()=>{if(!n.current)throw new Error("Canvas should be defined");return s.current.width=n.current.offsetWidth,s.current.height=n.current.offsetHeight,yt(n.current,({width:i,height:r})=>{(i!==s.current.width||r!==s.current.height)&&(l(Symbol()),s.current.width=i,s.current.height=r)})},[]),Object(f.useLayoutEffect)(()=>{const i=n.current;if(!i)throw new Error("Canvas should be defined");let r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{gt(i,e,a)})});return()=>cancelAnimationFrame(r)},[e,a,o]),c.a.createElement(vt,{ref:n})}var Fe=bt;const St=z.a.div({width:`${Ie}px`,height:"40px"}),Te=typeof IntersectionObserver!="undefined",wt=c.a.memo(({sample:e,selected:a,onSampleSelect:t})=>{const n=Object(f.useRef)(null),[o,l]=Object(f.useState)(!Te);return Object(f.useLayoutEffect)(()=>{if(!Te)return;const s=n.current;if(!s)throw new Error("Waveform container should be defined");const i=s.getBoundingClientRect();if(i.top+i.height>=0&&i.bottom-i.height<=window.innerHeight){l(!0);return}const r=new IntersectionObserver(([u])=>{u.isIntersecting&&(l(!0),r.unobserve(s))});return r.observe(s),()=>r.disconnect()},[]),c.a.createElement(G.a.Item,{active:a,onClick:()=>t(e.id)},c.a.createElement("div",null,e.metadata.name),c.a.createElement(St,{ref:n},o&&c.a.createElement(Fe,{peaks:e.metadata.trim.waveformPeaks,scaleCoefficient:e.metadata.scaleCoefficient})))});function Et({samples:e,selectedSampleId:a,onSampleSelect:t}){return c.a.createElement(G.a,{variant:"flush"},[...e].map(([n,o])=>c.a.createElement(wt,{key:n,sample:o,selected:n===a,onSampleSelect:t})))}var We=Et,M=w(55),Ct=Object.defineProperty,Ot=Object.defineProperties,Pt=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,He=(e,a,t)=>a in e?Ct(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,At=(e,a)=>{for(var t in a||(a={}))Le.call(a,t)&&He(e,t,a[t]);if(ee)for(var t of ee(a))Ne.call(a,t)&&He(e,t,a[t]);return e},Dt=(e,a)=>Ot(e,Pt(a)),Bt=(e,a)=>{var t={};for(var n in e)Le.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&ee)for(var n of ee(e))a.indexOf(n)<0&&Ne.call(e,n)&&(t[n]=e[n]);return t},Mt=(e,a,t)=>new Promise((n,o)=>{var l=r=>{try{i(t.next(r))}catch(u){o(u)}},s=r=>{try{i(t.throw(r))}catch(u){o(u)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,s);i((t=t.apply(e,a)).next())});function kt({sourceAudioBuffer:e,sample:{metadata:{trim:{frames:a},scaleCoefficient:t}},onSetTrimFrames:n,onSetScaleCoefficient:o}){const l=Object(f.useMemo)(()=>e?ie(e,[0,0]):new Float32Array,[e]),[s,i]=Object(f.useState)(null),r=Object(f.useMemo)(()=>s&&s.offsetWidth,[s]),u=Object(f.useMemo)(()=>!r||!l.length?{positive:new Float32Array,negative:new Float32Array}:Re(l,r),[r,l]),C=Object(f.useMemo)(()=>{if(!e)return 0;const m=ce(l,a);return Ce(m)},[e,l,a]),b=1/C;Object(f.useLayoutEffect)(()=>{t>b&&o(b)},[t,b,o]);const S=Object(f.useMemo)(()=>{if(!l.length||!r)return[0,0];const m=r/l.length;return a.map(p=>p*m)},[r,l.length,a]),v=Object(f.useRef)(null),y=Object(f.useRef)(null);return Object(f.useEffect)(()=>{function m(h){if(v.current===null||!r||!l.length)return;const{pageX:E}=h,A=E-v.current;if(A){const P=A/r,d=Math.round(l.length*P);n(g=>{let O=g[0]+d;return O=Math.min(O,l.length-g[1]-2e3),O=Math.max(O,0),[O,g[1]]}),v.current=E}}function p(){v.current=null,document.body.style.userSelect="unset"}return window.addEventListener("mousemove",m),window.addEventListener("mouseup",p),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",p)}},[r,l.length,n]),Object(f.useEffect)(()=>{function m(h){if(y.current===null||!r||!l.length)return;const{pageX:E}=h,A=y.current-E;if(A){const P=A/r,d=Math.round(l.length*P);n(g=>{let O=g[1]+d;return O=Math.min(O,l.length-g[0]-2e3),O=Math.max(O,0),[g[0],O]}),y.current=E}}function p(){y.current=null,document.body.style.userSelect="unset"}return window.addEventListener("mousemove",m),window.addEventListener("mouseup",p),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",p)}},[r,l.length,n]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("div",{style:{position:"absolute",right:0,bottom:4}},c.a.createElement(M.a,{type:"button",variant:"light",disabled:t===b,onClick:()=>o(b)},"Normalize")," ",c.a.createElement(M.a,{type:"button",variant:"light",disabled:t===1,onClick:()=>o(1)},"Original level"))),c.a.createElement("div",{style:{position:"relative",backgroundColor:"#f3f3f3"}},c.a.createElement(Fe,{waveformRef:i,peaks:u,scaleCoefficient:t}),c.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:`calc(100% - ${S[0]}px)`,background:"#f3f3f3"}},c.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,right:0,width:2,background:"var(--bs-dark)"}}),c.a.createElement("div",{style:{position:"absolute",top:"100%",right:0,width:20,height:20,background:"var(--bs-dark)",borderRadius:10,transform:"translateX(50%)"},onTouchStart:m=>{m.preventDefault(),document.body.style.userSelect="none",v.current=m.touches[0].pageX},onMouseDown:m=>{document.body.style.userSelect="none",v.current=m.pageX},onTouchMove:m=>{if(m.preventDefault(),v.current===null||!r||!l.length)return;const{pageX:p}=m.touches[0],h=p-v.current;if(h){const E=h/r,A=Math.round(l.length*E);n(P=>{let d=P[0]+A;return d=Math.min(d,l.length-P[1]-2e3),d=Math.max(d,0),[d,P[1]]}),v.current=p}},onTouchEnd:()=>{v.current=null},onTouchCancel:()=>{v.current=null}})),c.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,right:0,left:`calc(100% - ${S[1]}px)`,background:"#f3f3f3"}},c.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,left:0,width:2,background:"var(--bs-dark)"}}),c.a.createElement("div",{style:{position:"absolute",top:"100%",left:0,width:20,height:20,background:"var(--bs-dark)",borderRadius:10,transform:"translateX(-50%)"},onTouchStart:m=>{m.preventDefault(),document.body.style.userSelect="none",y.current=m.touches[0].pageX},onMouseDown:m=>{document.body.style.userSelect="none",y.current=m.pageX},onTouchMove:m=>{if(m.preventDefault(),y.current===null||!r||!l.length)return;const{pageX:p}=m.touches[0],h=y.current-p;if(h){const E=h/r,A=Math.round(l.length*E);n(P=>{let d=P[1]+A;return d=Math.min(d,l.length-P[0]-2e3),d=Math.max(d,0),[P[0],d]}),y.current=p}},onTouchEnd:()=>{y.current=null},onTouchCancel:()=>{y.current=null}}))))}function jt(e){var a=e,{sample:t}=a,n=Bt(a,["sample"]);const[o,l]=Object(f.useState)(null);Object(f.useEffect)(()=>{let i=!1;return(()=>Mt(this,null,function*(){if(i)return;const r=yield se(t.metadata.sourceFileId,Boolean(t.metadata.userFileInfo));i||l([t.metadata.sourceFileId,r])}))(),()=>{i=!0}},[t.metadata.sourceFileId,t.metadata.userFileInfo]);const s=Object(f.useRef)(t);return o&&t.metadata.sourceFileId===o[0]&&(s.current=t),c.a.createElement(kt,Dt(At({},n),{sample:s.current,sourceAudioBuffer:o&&o[1]}))}var It=jt,Rt=w(91),xt=(e,a,t)=>new Promise((n,o)=>{var l=r=>{try{i(t.next(r))}catch(u){o(u)}},s=r=>{try{i(t.throw(r))}catch(u){o(u)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,s);i((t=t.apply(e,a)).next())});let Ve;function Ft(){return xt(this,null,function*(){if(typeof window.CREATE_SYRO_BINDINGS!="function")return Promise.reject("Expected CREATE_SYRO_BINDINGS global function to exist");const e=yield window.CREATE_SYRO_BINDINGS();return Ve=Ve||new Promise((a,t)=>{let n;try{n={prepareSampleBufferFromWavData:e.cwrap("prepareSampleBufferFromWavData","number",["array","number","number","number","number"]),prepareSampleBufferFrom16BitPcmData(){throw new Error("This function does not work. Use prepareSampleBufferFromWavData.")},getSampleBufferChunkPointer:e.cwrap("getSampleBufferChunkPointer","number",["number"]),getSampleBufferChunkSize:e.cwrap("getSampleBufferChunkSize","number",["number"]),getSampleBufferProgress:e.cwrap("getSampleBufferProgress","number",["number"]),getSampleBufferTotalSize:e.cwrap("getSampleBufferTotalSize","number",["number"]),cancelSampleBufferWork:e.cwrap("cancelSampleBufferWork",null,["number"]),registerUpdateCallback(o){return e.addFunction(o,"vi")},unregisterUpdateCallback(o){e.removeFunction(o)},heap8Buffer(){return e.HEAP8.buffer}}}catch(o){t(o);return}a(n)})})}var Tt=(e,a,t)=>new Promise((n,o)=>{var l=r=>{try{i(t.next(r))}catch(u){o(u)}},s=r=>{try{i(t.throw(r))}catch(u){o(u)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,s);i((t=t.apply(e,a)).next())});function Wt(e,a){let t=!1,n=()=>{};return{cancelWork(){t=!0,n()},sampleBufferPromise:(()=>Tt(this,null,function*(){const{prepareSampleBufferFromWavData:o,getSampleBufferChunkPointer:l,getSampleBufferChunkSize:s,getSampleBufferProgress:i,getSampleBufferTotalSize:r,cancelSampleBufferWork:u,registerUpdateCallback:C,unregisterUpdateCallback:b,heap8Buffer:S}=yield Ft();if(t)return new Uint8Array;const{data:v}=yield Me(e);if(t)return new Uint8Array;let y,m=0;const p=C(E=>{if(t)return;const A=r(E);y||(y=new Uint8Array(A));const P=l(E),d=s(E),g=i(E);y.set(new Uint8Array(S(),P,d),g-d),m=g/A}),h=o(v,v.length,e.metadata.slotNumber,e.metadata.qualityBitDepth,e.metadata.useCompression?1:0,p);a(m);try{yield new Promise(E=>{let A;n=()=>{cancelAnimationFrame(A),u(h),E()},P();function P(){if(m&&(a(m),m>=1)){E();return}A=requestAnimationFrame(P)}})}finally{n=()=>{},b(p)}if(t)return new Uint8Array;if(!y)throw new Error("Unexpected condition: sampleBuffer should be defined");return y}))()}}var Lt=(e,a,t)=>new Promise((n,o)=>{var l=r=>{try{i(t.next(r))}catch(u){o(u)}},s=r=>{try{i(t.throw(r))}catch(u){o(u)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,s);i((t=t.apply(e,a)).next())});function Nt({sample:e}){const[a,t]=Object(f.useState)(0),[n,o]=Object(f.useState)("idle"),[l,s]=Object(f.useState)(null),[i,r]=Object(f.useState)(null);Object(f.useEffect)(()=>{l instanceof AudioBuffer&&i&&(r(null),i.fn())},[l,i]);const u=Object(f.useRef)(()=>{});Object(f.useEffect)(()=>{let S=!1;t(0),o("idle"),s(null),r(null),u.current=()=>{S=!0};try{const{sampleBufferPromise:v,cancelWork:y}=Wt(e,m=>{S||t(m)});u.current=()=>{y(),S=!0},v.then(m=>Lt(this,null,function*(){if(S)return;u.current=()=>{S=!0};const p=yield q(m);S||s(p)}))}catch(v){console.error(v),s(new Error(String(v)))}return()=>u.current()},[e]);const{playAudioBuffer:C,isAudioBusy:b}=je();return c.a.createElement(c.a.Fragment,null,c.a.createElement(M.a,{type:"button",variant:"primary",onClick:S=>{if(!(l instanceof AudioBuffer)){if(!l){const v=S.currentTarget;r({fn:()=>v.click()})}return}try{o("transferring");const v=C(l,{onTimeUpdate:y=>t(y/l.duration),onEnded:()=>o("idle")});u.current=()=>{v(),o("idle")}}catch(v){console.error(v),o("error")}},disabled:b||l instanceof Error||n==="transferring"},"Transfer to volca sample"),c.a.createElement("br",null),l&&n==="idle"?null:n==="error"?"Error transferring":c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,l?l instanceof AudioBuffer?"Transferring to Volca Sample...":"Error preparing sample for transfer":"Preparing sample for transfer..."),c.a.createElement(Rt.a,{now:100*a}),c.a.createElement("br",null),c.a.createElement(M.a,{type:"button",variant:"light",onClick:()=>u.current()},"Cancel")),c.a.createElement("br",null))}var Ht=Nt,Vt=w(84),zt=w(85),te=w(59),k=w(87),Ut=Object.defineProperty,Xt=Object.defineProperties,$t=Object.getOwnPropertyDescriptors,ze=Object.getOwnPropertySymbols,Gt=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable,Ue=(e,a,t)=>a in e?Ut(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,Xe=(e,a)=>{for(var t in a||(a={}))Gt.call(a,t)&&Ue(e,t,a[t]);if(ze)for(var t of ze(a))Kt.call(a,t)&&Ue(e,t,a[t]);return e},$e=(e,a)=>Xt(e,$t(a)),Qt=(e,a,t)=>new Promise((n,o)=>{var l=r=>{try{i(t.next(r))}catch(u){o(u)}},s=r=>{try{i(t.throw(r))}catch(u){o(u)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,s);i((t=t.apply(e,a)).next())});const Yt=z.a.div({height:"200px",maxWidth:"400px"});function Jt(e,a){const t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=a,n.style.display="none",document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(t)}function _t({sample:e,onSampleUpdate:a,onSampleDuplicate:t,onSampleDelete:n}){const o=e&&e.id,l=Object(f.useCallback)(p=>o&&a(o,{scaleCoefficient:p}),[o,a]),s=Object(f.useCallback)(p=>o&&a(o,h=>$e(Xe({},h),{trim:$e(Xe({},h.trim),{frames:p(h.trim.frames)})})),[o,a]),[i,r]=Object(f.useState)(null),[u,C]=Object(f.useState)(null),[b,S]=Object(f.useState)(null);Object(f.useEffect)(()=>{u instanceof AudioBuffer&&b&&(S(null),b.fn())},[u,b]),Object(f.useEffect)(()=>{if(r(null),S(null),e){let p=!1;Me(e).then(({data:h})=>{p||r(h)})}},[e]),Object(f.useEffect)(()=>{if(C(null),i){let p=!1;q(i).then(h=>{p||C(h)})}},[i]);const{playAudioBuffer:v,isAudioBusy:y}=je(),m=Object(f.useRef)(()=>{});return Object(f.useEffect)(()=>()=>m.current(),[e]),e?c.a.createElement(Vt.a,{fluid:"sm"},c.a.createElement("h2",null,e.metadata.name,c.a.createElement(zt.a,{style:{display:"inline-block",float:"right"},variant:"light",align:"end",title:"options"},c.a.createElement(te.a.Item,{onClick:()=>{const p=prompt(`Choose a new name for the sample "${e.metadata.name}":`,e.metadata.name),h=p&&p.trim();h&&a(e.id,{name:h})}},"Rename"),c.a.createElement(te.a.Item,{onClick:()=>t(e.id)},"Duplicate"),c.a.createElement(te.a.Divider,null),c.a.createElement(te.a.Item,{onClick:()=>{window.confirm(`Are you sure you want to delete ${e.metadata.name}?`)&&n(e.id)}},"Delete"))),c.a.createElement("p",null,c.a.createElement("strong",null,"Sampled:")," ",new Date(e.metadata.dateSampled).toLocaleString(),c.a.createElement("br",null),c.a.createElement("strong",null,"Updated:")," ",new Date(e.metadata.dateModified).toLocaleString()),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(Yt,null,c.a.createElement(It,{onSetTrimFrames:s,onSetScaleCoefficient:l,sample:e})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(M.a,{type:"button",variant:"secondary",size:"sm",onClick:p=>{if(u)m.current=v(u);else{const h=p.currentTarget;S({fn:()=>h.click()})}},disabled:y},"Play audio preview")," ",c.a.createElement(M.a,{type:"button",variant:"secondary",size:"sm",onClick:()=>Qt(this,null,function*(){const{sourceFileId:p,userFileInfo:h}=e.metadata,E=yield j.getSourceFileData(p),A=new Blob([E],{type:h?h.type:"audio/x-wav"});Jt(A,`${e.metadata.name}${h?h.ext:".wav"}`)})},"Download original file"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(k.a.Group,null,c.a.createElement(k.a.Label,null,"Quality bit depth (",e.metadata.qualityBitDepth,")"),c.a.createElement(k.a.Range,{value:e.metadata.qualityBitDepth,step:1,min:8,max:16,onChange:p=>{const h=Number(p.target.value);a(e.id,{qualityBitDepth:h})}})),c.a.createElement(k.a.Group,null,c.a.createElement(k.a.Label,null,"Slot number"),c.a.createElement(k.a.Control,{type:"number",value:e.metadata.slotNumber,step:1,min:0,max:99,onChange:p=>{const h=Number(p.target.value);a(e.id,{slotNumber:h})}})),c.a.createElement("br",null),c.a.createElement(Ht,{sample:e})):null}var Zt=_t,qt=w(60),X=(e,a,t)=>new Promise((n,o)=>{var l=r=>{try{i(t.next(r))}catch(u){o(u)}},s=r=>{try{i(t.throw(r))}catch(u){o(u)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,s);i((t=t.apply(e,a)).next())});let Ge;function ue(){const e=Ae();return Ge=Ge||new e(navigator.mediaDevices.getSupportedConstraints().sampleRate?{sampleRate:Q}:{})}function ea(){return X(this,null,function*(){{const n=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!1});for(const o of n.getTracks())o.stop()}const a=(yield navigator.mediaDevices.enumerateDevices()).filter(n=>n.kind==="audioinput"),t=[];for(const n of a){const o=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:n.deviceId,channelCount:2},video:!1}),l=(yield navigator.mediaDevices.enumerateDevices()).find(({deviceId:i})=>n.deviceId===i).label;let s=1;{const i=o.getAudioTracks()[0],r=i.getSettings().channelCount;r?s=r:i.getCapabilities&&(s=(i.getCapabilities().channelCount||{}).max||s)}for(const i of o.getTracks())i.stop();t.push({device:{deviceId:n.deviceId,label:l},channelsAvailable:s})}return t})}let de;function ta(e){return X(this,arguments,function*({onData:a,onFinish:t}){const n=ue();de=de||n.audioWorklet.addModule("recorderWorkletProcessor.js"),yield de;const o=new AudioWorkletNode(n,"recorder-worklet",{parameterData:{bufferSize:1024}});o.port.onmessage=s=>{if(s.data.eventType==="data"){const i=s.data.audioChannels;a(i)}s.data.eventType==="stop"&&t()};const l=o.parameters.get("isRecording");return l.setValueAtTime(1,n.currentTime),{recorderNode:o,stop(){l.setValueAtTime(0,n.currentTime)}}})}function aa({channelCount:e,onData:a,onFinish:t}){const o=ue().createScriptProcessor(1024,e,e);let l=!1;return o.onaudioprocess=s=>{const i=Array(e).fill().map((r,u)=>s.inputBuffer.getChannelData(u));a(i),l&&t()},{recorderNode:o,stop(){l=!0}}}function na(e){return X(this,null,function*(){return typeof AudioWorkletNode=="undefined"?aa(e):yield ta(e)})}function ra(e){return X(this,arguments,function*({deviceId:a,channelCount:t,onStart:n,onUpdate:o}){const l=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:a,channelCount:t,sampleRate:Q,echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},video:!1}),s=ue(),i=s.createMediaStreamSource(l),{recorderNode:r,stop:u}=yield na({channelCount:t,onData:y,onFinish:A});i.connect(r),r.connect(s.destination);const b=10*s.sampleRate;n(b);let S=0;const v=Array(t).fill([]);function y(P){let d=0;const g=[];for(let B=0;B<t;B++){const F=P[B],$=F.length,R=F.slice(0,Math.min($,b-S));Oe(R),d||(d=R.length),g.push(R)}const O=dt(g),D=Pe(O,32);v.push(D),S+=d,S>=b&&u(),o(g)}let m,p;const h=new Promise((P,d)=>{m=P,p=d});let E=!1;function A(){return X(this,null,function*(){if(E)return;try{const g=yield new Blob(v).arrayBuffer(),O=he()({channels:t,sampleRate:s.sampleRate,bitDepth:32,dataLength:g.byteLength}),D=new Uint8Array(O.length+g.byteLength);D.set(O),D.set(new Uint8Array(g),O.length),m(D)}catch(d){p(d)}const P=l.getTracks();for(const d of P)d.stop();r.disconnect(s.destination),i.disconnect(r),E=!0})}return{stop:u,mediaRecording:h}})}var oa=w(58),la=w.n(oa),ae=(e,a,t)=>new Promise((n,o)=>{var l=r=>{try{i(t.next(r))}catch(u){o(u)}},s=r=>{try{i(t.throw(r))}catch(u){o(u)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,s);i((t=t.apply(e,a)).next())});const Ke="capture_device_preference";let Qe=null;function ca(e,a){const t=Object(f.useRef)(JSON.parse(localStorage.getItem(Ke)||"null")),[n,o]=Object(f.useState)(Qe),[l,s]=Object(f.useState)(n?"ok":"pending"),[i,r]=Object(f.useState)("");Object(f.useEffect)(()=>{Qe=n,s("ok")},[n]);const u=Object(f.useCallback)(()=>{let d=!1;return ea().then(g=>{d||g.length&&(o(new Map(g.map(O=>[O.device.deviceId,O]))),r(O=>O?(t.current=null,O):t.current&&g.find(({device:D})=>t.current.deviceId===D.deviceId)?t.current.deviceId:(t.current=null,g[0].device.deviceId)))}).catch(g=>{if(!d){if(g instanceof DOMException){if(g.name==="NotAllowedError"){s("denied");return}if(g.name==="NotFoundError"){s("unavailable");return}}throw g}}),()=>{d=!0}},[]);Object(f.useEffect)(u,[u]);const[C,b]=Object(f.useState)(1);Object(f.useEffect)(()=>{const d=n&&n.get(i);d&&(t.current&&t.current.deviceId===d.device.deviceId&&t.current.channelCount<=d.channelsAvailable?b(t.current.channelCount):b(d.channelsAvailable),t.current=null)},[n,i]),Object(f.useEffect)(()=>{i&&localStorage.setItem(Ke,JSON.stringify({deviceId:i,channelCount:C}))},[i,C]);const[S,v]=Object(f.useState)("ready"),[y,m]=Object(f.useState)(null),[p,h]=Object(f.useState)({fn(d){}}),[E,A]=Object(f.useState)(0),P=Object(f.useCallback)(()=>ae(this,null,function*(){let d=!1;const{mediaRecording:g,stop:O}=yield ra({deviceId:i,channelCount:C,onStart:B=>{A(B),v("capturing")},onUpdate:e});h({fn(B){O(),B&&(d=!0)}});let D;try{D=yield g}catch(B){m(B),v("error");return}d?v("ready"):(v("finalizing"),a(D))}),[i,C,e,a]);return{captureDevices:n,accessState:l,selectedCaptureDeviceId:i,selectedChannelCount:C,captureState:S,recordingError:y,maxSamples:E,refreshCaptureDevices:u,setSelectedCaptureDeviceId:r,setSelectedChannelCount:b,beginRecording:P,stopRecording:p.fn}}const fe=2;function ia({canvas:e,peaks:a,peakOffset:t,scaleCoefficient:n}){const o="#fff",l=e.getContext("2d");l.imageSmoothingEnabled=!1;const{height:s}=e;l.fillStyle=o;for(let i=t;i<a.length;i++){const r=a[i];if(r===0)continue;const u=s*r,C=Math.max(Math.round(n*u),1);l.fillRect(i*fe,s-C,fe-1,C)}}function sa({onRecordFinish:e}){const a=Object(f.useRef)(null),t=Object(f.useRef)(0),n=Object(f.useRef)(new Float32Array),o=Object(f.useRef)(0),l=Object(f.useRef)([]),s=Object(f.useCallback)(d=>ae(this,null,function*(){const g=t.current,O=n.current,D=l.current;if(D.push(d),D.reduce((F,[{length:$}])=>F+$,0)>=g){const F=yield Promise.all(d.map((R,pe)=>D.reduce((ya,ga)=>[...ya,ga[pe]],[])).map(R=>ae(this,null,function*(){const pe=yield new Blob(R).arrayBuffer();return new Float32Array(pe)}))),$=F.map(R=>Ce(new Float32Array(R.buffer,0,g)));O[o.current]=Math.max(...$),ia({canvas:a.current,peaks:O,peakOffset:o.current,scaleCoefficient:.3}),o.current++,l.current=[F.map(R=>R.slice(g))]}}),[]),{captureDevices:i,accessState:r,selectedCaptureDeviceId:u,selectedChannelCount:C,captureState:b,recordingError:S,maxSamples:v,refreshCaptureDevices:y,setSelectedCaptureDeviceId:m,setSelectedChannelCount:p,beginRecording:h,stopRecording:E}=ca(s,e);Object(f.useEffect)(()=>{const d=a.current;d&&(d.width=d.offsetWidth,d.height=d.offsetHeight)},[r]),Object(f.useLayoutEffect)(()=>{const d=a.current;!d||(b!=="finalizing"&&d.getContext("2d").clearRect(0,0,d.width,d.height),b==="capturing"&&v&&(t.current=Math.floor(fe*v/a.current.width),n.current=new Float32Array(Math.floor(v/t.current)),o.current=0,l.current=[]))},[v,b]);const[A,P]=Object(f.useState)(!1);return c.a.createElement("div",null,r==="denied"?c.a.createElement("p",null,"Looks like you didn't grant access to your audio input device. Please give Volca Sampler access, then"," ",c.a.createElement(M.a,{type:"button",variant:"secondary",onClick:y},"try again")):r==="unavailable"?c.a.createElement("p",null,"Volca Sampler couldn't find any audio input devices. Please connect one, then"," ",c.a.createElement(M.a,{type:"button",variant:"secondary",onClick:y},"try again")):c.a.createElement("div",null,c.a.createElement("h2",null,"Send a new sound to your Volca Sample!"),c.a.createElement(M.a,{className:la.a.recordButton,type:"button",variant:b==="capturing"?"danger":"primary",size:"lg",style:{width:250},onClick:b==="capturing"?()=>E():h,disabled:b==="finalizing"},c.a.createElement("canvas",{ref:a}),c.a.createElement("span",null,["capturing","finalizing"].includes(b)?"Finished recording":"Start recording")),["capturing","finalizing"].includes(b)?c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(M.a,{style:{width:250},size:"sm",type:"button",variant:"secondary",onClick:()=>E(!0)},"Cancel")):c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement(M.a,{style:{width:250},type:"button",variant:"light",size:"sm",onClick:()=>P(d=>!d)},"Audio input settings ",A?"\u25B2":"\u25BC"),c.a.createElement(qt.a,{in:A},c.a.createElement("div",null,c.a.createElement(k.a.Group,null,c.a.createElement(k.a.Label,null,"Capture Device"),c.a.createElement(k.a.Select,{style:{width:250},value:u,onChange:d=>m(d.target.value)},i&&r==="ok"?[...i].map(([d,{device:g}])=>c.a.createElement("option",{key:d,value:d},g.label||d)):c.a.createElement("option",{value:"",disabled:!0},"Loading devices..."))),c.a.createElement(k.a.Group,null,c.a.createElement(k.a.Label,null,"Input channels"),c.a.createElement(k.a.Select,{style:{width:250},value:C,onChange:d=>p(Number(d.target.value))},[1,2].map(d=>c.a.createElement("option",{key:d,value:d,disabled:!i||!i.has(u)||i.get(u).channelsAvailable<d},d===1?"Mono":"Stereo (summed to mono)")))),c.a.createElement("br",null))))),b==="error"&&S||null,c.a.createElement("br",null),c.a.createElement(M.a,{style:{width:250},type:"button",variant:"secondary",onClick:d=>{const g=d.currentTarget.querySelector("input");g&&d.target!==g&&g.click()}},"Or import an audio file",c.a.createElement("input",{hidden:!0,type:"file",accept:"audio/*,.wav,.mp3,.ogg",onChange:d=>{if(d.target.files&&d.target.files.length){const g=d.target.files[0];g.arrayBuffer().then(O=>ae(this,null,function*(){const D=new Uint8Array(O);let B;try{B=yield q(D)}catch(F){alert("Unsupported audio format detected");return}if(B.length>10*B.sampleRate){alert("Please select an audio file no more than 10 seconds long");return}e(D,g)}))}}})))}var ua=sa,me=w(86),T=w(88),da=(e,a,t)=>new Promise((n,o)=>{var l=r=>{try{i(t.next(r))}catch(u){o(u)}},s=r=>{try{i(t.throw(r))}catch(u){o(u)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,s);i((t=t.apply(e,a)).next())});const fa=z.a.div({padding:"2rem",display:"flex",height:"100%"}),ma=z.a.div({flexGrow:1});function pa(){const[e,a]=Object(f.useState)(new Map),[t,n]=Object(f.useState)(new Map),o=Object(f.useMemo)(()=>new Map([...e,...t]),[e,t]);Object(f.useEffect)(()=>{it().then(n).catch(console.error)},[]);const[l,s]=Object(f.useState)(null),[i,r]=Object(f.useState)(!0);Object(f.useEffect)(()=>{j.getAllFromStorage().then(y=>{a(m=>new Map([...m,...y.map(p=>[p.id,p])]))}).finally(()=>{r(!1)})},[]);const u=Object(f.useCallback)((y,m)=>da(this,null,function*(){const p=yield ot(y);let h="",E="";if(m){const g=m.name.lastIndexOf(".");g>0?(h=m.name.slice(0,g),E=m.name.slice(g)):h=m.name}else h="New sample";const A=[0,0],P=yield xe(p,A),d=new j.Mutable({name:h,sourceFileId:p,trim:{frames:A,waveformPeaks:P},userFileInfo:m&&{type:m.type,ext:E}});yield d.persist(),a(g=>new Map([[d.id,d],...g])),s(d.id)}),[]),C=Object(f.useCallback)((y,m)=>{a(p=>{const h=p.get(y);if(h&&h instanceof j.Mutable){const E=h.update(m);if(E!==h)return new Map(p).set(h.id,E)}return p})},[]),[b,S]=Object(f.useState)(!1),v=Object(f.useCallback)(y=>{s(y),S(!1)},[]);return c.a.createElement("div",null,c.a.createElement(qe,{onMenuOpen:()=>S(!0),onHeaderClick:()=>s(null)}),c.a.createElement(me.a,{show:b,onHide:()=>S(!1)},c.a.createElement(me.a.Header,{closeButton:!0}),c.a.createElement(me.a.Body,null,c.a.createElement(G.a,null,c.a.createElement(G.a.Item,{as:"button",onClick:()=>v(null)},"New Sample"),i?"Loading...":null,!i&&c.a.createElement(T.a,{defaultActiveKey:e.size?"user":"factory"},c.a.createElement(T.a.Item,{eventKey:"user"},c.a.createElement(T.a.Header,null,"Your Samples"),c.a.createElement(T.a.Body,{style:{padding:0}},c.a.createElement(We,{samples:e,selectedSampleId:l,onSampleSelect:v}))),c.a.createElement(T.a.Item,{eventKey:"factory"},c.a.createElement(T.a.Header,null,"Factory Samples"),c.a.createElement(T.a.Body,{style:{padding:0}},c.a.createElement(We,{samples:t,selectedSampleId:l,onSampleSelect:v}))))))),c.a.createElement(fa,null,c.a.createElement(ma,null,l&&c.a.createElement(Zt,{sample:o.get(l)||null,onSampleUpdate:C,onSampleDuplicate:y=>{const m=o.get(y);if(m){const p=m.duplicate();a(h=>new Map([[p.id,p],...h])),s(p.id)}},onSampleDelete:y=>{const m=o.get(y);m&&m instanceof j.Mutable&&(m.remove(),a(p=>{const h=new Map(p);return h.delete(m.id),h}))}}),!l&&c.a.createElement(ua,{onRecordFinish:u}))))}var ha=pa,va=e=>{e&&e instanceof Function&&w.e(3).then(w.bind(null,92)).then(({getCLS:a,getFID:t,getFCP:n,getLCP:o,getTTFB:l})=>{a(e),t(e),n(e),o(e),l(e)})};Blob.prototype.arrayBuffer||(Blob.prototype.arrayBuffer=function(){return new Response(this).arrayBuffer()}),Je.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(mt,null,c.a.createElement(ha,null))),document.getElementById("root")),va()}},[[77,1,2]]]);

//# sourceMappingURL=main.e626e222.chunk.js.map