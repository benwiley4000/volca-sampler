(this["webpackJsonpvolca-sampler"]=this["webpackJsonpvolca-sampler"]||[]).push([[0],{14:function(Ie,q,I){},22:function(Ie,q,I){"use strict";I.r(q);var u=I(0),d=I.n(u),Ce=I(6),Ee=I.n(Ce),Ga=I(14),F=I(1);const Ne=F.a.div({height:"100%",overflow:"auto"}),ee=F.a.div({padding:"0.5rem",border:"1px solid grey",cursor:"pointer",backgroundColor:({$selected:e})=>e?"#f3f3f3":"unset"});function Pe({samples:e,selectedSampleId:t,readonly:a,onNewSample:r,onSampleSelect:n}){return d.a.createElement(Ne,null,d.a.createElement(ee,{"data-disabled":a,onClick:()=>!a&&r()},"New Sample"),[...e].map(([o,s])=>d.a.createElement(ee,{key:o,$selected:o===t,"data-disabled":a,onClick:()=>!a&&n(o)},d.a.createElement("div",null,s.metadata.name),d.a.createElement("div",null,"Updated ",new Date(s.metadata.dateModified).toLocaleString()))))}var Oe=Pe,De=I(7),Ae=I.n(De),Be=I(2),B=I.n(Be),ae=I(24),te=[{name:"Kick 1",sourceFileId:"/factory-samples/00 Kick 1.wav",id:"d4e7f527-8765-4467-a8b0-6ad080f82c7e",slotNumber:0,dateSampled:14121216e5},{name:"Kick 2",sourceFileId:"/factory-samples/01 Kick 2.wav",id:"0ad2d0b6-4d7a-4126-831b-479a1b0d0a03",slotNumber:1,dateSampled:14121216e5},{name:"Kick 3",sourceFileId:"/factory-samples/02 Kick 3.wav",id:"61d6e3e7-d8be-4bd3-bafd-7db9a3514e67",slotNumber:2,dateSampled:14121216e5},{name:"Kick 4",sourceFileId:"/factory-samples/03 Kick 4.wav",id:"f757be5c-2ce7-4e4c-83fe-54043bfac71d",slotNumber:3,dateSampled:14121216e5},{name:"Kick 5",sourceFileId:"/factory-samples/04 Kick 5.wav",id:"c5165304-aabb-4ae5-9975-7d5244093176",slotNumber:4,dateSampled:14121216e5},{name:"Kick 6",sourceFileId:"/factory-samples/05 Kick 6.wav",id:"2cbfc495-06b9-4048-8072-55112d057e56",slotNumber:5,dateSampled:14121216e5},{name:"Kick 7",sourceFileId:"/factory-samples/06 Kick 7.wav",id:"8e75dd7c-c92f-43ad-a43f-232d6fb3cda5",slotNumber:6,dateSampled:14121216e5},{name:"Kick 8",sourceFileId:"/factory-samples/07 Kick 8.wav",id:"23875c2c-b6b4-4439-a0e7-9287d117df0d",slotNumber:7,dateSampled:14121216e5},{name:"Kick 9",sourceFileId:"/factory-samples/08 Kick 9.wav",id:"5fec0d3a-1e77-4db9-896c-98e65a1fc5e6",slotNumber:8,dateSampled:14121216e5},{name:"Kick 10",sourceFileId:"/factory-samples/09 Kick 10.wav",id:"b5b31df2-c82b-491f-a3cc-4e539d3d8b8e",slotNumber:9,dateSampled:14121216e5},{name:"Snare 1",sourceFileId:"/factory-samples/10 Snare 1.wav",id:"991cc1cd-51af-41df-8cd2-e59f0e0113a4",slotNumber:10,dateSampled:14121216e5},{name:"Snare 2",sourceFileId:"/factory-samples/11 Snare 2.wav",id:"77c19cf1-f00b-4234-9668-a94965652e2e",slotNumber:11,dateSampled:14121216e5},{name:"Snare 3",sourceFileId:"/factory-samples/12 Snare 3.wav",id:"29ac9303-6f84-4126-9024-54c30b4262f5",slotNumber:12,dateSampled:14121216e5},{name:"Snare 4",sourceFileId:"/factory-samples/13 Snare 4.wav",id:"5cb4c87e-c635-43d3-91fe-9e18d0023ad4",slotNumber:13,dateSampled:14121216e5},{name:"Snare 5",sourceFileId:"/factory-samples/14 Snare 5.wav",id:"215b57f0-3a70-4e05-a2d8-444675207f70",slotNumber:14,dateSampled:14121216e5},{name:"Snare 6",sourceFileId:"/factory-samples/15 Snare 6.wav",id:"b62cd276-3487-4e65-a459-44183d8d18a8",slotNumber:15,dateSampled:14121216e5},{name:"Snare 7",sourceFileId:"/factory-samples/16 Snare 7.wav",id:"439f460f-d5ba-4a87-81c1-0d41a36a4d70",slotNumber:16,dateSampled:14121216e5},{name:"Snare 8",sourceFileId:"/factory-samples/17 Snare 8.wav",id:"b65bb2e7-4945-49fa-a4f0-00ed1c1ae88b",slotNumber:17,dateSampled:14121216e5},{name:"Snare 9",sourceFileId:"/factory-samples/18 Snare 9.wav",id:"3bc0a5b8-59ad-48c3-9b28-c2ec443314c6",slotNumber:18,dateSampled:14121216e5},{name:"Snare 10",sourceFileId:"/factory-samples/19 Snare 10.wav",id:"e4ad2512-de50-4fca-ad6f-e536f9e39ec1",slotNumber:19,dateSampled:14121216e5},{name:"Snare 11",sourceFileId:"/factory-samples/20 Snare 11.wav",id:"8a072027-002d-4edb-843a-ada08d9287a7",slotNumber:20,dateSampled:14121216e5},{name:"Snare 12",sourceFileId:"/factory-samples/21 Snare 12.wav",id:"77084e51-cfff-4ef9-abb5-676c17a49888",slotNumber:21,dateSampled:14121216e5},{name:"Clap 1",sourceFileId:"/factory-samples/22 Clap 1.wav",id:"4f09fe41-ea05-4de0-9198-08786407faad",slotNumber:22,dateSampled:14121216e5},{name:"Clap 2",sourceFileId:"/factory-samples/23 Clap 2.wav",id:"e9993f07-3f3d-4f01-b37e-3ab3d6360d56",slotNumber:23,dateSampled:14121216e5},{name:"Clap 3",sourceFileId:"/factory-samples/24 Clap 3.wav",id:"915a60db-3c7a-4a94-845a-84f2d4b7ee2f",slotNumber:24,dateSampled:14121216e5},{name:"Clap 4",sourceFileId:"/factory-samples/25 Clap 4.wav",id:"40559970-cefc-4a7e-9d2e-7eb28a6d553a",slotNumber:25,dateSampled:14121216e5},{name:"Clap 5",sourceFileId:"/factory-samples/26 Clap 5.wav",id:"54e7e57f-2371-4fd1-98db-8808d674bcf0",slotNumber:26,dateSampled:14121216e5},{name:"Clap 6",sourceFileId:"/factory-samples/27 Clap 6.wav",id:"f6a31a1a-7299-437e-b539-c9a83fab4bfe",slotNumber:27,dateSampled:14121216e5},{name:"Clap 7",sourceFileId:"/factory-samples/28 Clap 7.wav",id:"c54e91a1-5b02-4bad-bdc0-3713f6713703",slotNumber:28,dateSampled:14121216e5},{name:"Clap 8",sourceFileId:"/factory-samples/29 Clap 8.wav",id:"d86dc4e4-09c8-4ca6-9f75-d7377d9e61d9",slotNumber:29,dateSampled:14121216e5},{name:"Hihat 1",sourceFileId:"/factory-samples/30 Hihat 1.wav",id:"f1ae8ed0-e392-4447-ab87-b46784ea1d26",slotNumber:30,dateSampled:14121216e5},{name:"Hihat 2",sourceFileId:"/factory-samples/31 Hihat 2.wav",id:"ade103ba-11c7-4663-a957-a26b12aa0ad2",slotNumber:31,dateSampled:14121216e5},{name:"Hihat 3",sourceFileId:"/factory-samples/32 Hihat 3.wav",id:"e9b299ac-ece9-48d2-9bea-de01afb7f05e",slotNumber:32,dateSampled:14121216e5},{name:"Hihat 4",sourceFileId:"/factory-samples/33 Hihat 4.wav",id:"a88f3e5b-b102-4cdf-b938-8da683054942",slotNumber:33,dateSampled:14121216e5},{name:"Hihat 5",sourceFileId:"/factory-samples/34 Hihat 5.wav",id:"6ab1079f-711c-4723-b295-3893d2f1c93f",slotNumber:34,dateSampled:14121216e5},{name:"Hihat 6",sourceFileId:"/factory-samples/35 Hihat 6.wav",id:"49f3e3dc-d1e1-418e-bf81-f15f3453433a",slotNumber:35,dateSampled:14121216e5},{name:"Hihat 7",sourceFileId:"/factory-samples/36 Hihat 7.wav",id:"b269ace9-f43c-4384-9134-76ba9b3c9bbb",slotNumber:36,dateSampled:14121216e5},{name:"Hihat 8",sourceFileId:"/factory-samples/37 Hihat 8.wav",id:"5d4732a4-b9bc-494c-9fe5-1a8a355e2bf7",slotNumber:37,dateSampled:14121216e5},{name:"Hihat 9",sourceFileId:"/factory-samples/38 Hihat 9.wav",id:"6cbf103b-26d2-452e-9922-dba89ede86ae",slotNumber:38,dateSampled:14121216e5},{name:"Hihat 10",sourceFileId:"/factory-samples/39 Hihat 10.wav",id:"5d89a9f8-6516-42b4-96e5-4ac22d2d1374",slotNumber:39,dateSampled:14121216e5},{name:"Crash",sourceFileId:"/factory-samples/40 Crash.wav",id:"21618c12-f3c0-4c31-9175-584c3a2af337",slotNumber:40,dateSampled:14121216e5},{name:"Ride",sourceFileId:"/factory-samples/41 Ride.wav",id:"9385f064-2ddc-4835-a0c6-fa13a3c578ee",slotNumber:41,dateSampled:14121216e5},{name:"Swoosh",sourceFileId:"/factory-samples/42 Swoosh.wav",id:"8a3291b9-5bba-4555-a1d4-fa557850bb75",slotNumber:42,dateSampled:14121216e5},{name:"SynthRim",sourceFileId:"/factory-samples/43 SynthRim.wav",id:"33b09683-bc73-40d6-8a7a-fb1b8960e20f",slotNumber:43,dateSampled:14121216e5},{name:"SynthTom 1",sourceFileId:"/factory-samples/44 SynthTom 1.wav",id:"f021707c-b431-4cdb-94c3-2499b4ad2f3f",slotNumber:44,dateSampled:14121216e5},{name:"SynthTom 2",sourceFileId:"/factory-samples/45 SynthTom 2.wav",id:"d1f72305-3af8-48a0-97ae-a2def06d522a",slotNumber:45,dateSampled:14121216e5},{name:"SynthTom 3",sourceFileId:"/factory-samples/46 SynthTom 3.wav",id:"3861d616-8cdd-4315-970c-2ecd57bba0dc",slotNumber:46,dateSampled:14121216e5},{name:"SynthTom 4",sourceFileId:"/factory-samples/47 SynthTom 4.wav",id:"b4843805-9098-4195-a078-f294121ef2fe",slotNumber:47,dateSampled:14121216e5},{name:"Tom 1",sourceFileId:"/factory-samples/48 Tom 1.wav",id:"000dee85-e8f5-4b9e-bf61-42c0deaa48c3",slotNumber:48,dateSampled:14121216e5},{name:"Tom 2",sourceFileId:"/factory-samples/49 Tom 2.wav",id:"656aa02f-7c11-4f10-8248-607fc945cc47",slotNumber:49,dateSampled:14121216e5},{name:"SynthCow",sourceFileId:"/factory-samples/50 SynthCow.wav",id:"1225b464-7daa-4149-b5f2-84edc7a6cf4f",slotNumber:50,dateSampled:14121216e5},{name:"Bongo",sourceFileId:"/factory-samples/51 Bongo.wav",id:"8dc90688-d001-4edc-b881-e0f446afa79e",slotNumber:51,dateSampled:14121216e5},{name:"DoncaClaves",sourceFileId:"/factory-samples/52 DoncaClaves.wav",id:"bc209962-c2be-4d41-a8ce-3e3673c3cd0f",slotNumber:52,dateSampled:14121216e5},{name:"SynthShaker",sourceFileId:"/factory-samples/53 SynthShaker.wav",id:"963aba87-9b28-4383-8fd5-f4d2280827b5",slotNumber:53,dateSampled:14121216e5},{name:"Tambourine",sourceFileId:"/factory-samples/54 Tambourine.wav",id:"3d09750e-f184-48c4-b8a2-0ddd1535049d",slotNumber:54,dateSampled:14121216e5},{name:"Cowbell",sourceFileId:"/factory-samples/55 Cowbell.wav",id:"dfde9f1f-22dc-4a2c-b16e-a7afd3a7e258",slotNumber:55,dateSampled:14121216e5},{name:"DoncaSConga",sourceFileId:"/factory-samples/56 DoncaSConga.wav",id:"04eb313c-74c1-463c-8a4f-f54eb9ff2a34",slotNumber:56,dateSampled:14121216e5},{name:"DoncaLBongo",sourceFileId:"/factory-samples/57 DoncaLBongo.wav",id:"400f6524-7f54-417c-ad29-5c3dc80b50f6",slotNumber:57,dateSampled:14121216e5},{name:"SynthPerc",sourceFileId:"/factory-samples/58 SynthPerc.wav",id:"f2c4a202-af49-4265-8825-5226a2e9255b",slotNumber:58,dateSampled:14121216e5},{name:"WhiteNoise",sourceFileId:"/factory-samples/59 WhiteNoise.wav",id:"078d5e49-9a25-405c-a989-42dc39a5cb64",slotNumber:59,dateSampled:14121216e5},{name:"SynthHit 1",sourceFileId:"/factory-samples/60 SynthHit 1.wav",id:"5c2dfdeb-9e95-471d-af0f-a925025ae535",slotNumber:60,dateSampled:14121216e5},{name:"SynthHit 2",sourceFileId:"/factory-samples/61 SynthHit 2.wav",id:"91353e4b-f919-4e90-8d37-9a5cbaeea791",slotNumber:61,dateSampled:14121216e5},{name:"SynthHit 3",sourceFileId:"/factory-samples/62 SynthHit 3.wav",id:"209ae367-acdb-40f8-9351-e72987d3f48b",slotNumber:62,dateSampled:14121216e5},{name:"SynthHit 4",sourceFileId:"/factory-samples/63 SynthHit 4.wav",id:"bcd12daf-1c62-4dbf-ab36-130621048d39",slotNumber:63,dateSampled:14121216e5},{name:"SynthHit 5",sourceFileId:"/factory-samples/64 SynthHit 5.wav",id:"9340bd7c-9d2e-4152-81be-106d5133acf5",slotNumber:64,dateSampled:14121216e5},{name:"SynthHit 6",sourceFileId:"/factory-samples/65 SynthHit 6.wav",id:"670c20d2-4453-4864-91f5-f90f9f1d8192",slotNumber:65,dateSampled:14121216e5},{name:"SynthHit 7",sourceFileId:"/factory-samples/66 SynthHit 7.wav",id:"918d7efb-69c3-406e-b3c6-fe08916caf6f",slotNumber:66,dateSampled:14121216e5},{name:"SynthHit 8",sourceFileId:"/factory-samples/67 SynthHit 8.wav",id:"46f729c5-3099-4435-8ccc-8281ca23dc97",slotNumber:67,dateSampled:14121216e5},{name:"SynthHit 9",sourceFileId:"/factory-samples/68 SynthHit 9.wav",id:"8d872cbf-0995-49dd-85a1-20b1b46c4f1a",slotNumber:68,dateSampled:14121216e5},{name:"SynthHit 10",sourceFileId:"/factory-samples/69 SynthHit 10.wav",id:"b75ca8b7-a695-408d-aee7-a20587b658ab",slotNumber:69,dateSampled:14121216e5},{name:"PianoChord 1",sourceFileId:"/factory-samples/70 PianoChord 1.wav",id:"34d1899c-ac4d-4819-ac99-437c0b1ca511",slotNumber:70,dateSampled:14121216e5},{name:"PianoChord 2",sourceFileId:"/factory-samples/71 PianoChord 2.wav",id:"52718f5b-a1bd-4ea0-ae6f-bb762a119816",slotNumber:71,dateSampled:14121216e5},{name:"PianoChord 3",sourceFileId:"/factory-samples/72 PianoChord 3.wav",id:"3442aa53-4fcf-42cd-984f-8e2b351f43fb",slotNumber:72,dateSampled:14121216e5},{name:"EPChord 1",sourceFileId:"/factory-samples/73 EPChord 1.wav",id:"14504198-7177-4916-a33d-ca0506caa219",slotNumber:73,dateSampled:14121216e5},{name:"EPChord 2",sourceFileId:"/factory-samples/74 EPChord 2.wav",id:"0704fe08-3c15-427d-8246-794be6ac4774",slotNumber:74,dateSampled:14121216e5},{name:"EPChord 3",sourceFileId:"/factory-samples/75 EPChord 3.wav",id:"6f52e4d8-cc06-4281-8a0f-5ecd9a6e845f",slotNumber:75,dateSampled:14121216e5},{name:"EPChord 4",sourceFileId:"/factory-samples/76 EPChord 4.wav",id:"e0b958be-5bee-4c5e-af27-800d787fbf8b",slotNumber:76,dateSampled:14121216e5},{name:"OrganChord",sourceFileId:"/factory-samples/77 OrganChord.wav",id:"4510aae5-bff3-47ea-b17f-b218feffcf69",slotNumber:77,dateSampled:14121216e5},{name:"BandHit 1",sourceFileId:"/factory-samples/78 BandHit 1.wav",id:"b03953fd-53bb-4711-8a7b-f260ac08c8f6",slotNumber:78,dateSampled:14121216e5},{name:"BandHit 2",sourceFileId:"/factory-samples/79 BandHit 2.wav",id:"091d5b96-5970-484e-b439-345384de634c",slotNumber:79,dateSampled:14121216e5},{name:"BandHit 3",sourceFileId:"/factory-samples/80 BandHit 3.wav",id:"41a02da0-c066-4faf-b4ec-d2e7418d3cf4",slotNumber:80,dateSampled:14121216e5},{name:"StringsHit 1",sourceFileId:"/factory-samples/81 StringsHit 1.wav",id:"b4a1117f-1b75-4ba6-a207-782e907c2e25",slotNumber:81,dateSampled:14121216e5},{name:"Choir",sourceFileId:"/factory-samples/82 Choir.wav",id:"7dc2f1f3-4109-438b-bc62-75fa78f010e7",slotNumber:82,dateSampled:14121216e5},{name:"GuitarHit 1",sourceFileId:"/factory-samples/83 GuitarHit 1.wav",id:"f3c934c0-615d-40e2-8abb-498e16dc3d70",slotNumber:83,dateSampled:14121216e5},{name:"GuitarHit 2",sourceFileId:"/factory-samples/84 GuitarHit 2.wav",id:"48780de8-3b8a-443b-b124-c92e7640df5c",slotNumber:84,dateSampled:14121216e5},{name:"KalimbaChord",sourceFileId:"/factory-samples/85 KalimbaChord.wav",id:"b414ebb8-0efb-4a8f-9d4b-c2881b58d671",slotNumber:85,dateSampled:14121216e5},{name:"SynChord",sourceFileId:"/factory-samples/86 SynChord.wav",id:"8a00e27e-9b29-4919-935a-82e00aaf0d4d",slotNumber:86,dateSampled:14121216e5},{name:"BellChord",sourceFileId:"/factory-samples/87 BellChord.wav",id:"3c90bf0f-859f-4f6b-888c-3f3d65e95f6f",slotNumber:87,dateSampled:14121216e5},{name:"WindChime",sourceFileId:"/factory-samples/88 WindChime.wav",id:"5e5d8ff0-1ee2-4425-881b-b7c0783b5381",slotNumber:88,dateSampled:14121216e5},{name:"Airhorn",sourceFileId:"/factory-samples/89 Airhorn.wav",id:"e8bd6571-9300-481e-aacc-6839ca95cc6b",slotNumber:89,dateSampled:14121216e5},{name:"VocalHit 1",sourceFileId:"/factory-samples/90 VocalHit 1.wav",id:"c5c5a7fd-8fc4-4be8-b43c-ffe4405de903",slotNumber:90,dateSampled:14121216e5},{name:"VocalHit 2",sourceFileId:"/factory-samples/91 VocalHit 2.wav",id:"23884818-3455-4e51-bd48-c0cdebf04887",slotNumber:91,dateSampled:14121216e5},{name:"VocalHit 3",sourceFileId:"/factory-samples/92 VocalHit 3.wav",id:"4fefba3a-6887-4a9d-aeb3-72f091ee0d70",slotNumber:92,dateSampled:14121216e5},{name:"VocalHit 4",sourceFileId:"/factory-samples/93 VocalHit 4.wav",id:"b2e9f0c2-033c-41d8-907c-b6e1d765811c",slotNumber:93,dateSampled:14121216e5},{name:"VocalHit 5",sourceFileId:"/factory-samples/94 VocalHit 5.wav",id:"f71770eb-0f96-4902-a11f-839d42f54546",slotNumber:94,dateSampled:14121216e5},{name:"VocalHit 6",sourceFileId:"/factory-samples/95 VocalHit 6.wav",id:"ccac2285-cdbb-49dd-974b-260506a37601",slotNumber:95,dateSampled:14121216e5},{name:"VocalHit 7",sourceFileId:"/factory-samples/96 VocalHit 7.wav",id:"77a76173-4695-49c5-9ff4-31bc14474e91",slotNumber:96,dateSampled:14121216e5},{name:"VocalHit 8",sourceFileId:"/factory-samples/97 VocalHit 8.wav",id:"16725eac-e1ea-4fc7-b938-3a36b2b04c09",slotNumber:97,dateSampled:14121216e5},{name:"VocalHit 9",sourceFileId:"/factory-samples/98 VocalHit 9.wav",id:"9d09e36b-61f1-416d-9f53-ec2db1a11d56",slotNumber:98,dateSampled:14121216e5},{name:"Doncamatic",sourceFileId:"/factory-samples/99 Doncamatic.wav",id:"18ae290c-9fc0-4c70-be72-8138021c52fa",slotNumber:99,dateSampled:14121216e5}];const k=31250;var ke=Object.defineProperty,xe=Object.defineProperties,He=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,_=(e,t,a)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,O=(e,t)=>{for(var a in t||(t={}))re.call(t,a)&&_(e,a,t[a]);if(x)for(var a of x(t))ne.call(t,a)&&_(e,a,t[a]);return e},$=(e,t)=>xe(e,He(t)),Me=(e,t)=>{var a={};for(var r in e)re.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&x)for(var r of x(e))t.indexOf(r)<0&&ne.call(e,r)&&(a[r]=e[r]);return a},H=(e,t,a)=>(_(e,typeof t!="symbol"?t+"":t,a),a),P=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});const M=B.a.createInstance({name:"audio_file_data",driver:B.a.INDEXEDDB}),j=B.a.createInstance({name:"sample_metadata",driver:B.a.INDEXEDDB});function je(e){return P(this,null,function*(){const t=Object(ae.a)();return yield M.setItem(t,e),t})}const U="0.2.0",Re={"0.1.0":e=>{const t=e,{clip:a}=t,r=Me(t,["clip"]);return $(O({},r),{trimFrames:a.map(o=>Math.round(o*k)),metadataVersion:"0.2.0"})}};function Te(e){let t=e;for(;t.metadataVersion!==U;){const a=Re[e.metadataVersion];if(!a){console.warn(`Failed to properly upgrade metadata for sample "${t.name}"`),t={name:t.name,sourceFileId:t.sourceFileId,id:t.id,metadataVersion:U};break}t=a(t)}return t}const D=class{constructor({name:e,sourceFileId:t,id:a=Object(ae.a)(),userFileInfo:r=null,slotNumber:n=0,dateSampled:o=Date.now(),dateModified:s=o,useCompression:c=!0,qualityBitDepth:l=16,scaleCoefficient:i=1,trimFrames:p=[0,0]}){this.id=a,this.metadata={name:e,sourceFileId:t,userFileInfo:r,slotNumber:n,dateSampled:o,dateModified:s,useCompression:c,qualityBitDepth:l,scaleCoefficient:i,trimFrames:p,metadataVersion:U}}duplicate(){const e=new D.Mutable($(O({},this.metadata),{name:`${this.metadata.name} (copy)`,dateModified:Date.now()}));return e.persist(),e}static cacheSourceFileData(e,t){this.sourceFileData.set(e,t),this.recentlyCachedSourceFileIds=[e,...this.recentlyCachedSourceFileIds.filter(r=>r!==e)];const a=this.recentlyCachedSourceFileIds.slice(this.MAX_CACHED);for(const r of a)this.sourceFileData.delete(r);this.recentlyCachedSourceFileIds=this.recentlyCachedSourceFileIds.slice(0,this.MAX_CACHED)}static getSourceFileData(e){return P(this,null,function*(){{const a=this.sourceFileData.get(e);if(a)return a}if(e.includes(".")){const a=yield fetch(e);if(a.status>=400)return Promise.reject(new Error(`Failed to fetch source file "${e}"`));const r=yield a.arrayBuffer(),n=new Uint8Array(r);return this.cacheSourceFileData(e,n),n}const t=yield M.getItem(e);return t?t instanceof Uint8Array?(this.cacheSourceFileData(e,t),t):Promise.reject("Source data is of unexpected type"):Promise.reject("Missing source data")})}static getAllMetadataFromStore(){return P(this,null,function*(){const e=new Map;return yield j.iterate((t,a)=>{if(t){const r=Te(t);e.set(a,r)}}),e})}static getAllFromStorage(){return P(this,null,function*(){const e=yield this.getAllMetadataFromStore(),t=(yield M.keys()).concat(te.map(({sourceFileId:r})=>r));return[...e].map(([r,n])=>{const{sourceFileId:o}=n;return t.includes(o)?new D.Mutable(O({id:r},n)):(console.warn(`Found metadata "${n.name||r}" with missing data "${o}; ignoring.`),null)}).filter(Boolean).sort((r,n)=>n.metadata.dateModified-r.metadata.dateModified)})}};let N=D;H(N,"Mutable",class extends D{constructor(e){super(e);setTimeout(()=>P(this,null,function*(){(yield j.keys()).includes(this.id)||console.warn(`Expected sample metadata container ${this.id} to be persisted`)}))}persist(){return P(this,null,function*(){yield j.setItem(this.id,this.metadata)})}update(e){const{id:t,metadata:a}=this;if(Object.keys(e).every(o=>e[o]===a[o]))return this;const r=$(O(O({},a),e),{dateModified:Date.now()}),n=new D.Mutable(O({id:t},r));return n.persist(),n}remove(){return P(this,null,function*(){if(yield j.removeItem(this.id),this.metadata.sourceFileId.includes("."))return;const e=yield D.getAllMetadataFromStore();for(const[,{sourceFileId:t}]of e)if(t===this.metadata.sourceFileId)return;yield M.removeItem(this.metadata.sourceFileId)})}}),H(N,"sourceFileData",new Map),H(N,"recentlyCachedSourceFileIds",[]),H(N,"MAX_CACHED",10);const Ve=new Map(te.map(e=>[e.id,new N(e)]));var le=Math.pow,G=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});function z(e,t){const a=4,r=t[0]*a,n=e.length-t[0]-t[1];return new Float32Array(e.buffer,r,n)}function oe(e,t){const a=e.length-t[0]-t[1],r=new Float32Array(a),n=Array(e.numberOfChannels).fill().map((o,s)=>z(e.getChannelData(s),t));for(let o=0;o<a;o++){let s=0;for(let c=0;c<n.length;c++)s+=n[c][o];s/=n.length,r[o]=s}return r}function We(e){let t=0;for(const a of e){const r=Math.abs(a);r>t&&(t=r)}return t}function Le(e,t){if(t!==1)for(let a=0;a<e.length;a++)e[a]*=t}function Ke(e,t){const a=le(2,t-1);for(let r=0;r<e.length;r++)e[r]=Math.round(e[r]*a)/a}function ce(e){for(let t=0;t<e.length;t++)e[t]>1?e[t]=1:e[t]<-1&&(e[t]=-1)}function _e(e){const t=new Int16Array(e.length),a=le(2,15);for(let r=0;r<e.length;r++)t[r]=e[r]===1?a-1:a*e[r];return t}let de;function ie(){return de=de||new AudioContext({sampleRate:k})}function R(e){return G(this,null,function*(){const t=new Uint8Array(e);return yield new Promise((r,n)=>{ie().decodeAudioData(t.buffer,r,n)})})}function X(e,t){return G(this,null,function*(){const a=yield N.getSourceFileData(e),r=yield R(a);if(t)for(let n=0;n<r.numberOfChannels;n++)ce(r.getChannelData(n));return r})}function J(e){return G(this,null,function*(){const{qualityBitDepth:t,sourceFileId:a,userFileInfo:r,scaleCoefficient:n,trimFrames:o}=e.metadata;if(t<8||t>16||!Number.isInteger(t))throw new Error(`Expected bit depth between 8 and 16. Received: ${t}`);const s=yield X(a,Boolean(r)),c=s.numberOfChannels===1?z(s.getChannelData(0),o):oe(s,o);n!==1&&Le(c,n),t<16&&Ke(c,t);const l=_e(c),i=l.length*2,p=Ae()({channels:1,sampleRate:s.sampleRate,bitDepth:16,dataLength:i}),f=new Uint8Array(p.length+i);return f.set(p),f.set(new Uint8Array(l.buffer),p.length),{data:f,sampleRate:16}})}const $e={playAudioBuffer(e,t){throw new Error("Must render AudioPlaybackContextProvider")},isAudioBusy:!1},se=Object(u.createContext)($e);function Ue({children:e}){const[t,a]=Object(u.useState)(!1),r=Object(u.useCallback)((o,{onTimeUpdate:s=()=>null,onEnded:c=()=>null}={})=>{if(t)throw new Error("Wait until audio playback has finished to start new playback");a(!0);let l,i;try{l=ie(),i=l.createBufferSource(),i.buffer=o,i.connect(l.destination),i.start()}catch(m){throw a(!1),m}const p=l.currentTime;s(0);let f=requestAnimationFrame(y);function y(){s(l.currentTime-p),f=requestAnimationFrame(y)}let b=!1;return i.addEventListener("ended",()=>{b||(s(o.duration),c()),a(!1),cancelAnimationFrame(f)}),function(){i.stop(),b=!0}},[t]),n=Object(u.useMemo)(()=>({playAudioBuffer:r,isAudioBusy:t}),[r,t]);return Object(u.createElement)(se.Provider,{value:n},e)}function me(){return Object(u.useContext)(se)}var Ge=Object.defineProperty,ze=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,pe=(e,t,a)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Je=(e,t)=>{for(var a in t||(t={}))ue.call(t,a)&&pe(e,a,t[a]);if(T)for(var a of T(t))fe.call(t,a)&&pe(e,a,t[a]);return e},Ye=(e,t)=>ze(e,Xe(t)),Qe=(e,t)=>{var a={};for(var r in e)ue.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&T)for(var r of T(e))t.indexOf(r)<0&&fe.call(e,r)&&(a[r]=e[r]);return a},Ze=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});const be=6,qe=F.a.div({width:"100%",height:"100%",position:"relative",overflow:"hidden"}),ea=F.a.div({width:"100%",height:({$positive:e})=>e?"67%":"33%",display:"flex",alignItems:({$positive:e})=>e?"flex-end":"flex-start"}),aa=F.a.div({width:"100%",height:({$scaleCoefficient:e})=>`${100*e}%`,willChange:"height",display:"flex",alignItems:({$positive:e})=>e?"flex-end":"flex-start"}),ta=F.a.div({width:`${be}px`,height:({$amplitude:e,$positive:t})=>`${100*(t?1:-1)*e}%`,paddingRight:"1px"}),ra=F.a.div({backgroundColor:({$positive:e})=>e?"red":"darkred",height:"100%"}),na=F.a.input({position:"absolute",top:0,left:0});function la(e,t){const a=new Float32Array(Math.floor(e.length/t)),r=new Float32Array(Math.floor(e.length/t));for(let n=0;n<a.length;n++){const o=new Float32Array(e.buffer,n*t*4,t);let s=0,c=0;for(const l of o)l>s&&(s=l),l<c&&(c=l);a[n]=s,r[n]=c}return{positive:a,negative:r}}function oa({sourceAudioBuffer:e,sample:{metadata:{trimFrames:t,scaleCoefficient:a}},onSetTrimFrames:r,onSetScaleCoefficient:n}){const o=Object(u.useMemo)(()=>e?oe(e,[0,0]):new Float32Array,[e]),s=Object(u.useRef)(null),c=Object(u.useMemo)(()=>{const f=s.current&&s.current.offsetWidth;if(!f||!o.length)return{positive:new Float32Array,negative:new Float32Array};const y=Math.floor(be*o.length/f);return la(o,y)},[o]),l=Object(u.useMemo)(()=>{if(!e)return 0;const f=z(o,t);return We(f)},[e,o,t]),i=1/l;Object(u.useLayoutEffect)(()=>{a>i&&n(i)},[a,i,n]);const p=a*l;return d.a.createElement(d.a.Fragment,null,d.a.createElement(qe,{ref:s},[!0,!1].map(f=>{const y=f?"positive":"negative";return d.a.createElement(ea,{key:y,$positive:f},d.a.createElement(aa,{$scaleCoefficient:a,$positive:f},[].map.call(c[y],(b,m)=>d.a.createElement(ta,{key:m,$amplitude:b,$positive:f},d.a.createElement(ra,{$positive:f})))))}),d.a.createElement(na,{type:"range",disabled:l===0,value:p,min:.1,max:1,step:.01,onChange:f=>{l!==0&&n(Number(f.target.value)/l)}})),d.a.createElement("button",{type:"button",disabled:a===i,onClick:()=>n(i)},"Normalize"),d.a.createElement("button",{type:"button",disabled:a===1,onClick:()=>n(1)},"Original level"))}function ca(e){var t=e,{sample:a}=t,r=Qe(t,["sample"]);const[n,o]=Object(u.useState)(null);Object(u.useEffect)(()=>{let c=!1;return(()=>Ze(this,null,function*(){if(c)return;const l=yield X(a.metadata.sourceFileId,Boolean(a.metadata.userFileInfo));c||o([a.metadata.sourceFileId,l])}))(),()=>{c=!0}},[a.metadata.sourceFileId,a.metadata.userFileInfo]);const s=Object(u.useRef)(a);return n&&a.metadata.sourceFileId===n[0]&&(s.current=a),d.a.createElement(oa,Ye(Je({},r),{sample:s.current,sourceAudioBuffer:n&&n[1]}))}var da=ca,ia=I(8),sa=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});let ve;function ma(){return sa(this,null,function*(){if(typeof window.CREATE_SYRO_BINDINGS!="function")return Promise.reject("Expected CREATE_SYRO_BINDINGS global function to exist");const e=yield window.CREATE_SYRO_BINDINGS();return ve=ve||new Promise((t,a)=>{let r;try{r={prepareSampleBufferFromWavData:e.cwrap("prepareSampleBufferFromWavData",null,["array","number","number","number","number"]),prepareSampleBufferFrom16BitPcmData(){throw new Error("This function does not work. Use prepareSampleBufferFromWavData.")},getSampleBufferPointer:e.cwrap("getSampleBufferPointer","number",["number"]),getSampleBufferSize:e.cwrap("getSampleBufferSize","number",["number"]),getSampleBufferProgress:e.cwrap("getSampleBufferProgress","number",["number"]),registerUpdateCallback(n){return e.addFunction(n,"vi")},unregisterUpdateCallback(n){e.removeFunction(n)},heap8Buffer(){return e.HEAP8.buffer}}}catch(n){a(n);return}t(r)})})}var ua=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});function fa(e,t){return ua(this,null,function*(){const{prepareSampleBufferFromWavData:a,getSampleBufferPointer:r,getSampleBufferSize:n,getSampleBufferProgress:o,registerUpdateCallback:s,unregisterUpdateCallback:c,heap8Buffer:l}=yield ma(),{data:i}=yield J(e);let p,f=0;const y=s(b=>{const m=r(b),h=n(b);p||(p=new Uint8Array(h)),p.set(new Uint8Array(l(),m,h)),f=o(b)/h});a(i,i.length,e.metadata.slotNumber,e.metadata.qualityBitDepth,e.metadata.useCompression?1:0,y),t(f);try{yield new Promise(b=>{m();function m(){if(f&&(t(f),f>=1)){b();return}requestAnimationFrame(m)}})}finally{c(y)}if(!p)throw new Error("Unexpected condition: sampleBuffer should be defined");return p})}var pa=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});function ba({sample:e}){const[t,a]=Object(u.useState)(0),[r,n]=Object(u.useState)("idle"),o=Object(u.useRef)(()=>{});Object(ia.useEffect)(()=>()=>o.current(),[e]);const{playAudioBuffer:s,isAudioBusy:c}=me();return d.a.createElement(d.a.Fragment,null,d.a.createElement("button",{type:"button",onClick:()=>pa(this,null,function*(){try{let l=!1;o.current=()=>{n("idle"),l=!0},a(0),n("loading");const i=yield fa(e,y=>{l||a(y)});if(l)return;n("transferring");const p=yield R(i);if(l)return;const f=s(p,{onTimeUpdate:y=>a(y/p.duration),onEnded:()=>n("idle")});o.current=()=>{f(),n("idle")}}catch(l){console.error(l),n("error")}}),disabled:c||r==="loading"||r==="transferring"},"transfer to volca sample"),d.a.createElement("br",null),r==="idle"?null:r==="error"?"Error transferring":d.a.createElement(d.a.Fragment,null,d.a.createElement("p",null,r==="loading"?"Preparing sample transfer...":"Transferring to Volca Sample..."),d.a.createElement("progress",{value:t}),d.a.createElement("br",null),d.a.createElement("button",{onClick:()=>o.current()},"Cancel")),d.a.createElement("br",null))}var va=ba,Y=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});const ha=F.a.div({paddingLeft:"2rem"}),ya=F.a.div({height:"200px",backgroundColor:"#f3f3f3",maxWidth:"400px"});function he(e,t){const a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download=t,r.style.display="none",document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(a)}function Sa({sample:e,onSampleUpdate:t,onSampleDuplicate:a,onSampleDelete:r}){const[n,o]=Object(u.useState)(0),s=e&&e.metadata.sourceFileId;Object(u.useEffect)(()=>{o(0),s&&X(s,!1).then(b=>o(b.length))},[s]);const c=e&&e.id,l=Object(u.useCallback)(b=>c&&t(c,{scaleCoefficient:b}),[c,t]),{playAudioBuffer:i,isAudioBusy:p}=me();if(!e)return null;const f=Math.max(0,n-e.metadata.trimFrames[1]),y=Math.max(0,n-e.metadata.trimFrames[0]);return d.a.createElement(ha,null,d.a.createElement("h3",null,e.metadata.name),d.a.createElement("button",{type:"button",onClick:()=>a(e.id)},"Duplicate"),d.a.createElement("button",{type:"button",onClick:()=>{window.confirm(`Are you sure you want to delete ${e.metadata.name}?`)&&r(e.id)}},"Remove"),d.a.createElement("h4",null,"Last edited: ",new Date(e.metadata.dateModified).toLocaleString()),d.a.createElement("h4",null,"Sampled: ",new Date(e.metadata.dateSampled).toLocaleString()),d.a.createElement("label",null,d.a.createElement("h4",null,"Trim start"),d.a.createElement("input",{type:"number",value:e.metadata.trimFrames[0],step:1,min:0,max:f,onChange:b=>{if(n){const m=Number(b.target.value);t(e.id,{trimFrames:[Math.min(m,f),e.metadata.trimFrames[1]]})}else t(e.id,{trimFrames:[...e.metadata.trimFrames]})}})),d.a.createElement("label",null,d.a.createElement("h4",null,"Trim end"),d.a.createElement("input",{type:"number",value:e.metadata.trimFrames[1],step:1,min:0,max:y,onChange:b=>{if(n){const m=Number(b.target.value);t(e.id,{trimFrames:[e.metadata.trimFrames[0],Math.min(m,y)]})}else t(e.id,{trimFrames:[...e.metadata.trimFrames]})}})),d.a.createElement(ya,null,d.a.createElement(da,{onSetTrimFrames:()=>null,onSetScaleCoefficient:l,sample:e}),d.a.createElement("button",{type:"button",onClick:()=>Y(this,null,function*(){const{data:b}=yield J(e),m=yield R(b);i(m)}),disabled:p},"play"),d.a.createElement("button",{type:"button",onClick:()=>Y(this,null,function*(){const{data:b}=yield J(e),m=new Blob([b],{type:"audio/x-wav"});he(m,`${e.metadata.name}.wav`)})},"download"),d.a.createElement("button",{type:"button",onClick:()=>Y(this,null,function*(){const{sourceFileId:b,userFileInfo:m}=e.metadata,h=yield N.getSourceFileData(b),w=new Blob([h],{type:m?m.type:"audio/x-wav"});he(w,`${e.metadata.name}${m?m.ext:".wav"}`)})},"download (orig)")),d.a.createElement("h4",null,"Quality bit depth: ",e.metadata.qualityBitDepth),d.a.createElement("input",{type:"range",value:e.metadata.qualityBitDepth,step:1,min:8,max:16,onChange:b=>{const m=Number(b.target.value);t(e.id,{qualityBitDepth:m})}}),d.a.createElement("label",null,d.a.createElement("h4",null,"Slot number"),d.a.createElement("input",{type:"number",value:e.metadata.slotNumber,step:1,min:0,max:99,onChange:b=>{const m=Number(b.target.value);t(e.id,{slotNumber:m})}})),d.a.createElement(va,{sample:e}))}var wa=Sa,ga=I(9),V=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});let ye;function Q(){return ye=ye||new AudioContext(navigator.mediaDevices.getSupportedConstraints().sampleRate?{sampleRate:k}:{})}function Fa(){return V(this,null,function*(){const t=(yield navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="audioinput"),a=[];for(const r of t){const n=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:r.deviceId,channelCount:2},video:!1}),o=(yield navigator.mediaDevices.enumerateDevices()).find(({deviceId:c})=>r.deviceId===c).label,s=n.getAudioTracks().length;for(const c of n.getTracks())c.stop();a.push({device:{deviceId:r.deviceId,label:o},channelsAvailable:s})}return a})}let Z;function Ia(e){return V(this,arguments,function*({onData:t,onFinish:a}){const r=Q();Z=Z||r.audioWorklet.addModule("recorderWorkletProcessor.js"),yield Z;const n=new AudioWorkletNode(r,"recorder-worklet",{parameterData:{bufferSize:1024}});n.port.onmessage=s=>{if(s.data.eventType==="data"){const c=s.data.audioChannels;t(c)}s.data.eventType==="stop"&&a()};const o=n.parameters.get("isRecording");return o.setValueAtTime(1,r.currentTime),{recorderNode:n,stop(){o.setValueAtTime(0,r.currentTime)}}})}function Ca({channelCount:e,onData:t,onFinish:a}){const n=Q().createScriptProcessor(1024,e,e);let o=!1;return n.onaudioprocess=s=>{const c=Array(e).fill().map((l,i)=>s.inputBuffer.getChannelData(i));t(c),o&&a()},{recorderNode:n,stop(){o=!0}}}function Ea(e){return V(this,null,function*(){return typeof AudioWorkletNode=="undefined"?Ca(e):yield Ia(e)})}function Na(e){return V(this,arguments,function*({deviceId:t,channelCount:a,onStart:r}){const n=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:t,channelCount:a,sampleRate:k,echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},video:!1}),o=Q(),s=o.createMediaStreamSource(n),{recorderNode:c,stop:l}=yield Ea({channelCount:a,onData:b,onFinish:S});s.connect(c),c.connect(o.destination),r();const p=10*o.sampleRate;let f=0;const y=Array(a).fill([]);function b(C){let g=0;for(let E=0;E<a;E++){const W=C[E],L=W.length,A=W.slice(0,Math.min(L,p-f));ce(A),g||(g=A.length),y[E].push(A)}f+=g,f>=p&&(S(),l())}let m,h;const w=new Promise((C,g)=>{m=C,h=g});let v=!1;function S(){if(v)return;try{const g=y.map(L=>{const A=new Float32Array(L.reduce((K,Ua)=>K+Ua.length,0));let Fe=0;for(const K of L)A.set(K,Fe),Fe+=K.length;return A}),E=new ga.a;E.fromScratch(g.length,o.sampleRate,"32f",g);const W=E.toBuffer();m(W)}catch(g){h(g)}const C=n.getTracks();for(const g of C)g.stop();c.disconnect(o.destination),s.disconnect(c),v=!0}return{stop:l,mediaRecording:w}})}var Se=Object.getOwnPropertySymbols,Pa=Object.prototype.hasOwnProperty,Oa=Object.prototype.propertyIsEnumerable,Da=(e,t)=>{var a={};for(var r in e)Pa.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&Se)for(var r of Se(e))t.indexOf(r)<0&&Oa.call(e,r)&&(a[r]=e[r]);return a},we=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});const Aa=F.a.div({padding:"2rem"});let ge=null;function Ba({onRecordStart:e,onRecordFinish:t,onRecordError:a}){const[r,n]=Object(u.useState)(ge),[o,s]=Object(u.useState)(r?"ok":"pending"),[c,l]=Object(u.useState)("");Object(u.useEffect)(()=>{ge=r,s("ok")},[r]);const i=Object(u.useCallback)(()=>{Fa().then(v=>{v.length&&(n(new Map(v.map(S=>[S.device.deviceId,S]))),l(S=>S||v[0].device.deviceId))}).catch(v=>{if(v instanceof DOMException){if(v.name==="NotAllowedError"){s("denied");return}if(v.name==="NotFoundError"){s("unavailable");return}}throw v})},[]);Object(u.useEffect)(i,[i]);const[p,f]=Object(u.useState)(1);Object(u.useEffect)(()=>{const v=r&&r.get(c);v&&f(v.channelsAvailable)},[r,c]);const[y,b]=Object(u.useState)(null);Object(u.useEffect)(()=>{y&&a(y)},[y,a]);const[m,h]=Object(u.useState)({fn:()=>{}}),w=Object(u.useCallback)(()=>we(this,null,function*(){const{mediaRecording:v,stop:S}=yield Na({deviceId:c,channelCount:p,onStart:e});h({fn:S});let C;try{C=yield v}catch(g){b(g);return}t(C)}),[c,p,e,t]);return{captureDevices:r,accessState:o,selectedCaptureDeviceId:c,selectedChannelCount:p,recordingError:y,refreshCaptureDevices:i,setSelectedCaptureDeviceId:l,setSelectedChannelCount:f,beginRecording:w,stopRecording:m.fn}}function ka(e){var t=e,{captureState:a}=t,r=Da(t,["captureState"]);const{captureDevices:n,accessState:o,selectedCaptureDeviceId:s,selectedChannelCount:c,recordingError:l,refreshCaptureDevices:i,setSelectedCaptureDeviceId:p,setSelectedChannelCount:f,beginRecording:y,stopRecording:b}=Ba(r);return d.a.createElement(Aa,null,o==="denied"?d.a.createElement("p",null,"Looks like you didn't grant access to your audio input device. Please give Volca Sampler access, then"," ",d.a.createElement("button",{type:"button",onClick:i},"try again")):o==="unavailable"?d.a.createElement("p",null,"Volca Sampler couldn't find any audio input devices. Please connect one, then"," ",d.a.createElement("button",{type:"button",onClick:i},"try again")):d.a.createElement("div",null,d.a.createElement("label",null,"Capture Device",d.a.createElement("select",{value:s,onChange:m=>p(m.target.value)},n&&o==="ok"?[...n].map(([m,{device:h}])=>d.a.createElement("option",{key:m,value:m},h.label||m)):d.a.createElement("option",{value:"",disabled:!0},"Loading devices..."))),d.a.createElement("label",null,"Channel count",d.a.createElement("select",{value:c,onChange:m=>f(Number(m.target.value))},[1,2].map(m=>d.a.createElement("option",{key:m,value:m,disabled:!n||!n.has(s)||n.get(s).channelsAvailable<m},m))))),d.a.createElement("button",{type:"button",onClick:a==="capturing"?b:y,disabled:a==="preparing"},["capturing","preparing"].includes(a)?"Stop":"Record"),d.a.createElement("input",{type:"file",accept:"audio/*,.wav,.mp3,.ogg",onChange:m=>{if(m.target.files&&m.target.files.length){const h=m.target.files[0];h.arrayBuffer().then(w=>we(this,null,function*(){const v=new Uint8Array(w);let S;try{S=yield R(v)}catch(C){alert("Unsupported audio format detected");return}if(S.length>10*S.sampleRate){alert("Please select an audio file no more than 10 seconds long");return}r.onRecordFinish(v,h)}))}}}),a==="error"&&l||null)}var xa=ka,Ha=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{c(a.next(l))}catch(i){n(i)}},s=l=>{try{c(a.throw(l))}catch(i){n(i)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((a=a.apply(e,t)).next())});const Ma=F.a.h1({display:"flex",alignItems:"center",padding:"2rem",paddingBottom:"0px",marginBottom:"0px"}),ja=F.a.span({color:"red"}),Ra=F.a.span({textTransform:"uppercase",textDecoration:"underline"}),Ta=F.a.img({height:"1.6em",paddingLeft:"1rem"}),Va=F.a.div({padding:"2rem",display:"flex",height:"100%"}),Wa=F.a.div({width:"200px",flexShrink:0,paddingRight:"0.5rem",height:"100%"}),La=F.a.div({flexGrow:1});function Ka(){const[e,t]=Object(u.useState)(!1),[a,r]=Object(u.useState)(new Map),[n,o]=Object(u.useState)(null),[s,c]=Object(u.useState)(!0),[l,i]=Object(u.useState)("idle"),p=e?Ve:a;Object(u.useEffect)(()=>{N.getAllFromStorage().then(h=>{r(w=>new Map([...w,...h.map(v=>[v.id,v])]))}).finally(()=>{c(!1)})},[]),Object(u.useEffect)(()=>{p.size&&!(n&&p.has(n))&&o([...p.values()][0].id)},[p,n]);const f=Object(u.useCallback)(()=>i("capturing"),[]),y=Object(u.useCallback)((h,w)=>Ha(this,null,function*(){i("preparing");const v=yield je(h);let S="",C="";if(w){const E=w.name.lastIndexOf(".");E>0?(S=w.name.slice(0,E),C=w.name.slice(E)):S=w.name}else S="New one";const g=new N.Mutable({name:S,sourceFileId:v,userFileInfo:w&&{type:w.type,ext:C}});yield g.persist(),r(E=>new Map([[g.id,g],...E])),t(!1),o(g.id),i("idle")}),[]),b=Object(u.useCallback)(h=>{console.error(h),i("error")},[]),m=Object(u.useCallback)((h,w)=>{r(v=>{const S=v.get(h);if(S&&S instanceof N.Mutable){const C=S.update(w);if(C!==S)return new Map(v).set(S.id,C)}return v})},[]);return d.a.createElement("div",null,d.a.createElement(Ma,null,d.a.createElement(ja,null,"Volca Sample",d.a.createElement(Ra,null,"r")),d.a.createElement(Ta,{src:"volca_sample.png",alt:""})),d.a.createElement(Va,null,d.a.createElement("select",{value:JSON.stringify(e),onChange:h=>t(JSON.parse(h.target.value))},d.a.createElement("option",{value:"false"},"Your Samples"),d.a.createElement("option",{value:"true"},"Factory Samples")),d.a.createElement(Wa,null,s?"Loading...":null,d.a.createElement(Oe,{samples:p,selectedSampleId:l==="idle"?n:null,readonly:["capturing","preparing"].includes(l),onNewSample:()=>i("ready"),onSampleSelect:h=>{o(h),i("idle")}})),d.a.createElement(La,null,l==="idle"&&d.a.createElement(wa,{sample:n&&p.get(n)||null,onSampleUpdate:m,onSampleDuplicate:h=>{const w=p.get(h);if(w){const v=w.duplicate();r(S=>new Map([[v.id,v],...S])),t(!1),o(v.id)}},onSampleDelete:h=>{const w=p.get(h);w&&w instanceof N.Mutable&&(w.remove(),r(v=>{const S=new Map(v);return S.delete(w.id),S}))}}),l!=="idle"&&d.a.createElement(xa,{captureState:l,onRecordStart:f,onRecordFinish:y,onRecordError:b}))))}var _a=Ka,$a=e=>{e&&e instanceof Function&&I.e(3).then(I.bind(null,25)).then(({getCLS:t,getFID:a,getFCP:r,getLCP:n,getTTFB:o})=>{t(e),a(e),r(e),n(e),o(e)})};Ee.a.render(d.a.createElement(d.a.StrictMode,null,d.a.createElement(Ue,null,d.a.createElement(_a,null))),document.getElementById("root")),$a()}},[[22,1,2]]]);

//# sourceMappingURL=main.f6047f90.chunk.js.map