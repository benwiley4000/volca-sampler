(this["webpackJsonpvolca-sampler"]=this["webpackJsonpvolca-sampler"]||[]).push([[0],{11:function(X,ie,E){X.exports={"form-switch":"VolcaTransferControl_form-switch__1ZS81","form-check-input":"VolcaTransferControl_form-check-input__REQsM","nav-pills":"VolcaTransferControl_nav-pills__8dM77","nav-item":"VolcaTransferControl_nav-item__1lZOI","nav-link":"VolcaTransferControl_nav-link__3vJ08",active:"VolcaTransferControl_active__39Z84",modal:"VolcaTransferControl_modal__2ltkP","modal-dialog":"VolcaTransferControl_modal-dialog__oCJNH","modal-content":"VolcaTransferControl_modal-content__2DCx8","modal-body":"VolcaTransferControl_modal-body__3hAAt",transferInfoBox:"VolcaTransferControl_transferInfoBox__1Oduz",summary:"VolcaTransferControl_summary__2d9XG",transferInfoForModal:"VolcaTransferControl_transferInfoForModal___j7Z5",cannotTransfer:"VolcaTransferControl_cannotTransfer__2DUlP",errors:"VolcaTransferControl_errors__27gS3",invalidMessage:"VolcaTransferControl_invalidMessage__-m8Xq",transferButton:"VolcaTransferControl_transferButton__11MBQ",clearSpaceButton:"VolcaTransferControl_clearSpaceButton__2JHO0",preTransferModal:"VolcaTransferControl_preTransferModal__fLiiV",subtask:"VolcaTransferControl_subtask__1Xm5N",secondaryProgress:"VolcaTransferControl_secondaryProgress__2QWZh",progressAnnotation:"VolcaTransferControl_progressAnnotation__2zJ9A"}},12:function(X,ie,E){X.exports={"form-switch":"SampleList_form-switch__17ijL","form-check-input":"SampleList_form-check-input__3yTwH","nav-pills":"SampleList_nav-pills__DLID5","nav-item":"SampleList_nav-item__2lSgQ","nav-link":"SampleList_nav-link__sUmO0",active:"SampleList_active__4LCL3",modal:"SampleList_modal__J3ctB","modal-dialog":"SampleList_modal-dialog__3VaNW","modal-content":"SampleList_modal-content__1R10B","modal-body":"SampleList_modal-body__1INLi",waveformContainer:"SampleList_waveformContainer__2xxew",playbackActive:"SampleList_playbackActive__jKTC1",noSelect:"SampleList_noSelect__Xqj8q",listItem:"SampleList_listItem__1w0uC",sampleTitle:"SampleList_sampleTitle__QV9QT",name:"SampleList_name__37cpF",slot:"SampleList_slot__3rbFM",multiSelector:"SampleList_multiSelector__21u8u",multiSelect:"SampleList_multiSelect__3CSet",playbackButton:"SampleList_playbackButton__j3RJ-",emptyListMessage:"SampleList_emptyListMessage__3ji4v"}},123:function(X,ie,E){X.exports={"form-switch":"PluginConfirmModal_form-switch__6SPhH","form-check-input":"PluginConfirmModal_form-check-input__1-YhM","nav-pills":"PluginConfirmModal_nav-pills__3I1wv","nav-item":"PluginConfirmModal_nav-item__sR62x","nav-link":"PluginConfirmModal_nav-link__2zdbT",active:"PluginConfirmModal_active__2-vio",modal:"PluginConfirmModal_modal___snnS","modal-dialog":"PluginConfirmModal_modal-dialog__ijXTK","modal-content":"PluginConfirmModal_modal-content__2T-uY","modal-body":"PluginConfirmModal_modal-body__yz3QS",pluginConfirmModal:"PluginConfirmModal_pluginConfirmModal__LIuet"}},13:function(X,ie,E){X.exports={"form-switch":"WaveformEdit_form-switch__2DZid","form-check-input":"WaveformEdit_form-check-input__2TImp","nav-pills":"WaveformEdit_nav-pills__3uv7V","nav-item":"WaveformEdit_nav-item__1Cy-X","nav-link":"WaveformEdit_nav-link__rjUB_",active:"WaveformEdit_active__3qc2K",modal:"WaveformEdit_modal__18zXt","modal-dialog":"WaveformEdit_modal-dialog__3Bo89","modal-content":"WaveformEdit_modal-content___UGgZ","modal-body":"WaveformEdit_modal-body__33fKo",waveformAdjacentControls:"WaveformEdit_waveformAdjacentControls__12b8z",waveformContainer:"WaveformEdit_waveformContainer__Qq3MI",normalizeOnlySelection:"WaveformEdit_normalizeOnlySelection__-aGBS",cursor:"WaveformEdit_cursor__1Ntb3",trim:"WaveformEdit_trim__1GV76",playbackActive:"WaveformEdit_playbackActive__hTwgX",bar:"WaveformEdit_bar__1KFgt",handle:"WaveformEdit_handle__23NoG",time:"WaveformEdit_time__YX5rg",left:"WaveformEdit_left__3Jfpn",right:"WaveformEdit_right__35CjW",waveformOverlay:"WaveformEdit_waveformOverlay__3oZfw",clippingAlert:"WaveformEdit_clippingAlert__-Ql4y"}},147:function(X,ie,E){X.exports={waveformContainer:"WaveformReadonly_waveformContainer__RARS4"}},148:function(X,ie,E){X.exports={"form-switch":"ImportFromZip_form-switch__11vsE","form-check-input":"ImportFromZip_form-check-input__nSsxR","nav-pills":"ImportFromZip_nav-pills__5ylxp","nav-item":"ImportFromZip_nav-item__rt-U5","nav-link":"ImportFromZip_nav-link__f--MO",active:"ImportFromZip_active__2N89o",modal:"ImportFromZip_modal__3d38F","modal-dialog":"ImportFromZip_modal-dialog__3eRYb","modal-content":"ImportFromZip_modal-content__2u8pM","modal-body":"ImportFromZip_modal-body__3cNEr",importModal:"ImportFromZip_importModal__3hcGq"}},16:function(X,ie,E){X.exports={sampleMenuButtonFullWidth:"SampleMenu_sampleMenuButtonFullWidth__2B3CW",sampleMenuButtonsContainer:"SampleMenu_sampleMenuButtonsContainer__MPO05",exporting:"SampleMenu_exporting__g3lZ0",progress:"SampleMenu_progress__1AD9e",search:"SampleMenu_search__2EscQ",clearSearch:"SampleMenu_clearSearch__17ySf",offcanvasBody:"SampleMenu_offcanvasBody__1rgj6",listGroup:"SampleMenu_listGroup__IWtv7",accordion:"SampleMenu_accordion__1Igxo",accordionItem:"SampleMenu_accordionItem__1GO98",accordionBody:"SampleMenu_accordionBody__yBt0g",deleteModalForm:"SampleMenu_deleteModalForm__23Hzj",deleteModalHeader:"SampleMenu_deleteModalHeader__2DcST"}},162:function(X,ie,E){},163:function(X,ie,E){},201:function(X,ie,E){"use strict";E.r(ie);var s=E(0),e=E.n(s),ea=E(15),br=E.n(ea),ji=E(162),Ti=E(163),St=E(204),et=E(149),wr=E(38),ze=E.n(wr),Va=e.a.memo(function({onHeaderClick:t}){return e.a.createElement("div",{className:ze.a.titleBar},e.a.createElement(St.a,{fluid:"sm",className:ze.a.titleContainer},e.a.createElement("h1",{className:ze.a.title,onClick:t},e.a.createElement("span",{className:ze.a.titleText,"data-text":"Volca Sample"},"Volca Sample",e.a.createElement("span",{className:ze.a.titleR},"r"),e.a.createElement("svg",{viewBox:"0 0 150 150",preserveAspectRatio:"none",className:ze.a.titleStarburst},Array(24).fill().map((a,r,{length:o})=>e.a.createElement("polygon",{key:r,points:"75,70 75,80 150,75","transform-origin":"75 75",style:{"--rotation":`${r*360/o}deg`}})))),e.a.createElement("div",{className:ze.a.titleGraphic},e.a.createElement("img",{src:"volca_sample.png",alt:""})),e.a.createElement("div",{className:ze.a.tagline},e.a.createElement("h2",null,"for volca sample")))),e.a.createElement("svg",{width:0,height:0},e.a.createElement("filter",{id:"outline"},e.a.createElement("feMorphology",{in:"SourceAlpha",result:"DILATED",operator:"dilate",radius:"1"}),e.a.createElement("feFlood",{floodColor:"var(--stroke-color)",floodOpacity:"1",result:"PINK"}),e.a.createElement("feComposite",{in:"PINK",in2:"DILATED",operator:"in",result:"OUTLINE"}),e.a.createElement("feMerge",null,e.a.createElement("feMergeNode",{in:"OUTLINE"}),e.a.createElement("feMergeNode",{in:"SourceGraphic"})))))}),Ae=E(214),Ne=E(136),za=E(209),ke=E(152),W=E(94),C=E(211),se=E(212),ta=E(57),Sr=E(83),Ua=E.n(Sr),_r=E(153),Cr=E(28),Ue=E.n(Cr),Dt=E(216),Ga=E(122);const je=31250;function aa(n){return n.toLocaleString([],{dateStyle:"medium",timeStyle:"short"})}function tt(n,t){return`0:${n.toFixed(t).padStart(3+t,"0")}`}function ct(n){return`${Math.floor(n/60)}m ${Math.floor(n%60)}s`}const _t=(()=>{if(typeof window=="undefined")return"windows";const n=navigator.userAgent.toLowerCase();return n.includes("iphone")||n.includes("ipad")||n.includes("mac")&&navigator.maxTouchPoints>1?"ios":n.includes("android")?"android":n.includes("mac")?"mac":n.includes("linux")?"linux":"windows"})();var $a=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});const ut=6,na=ut*44;function ra(n,t){const a=Math.floor(ut*n.length/t);if(a===0)return{positive:new Float32Array,negative:new Float32Array};const r=new Float32Array(Math.floor(n.length/a)),o=new Float32Array(Math.floor(n.length/a));for(let i=0;i<r.length;i++){const u=new Float32Array(n.buffer,n.byteOffset+i*a*4,a);let c=0,l=0;for(const m of u)m>c&&(c=m),m<l&&(l=m);r[i]=c,o[i]=l}return{positive:r,negative:o}}function Ct(n,t){return $a(this,null,function*(){const a=Wt(n,t);return ra(a,na)})}function Qa(n,t=Symbol.for("")){const[a,r]=Object(s.useState)(null),o=Object(s.useRef)(n);o.current=n,Object(s.useEffect)(()=>{let u=!1;return(()=>$a(this,null,function*(){if(!u)try{const c=yield pa(o.current);if(u)return;r([n.id,c])}catch(c){const l=yield Qe(n.metadata.sourceFileId,Boolean(n.metadata.userFileInfo));if(u)return;r([n.id,l])}}))(),()=>{u=!0}},[n.id,n.metadata.plugins,n.metadata.sourceFileId,n.metadata.userFileInfo,t]);const i=Object(s.useRef)(n);return a&&n.id===a[0]&&(i.current=n),{sample:i.current,pluginProcessedAudioBuffer:a&&a[1]}}function Ya(n){const t=Object(s.useMemo)(()=>n?Wt(n,[0,0]):new Float32Array,[n]),[a,r]=Object(s.useState)(null),[o,i]=Object(s.useState)({width:0,height:0}),u=Object(s.useMemo)(()=>a&&(o.width||a.offsetWidth),[a,o]),c=Object(s.useMemo)(()=>!u||!t.length?{positive:new Float32Array,negative:new Float32Array}:ra(t,u),[u,t]);return{monoSamples:t,waveformRef:r,pixelWidth:u,peaks:c,onResize:i}}function la(n,t=!1){const{playAudioBuffer:a,iOSPrepareForAudio:r}=hn(),o=Object(s.useRef)(()=>{}),[i,u]=Object(s.useState)(null);Object(s.useEffect)(()=>{n&&i&&(u(null),i.fn())},[n,i]);const[c,l]=Object(s.useState)(0),[m,d]=Object(s.useState)(!1),[p,h]=Object(s.useState)("");Object(s.useEffect)(()=>{n&&h(tt(m?c*n.duration:n.duration,1))},[n,m,c]);const y=Object(s.useCallback)(g=>{if(m)o.current();else if(n)o.current=a(n,{onTimeUpdate(v){l(v/n.duration)},onEnded(){d(!1)}}),l(0),d(!0);else{_t==="ios"&&r();const v=g.target;u({fn:()=>v.dispatchEvent(g)})}},[m,a,n,r]);Object(s.useEffect)(()=>{if(!t)return;function g(v){document.querySelector('[role="dialog"]')||v.key===" "&&!(v.target instanceof HTMLInputElement)&&(v.preventDefault(),y(v))}return document.addEventListener("keydown",g,!0),()=>document.removeEventListener("keydown",g,!0)},[t,y]);const f=Object(s.useCallback)(()=>o.current(),[]);return{isPlaybackActive:m,playbackProgress:c,displayedTime:p,togglePlayback:y,stopPlayback:f}}var Pr=Object.defineProperty,kr=Object.defineProperties,Or=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,Ka=Object.prototype.hasOwnProperty,Za=Object.prototype.propertyIsEnumerable,oa=(n,t,a)=>t in n?Pr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,fe=(n,t)=>{for(var a in t||(t={}))Ka.call(t,a)&&oa(n,a,t[a]);if(xt)for(var a of xt(t))Za.call(t,a)&&oa(n,a,t[a]);return n},_e=(n,t)=>kr(n,Or(t)),Ge=(n,t)=>{var a={};for(var r in n)Ka.call(n,r)&&t.indexOf(r)<0&&(a[r]=n[r]);if(n!=null&&xt)for(var r of xt(n))t.indexOf(r)<0&&Za.call(n,r)&&(a[r]=n[r]);return a},Bt=(n,t,a)=>(oa(n,typeof t!="symbol"?t+"":t,a),a),pe=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});const Pt=Ue.a.createInstance({name:"audio_file_data",driver:Ue.a.INDEXEDDB}),kt=Ue.a.createInstance({name:"sample_metadata",driver:Ue.a.INDEXEDDB});function Ja(n){return pe(this,null,function*(){return(yield Pt.keys()).includes(n)})}function Xa(n,t){return pe(this,null,function*(){if(t&&(yield Ja(t)))throw new Error("Cannot store audio source file at already used id");const a=t||Object(Dt.a)();return yield Pt.setItem(a,n),a})}const ia="0.9.0",Mr={"0.1.0":n=>{const t=n,{clip:a}=t,r=Ge(t,["clip"]);return _e(fe({},r),{trimFrames:a.map(i=>Math.round(i*je)),metadataVersion:"0.2.0"})},"0.2.0":n=>pe(void 0,null,function*(){const t=n,{trimFrames:a}=t,r=Ge(t,["trimFrames"]),o=yield Qe(r.sourceFileId,!1),i=yield Ct(o,a),u={frames:a,waveformPeaks:i};return _e(fe({},r),{trim:u,metadataVersion:"0.3.0"})}),"0.3.0":n=>{const t=n,{dateSampled:a,dateModified:r}=t,o=Ge(t,["dateSampled","dateModified"]);return _e(fe({},o),{dateSampled:new Date(a).toISOString(),dateModified:new Date(r).toISOString(),metadataVersion:"0.4.0"})},"0.4.0":n=>pe(void 0,null,function*(){const t=n,{scaleCoefficient:a,trim:{frames:r,waveformPeaks:o}}=t,i=Ge(t,["scaleCoefficient","trim"]),u=yield Qe(i.sourceFileId,!1),c=Wt(u,r),l=rt(c);return _e(fe({},i),{normalize:a!==1,trim:{frames:r,waveformPeaks:_e(fe({},o),{normalizationCoefficient:1/l})},metadataVersion:"0.5.0"})}),"0.5.0":n=>{const t=n,{normalize:a}=t,r=Ge(t,["normalize"]),o=a?"selection":null;return _e(fe({},r),{normalize:o,metadataVersion:"0.6.0"})},"0.6.0":n=>_e(fe({},n),{pitchAdjustment:1,metadataVersion:"0.7.0"}),"0.7.0":n=>pe(void 0,null,function*(){const t=n,{trim:{frames:a,waveformPeaks:r}}=t,o=Ge(t,["trim"]),i=yield Qe(o.sourceFileId,!1),u={waveformPeaks:r,duration:i.duration-(a[0]+a[1])/je,srcDuration:i.duration};return _e(fe({},o),{trim:{frames:a},cachedInfo:u,metadataVersion:"0.8.0"})}),"0.8.0":(n,t)=>{const a=n,{cachedInfo:r}=a,o=Ge(a,["cachedInfo"]),i={waveformPeaks:r.waveformPeaks,postPluginFrameCount:Math.round(r.srcDuration*je),duration:r.duration,failedPluginIndex:-1};return t(i),_e(fe({},o),{plugins:[],metadataVersion:"0.9.0"})}},qa={"0.6.0":n=>pe(void 0,null,function*(){const t=n,{trim:{frames:a}}=t,r=Ge(t,["trim"]),o=yield Qe(n.sourceFileId,!1),i=yield Ct(o,a);return _e(fe({},r),{trim:{frames:a,waveformPeaks:i}})}),"0.7.0":n=>qa["0.6.0"](n),"0.8.0":n=>pe(void 0,null,function*(){const t=n,a=yield Qe(n.sourceFileId,!1),o={waveformPeaks:yield Ct(a,t.trim.frames),postPluginFrameCount:a.length,duration:a.duration-(t.trim.frames[0]+t.trim.frames[1])/je,srcDuration:a.duration};return _e(fe({},t),{cachedInfo:o})}),"0.9.0":n=>pe(void 0,null,function*(){return n})};let Lt=typeof window!="undefined"&&new URLSearchParams(window.location.search).has("reloaded_to_upgrade");function Ir(){const n=new URL(window.location.href),t=new URLSearchParams(window.location.search);t.set("reloaded_to_upgrade","true"),n.search=t.toString(),window.location.replace(n.href)}function en(){const n=new URL(window.location.href),t=new URLSearchParams(window.location.search);t.delete("reloaded_to_upgrade"),n.search=t.toString(),window.history.replaceState({},"",n),Lt=!1}function sa(n,t){return pe(this,null,function*(){let a=n,r=null;const o=i=>{r=i};for(;a.metadataVersion!==ia;){const i=Mr[a.metadataVersion];if(!i){if(t)throw new Error("Could not upgrade");Lt||Ir(),console.warn(`Failed to properly upgrade metadata for sample "${a.name}"`),a={name:a.name,sourceFileId:a.sourceFileId,metadataVersion:ia};break}a=yield i(a,o)}return{upgradedMetadata:a,cachedInfo:r}})}const $e=class{constructor({name:n,sourceFileId:t,trim:a,id:r=Object(Dt.a)(),userFileInfo:o=null,slotNumber:i=0,dateSampled:u=new Date().toISOString(),dateModified:c=u,useCompression:l=!0,qualityBitDepth:m=16,normalize:d="selection",pitchAdjustment:p=1,plugins:h=[]}){this.id=r,this.metadata={name:n,sourceFileId:t,trim:a,userFileInfo:o,slotNumber:i,dateSampled:u,dateModified:c,useCompression:l,qualityBitDepth:m,normalize:d,pitchAdjustment:p,plugins:h,metadataVersion:ia}}duplicate(n){const t=new $e.Mutable(_e(fe({},this.metadata),{name:`${this.metadata.name} (copy)`,dateModified:new Date().toISOString()}));return t.persist().then(()=>n&&n(t.id)),t}static cacheSourceFileData(n,t){this.sourceFileData.set(n,t),this.recentlyCachedSourceFileIds=[n,...this.recentlyCachedSourceFileIds.filter(r=>r!==n)];const a=this.recentlyCachedSourceFileIds.slice(this.MAX_CACHED);for(const r of a)this.sourceFileData.delete(r);this.recentlyCachedSourceFileIds=this.recentlyCachedSourceFileIds.slice(0,this.MAX_CACHED)}static getSourceFileData(n,t){return pe(this,null,function*(){if(!t){const r=this.sourceFileData.get(n);if(r)return r}if(n.includes(".")){const r=yield fetch(n);if(r.status>=400)return Promise.reject(new Error(`Failed to fetch source file "${n}"`));const o=yield r.arrayBuffer(),i=new Uint8Array(o);return t||this.cacheSourceFileData(n,i),i}const a=yield Pt.getItem(n);return a?a instanceof Uint8Array?(t||this.cacheSourceFileData(n,a),a):Promise.reject("Source data is of unexpected type"):Promise.reject("Missing source data")})}static getAllMetadataFromStore(){return pe(this,null,function*(){const n=new Map,t=new Map,a=[];return yield kt.iterate((r,o)=>{r&&a.push(sa(r).then(({upgradedMetadata:i,cachedInfo:u})=>{n.set(o,i),u&&t.set(o,u)}).catch(i=>{console.error(i),console.warn(`Failed to upgrade metadata "${o}" (${r.name}); ignoring.`)}))}),yield Promise.all(a),Lt&&en(),{sampleMetadata:n,cachedInfos:t}})}static getAllFromStorage(){return pe(this,null,function*(){const{sampleMetadata:n,cachedInfos:t}=yield this.getAllMetadataFromStore(),a=yield tn(),r=(yield Pt.keys()).concat(a.map(({sourceFileId:i})=>i));return{sampleContainers:[...n].map(([i,u])=>{const{sourceFileId:c}=u;return r.includes(c)?new $e.Mutable(fe({id:i},u)):(console.warn(`Found metadata "${u.name||i}" with missing data "${c}; ignoring.`),null)}).filter(Boolean).sort(mt),cachedInfos:t}})}static getByIdsFromStorage(n){return pe(this,null,function*(){return Promise.all(n.map(t=>pe(this,null,function*(){const a=yield kt.getItem(t),{upgradedMetadata:r}=yield sa(a),o=new $e.Mutable(fe({id:t},r)),{sourceFileId:i}=o.metadata;return this.recentlyCachedSourceFileIds.filter(u=>u!==i),this.sourceFileData.delete(i),Lt&&en(),o})))})}static importToStorage(n,t){return pe(this,null,function*(){const a=qa[t.metadataVersion];if(!a)throw console.error("Failed to import metadata",t),new Error("Failed to import metadata with no import migration");const r=yield a(t),{upgradedMetadata:o}=yield sa(r,!0),i=new $e.Mutable(fe({id:n},o));return yield i.persist(),i})}};let oe=$e;Bt(oe,"Mutable",class extends $e{constructor(t){super(t);setTimeout(()=>pe(this,null,function*(){(yield kt.keys()).includes(this.id)||console.warn(`Expected sample metadata container ${this.id} to be persisted`)}))}persist(){return pe(this,null,function*(){yield kt.setItem(this.id,this.metadata)})}update(t,a){const{id:r,metadata:o}=this,i=typeof t=="function"?t(o):t;if(Object.keys(i).every(l=>i[l]===o[l]))return this;const u=_e(fe(fe({},o),i),{dateModified:new Date().toISOString()}),c=new $e.Mutable(fe({id:r},u));return c.persist().then(a),c}remove(){return pe(this,null,function*(){if(yield kt.removeItem(this.id),this.metadata.sourceFileId.includes("."))return;const{sampleMetadata:t}=yield $e.getAllMetadataFromStore();for(const[,{sourceFileId:a}]of t)if(a===this.metadata.sourceFileId)return;yield Pt.removeItem(this.metadata.sourceFileId)})}}),Bt(oe,"sourceFileData",new Map),Bt(oe,"recentlyCachedSourceFileIds",[]),Bt(oe,"MAX_CACHED",10);let ca;function tn(){return ca||(ca=fetch("factory-samples.json").then(n=>n.json())),ca}function Ar(){return pe(this,null,function*(){const n=yield tn();return new Map(n.map(t=>[t.id,{sampleContainer:new oe(_e(fe({},t),{normalize:null,trim:{frames:[t.trim.frames[0],t.trim.frames[1]]}})),cachedInfo:{waveformPeaks:{positive:new Float32Array(Object(Ga.a)(t.cachedInfo.waveformPeaks.positive)),negative:new Float32Array(Object(Ga.a)(t.cachedInfo.waveformPeaks.negative))},postPluginFrameCount:t.cachedInfo.postPluginFrameCount,duration:t.cachedInfo.duration,failedPluginIndex:t.cachedInfo.failedPluginIndex}}]))})}function mt(n,t){return n.metadata.dateModified>t.metadata.dateModified?-1:t.metadata.dateModified>n.metadata.dateModified?1:0}var Nr=Object.defineProperty,jr=(n,t,a)=>t in n?Nr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,Tr=(n,t,a)=>(jr(n,typeof t!="symbol"?t+"":t,a),a);class Rr{constructor(){Tr(this,"unlockPromise",Promise.resolve())}lock(){let t=()=>{};const a=new Promise(o=>t=o),r=this.unlockPromise.then(()=>t);return this.unlockPromise=a,r}}var Ot=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});const an=250,Fr=200,Dr=typeof window=="undefined"?"":window.location.protocol==="http:"?"http://127.0.0.1:3000":"https://volca-sampler-plugin.benwiley.org",xe=typeof window=="undefined"?{}:document.createElement("div");typeof window!="undefined"&&(xe.id="plugins",document.body.appendChild(xe));class ua extends Error{}const at={},nn=new Rr;function Mt(n,t){return Ot(this,null,function*(){let a=()=>{},r=()=>{};at[n]=new Promise((l,m)=>{a=l,r=m});const o=yield nn.lock(),i=document.createElement("iframe");if(i.id=n,i.hidden=!0,i.title="plugin-context",i.setAttribute("sandbox","allow-scripts"),i.src=`${Dr}${window.location.pathname}plugin-context.html`,xe.appendChild(i),yield new Promise(l=>i.addEventListener("load",l,{once:!0})),!i.contentWindow)throw new Error("Expected iframe content window");const u=Object(Dt.a)();i.contentWindow.postMessage({messageType:"pluginInstall",messageId:u,pluginSource:t},"*");let c={};try{yield new Promise((l,m)=>{let d;const p=({source:h,data:y})=>{if(h===i.contentWindow&&y.messageId===u){if(y.messageType==="messageReceived"){d=setTimeout(()=>{console.error(`Plugin took too long to install (${an}+ milliseconds):`,n),m(),window.removeEventListener("message",p)},an);return}y.messageType==="pluginInstall"&&(y.error?(console.error("Plugin failed to install:",n),m()):(c=y.params,l()),clearTimeout(d),window.removeEventListener("message",p))}};window.addEventListener("message",p)})}catch(l){throw r(),xe.removeChild(i),l}finally{o()}a(c)})}function xr(n,t,a){return Ot(this,null,function*(){if(!n.contentWindow)throw new Error("Expected iframe content window");const r=yield nn.lock(),o=t.getChannelData(0),{sampleRate:i}=t,u=Object(Dt.a)();n.contentWindow.postMessage({messageType:"sampleTransform",messageId:u,audioData:o,sampleRate:i,params:a},"*");let c;try{c=yield new Promise((m,d)=>{let p;const h=({source:y,data:f})=>{if(y===n.contentWindow&&f.messageId===u){if(f.messageType==="messageReceived"){const g=Fr*t.duration;p=setTimeout(()=>{console.error(`Plugin took too long to run: (${g}+ milliseconds):`,n.id),d(new ua("Plugin took too long to return")),window.removeEventListener("message",h)},g);return}f.messageType==="sampleTransform"&&(f.error?f.error==="Invalid parameters"?(console.error("Invalid plugin input:",n.id),d(new Error("Invalid plugin input"))):(console.error("Plugin call failed:",n.id),d(new ua("Plugin failed to run"))):m(f.newAudioData),clearTimeout(p),window.removeEventListener("message",h))}};window.addEventListener("message",h)})}catch(m){throw m instanceof Error&&m.message==="Invalid plugin input"||(n.dispatchEvent(new Event("plugin-error",{bubbles:!0})),xe.removeChild(n)),m}finally{r()}const l=new AudioBuffer({length:c.length,sampleRate:i});return l.copyToChannel(c,0),l})}function dt(n){return{getParams(){return at[n]},sampleTransform(t,a){return Ot(this,null,function*(){yield at[n];let r=document.getElementById(n);if(r&&r instanceof HTMLIFrameElement)return xr(r,t,a);throw new Error("Expected plugin to exist")})},onPluginError(t){Promise.resolve(at[n]).catch(t);const a=r=>{r.target instanceof HTMLIFrameElement&&r.target.id===n&&t()};return xe.addEventListener("plugin-error",a),()=>{xe.removeEventListener("plugin-error",a)}},replaceSource(t){return Ot(this,null,function*(){let a=document.getElementById(n);const r=at[n];if(a&&a instanceof HTMLIFrameElement){a.id="";try{yield Mt(n,t)}catch(i){throw a.id=n,at[n]=r,i}xe.removeChild(a);let o=document.getElementById(n);o&&o.dispatchEvent(new Event("sourceUpdate",{bubbles:!0}))}else throw new Error("Expected plugin to exist")})},remove(){let t=document.getElementById(n);if(t&&t instanceof HTMLIFrameElement)xe.removeChild(t),delete at[n];else throw new Error("Expected plugin to exist")}}}function rn(n){return Ot(this,null,function*(){const t=new TextEncoder().encode(n),a=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(a)).map(o=>o.toString(16).padStart(2,"0")).join("")})}function ma(n){const t=document.getElementById(n);return Boolean(t&&t instanceof HTMLIFrameElement)}function Br(n){const t={};for(const[a,r]of Object.entries(n))t[a]=r.value;return t}var ln=Math.pow,nt=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});function It(n,t){const a=t.map(u=>Math.max(u,0));if(a[0]+a[1]>=n.length)return new Float32Array(1);const r=4,o=n.byteOffset+a[0]*r,i=n.length-a[0]-a[1];return new Float32Array(n.buffer,o,i)}function Wt(n,t,a){const r=t.map(c=>Math.max(c,0)),o=n.length-r[0]-r[1],i=a||new Float32Array(o),u=Array(n.numberOfChannels).fill().map((c,l)=>It(n.getChannelData(l),r));for(let c=0;c<o;c++){let l=0;for(let m=0;m<u.length;m++)l+=u[m][c];l/=u.length,i[c]=l}return i}function rt(n){let t=0;for(const a of n){const r=Math.abs(a);r>t&&(t=r)}return t}function Lr(n,t){if(t!==1)for(let a=0;a<n.length;a++)n[a]*=t}function on(n){const t=rt(n);return Lr(n,1/t),t}function Wr(n,t){const a=ln(2,t-1);for(let r=0;r<n.length;r++)n[r]=Math.round(n[r]*a)/a}function sn(n){for(let t=0;t<n.length;t++)n[t]>1?n[t]=1:n[t]<-1&&(n[t]=-1)}function Hr(n){const t=n.length,a=n[0].length,r=new Float32Array(t*a);for(let o=0;o<r.length;o++){const i=t*o;for(let u=0;u<t;u++)r[i+u]=n[u][o]}return r}function cn(n){const t=new Int16Array(n.length),a=ln(2,15);for(let r=0;r<n.length;r++)t[r]=Math.max(Math.min(a-1,a*n[r]),-a);return t}function un(){return window.AudioContext||window.webkitAudioContext}let mn;function dn(){const n=un();return mn=mn||new n({sampleRate:je})}function ft(n){return nt(this,null,function*(){const t=new Uint8Array(n);return yield new Promise((r,o)=>{dn().decodeAudioData(t.buffer,r,o)})})}function Qe(n,t){return nt(this,null,function*(){const a=yield oe.getSourceFileData(n),r=yield ft(a);if(t)for(let o=0;o<r.numberOfChannels;o++)sn(r.getChannelData(o));return r})}class da extends Error{constructor(t,a){super(t);this.pluginIndex=a}}const fa=new WeakMap;function pa(n){return nt(this,null,function*(){{const r=fa.get(n.metadata.plugins);if(r)return r}const t=(()=>nt(this,null,function*(){const{sourceFileId:r,userFileInfo:o,plugins:i}=n.metadata,u=yield Qe(r,Boolean(o));let c;u.numberOfChannels===1?c=u:(c=new AudioBuffer({length:u.length,sampleRate:u.sampleRate,numberOfChannels:1}),Wt(u,[0,0],c.getChannelData(0)));let l=c,m=0;for(const{pluginName:d,pluginParams:p,isBypassed:h}of i){if(!h){const y=dt(d);try{l=yield y.sampleTransform(l,p)}catch(f){throw f instanceof ua?new da(f&&f instanceof Error&&f.message?f.message:"Plugin failed",m):f}}m++}return l}))();fa.set(n.metadata.plugins,t);let a;try{a=yield t}finally{setTimeout(()=>{fa.delete(n.metadata.plugins)},100)}return a})}const ha=new WeakMap;function fn(n,t,a){return nt(this,null,function*(){if(a){const i=ha.get(n);if(i)return i}const r=(()=>nt(this,null,function*(){const{qualityBitDepth:i,normalize:u,trim:{frames:c},pitchAdjustment:l}=n.metadata;if(i<8||i>16||!Number.isInteger(i))throw new Error(`Expected bit depth between 8 and 16. Received: ${i}`);const m=u==="all"?t.getChannelData(0):It(t.getChannelData(0),c);u==="all"&&on(m);const d=u==="all"?It(m,c):m;u==="selection"&&on(d);const p=ra(d,na),y=!isNaN(l)&&l!==1&&l>=.5&&l<=2?new Float32Array(Object(_r.a)(d,je,Math.round(je/l))):d;a&&i<16&&Wr(y,i);const f=cn(y),g=f.length*2,v=Ua()({channels:1,sampleRate:t.sampleRate,bitDepth:16,dataLength:g}),I=new Uint8Array(v.length+g);return I.set(v),I.set(new Uint8Array(f.buffer),v.length),{data:I,sampleRate:16,cachedInfo:{waveformPeaks:p,postPluginFrameCount:t.length,duration:f.length/t.sampleRate,failedPluginIndex:-1}}}))();a&&ha.set(n,r);let o;try{o=yield r}finally{a&&setTimeout(()=>{ha.delete(n)},100)}return o})}function ga(n,t){return nt(this,null,function*(){const a=yield pa(n);return fn(n,a,t)})}function Vr(){if(_t!=="ios")return document.createElement("audio");function n(o,i){let u=i;for(;o>1;o--)u+=i;return u}const t="data:audio/mpeg;base64,//uQx"+n(23,"A")+"WGluZwAAAA8AAAACAAACcQCA"+n(16,"gICA")+n(66,"/")+"8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkI"+n(320,"A")+"//sQxAADgnABGiAAQBCqgCRMAAgEAH"+n(15,"/")+"7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq"+n(18,"/")+"9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAw"+n(97,"V")+"Q==",a=document.createElement("div");a.innerHTML="<audio x-webkit-airplay='deny'></audio>";const r=a.children.item(0);return r.controls=!1,r.disableRemotePlayback=!0,r.preload="auto",r.src=t,r.loop=!0,r.load(),r}const zr={playAudioBuffer(n,t){throw new Error("Must render AudioPlaybackContextProvider")},iOSPrepareForAudio(){throw new Error("Must render AudioPlaybackContextProvider")}},pn=Object(s.createContext)(zr);function Ur({children:n}){const[t]=Object(s.useState)(Vr),a=Object(s.useRef)(u=>{}),r=Object(s.useCallback)((u,{onTimeUpdate:c=()=>null,onEnded:l=()=>null}={})=>{a.current(!0);const m=dn(),d=m.createBufferSource();d.buffer=u,d.connect(m.destination);let p=0;function h(){d.start();const v=m.currentTime;c(0),p=requestAnimationFrame(I);function I(){c(m.currentTime-v),p=requestAnimationFrame(I)}}_t==="ios"?t.play().then(h):h();let y=!1;function f(v){l(),!v&&_t==="ios"&&t.pause()}d.addEventListener("ended",()=>{y||(c(u.duration),f()),cancelAnimationFrame(p)});function g(v){y||(d.stop(),cancelAnimationFrame(p),f(v),y=!0)}return a.current=g,g},[t]),o=Object(s.useCallback)(()=>{t.play()},[t]),i=Object(s.useMemo)(()=>({playAudioBuffer:r,iOSPrepareForAudio:o}),[r,o]);return Object(s.createElement)(pn.Provider,{value:i},n)}function hn(){return Object(s.useContext)(pn)}var Gr=E(134),$r=E(135),Qr=Object.defineProperty,gn=Object.getOwnPropertySymbols,Yr=Object.prototype.hasOwnProperty,Kr=Object.prototype.propertyIsEnumerable,vn=(n,t,a)=>t in n?Qr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,En=(n,t)=>{for(var a in t||(t={}))Yr.call(t,a)&&vn(n,a,t[a]);if(gn)for(var a of gn(t))Kr.call(t,a)&&vn(n,a,t[a]);return n};const Zr=Gr.a.canvas({width:"100%",height:"100%",display:"block",imageRendering:"pixelated",backgroundColor:({$opaque:n})=>n?"white":"unset"});function Jr(n,t){function a(o,i){n.width=o,n.height=i}a(n.offsetWidth,n.offsetHeight),t({width:n.offsetWidth,height:n.offsetHeight});const r=new $r.a(([o])=>{const{width:i,height:u}=o.contentRect;a(i,u),t({width:i,height:u})});return r.observe(n),()=>r.disconnect()}function Xr(n,t,a){const r=getComputedStyle(document.documentElement),o=r.getPropertyValue("--bs-primary"),i=r.getPropertyValue("--bs-primary-darkened"),u=n.getContext("2d");u.imageSmoothingEnabled=!1;const{width:c,height:l}=n;u.clearRect(0,0,c,l);const m=Math.floor(l*(2/3))+1;u.fillStyle=o,t.positive.forEach((p,h)=>{const y=m*p,f=Math.max(Math.round(a*y),1);u.fillRect(h*ut,m-f,ut-1,f)});const d=l-m;u.fillStyle=i,t.negative.forEach((p,h)=>{const y=d*p*-1,f=Math.round(a*y);u.fillRect(h*ut,m,ut-1,f)})}function qr({peaks:n,scaleCoefficient:t,waveformRef:a,opaque:r,onResize:o}){const i=Object(s.useRef)(null);Object(s.useImperativeHandle)(a,()=>i.current);const[u,c]=Object(s.useState)(Symbol()),l=Object(s.useRef)({width:0,height:0});return Object(s.useLayoutEffect)(()=>{if(!i.current)throw new Error("Canvas should be defined");return l.current.width=i.current.offsetWidth,l.current.height=i.current.offsetHeight,o&&o(En({},l.current)),Jr(i.current,({width:m,height:d})=>{(m!==l.current.width||d!==l.current.height)&&(c(Symbol()),l.current.width=m,l.current.height=d,o&&o(En({},l.current)))})},[o]),Object(s.useLayoutEffect)(()=>{const m=i.current;if(!m)throw new Error("Canvas should be defined");let d=requestAnimationFrame(()=>{d=requestAnimationFrame(()=>{Xr(m,n,t)})});return()=>cancelAnimationFrame(d)},[n,t,u]),e.a.createElement(Zr,{ref:i,$opaque:r})}var Ht=qr,yn=E(84),bn=E(85),wn=E(86);function Vt(n,t){const a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=t,r.style.display="none",document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(a)}var el=E(32),Ye=E.n(el),tl=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())}),Sn=e.a.memo(function({isPlaybackActive:t,playbackProgress:a,displayedTime:r,downloadFilename:o,wavFile:i,togglePlayback:u}){const c=Object(s.useCallback)(()=>tl(this,null,function*(){if(i){const l=new Blob([i],{type:"audio/x-wav"});Vt(l,o)}}),[o,i]);return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:[Ye.a.playbackOverlay,t?Ye.a.playbackActive:""].join(" "),style:{"--playback-progress":`${100*a}%`}},e.a.createElement("div",{className:Ye.a.playback})),e.a.createElement("div",{className:Ye.a.playbackButtonContainer},e.a.createElement(Ae.a,{delay:{show:400,hide:0},overlay:e.a.createElement(Ne.a,null,"Preview how your sample will sound on the volca sample")},e.a.createElement(W.a,{variant:"dark",onClick:l=>u(l.nativeEvent)},t?e.a.createElement(bn.a,null):e.a.createElement(yn.a,null))),r&&e.a.createElement("span",null,r)),e.a.createElement(Ae.a,{delay:{show:400,hide:0},overlay:e.a.createElement(Ne.a,null,"Download a copy of the audio that will be transferred to the volca sample")},e.a.createElement(W.a,{className:Ye.a.downloadButton,type:"button",variant:"dark",size:"sm",onClick:c,disabled:!i},e.a.createElement(wn.a,null))))}),va=E(205),zt=E(206),al=e.a.memo(function({sampleId:t,normalize:a,onSampleUpdate:r}){return e.a.createElement("div",null,e.a.createElement(Ae.a,{delay:{show:400,hide:0},overlay:e.a.createElement(Ne.a,null,"Normalization boosts your sample's volume so its peak is at the same level as your other normalized samples")},e.a.createElement(se.a.Label,null,"Normalize")),e.a.createElement("br",null),e.a.createElement(va.a,null,["off","all","selection"].map(o=>e.a.createElement(Ae.a,{key:o,delay:{show:400,hide:0},overlay:e.a.createElement(Ne.a,null,o==="all"?"Normalized with respect to peak amplitude for full sampled audio":o==="selection"?"Normalized with respect to peak amplitude for selected audio":"Kept at originally recorded volume")},e.a.createElement(zt.a,{id:"normalizeType",type:"radio",size:"sm",variant:"outline-secondary",name:"normalize",value:o,checked:o==="off"?!a:o===a,onClick:()=>{r(t,{normalize:o==="off"?null:o})}},o==="all"?"All audio":o==="selection"?"Selected audio":"Off")))))}),nl=Object.defineProperty,rl=Object.defineProperties,ll=Object.getOwnPropertyDescriptors,_n=Object.getOwnPropertySymbols,ol=Object.prototype.hasOwnProperty,il=Object.prototype.propertyIsEnumerable,Ea=(n,t,a)=>t in n?nl(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,sl=(n,t)=>{for(var a in t||(t={}))ol.call(t,a)&&Ea(n,a,t[a]);if(_n)for(var a of _n(t))il.call(t,a)&&Ea(n,a,t[a]);return n},cl=(n,t)=>rl(n,ll(t)),Ke=(n,t,a)=>(Ea(n,typeof t!="symbol"?t+"":t,a),a),Be=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())}),Ut;const At=Ue.a.createInstance({name:"sample_cached_info",driver:Ue.a.INDEXEDDB}),pt=class{constructor({sampleContainer:n,cachedInfo:t}){this.sampleContainer=n,this.cachedInfo=t}getPreviewAudio(){return pt.getPreviewAudioData(this.sampleContainer)}static cachePreviewAudioData(n,t){return Be(this,null,function*(){const a=yield ft(t);this.previewWavData.set(n,t),this.previewAudioBuffers.set(n,a),this.recentlyBufferedSampleIds=[n,...this.recentlyBufferedSampleIds.filter(o=>o!==n)];const r=this.recentlyBufferedSampleIds.slice(this.MAX_CACHED);for(const o of r)this.previewWavData.delete(o),this.previewAudioBuffers.delete(o);this.recentlyBufferedSampleIds=this.recentlyBufferedSampleIds.slice(0,this.MAX_CACHED)})}static getPreviewAudioData(n){return Be(this,null,function*(){let t=this.previewWavData.get(n.id),a=this.previewAudioBuffers.get(n.id);if(!t){a=void 0;const{data:r}=yield ga(n,!0);t=r}return a||(a=yield ft(t)),this.previewWavData.set(n.id,t),this.previewAudioBuffers.set(n.id,a),{wavData:t,audioBuffer:a}})}static getAllCachedInfoFromStore(){return Be(this,null,function*(){const n=new Map;return yield At.iterate((t,a)=>{try{t.waveformPeaks&&t.waveformPeaks.positive instanceof Float32Array&&t.waveformPeaks.negative instanceof Float32Array&&t.duration&&n.set(a,t)}catch(r){console.error(r)}}),n})}static getCachedInfoByIdsFromStorage(n){return Be(this,null,function*(){return Promise.all(n.map(t=>At.getItem(t)))})}static importToStorage(n){return Be(this,null,function*(){let t;try{const{cachedInfo:r}=yield ga(n,!0);t=r}catch(r){const o=yield Qe(n.metadata.sourceFileId,!1),i=yield Ct(o,n.metadata.trim.frames),{frames:u}=n.metadata.trim,{pitchAdjustment:c}=n.metadata;t={waveformPeaks:i,postPluginFrameCount:o.length,duration:(o.duration-(u[0]+u[1])/je)/c,failedPluginIndex:r instanceof da?r.pluginIndex:-1}}const a=new pt.Mutable({sampleContainer:n,cachedInfo:t});return yield a.persist(),a})}};let de=pt;Ke(de,"Mutable",(Ut=class extends pt{constructor({sampleContainer:n,cachedInfo:t}){super({sampleContainer:n,cachedInfo:t});Ke(this,"showPersistenceWarning",!0),setTimeout(()=>Be(this,null,function*(){this.showPersistenceWarning&&((yield At.keys()).includes(this.sampleContainer.id)||console.warn(`Expected cache for sample ${this.sampleContainer.id} to be persisted`))}))}persist(){return Be(this,null,function*(){yield At.setItem(this.sampleContainer.id,this.cachedInfo)})}update(n){return Be(this,null,function*(){if(n===this.sampleContainer)return this;let t,a=n;try{const o=yield pa(a);if(n instanceof oe.Mutable&&o.length!==this.cachedInfo.postPluginFrameCount){const c=o.length/this.cachedInfo.postPluginFrameCount;yield new Promise(l=>{a=n.update(({trim:m})=>({trim:{frames:[Math.max(Math.round(m.frames[0]*c),0),Math.max(Math.round(m.frames[1]*c),0)]}}),l)})}const{data:i,cachedInfo:u}=yield fn(a,o,!0);yield pt.cachePreviewAudioData(a.id,i),t=u}catch(o){t=cl(sl({},this.cachedInfo),{failedPluginIndex:o instanceof da?o.pluginIndex:-1})}const r=new pt.Mutable({sampleContainer:a,cachedInfo:t});return yield r.persist(),r})}remove(){return Be(this,null,function*(){yield At.removeItem(this.sampleContainer.id)})}},Ke(Ut,"Upgraded",class extends Ut{constructor(){super(...arguments);Ke(this,"showPersistenceWarning",!1)}}),Ut)),Ke(de,"previewWavData",new Map),Ke(de,"previewAudioBuffers",new Map),Ke(de,"recentlyBufferedSampleIds",[]),Ke(de,"MAX_CACHED",10);function ya(n,t=!0){const[a,r]=Object(s.useState)({});return Object(s.useEffect)(()=>{t&&(n==null||n.getPreviewAudio().then(r))},[n,t]),a}var ul=E.p+"static/media/scissors-cutting.e79733cb.svg",ml=E(13),be=E.n(ml),dl=e.a.memo(function({sample:t,sampleCache:a,editCacheInvalidator:r,onSampleUpdate:o}){const{wavData:i,audioBuffer:u}=ya(a),{sample:{id:c,metadata:{name:l,trim:{frames:m},normalize:d}},pluginProcessedAudioBuffer:p}=Qa(t,r),{monoSamples:h,waveformRef:y,pixelWidth:f,peaks:g,onResize:v}=Ya(p),I=Object(s.useMemo)(()=>Math.max(rt(g.negative),rt(g.positive)),[g]),A=Object(s.useMemo)(()=>{if(!p)return 0;const G=It(h,m);return rt(G)},[p,h,m]),O=d==="selection"?1/A:1/I,[T,F]=Object(s.useState)({trimFrames:m,cursor:null});Object(s.useEffect)(()=>{F({trimFrames:m,cursor:null})},[m]);const B=h.length||a&&a.cachedInfo.postPluginFrameCount||0,U=Object(s.useMemo)(()=>{if(!B||!f)return[0,0];const G=f/B;return T.trimFrames.map(Z=>Z*G)},[f,B,T.trimFrames]),k=Object(s.useRef)(T);k.current=T;const x=Object(s.useRef)(t.id);x.current=t.id;const M=Object(s.useCallback)(()=>{if(c!==x.current)return;const{trimFrames:G}=k.current;o(c,Z=>Z.trim.frames.every((P,K)=>G[K]===P)?Z:{trim:{frames:G}})},[c,o]),b=Object(s.useRef)(!1);Object(s.useEffect)(()=>{b.current&&(M(),b.current=!1)},[T,M]);const S=Object(s.useCallback)(()=>{b.current=!0,F({trimFrames:[0,0],cursor:null})},[]),w=Object(s.useRef)(null),_=Object(s.useRef)(null),D=Object(s.useRef)(null);{const G=Object(s.useRef)(null),Z=Object(s.useRef)(null),P=Object(s.useRef)(null),K=Object(s.useRef)(!1),ee=Object(s.useRef)(null);Object(s.useLayoutEffect)(()=>{ee.current&&(clearTimeout(ee.current),ee.current=null)},[T]);const N=Object(s.useMemo)(()=>{if(!f||!h.length)return null;const j=Math.max(2e3,Math.ceil(10*h.length/f));return{pixelWidth:f,monoSamplesLength:h.length,minFrameWidth:j}},[f,h.length]);Object(s.useEffect)(()=>{if(!N||!w.current||!_.current||!D.current)return;const R=w.current,j=_.current,H=D.current,{pixelWidth:V,monoSamplesLength:$,minFrameWidth:te}=N;let le=0;function Y(){le=H.getBoundingClientRect().left}function Ee(z){z instanceof TouchEvent&&z.preventDefault(),document.body.style.userSelect="none";const{pageX:re}=z instanceof MouseEvent?z:z.touches[0];G.current=re}function he(z){z instanceof TouchEvent&&z.preventDefault(),document.body.style.userSelect="none";const{pageX:re}=z instanceof MouseEvent?z:z.touches[0];Z.current=re}function Re(z){if(z instanceof TouchEvent&&z.preventDefault(),z.detail===2){S();return}document.body.style.userSelect="none";const{clientX:re}=z instanceof MouseEvent?z:z.touches[0];Y();const Pe=Math.max(0,Math.min(V,re-le)),Me=Pe/V,ge=Math.round($*Me),it=ge+te,st=it<$?it:ge-te;st<0||(F({trimFrames:[Math.min(ge,st),$-1-Math.max(ge,st)],cursor:Pe-1}),P.current=ge)}function qe(z){const re=z/V,Pe=Math.round($*re);F(({trimFrames:Me})=>{let ge=Me[0]+Pe;return ge=Math.min(ge,$-Me[1]-te),ge=Math.max(ge,0),{trimFrames:[ge,Me[1]],cursor:null}})}function ot(z){if(G.current===null)return;z instanceof TouchEvent&&z.preventDefault();const{pageX:re}=z instanceof MouseEvent?z:z.touches[0],Pe=re-G.current;Pe&&(qe(Pe),G.current=re)}function bt(z){const re=z/V,Pe=Math.round($*re);F(({trimFrames:Me})=>{let ge=Me[1]+Pe;return ge=Math.min(ge,$-Me[0]-te),ge=Math.max(ge,0),{trimFrames:[Me[0],ge],cursor:null}})}function Ba(z){if(Z.current===null)return;z instanceof TouchEvent&&z.preventDefault();const{pageX:re}=z instanceof MouseEvent?z:z.touches[0],Pe=Z.current-re;Pe&&(bt(Pe),Z.current=re)}let qt=!1;function vr(z){if(G.current!==null)return;let re=!0;switch(z.key){case"ArrowLeft":qe(-1);break;case"ArrowRight":qe(1);break;default:re=!1;break}re&&(z.stopPropagation(),z.preventDefault(),qt=!0)}function Er(z){if(Z.current!==null)return;let re=!0;switch(z.key){case"ArrowLeft":bt(1);break;case"ArrowRight":bt(-1);break;default:re=!1;break}re&&(z.stopPropagation(),z.preventDefault(),qt=!0)}function La(z){if(P.current===null)return;z instanceof TouchEvent&&z.preventDefault();const re=P.current,{clientX:Pe}=z instanceof MouseEvent?z:z.touches[0],Me=Math.max(0,Math.min(V,Pe-le)),ge=Me/V,it=Math.max(0,Math.min($-1,Math.round($*ge)));if(it!==P.current){K.current=!0;const st=re+te,Wa=re-te,Ha=it>re?st<$?Math.max(it,st):Wa:Wa>=0?Math.min(it,Wa):st;F({trimFrames:[Math.min(re,Ha),$-1-Math.max(re,Ha)],cursor:re<Ha?Me:Me-1})}}function yr(z){ot(z),Ba(z),La(z)}function ye(z){(G.current!==null||Z.current!==null||P.current!==null||qt)&&((z instanceof TouchEvent||z instanceof KeyboardEvent)&&z.preventDefault(),P.current&&!K.current&&z.detail===1?ee.current=setTimeout(()=>{ee.current=null,M()},250):M(),G.current=null,Z.current=null,P.current=null,K.current=!1,qt=!1),document.body.style.userSelect="unset"}function wt(z){z.target instanceof Node&&H.contains(z.target)||ee.current&&(clearTimeout(ee.current),ee.current=null,M())}return R.addEventListener("touchstart",Ee),R.addEventListener("mousedown",Ee),j.addEventListener("touchstart",he),j.addEventListener("mousedown",he),H.addEventListener("touchstart",Re),H.addEventListener("mousedown",Re),R.addEventListener("touchmove",ot),j.addEventListener("touchmove",Ba),R.addEventListener("keydown",vr),j.addEventListener("keydown",Er),H.addEventListener("touchmove",La),window.addEventListener("mousemove",yr),R.addEventListener("touchend",ye),R.addEventListener("touchcancel",ye),R.addEventListener("keyup",ye),j.addEventListener("touchend",ye),j.addEventListener("keyup",ye),j.addEventListener("touchcancel",ye),H.addEventListener("touchend",ye),H.addEventListener("touchcancel",ye),window.addEventListener("mouseup",ye),window.addEventListener("touchstart",wt,{capture:!0}),window.addEventListener("mousedown",wt,{capture:!0}),window.addEventListener("keydown",wt,{capture:!0}),()=>{R.removeEventListener("touchstart",Ee),R.removeEventListener("mousedown",Ee),j.removeEventListener("touchstart",he),j.removeEventListener("mousedown",he),H.removeEventListener("touchstart",Re),H.removeEventListener("mousedown",Re),R.removeEventListener("touchmove",ot),j.removeEventListener("touchmove",Ba),R.removeEventListener("keydown",vr),j.removeEventListener("keydown",Er),H.removeEventListener("touchmove",La),window.removeEventListener("mousemove",yr),R.removeEventListener("touchend",ye),R.removeEventListener("touchcancel",ye),R.removeEventListener("keyup",ye),j.removeEventListener("touchend",ye),j.removeEventListener("keyup",ye),j.removeEventListener("touchcancel",ye),H.removeEventListener("touchend",ye),H.removeEventListener("touchcancel",ye),window.removeEventListener("mouseup",ye),window.removeEventListener("touchstart",wt,{capture:!0}),window.removeEventListener("mousedown",wt,{capture:!0}),window.removeEventListener("keydown",wt,{capture:!0})}},[N,M,S])}const{isPlaybackActive:L,playbackProgress:J,displayedTime:q,togglePlayback:ae,stopPlayback:me}=la(u||null,!0);Object(s.useEffect)(()=>me,[t,T,me]);const Q=t.metadata.trim.frames.every(G=>G===0),ue=A*(d?O:1)>1;return e.a.createElement(e.a.Fragment,null,e.a.createElement(se.a.Group,{className:be.a.waveformAdjacentControls},e.a.createElement(al,{sampleId:c,normalize:d,onSampleUpdate:o}),e.a.createElement(W.a,{type:"button",variant:"secondary",disabled:Q,onClick:S},Q?"All audio selected":"Select all audio")),e.a.createElement("div",{className:[be.a.waveformContainer,L?be.a.playbackActive:"",d==="selection"?be.a.normalizeOnlySelection:""].join(" "),style:{"--cursor-display":T.cursor===null?"none":"unset","--cursor-left":`${T.cursor}px`,"--trim-pixels-left":`${U[0]}px`,"--trim-pixels-right":`${U[1]}px`}},e.a.createElement(Ht,{peaks:g,scaleCoefficient:1}),e.a.createElement(Ht,{waveformRef:y,peaks:g,scaleCoefficient:d?O:1,opaque:!0,onResize:v}),e.a.createElement(Sn,{isPlaybackActive:L,playbackProgress:J,displayedTime:q||a&&tt(a.cachedInfo.duration,1)||"",downloadFilename:`${l}.volcasample.wav`,wavFile:i||null,togglePlayback:ae}),e.a.createElement("div",{className:be.a.cursor}),e.a.createElement("div",{className:[be.a.trim,be.a.left].join(" ")},e.a.createElement("div",{className:be.a.bar}),e.a.createElement("div",{ref:w,className:be.a.handle,tabIndex:0}),a&&Boolean(B)&&e.a.createElement("span",{className:be.a.time},tt(a.cachedInfo.duration*T.trimFrames[0]/B,2))),e.a.createElement("div",{className:[be.a.trim,be.a.right].join(" ")},e.a.createElement("div",{className:be.a.bar}),e.a.createElement("div",{ref:_,className:be.a.handle,tabIndex:0}),a&&Boolean(B)&&e.a.createElement("span",{className:be.a.time},tt(a.cachedInfo.duration*(B-1-T.trimFrames[1])/B,2))),e.a.createElement("div",{ref:D,className:be.a.waveformOverlay}),ue&&e.a.createElement(Ae.a,{delay:{show:400,hide:0},overlay:e.a.createElement(Ne.a,null,"Audio is clipping - maybe normalize?")},e.a.createElement("div",{className:be.a.clippingAlert},e.a.createElement(ul,null)))))}),ht=E(208),fl=E(138),Cn=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});let Pn;function kn(){return Cn(this,null,function*(){return typeof window.CREATE_SYRO_BINDINGS!="function"?Promise.reject("Expected CREATE_SYRO_BINDINGS global function to exist"):Pn=Pn||window.CREATE_SYRO_BINDINGS().then(n=>Cn(this,null,function*(){return{allocateSyroData:n.cwrap("allocateSyroData","number",["number"]),createEmptySyroData:n.cwrap("createEmptySyroData",null,["number","number","number"]),createSyroDataFromWavData:n.cwrap("createSyroDataFromWavData",null,["number","number","array","number","number","number"]),getDeleteBufferFromSyroData:n.cwrap("getDeleteBufferFromSyroData","number",["number","number"]),prepareSampleBufferFromSyroData:n.cwrap("prepareSampleBufferFromSyroData","number",["number","number","number"]),getSampleBufferChunkPointer:n.cwrap("getSampleBufferChunkPointer","number",["number"]),getSampleBufferChunkSize:n.cwrap("getSampleBufferChunkSize","number",["number"]),getSampleBufferProgress:n.cwrap("getSampleBufferProgress","number",["number"]),getSampleBufferTotalSize:n.cwrap("getSampleBufferTotalSize","number",["number"]),getSampleBufferDataStartPointsPointer:n.cwrap("getSampleBufferDataStartPointsPointer","number",["number"]),freeDeleteBuffer:n.cwrap("freeDeleteBuffer",null,["number"]),cancelSampleBufferWork:n.cwrap("cancelSampleBufferWork",null,["number"]),registerUpdateCallback(a){return n.addFunction(a,"vi")},unregisterUpdateCallback(a){n.removeFunction(a)},heap8Buffer(){return n.HEAP8.buffer}}}))})}var ba=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});function On(n,t){let a=!1,r=()=>{};return{cancelWork(){a=!0,r()},syroBufferPromise:(()=>ba(this,null,function*(){const{allocateSyroData:o,createSyroDataFromWavData:i,prepareSampleBufferFromSyroData:u,getSampleBufferChunkPointer:c,getSampleBufferChunkSize:l,getSampleBufferProgress:m,getSampleBufferTotalSize:d,getSampleBufferDataStartPointsPointer:p,cancelSampleBufferWork:h,registerUpdateCallback:y,unregisterUpdateCallback:f,heap8Buffer:g}=yield kn(),v={syroBuffer:new Uint8Array,dataStartPoints:[]};if(a)return v;const I=[];for(const k of n){const{data:x}=yield ga(k);if(a)return v;I.push(x)}let A,O=0;const T=new Uint32Array(n.length),F=y(k=>{if(a)return;const x=d(k);A||(A=new Uint8Array(x));const M=c(k),b=l(k),S=m(k);A.set(new Uint8Array(g(),M,b),S-b),O=S/x;const w=p(k);T.set(new Uint32Array(g(),w,n.length),0)}),B=o(n.length);n.forEach((k,x)=>{const M=I[x];i(B,x,M,M.length,k.metadata.slotNumber,k.metadata.qualityBitDepth,k.metadata.useCompression?1:0)});const U=u(B,n.length,F);t(O);try{yield new Promise(k=>{let x;r=()=>{cancelAnimationFrame(x),h(U),k()},M();function M(){if(O&&(t(O),O>=1)){k();return}x=requestAnimationFrame(M)}})}finally{r=()=>{},f(F)}if(a)return v;if(!A)throw new Error("Unexpected condition: syroBuffer should be defined");return{syroBuffer:A,dataStartPoints:[...T]}}))()}}function pl(n){return ba(this,null,function*(){const{allocateSyroData:t,createEmptySyroData:a,getDeleteBufferFromSyroData:r,getSampleBufferChunkPointer:o,getSampleBufferChunkSize:i,getSampleBufferDataStartPointsPointer:u,freeDeleteBuffer:c,heap8Buffer:l}=yield kn(),m=t(n.length);n.forEach((v,I)=>{a(m,I,v)});const d=r(m,n.length),p=o(d),h=i(d),y=new Uint8Array(new Uint8Array(l(),p,h)),f=u(d),g=[...new Uint32Array(l(),f,n.length)];return c(d),{syroBuffer:y,dataStartPoints:g}})}function Mn({syroBuffer:n,dataStartPoints:t,selectedItems:a}){const[r,o]=Object(s.useState)([]),[i,u]=Object(s.useState)(null);Object(s.useEffect)(()=>{if(u(null),o(n&&n instanceof Uint8Array?t.map(F=>F/n.length):[]),n){let F=!1;if(n instanceof Uint8Array)return(()=>ba(this,null,function*(){try{const B=yield ft(n);F||u(B)}catch(B){console.error(B),u(new Error(String(B)))}}))(),()=>{F=!0};u(n)}},[n,t]);const[c,l]=Object(s.useState)(0),[m,d]=Object(s.useState)("idle");Object(s.useLayoutEffect)(()=>{if(m==="transferring")return()=>{setTimeout(()=>l(0),100)}},[m]),Object(s.useEffect)(()=>{d("idle")},[a]);const[p,h]=Object(s.useState)(null);Object(s.useEffect)(()=>{i instanceof AudioBuffer&&p&&p.fn(),p&&h(null)},[i,p]);const y=Object(s.useRef)(()=>{d("idle")}),{playAudioBuffer:f}=hn(),g=Object(s.useCallback)(F=>{if(!(i instanceof AudioBuffer)){if(!i){const{target:B,nativeEvent:U}=F;h({fn:()=>B.dispatchEvent(U)})}return}try{d("transferring");const B=f(i,{onTimeUpdate:U=>l(U/i.duration)});y.current=()=>{B(),d("idle")}}catch(B){console.error(B),d("error")}},[f,i]),v=Object(s.useCallback)(()=>y.current(),[]),I=m==="transferring"&&c<1,{currentlyTransferringItem:A,currentItemProgress:O,timeLeftUntilNextItem:T}=Object(s.useMemo)(()=>{if(m!=="transferring"||!(i instanceof AudioBuffer))return{currentlyTransferringItem:a[0],currentItemProgress:0,timeLeftUntilNextItem:0};const F=r.findIndex(S=>S>c)-1,B=F>=0?F:a.length-1,U=a[B],k=r[B],x=r[B+1]||1,M=(c-k)/(x-k),b=(x-c)*i.duration;return{currentlyTransferringItem:U,currentItemProgress:M,timeLeftUntilNextItem:b}},[a,r,m,c,i]);return{startTransfer:g,stopTransfer:v,syroTransferState:m,transferInProgress:I,transferProgress:c,currentlyTransferringItem:A,currentItemProgress:O,timeLeftUntilNextItem:T,syroAudioBuffer:i}}var hl=E(11),ve=E.n(hl),In=E(117),An=E.n(In),wa=E(118),Sa=E(119),gl=E(33),Le=E.n(gl),Nn=Math.pow;function Bi(n){const{error:t}=console;console.error=()=>null;const a=Object(ea.findDOMNode)(n);return console.error=t,a}const vl=ea.findDOMNode;In.Digit.defaultProps.offOpacity=0;const jn=(n,t)=>Math.min(199,t+Nn(10,n)),Tn=(n,t)=>Math.max(0,t-Nn(10,n));var El=e.a.memo(function({slotNumber:n,onSlotNumberUpdate:t}){const[a,r]=Object(s.useState)(n);Object(s.useEffect)(()=>{r(n)},[n]);const[o,i]=Object(s.useState)(null),u=Object(s.useCallback)(d=>{t(p=>jn(d,p))},[t]),c=Object(s.useCallback)(d=>{t(p=>Tn(d,p))},[t]),l=Object(s.useRef)(null),m=Object(s.useRef)(null);{const d=Object(s.useRef)(o);d.current=o;const p=Object(s.useRef)(a);p.current=a;const h=Object(s.useRef)(t);h.current=t,Object(s.useEffect)(()=>{if(!m.current)throw new Error("Expected elements to exist");function y(M){const b=d.current===null?0:d.current;let S=!0;const w=()=>{i(b)};switch(M.key){case"ArrowDown":w(),r(_=>Tn(b,_));break;case"ArrowUp":w(),r(_=>jn(b,_));break;case"ArrowLeft":w(),i(_=>_!==null&&_<2?_+1:_);break;case"ArrowRight":w(),i(_=>_&&_-1);break;case"Enter":case"Escape":i(null);break;default:S=!1;break}S&&M.preventDefault()}function f(M){const b=d.current===null?2:d.current;M.stopPropagation(),M.preventDefault();const S=p.current,w=h.current;if(isNaN(Number(M.key)))w(S);else{const _=String(S).padStart(3,"0").split("");_[2-b]=M.key;const D=Math.min(199,Math.max(0,Number(_.join(""))));i(b?b-1:null),w(D)}}const g=l.current;g.addEventListener("keydown",y,!0),g.addEventListener("keyup",f,!0);let v=0,I=!1,A=!1,O=0;function T(M){document.body.style.userSelect="none",v=M instanceof MouseEvent?M.pageY:M.touches[0].pageY,I=!0,A=!1,O=p.current}g.addEventListener("mousedown",T),g.addEventListener("touchstart",M=>{M.preventDefault(),T(M)});function F(M){if(!I)return;const{pageY:b}=M instanceof MouseEvent?M:M.touches[0],S=2,w=Math.round((v-b)/S);w&&(A=!0,r(Math.min(199,Math.max(0,O+w))))}window.addEventListener("mousemove",F),g.addEventListener("touchmove",F);function B(){document.body.style.userSelect="unset",I=!1,A&&h.current(p.current)}window.addEventListener("mouseup",B),g.addEventListener("touchend",B),g.addEventListener("touchcancel",()=>{document.body.style.userSelect="unset"});function U(M){A||m.current&&m.current.some(b=>b.contains(M.target))||i(2)}g.addEventListener("click",U),m.current.forEach((M,b)=>{const S=b;M.addEventListener("click",()=>{A||i(S)}),M.addEventListener("touchstart",w=>{w.preventDefault()})});function k(){I||i(2)}function x(){i(null)}return g.addEventListener("focus",k),g.addEventListener("blur",x),()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",B)}},[])}return Object(s.useEffect)(()=>{if(!m.current)throw new Error("Expected elements to exist");m.current.forEach((d,p)=>{p===o?d.classList.add(Le.a.active):d.classList.remove(Le.a.active)})},[o]),e.a.createElement(e.a.Fragment,null,e.a.createElement(se.a.Label,null,"Choose destination"),e.a.createElement("br",null),e.a.createElement("div",{className:Le.a.slotNumberRow},e.a.createElement("div",{className:Le.a.slotNumberContainer},e.a.createElement("div",{className:Le.a.arrowControls},e.a.createElement("span",{onClick:()=>u(2)},e.a.createElement(wa.a,null)),e.a.createElement("span",{onClick:()=>u(1)},e.a.createElement(wa.a,null)),e.a.createElement("span",{onClick:()=>u(0)},e.a.createElement(wa.a,null))),e.a.createElement(Ae.a,{delay:{show:400,hide:0},placement:"right",overlay:e.a.createElement(Ne.a,null,"Slot ",a)},e.a.createElement("div",{className:Le.a.slotNumber,ref:l,tabIndex:0},e.a.createElement(An.a,{value:"8888",color:"var(--bs-gray-dark)",strokeColor:"transparent",digitCount:4}),e.a.createElement(An.a,{ref:d=>{const p=vl(d);if(p){p.querySelectorAll("circle").forEach(y=>{p.removeChild(y)});const h=document.createElementNS("http://www.w3.org/2000/svg","circle");h.classList.add(Le.a.point),h.setAttribute("cx","10.7"),h.setAttribute("cy","17"),h.setAttribute("r","1"),p.appendChild(h),m.current=[].slice.call(p.querySelectorAll("g")).reverse().slice(0,3)}},value:`5${String(a).padStart(3,"0")}`,digitProps:{color:"var(--bs-primary)"},digitCount:4}))),e.a.createElement("div",{className:Le.a.arrowControls},e.a.createElement("span",{onClick:()=>c(2)},e.a.createElement(Sa.a,null)),e.a.createElement("span",{onClick:()=>c(1)},e.a.createElement(Sa.a,null)),e.a.createElement("span",{onClick:()=>c(0)},e.a.createElement(Sa.a,null)))),n>99&&a>99&&e.a.createElement(Ae.a,{placement:"auto-end",overlay:e.a.createElement(Ne.a,null,"To transfer to this destination, be sure you have a volca sample2. The original volca sample only supports slots 0-99.")},e.a.createElement("span",{className:Le.a.warning},e.a.createElement(ta.a,null)))))}),Rn=E(207),yl=E.p+"static/media/toy-brick.bcefc45f.svg",bl=E(50),lt=E.n(bl),Gt=e.a.memo(function({samples:t,selectedSampleIds:a,setSelectedSampleIds:r,sampleIdsWithPluginFails:o,highlightDuplicateSlots:i}){const u=[...t.keys()].every(p=>a.has(p)),c=!u&&[...t.keys()].every(p=>!a.has(p)),l=!u&&!c,m=Object(s.useRef)(null);m.current&&(m.current.indeterminate=l);const d=Object(s.useMemo)(()=>{if(!i)return new Set;const p=new Map;for(const[h,y]of t){if(!a.has(h))continue;const{slotNumber:f}=y instanceof oe?y.metadata:y;p.set(f,(p.get(f)||0)+1)}return new Set([...p].filter(([h,y])=>y>1).map(([h])=>h))},[t,a,i]);return e.a.createElement(Rn.a,{className:lt.a.samplesTable},e.a.createElement("thead",null,e.a.createElement("tr",null,e.a.createElement("th",{className:lt.a.check},e.a.createElement("input",{ref:m,type:"checkbox",checked:!c,onChange:p=>{r(h=>{const y=new Set(h);if(p.target.checked)for(const[f]of t)y.add(f);else for(const[f]of t)y.delete(f);return y})}})),e.a.createElement("th",{className:lt.a.name},"Name"),e.a.createElement("th",{className:lt.a.slotNumber},"Slot"),e.a.createElement("th",{className:lt.a.updated},"Updated"),o&&e.a.createElement("th",{className:lt.a.pluginsOk,title:"Plugin status"},e.a.createElement(yl,null)))),e.a.createElement("tbody",null,[...t].map(([p,h])=>{const y=h instanceof oe?h.metadata:h;return e.a.createElement("tr",{key:p,onClick:f=>{const g=f.currentTarget.querySelector("input");g&&g!==f.target&&!g.contains(f.target)&&g.click()}},e.a.createElement("td",null,e.a.createElement("input",{type:"checkbox",checked:a.has(p),onChange:f=>{r(g=>{const v=new Set(g);return f.target.checked?v.add(p):v.delete(p),v})}})),e.a.createElement("td",{title:y.name},y.name),e.a.createElement("td",{className:d.has(y.slotNumber)&&a.has(p)?lt.a.duplicateSlot:void 0},y.slotNumber),e.a.createElement("td",{title:new Date(y.dateModified).toLocaleString()},new Date(y.dateModified).toLocaleDateString()),o&&e.a.createElement("td",null,o.includes(p)?"\u274C":h instanceof oe&&h.metadata.plugins.length?"OK":null))})))}),wl=E(29),Fe=E.n(wl),Sl=e.a.memo(function({isInfoBeforeEraseModalOpen:t,setIsInfoBeforeEraseModalOpen:a}){const[r,o]=Object(s.useState)(!1),[i,u]=Object(s.useState)(new Set);Object(s.useLayoutEffect)(()=>{t&&u(new Set)},[t]);const[c,l]=Object(s.useState)(!1);Object(s.useEffect)(()=>{c||u(S=>{const w=new Set(S);for(let _=100;_<200;_++)w.delete(_);return w})},[c]);const[{syroBuffer:m,dataStartPoints:d},p]=Object(s.useState)({syroBuffer:null,dataStartPoints:[]}),h=Object(s.useMemo)(()=>[...i],[i]);Object(s.useEffect)(()=>{if(p({syroBuffer:null,dataStartPoints:[]}),h.length===0)return;let S=!1;return pl(h).then(w=>{S||p(w)}),()=>{S=!0}},[h]);const{currentItemProgress:y,currentlyTransferringItem:f,syroTransferState:g,timeLeftUntilNextItem:v,transferInProgress:I,transferProgress:A,syroAudioBuffer:O,startTransfer:T,stopTransfer:F}=Mn({syroBuffer:m,dataStartPoints:d,selectedItems:h}),B=Array(c?200:100).fill(0).every((S,w)=>i.has(w)),U=!i.size,k=!B&&!U,x=Object(s.useRef)(null);x.current&&(x.current.indeterminate=k);const[M]=Object(s.useState)(()=>Array(20).fill(0).map(()=>e.a.createRef())),b=M.map((S,w)=>{const _=w*10;let D=!0,L=!0;for(let q=_;q<_+10;q++)i.has(q)?D=!1:L=!1;return{noneChecked:D,indeterminate:!D&&!L}});return M.forEach((S,w)=>{S.current&&(S.current.indeterminate=b[w].indeterminate)}),e.a.createElement(e.a.Fragment,null,e.a.createElement(C.a,{onHide:()=>a(!1),className:Fe.a.preTransferModal,show:t,"aria-labelledby":"info-before-erase-modal"},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"info-before-erase-modal"},"Choose slots to erase on volca sample")),e.a.createElement(C.a.Body,null,e.a.createElement("p",null,"Using this app to erase slots can be useful if you have corrupted data or a lot of data to erase. Other times it can be simpler to"," ",e.a.createElement("strong",null,"erase slots directly using the volca sample"),". KORG has a detailed guide"," ",e.a.createElement("a",{href:"https://cdn.korg.com/us/support/download/files/6f825a395967a756aabbbff7ef8414a1.pdf?response-content-disposition=inline%3Bfilename%3Dvolca_sample_Deleting_sample_E1.pdf&response-content-type=application%2Fpdf%3B#:~:text=Deleting%20a%20sample%20from%20the%20volca%20sample&text=Use%20the%20SAMPLE%20selector%20to,button%20to%20cancel%20the%20marking.",target:"_blank",rel:"noreferrer"},"here"),"."),e.a.createElement("p",null,e.a.createElement("strong",null,i.size," slots")," are selected.",e.a.createElement("br",null),e.a.createElement("strong",null,"Time to erase:")," ",O instanceof AudioBuffer?ct(O.duration):O instanceof Error?"error":e.a.createElement("i",null,e.a.createElement("small",null,i.size?"Checking..":"Make a selection."))),e.a.createElement("p",null,e.a.createElement("label",null,"Show slots:"),e.a.createElement("br",null),e.a.createElement(va.a,null,e.a.createElement(zt.a,{id:"show-sample-1-slots",type:"radio",size:"sm",name:"show-sample-1-slots",value:"false",variant:"outline-secondary",checked:!c,onClick:()=>{l(!1)}},"0-99 (volca sample)"),e.a.createElement(zt.a,{id:"show-sample-2-slots",type:"radio",size:"sm",name:"show-sample-2-slots",value:"true",variant:"outline-secondary",checked:c,onClick:()=>{l(!0)}},"0-199 (sample2)"))),e.a.createElement(Rn.a,{className:Fe.a.slotNumbersTable},e.a.createElement("thead",null,e.a.createElement("tr",null,e.a.createElement("th",{className:Fe.a.check},e.a.createElement("input",{ref:x,type:"checkbox",checked:!U,onChange:S=>{u(w=>{const _=new Set(w),D=c?200:100;if(S.target.checked)for(let L=0;L<D;L++)_.add(L);else for(let L=0;L<D;L++)_.delete(L);return _})}})),e.a.createElement("th",{className:Fe.a.rangeLabels},"Range"),Array(10).fill(0).map((S,w)=>e.a.createElement("th",{className:Fe.a.individualCheck},w)))),e.a.createElement("tbody",null,Array(c?20:10).fill(0).map((S,w)=>{const _=w*10;return e.a.createElement("tr",{key:String(w)},e.a.createElement("td",null,e.a.createElement("input",{ref:M[w],type:"checkbox",checked:!b[w].noneChecked,onChange:D=>{u(L=>{const J=new Set(L);if(D.target.checked)for(let q=_;q<_+10;q++)J.add(q);else for(let q=_;q<_+10;q++)J.delete(q);return J})}})),e.a.createElement("th",null,_,"-",_+9),Array(10).fill(0).map((D,L)=>{const J=_+L;return e.a.createElement("td",{key:String(L)},e.a.createElement("input",{type:"checkbox",title:String(J),checked:i.has(J),onChange:q=>{u(ae=>{const me=new Set(ae);return q.target.checked?me.add(J):me.delete(J),me})}}))}))})))),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>a(!1)},"Cancel"),e.a.createElement(W.a,{type:"button",variant:"primary",disabled:!i.size,onClick:()=>{o(!0),a(!1)}},"Continue"))),e.a.createElement(C.a,{onHide:()=>o(!1),className:Fe.a.preTransferModal,show:r,"aria-labelledby":"pre-erase-modal"},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"pre-erase-modal"},"Connect volca sample before continuing")),e.a.createElement(C.a.Body,null,e.a.createElement("figure",null,e.a.createElement("img",{src:"connection.png",alt:""}),e.a.createElement("figcaption",{className:"small"},"Source:"," ",e.a.createElement("a",{href:"https://github.com/korginc/volcasample#6-transferring-syrostream-to-your-volca-sample",target:"_blank",rel:"noreferrer"},"KORG"))),e.a.createElement("p",null,"Make sure your ",e.a.createElement("strong",null,"headphone output")," is connected to the volca sample's ",e.a.createElement("strong",null,"SYNC IN")," and adjust your output volume to a high (but not overdriven) level. Your volca wants to hear this, but you don't.")),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>o(!1)},"Cancel"),e.a.createElement(W.a,{type:"button",variant:"primary",disabled:!(O instanceof AudioBuffer),onClick:S=>{T(S),o(!1)}},"Erase slots now"))),e.a.createElement(C.a,{show:I,"aria-labelledby":"erase-modal"},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"transfer-modal"},"Erasing slots on volca sample")),e.a.createElement(C.a.Body,null,e.a.createElement("p",null,"Erasing ",e.a.createElement("strong",null,h.length," slots")," on your volca sample. Don't disconnect anything."),e.a.createElement(ht.a,{striped:!0,animated:!0,variant:"primary",now:100*A}),e.a.createElement("div",{className:Fe.a.progressAnnotation},O instanceof AudioBuffer&&ct(O.duration*(1-A))," ","remaining"),h.length>1&&e.a.createElement("div",{className:Fe.a.subtask},e.a.createElement("p",null,"(",h.indexOf(f)+1,"/",h.length,") Erasing slot"," ",e.a.createElement("strong",null,f)),e.a.createElement(ht.a,{className:Fe.a.secondaryProgress,variant:"primary",now:100*y}),e.a.createElement("div",{className:Fe.a.progressAnnotation},ct(v)," remaining"))),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"primary",onClick:F},"Cancel"))),e.a.createElement(C.a,{onHide:F,show:g!=="idle"&&!I,"aria-labelledby":"after-transfer-modal"},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"after-transfer-modal"},g==="error"?"Error transferring":"Sample transfer complete")),e.a.createElement(C.a.Body,null,g==="error"?e.a.createElement("p",null,"Something unexpected happening while erasing (on our end)."):e.a.createElement(e.a.Fragment,null,e.a.createElement("p",null,"Slots ",e.a.createElement("strong",null,h.join(", "))," were erased on your volca sample."),e.a.createElement("h5",null,"If you see ",e.a.createElement("strong",null,"[End]"),":"),e.a.createElement("p",null,"The operation was successful. Press the blinking"," ",e.a.createElement("strong",null,"[FUNC]")," button to finish."),e.a.createElement("h5",null,"If you see ",e.a.createElement("strong",null,"[Err dcod]"),":"),e.a.createElement("p",null,"Check your volume level, and make sure no other application is creating noise or applying any EQ or resampling to your audio, then try again. If your volume is at a decent level (not overdriven and not too soft) but the transfer still fails, you might also want to try a new audio cable."),e.a.createElement("h5",null,"If you see ",e.a.createElement("strong",null,"[Err PArA]"),":"),e.a.createElement("p",null,"This will happen if you try to erase a slot above 99 on the original volca sample. More slots are available on the volca sample2."),e.a.createElement("p",null,"For more info, check out this"," ",e.a.createElement("a",{href:"https://www.korg.com/products/dj/volca_sample/faq.php",target:"_blank",rel:"noreferrer"},"FAQ")," ","from KORG."))),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"primary",onClick:F},"Done"))))}),_l=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});function Cl({samples:n,sampleCaches:t,justTheButton:a,showInfoBeforeTransfer:r,button:o,onSlotNumberUpdate:i}){const u=Object(s.useMemo)(()=>n instanceof Array?n:[n],[n]),c=Object(s.useMemo)(()=>new Map(u.map(G=>[G.id,G])),[u]),[l,m]=Object(s.useState)(c);Object(s.useEffect)(()=>{m(c)},[c]);const d=Object(s.useMemo)(()=>new Set(l.keys()),[l]),p=Object(s.useCallback)(G=>{m(Z=>new Map(u.filter(P=>G(new Set(Z.keys())).has(P.id)).map(P=>[P.id,P])))},[u]),h=Object(s.useMemo)(()=>{let G=0;for(const[Z]of l){const P=t.get(Z);P&&(G+=P.cachedInfo.duration)}return G},[l,t]),y=Object(s.useMemo)(()=>{const G=new Map;for(const[,Z]of l){const{slotNumber:P}=Z.metadata;G.set(P,(G.get(P)||0)+1)}return[...G].filter(([Z,P])=>P>1).map(([Z])=>Z)},[l]),f=Object(s.useMemo)(()=>{const G=[];for(const[Z]of l){const P=t.get(Z);P&&P.cachedInfo.failedPluginIndex>-1&&G.push(Z)}return G},[l,t]),[g,v]=Object(s.useState)(1),[I,A]=Object(s.useState)(!1),[O,T]=Object(s.useState)(!1),[{syroBuffer:F,dataStartPoints:B},U]=Object(s.useState)({syroBuffer:null,dataStartPoints:[]}),k=Object(s.useMemo)(()=>[...l.values()],[l]),{currentItemProgress:x,currentlyTransferringItem:M,syroTransferState:b,timeLeftUntilNextItem:S,transferInProgress:w,transferProgress:_,syroAudioBuffer:D,startTransfer:L,stopTransfer:J}=Mn({syroBuffer:F,dataStartPoints:B,selectedItems:k});Object(s.useLayoutEffect)(()=>{b==="transferring"&&T(!1)},[b]);const q=Object(s.useMemo)(()=>{let G=l.size*44;for(const[Z]of l){const P=t.get(Z);P&&(G+=P.cachedInfo.duration*je*2)}return G},[l,t]),ae=Boolean(l.size&&!y.length&&!f.length&&l.size<=110);Object(s.useEffect)(()=>{if(!ae)return;let G=!1;v(0),U({syroBuffer:null,dataStartPoints:[]});let Z=()=>{G=!0};try{const{syroBufferPromise:P,cancelWork:K}=On([...l.values()],ee=>{G||v(ee)});Z=()=>{K(),G=!0},P.then(ee=>_l(this,[ee],function*({syroBuffer:N,dataStartPoints:R}){G||(Z=()=>{G=!0},U({syroBuffer:N,dataStartPoints:R}))}))}catch(P){console.error(P),U({syroBuffer:new Error(String(P)),dataStartPoints:[]})}return()=>Z()},[l,ae]);const me=e.a.createElement(e.a.Fragment,null,e.a.createElement("div",null,e.a.createElement("strong",null,"Sample length:")," ",tt(h,2)),e.a.createElement("div",null,e.a.createElement("strong",null,"Memory footprint:")," ",Object(fl.a)(q).toString()),e.a.createElement("div",null,e.a.createElement("strong",null,"Time to transfer:")," ",D instanceof AudioBuffer?ct(D.duration):D instanceof Error?"error":e.a.createElement("i",null,e.a.createElement("small",null,"Checking.."," ",g&&h>=10?`${(g*100).toFixed(0)}%`:"")))),[Q,ue]=Object(s.useState)(!1);return e.a.createElement(e.a.Fragment,null,!a&&e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:ve.a.transferInfoBox},me),e.a.createElement(El,{slotNumber:u[0].metadata.slotNumber,onSlotNumberUpdate:i})),e.a.cloneElement(o||e.a.createElement(W.a,{className:ve.a.transferButton,type:"button",variant:"primary"},"Transfer to volca sample"),{onClick(){r?A(!0):T(!0)}}),!a&&e.a.createElement(W.a,{className:ve.a.clearSpaceButton,type:"button",variant:"link",onClick:()=>ue(!0)},"Or clear space on the volca"),e.a.createElement(C.a,{onHide:()=>A(!1),className:ve.a.preTransferModal,show:I,"aria-labelledby":"info-before-transfer-modal"},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"info-before-modal"},"Confirm samples to be transferred")),e.a.createElement(C.a.Body,null,e.a.createElement("div",{className:ve.a.summary},e.a.createElement("p",{className:[ve.a.transferInfoForModal,ae?"":ve.a.cannotTransfer].join(" ")},me),!ae&&e.a.createElement("div",{className:ve.a.errors},y.length>0?e.a.createElement("p",{className:ve.a.invalidMessage},"You cannot transfer multiple samples to the same slot (slot",y.length>1&&"s"," ",e.a.createElement("strong",null,y.join(", ")),")."):f.length>0?e.a.createElement("p",{className:ve.a.invalidMessage},"Please fix or unselect samples with broken plugins."):l.size?l.size>110?e.a.createElement("p",{className:ve.a.invalidMessage},"You cannot transfer more than ",e.a.createElement("strong",null,"110")," samples at once."):null:e.a.createElement("p",{className:ve.a.invalidMessage},"You must select at least one sample to transfer.")," ")),e.a.createElement(Gt,{samples:c,selectedSampleIds:d,setSelectedSampleIds:p,sampleIdsWithPluginFails:f,highlightDuplicateSlots:!0})),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>A(!1)},"Cancel"),e.a.createElement(W.a,{type:"button",variant:"primary",disabled:!(D instanceof AudioBuffer)||!ae,onClick:()=>{T(!0),A(!1)}},"Continue"))),e.a.createElement(C.a,{onHide:()=>T(!1),className:ve.a.preTransferModal,show:O,"aria-labelledby":"pre-transfer-modal"},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"pre-transfer-modal"},"Connect volca sample before continuing")),e.a.createElement(C.a.Body,null,e.a.createElement("figure",null,e.a.createElement("img",{src:"connection.png",alt:""}),e.a.createElement("figcaption",{className:"small"},"Source:"," ",e.a.createElement("a",{href:"https://github.com/korginc/volcasample#6-transferring-syrostream-to-your-volca-sample",target:"_blank",rel:"noreferrer"},"KORG"))),e.a.createElement("p",null,"Make sure your ",e.a.createElement("strong",null,"headphone output")," is connected to the volca sample's ",e.a.createElement("strong",null,"SYNC IN")," and adjust your output volume to a high (but not overdriven) level. Your volca wants to hear this, but you don't.")),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>T(!1)},"Cancel"),e.a.createElement(W.a,{type:"button",variant:"primary",disabled:!(D instanceof AudioBuffer),onClick:L},"Transfer now"))),e.a.createElement(C.a,{show:w,"aria-labelledby":"transfer-modal"},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"transfer-modal"},"Sample transfer in progress")),e.a.createElement(C.a.Body,null,l.size>1?e.a.createElement("p",null,"Transferring ",e.a.createElement("strong",null,l.size," samples")," to your volca sample. Don't disconnect anything."):[...l.values()][0]?e.a.createElement("p",null,"Transferring"," ",e.a.createElement("strong",null,[...l.values()][0].metadata.name)," ","to slot"," ",e.a.createElement("strong",null,[...l.values()][0].metadata.slotNumber)," ","on your volca sample. Don't disconnect anything."):null,e.a.createElement(ht.a,{striped:!0,animated:!0,variant:"primary",now:100*_}),e.a.createElement("div",{className:ve.a.progressAnnotation},D instanceof AudioBuffer&&ct(D.duration*(1-_))," ","remaining"),l.size>1&&e.a.createElement("div",{className:ve.a.subtask},e.a.createElement("p",null,"(",[...l.values()].indexOf(M)+1,"/",l.size,")"," ",e.a.createElement("strong",{className:ve.a.name},M.metadata.name)," ","to slot"," ",e.a.createElement("strong",null,M.metadata.slotNumber)),e.a.createElement(ht.a,{className:ve.a.secondaryProgress,variant:"primary",now:100*x}),e.a.createElement("div",{className:ve.a.progressAnnotation},ct(S)," remaining"))),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"primary",onClick:J},"Cancel"))),e.a.createElement(C.a,{onHide:J,show:b!=="idle"&&!w,"aria-labelledby":"after-transfer-modal"},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"after-transfer-modal"},b==="error"?"Error transferring":"Sample transfer complete")),e.a.createElement(C.a.Body,null,b==="error"?e.a.createElement("p",null,"Something unexpected happening while transferring (on our end)."):e.a.createElement(e.a.Fragment,null,l.size>1?e.a.createElement("p",null,"Your samples were transferred to your volca sample."):[...l.values()][0]?e.a.createElement("p",null,e.a.createElement("strong",null,[...l.values()][0].metadata.name)," ","was transferred to slot"," ",e.a.createElement("strong",null,[...l.values()][0].metadata.slotNumber)," ","on your volca sample."):null,e.a.createElement("h5",null,"If you see ",e.a.createElement("strong",null,"[End]"),":"),e.a.createElement("p",null,"The transfer was successful. Press the blinking"," ",e.a.createElement("strong",null,"[FUNC]")," button to finish."),e.a.createElement("h5",null,"If you see ",e.a.createElement("strong",null,"[Err FuLL]"),":"),e.a.createElement("p",null,"Free up some memory on the volca sample (or cut down your sample size), then try again."),e.a.createElement("h5",null,"If you see ",e.a.createElement("strong",null,"[Err dcod]"),":"),e.a.createElement("p",null,"Check your volume level, and make sure no other application is creating noise or applying any EQ or resampling to your audio, then try again. If your volume is at a decent level (not overdriven and not too soft) but the transfer still fails, you might also want to try a new audio cable."),e.a.createElement("h5",null,"If you see ",e.a.createElement("strong",null,"[Err PArA]"),":"),e.a.createElement("p",null,"This will happen if you try to transfer to a slot above 99 on the original volca sample. More slots are available on the volca sample2."),e.a.createElement("p",null,"For more info, check out this"," ",e.a.createElement("a",{href:"https://www.korg.com/products/dj/volca_sample/faq.php",target:"_blank",rel:"noreferrer"},"FAQ")," ","from KORG."))),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"primary",onClick:J},"Done"))),e.a.createElement(Sl,{isInfoBeforeEraseModalOpen:Q,setIsInfoBeforeEraseModalOpen:ue}))}var _a=Cl,Pl=E(37),kl=E(98),Ca=E(213),De=E(215),Pa=E(154),Ol=E(61),ka=E.n(Ol),Ml=E(139),Il=E(140),Al=E(141),Nl=E(142),jl=E(143),Tl=E(144),Fn=E(97),Rl=E(145),Fl=E(146),Oa=E.p+"static/media/toy-brick-plus.20ac8b7a.svg",Dl=E(6),ne=E.n(Dl);const Dn="tabUpdateEvent";function Ce(n,t,a){const r={dataType:n,ids:t,action:a,when:Date.now()};localStorage.setItem(Dn,JSON.stringify(r))}function $t(n,t){function a(r){if(r.key===Dn&&r.newValue){const o=JSON.parse(r.newValue);o.dataType===n&&t(o)}}return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}var xl=Object.defineProperty,Bl=Object.defineProperties,Ll=Object.getOwnPropertyDescriptors,xn=Object.getOwnPropertySymbols,Wl=Object.prototype.hasOwnProperty,Hl=Object.prototype.propertyIsEnumerable,Bn=(n,t,a)=>t in n?xl(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,Ln=(n,t)=>{for(var a in t||(t={}))Wl.call(t,a)&&Bn(n,a,t[a]);if(xn)for(var a of xn(t))Hl.call(t,a)&&Bn(n,a,t[a]);return n},Wn=(n,t)=>Bl(n,Ll(t)),Oe=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});const gt=Ue.a.createInstance({name:"plugin_store",driver:Ue.a.INDEXEDDB});function Nt(n){return gt.getItem(n)}function Vl(n,t){return gt.setItem(n,t)}function Hn(n){return gt.iterate(n)}function zl(){return Oe(this,null,function*(){const n=new Map;return yield Hn(({params:t},a)=>{n.set(a,t)}),new Map([...n].sort(([t],[a])=>t>a?1:t<a?-1:1))})}function Ul(n){return Oe(this,arguments,function*({file:t,onConfirmName:a,onConfirmReplace:r}){if(t.size>5e6)throw new Error("Plugin is too big.");let o=t.name.toLowerCase();if(!o.endsWith(".js"))throw new Error("Expecting JavaScript file.");const i=yield t.text();return yield Qt({pluginName:o,pluginSource:i,onConfirmName:a,onConfirmReplace:r})})}function Qt(n){return Oe(this,arguments,function*({pluginName:t,pluginSource:a,onConfirmName:r,onConfirmReplace:o}){const i=yield rn(a),u=yield gt.keys();let c=t,l=!1;do{if(u.includes(c)){const{pluginSource:d}=(yield Nt(c))||{};if(!d)throw new Error("Expected plugin to be installed");if((yield rn(d))===i)return"exists";const h=yield o(c);if(h==="use-existing")return"used-existing";if(l=h==="replace",l)break;const y=c.replace(/\.js$/,"");let f=2;do c=`${y} ${f++}.js`;while(u.includes(c))}c!==t&&(c=yield r(c))}while(u.includes(c));l&&ma(c)?yield dt(c).replaceSource(a):yield Mt(c,a);const m=yield dt(c).getParams();return yield Vl(c,{pluginSource:a,params:m}),Ce("plugin",[c],l?"edit":"create"),l?"replaced":"added"})}function Yt(n,t=!1){return Oe(this,null,function*(){const a=dt(n);try{a.remove()}catch(r){console.error(r)}t||(yield gt.removeItem(n),Ce("plugin",[n],"delete"))})}function Ma(n){return Oe(this,null,function*(){const{pluginSource:t=null}=(yield Nt(n))||{};return t})}function Gl(n){return Oe(this,arguments,function*({oldPluginName:t,newPluginName:a,onConfirmName:r,onConfirmReplace:o,userSamples:i}){const u=yield Ma(t);if(!u)throw new Error("Expected plugin to be installed");const c=yield Qt({pluginName:a,pluginSource:u,onConfirmName:r,onConfirmReplace:o});if(c==="used-existing"||c==="exists")return{updatedSamples:[],result:c};const l=[...i.values()].filter(d=>d.metadata.plugins.some(p=>p.pluginName===t));if(!l.length)return yield Yt(t),{updatedSamples:[],result:c};const m=l.map(d=>new oe.Mutable(Wn(Ln({id:d.id},d.metadata),{plugins:d.metadata.plugins.map(p=>Wn(Ln({},p),{pluginName:p.pluginName===t?a:p.pluginName}))})));return yield Promise.all(m.map(d=>d.persist())),yield Yt(t),{updatedSamples:m,result:c}})}let Kt=null;function $l(){return Oe(this,null,function*(){Kt=Kt||(()=>Oe(this,null,function*(){$t("plugin",t=>Oe(this,[t],function*({action:a,ids:r}){for(const o of r)a==="create"&&(yield zn(o)),a==="edit"&&(yield Ql(o)),a==="delete"&&(yield Yt(o,!0))}));const n=[];yield Hn(({pluginSource:t},a)=>{n.push(Mt(a,t))}),yield Promise.all(n)}))(),yield Kt})}function Vn(n){return Oe(this,null,function*(){const{pluginSource:t=null}=(yield Nt(n))||{};if(!t)throw new Error("Expected plugin to be stored");yield Mt(n,t)})}function zn(n){return Oe(this,null,function*(){const{pluginSource:t=null}=(yield Nt(n))||{};if(!t)throw new Error("Expected plugin to be stored");yield Mt(n,t)})}function Ql(n){return Oe(this,null,function*(){if(!ma(n)){yield zn(n);return}const{pluginSource:t=null}=(yield Nt(n))||{};if(!t)throw new Error("Expected plugin to be stored");yield dt(n).replaceSource(t)})}function Yl(...n){return Oe(this,null,function*(){yield Kt;const t=yield gt.keys();return n.map(a=>ma(a)?"installed":t.includes(a)?"broken":"missing")})}var Kl=Object.defineProperty,Zl=Object.defineProperties,Jl=Object.getOwnPropertyDescriptors,Un=Object.getOwnPropertySymbols,Xl=Object.prototype.hasOwnProperty,ql=Object.prototype.propertyIsEnumerable,Gn=(n,t,a)=>t in n?Kl(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,We=(n,t)=>{for(var a in t||(t={}))Xl.call(t,a)&&Gn(n,a,t[a]);if(Un)for(var a of Un(t))ql.call(t,a)&&Gn(n,a,t[a]);return n},He=(n,t)=>Zl(n,Jl(t)),eo=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});function to({sampleId:n,pluginIndex:t,isOff:a,paramName:r,paramValue:o,paramDef:i,onSampleUpdate:u}){const[c,l]=Object(s.useState)(o);Object(s.useEffect)(()=>{l(o)},[o]);const m=Object(s.useCallback)(f=>{const g=Number(f.target.value);l(g)},[]),d=Object(s.useCallback)(f=>{u(n,g=>He(We({},g),{plugins:g.plugins.map((v,I)=>I===t?He(We({},v),{pluginParams:He(We({},v.pluginParams),{[r]:f})}):v)}))},[n,t,r,u]),p=Object(s.useRef)(null),h=Object(s.useRef)(null);Object(s.useEffect)(()=>{const f=p.current;if(f){const g=()=>{d(Number(f.value))};return f.addEventListener("change",g),()=>{f.removeEventListener("change",g)}}},[d]),Object(s.useEffect)(()=>{const f=h.current;if(f){const g=()=>{d(Number(f.value))};return f.addEventListener("change",g),()=>{f.removeEventListener("change",g)}}},[d]);let y=1;if(i){const f=i.max-i.min;f<10?y=.01:f<100&&(y=.1)}return e.a.createElement(se.a.Group,{className:ne.a.paramControl},e.a.createElement("div",{className:ne.a.paramControlInputGroup},e.a.createElement("div",null,e.a.createElement(se.a.Label,null,i&&i.label||r),e.a.createElement(ka.a,{variant:a?"secondary":"primary",disabled:!i,value:c,min:i?i.min:0,max:i?i.max:0,step:y,size:"sm",tooltip:"off",onChange:m,ref:p})),e.a.createElement(se.a.Control,{type:"number",min:i?i.min:void 0,max:i?i.max:void 0,step:y,value:c,onChange:m,ref:h})))}function ao({eventKey:n,disabled:t,isNew:a,toggleRef:r}){const{activeEventKey:o}=Object(s.useContext)(Pl.a),i=Object(s.useRef)(null);Object(s.useImperativeHandle)(r,()=>i.current);const u=Object(s.useRef)(a);Object(s.useLayoutEffect)(()=>{u.current&&i.current&&i.current.click()},[]);const c=Object(kl.b)(n),l=o===n;return e.a.createElement("div",{ref:i,title:t?"No params":l?"Hide params":"Edit params",className:[ne.a.actionIcon,t?ne.a.disabled:""].join(" "),onClick:t?void 0:c},e.a.createElement(Nl.a,null))}const no=e.a.forwardRef(({onClick:n},t)=>e.a.createElement("div",{className:ne.a.actionIcon,ref:t,onClick:a=>{a.preventDefault(),n(a)}},e.a.createElement(jl.a,null)));function ro({eventKey:n,sampleId:t,pluginIndex:a,plugin:r,status:o,paramsDef:i,isFirst:u,isLast:c,isNew:l,onSampleUpdate:m,onOpenPluginManager:d}){const p=!r.isBypassed&&o==="ok",h=r.isBypassed?"ok":o,y=Object(s.useRef)(null);return e.a.createElement(Ca.a,{className:ne.a.pluginItem},e.a.createElement(Ca.a.Header,{className:ne.a.header},e.a.createElement("div",{className:[ne.a.pluginName,Object.keys(r.pluginParams).length?ne.a.expandable:""].join(" "),title:r.pluginName,onClick:()=>y.current&&y.current.click()},p?e.a.createElement("strong",null,r.pluginName):h!=="ok"?e.a.createElement("span",{className:ne.a.pluginHasError},r.pluginName):e.a.createElement("span",null,r.pluginName)),e.a.createElement("div",{className:ne.a.actions},e.a.createElement("div",{title:r.isBypassed?"Plugin is bypassed":"Plugin is active",className:[ne.a.actionIcon,ne.a.toggle,r.isBypassed?ne.a.off:ne.a.on].join(" "),onClick:()=>{m(t,f=>He(We({},f),{plugins:f.plugins.map((g,v)=>v===a?He(We({},g),{isBypassed:!g.isBypassed}):g)}))}},e.a.createElement(Ml.a,null)),e.a.createElement("div",{title:"Move up",className:[ne.a.actionIcon,u?ne.a.disabled:""].join(" "),onClick:()=>{m(t,f=>{if(a===0)return f;const g=[...f.plugins];return g[a-1]=f.plugins[a],g[a]=f.plugins[a-1],He(We({},f),{plugins:g})})}},e.a.createElement(Il.a,null)),e.a.createElement("div",{title:"Move down",className:[ne.a.actionIcon,c?ne.a.disabled:""].join(" "),onClick:()=>{m(t,f=>{if(a===f.plugins.length-1)return f;const g=[...f.plugins];return g[a+1]=f.plugins[a],g[a]=f.plugins[a+1],He(We({},f),{plugins:g})})}},e.a.createElement(Al.a,null)),e.a.createElement(ao,{eventKey:n,disabled:!Object.keys(r.pluginParams).length,isNew:l,toggleRef:y}),e.a.createElement(ke.a,null,e.a.createElement(ke.a.Toggle,{as:no}),e.a.createElement(ke.a.Menu,null,e.a.createElement(ke.a.Item,{onClick:()=>{m(t,f=>He(We({},f),{plugins:f.plugins.filter((g,v)=>v!==a)}))}},"Remove")))),(h==="broken"||h==="failed-previously")&&e.a.createElement("div",{title:"There was a problem running the plugin",className:ne.a.errorIcon},e.a.createElement(Rl.a,null)),h==="missing"&&e.a.createElement("div",{title:"Plugin not found",className:ne.a.errorIcon,onClick:d},e.a.createElement(Fl.a,null))),e.a.createElement(De.a.Collapse,{eventKey:n},e.a.createElement(Ca.a.Body,{className:ne.a.paramsList},Object.keys(i||r.pluginParams).map(f=>{const g=i&&i[f]||null;let v=r.pluginParams[f];return g&&typeof v!="number"&&(v=g.value),e.a.createElement(to,{key:f,sampleId:t,pluginIndex:a,isOff:!p,paramName:f,paramValue:v,paramDef:g,onSampleUpdate:m})}))))}var lo=e.a.memo(function({sampleId:t,sampleCache:a,plugins:r,pluginParamsDefs:o,pluginStatusMap:i,isPluginManagerOpen:u,onSampleUpdate:c,onOpenPluginManager:l,onRecheckPlugins:m,onRegenerateSampleCache:d}){const p=Object(s.useMemo)(()=>r.map((k,x)=>{const M=i?i.get(k.pluginName):"ok";return M!=="installed"?M||"missing":!k.isBypassed&&a&&a.cachedInfo.failedPluginIndex===x?"failed-previously":"ok"}),[r,i,a]),h=p.filter((k,x)=>!r[x].isBypassed).every(k=>k==="ok"),y={};let f=0,g=0;for(const k of r)y[k.pluginName]=0,k.isBypassed?g++:f++;const[v,I]=Object(s.useState)(()=>window.matchMedia("(min-width: 768px)").matches),A=Object(s.useRef)(r),O=Object(s.useRef)(t);t!==O.current&&(A.current=r,O.current=t);const[T,F]=Object(s.useState)(!1);Object(s.useEffect)(()=>{if(u)return()=>{requestAnimationFrame(()=>{F(!1)})}},[u]);const[B,U]=Object(s.useState)(o);return e.a.createElement(se.a.Group,{className:[ne.a.pluginsControlWrapper,v?ne.a.expanded:""].join(" ")},e.a.createElement(Ae.a,{delay:{show:400,hide:0},overlay:e.a.createElement(Ne.a,null,"Plugins let you add custom pre-processing to your samples.")},e.a.createElement(se.a.Label,{className:ne.a.label,onClick:()=>I(k=>!k),"aria-controls":"expand-plugins","aria-expanded":v},"Plugins",h&&e.a.createElement("span",{className:ne.a.previewValue},"\xA0",f," active, ",g," bypassed"),!h&&e.a.createElement("span",{className:ne.a.reloadPlugins,onClick:k=>eo(this,null,function*(){k.stopPropagation(),yield Promise.allSettled(r.filter(x=>i&&i.get(x.pluginName)==="broken").map(x=>Vn(x.pluginName))),m(),d(t)})},e.a.createElement(Fn.a,null),e.a.createElement("span",null,"Reload")))),e.a.createElement(Pa.a,{in:v},e.a.createElement("div",{id:"expand-plugins"},e.a.createElement("div",{className:ne.a.pluginsControl},e.a.createElement(De.a,{hidden:!r.length,className:ne.a.pluginList},r.map((k,x)=>{const M=`${k.pluginName}-${y[k.pluginName]++}`;return e.a.createElement(ro,{key:M,eventKey:M,sampleId:t,pluginIndex:x,plugin:k,status:p[x],paramsDef:o.get(k.pluginName)||null,isFirst:x===0,isLast:x===r.length-1,isNew:!A.current.includes(k),onSampleUpdate:c,onOpenPluginManager:l})})),e.a.createElement("div",{className:ne.a.pluginOptions},e.a.createElement(za.a,{variant:"outline-secondary",title:e.a.createElement("span",{className:ne.a.addAPlugin},e.a.createElement(Oa,null),e.a.createElement("span",null,"Add a plugin")),onToggle:k=>{k&&U(o)},autoClose:!T},e.a.createElement(ke.a.Item,{onClick:k=>{k.stopPropagation(),F(!0),l()}},"Install a new plugin"),e.a.createElement(ke.a.Divider,null),!o.size&&e.a.createElement(ke.a.Item,{disabled:!0},"No plugins installed"),[...o].map(([k,x])=>e.a.createElement(ke.a.Item,{key:k,className:[...B.keys()].find(M=>M===k)?"":ne.a.justAdded,onClick:()=>{c(t,M=>He(We({},M),{plugins:[...M.plugins,{pluginName:k,pluginParams:Br(x),isBypassed:!1}]}))}},k))),e.a.createElement(W.a,{className:ne.a.managePlugins,variant:"outline-secondary",onClick:l},e.a.createElement(Tl.a,null),e.a.createElement("span",null,"Plugins overview")))))))}),oo=E(39),Ze=E.n(oo),io=e.a.memo(function({sampleId:t,qualityBitDepth:a,onSampleUpdate:r}){const[o,i]=Object(s.useState)(a);Object(s.useEffect)(()=>{i(a)},[a]);const u=Object(s.useCallback)(d=>{const p=Number(d.target.value);i(p)},[]),c=Object(s.useRef)(null);Object(s.useEffect)(()=>{const d=c.current;if(d){const p=()=>{const h=Number(d.value);r(t,{qualityBitDepth:h})};return d.addEventListener("change",p),()=>{d.removeEventListener("change",p)}}},[t,r]);const[l,m]=Object(s.useState)(()=>window.matchMedia("(min-width: 768px)").matches);return e.a.createElement(se.a.Group,{className:[Ze.a.qualityBitDepthWrapper,l?Ze.a.expanded:""].join(" ")},e.a.createElement(Ae.a,{delay:{show:400,hide:0},overlay:e.a.createElement(Ne.a,null,"Lowering quality reduces transfer time. It will ",e.a.createElement("i",null,"not")," reduce the memory footprint.")},e.a.createElement(se.a.Label,{className:Ze.a.label,onClick:()=>m(d=>!d),"aria-controls":"expand-quality-bit-depth","aria-expanded":l},"Quality bit depth",e.a.createElement("span",{className:Ze.a.previewValue},"\xA0",a))),e.a.createElement(Pa.a,{in:l},e.a.createElement("div",{id:"expand-quality-bit-depth"},e.a.createElement("div",{className:Ze.a.ticks},[8,9,10,11,12,13,14,15,16].map((d,p,{length:h})=>{const y=`calc(${p*100/(h-1)}% + ${12-3*p}px)`,f=o===d;return e.a.createElement(e.a.Fragment,{key:d},e.a.createElement("label",{className:["small",Ze.a.tickLabel].join(" "),style:{left:y,visibility:f?"hidden":void 0},onClick:()=>r(t,{qualityBitDepth:d})},d),e.a.createElement("span",{className:Ze.a.tickMark,style:{left:y,visibility:f?"hidden":void 0}}))})),e.a.createElement(ka.a,{value:o,step:1,min:8,max:16,size:"lg",tooltip:"on",tooltipPlacement:"top",tooltipStyle:{zIndex:1020},onChange:u,ref:c}),e.a.createElement("div",{className:Ze.a.annotations},e.a.createElement("label",{className:"small"},"Faster transfer"),e.a.createElement("label",{className:"small"},"Higher quality")))))}),so=E(34),Ve=E.n(so),co=e.a.memo(function({sampleId:t,pitchAdjustment:a,onSampleUpdate:r}){const[o,i]=Object(s.useState)(a);Object(s.useEffect)(()=>{i(a)},[a]);const u=Object(s.useCallback)(d=>{i(Number(d.target.value))},[]),c=Object(s.useRef)(null);Object(s.useEffect)(()=>{const d=c.current;if(d){const p=()=>{r(t,{pitchAdjustment:Number(d.value)})};return d.addEventListener("change",p),()=>{d.removeEventListener("change",p)}}},[t,r]);const[l,m]=Object(s.useState)(()=>window.matchMedia("(min-width: 768px)").matches);return e.a.createElement(se.a.Group,{className:[Ve.a.pitchAdjustmentWrapper,l?Ve.a.expanded:""].join(" ")},e.a.createElement(Ae.a,{delay:{show:400,hide:0},overlay:e.a.createElement(Ne.a,null,"Pitching your audio up before transferring can save some space on your volca sample. You can pitch back down on the volca sample, but your sample rate will be reduced.")},e.a.createElement(se.a.Label,{className:Ve.a.label,onClick:()=>m(d=>!d),"aria-controls":"expand-sample-pitch","aria-expanded":l},"Adjust sample pitch\xA0",e.a.createElement("span",{className:Ve.a.previewValue},Number(a.toFixed(2)),"x"))),e.a.createElement(Pa.a,{in:l},e.a.createElement("div",{id:"expand-sample-pitch"},e.a.createElement("div",{className:Ve.a.ticks},[.5,1,1.5,2].map((d,p,{length:h})=>{const y=`calc(${p*100/(h-1)}% + ${12-8*p}px)`,f=o===d;return e.a.createElement(e.a.Fragment,{key:d},e.a.createElement("label",{className:["small",Ve.a.tickLabel].join(" "),style:{left:y,visibility:f?"hidden":void 0},onClick:()=>r(t,{pitchAdjustment:d})},d,"x"),e.a.createElement("span",{className:Ve.a.tickMark,style:{left:y,visibility:f?"hidden":void 0}}))})),e.a.createElement(ka.a,{value:o,min:.5,max:2,step:.01,size:"lg",tooltip:"on",tooltipLabel:d=>`${Number(d.toFixed(2))}x`,tooltipPlacement:"top",tooltipStyle:{zIndex:1020},onChange:u,ref:c}),e.a.createElement("div",{className:Ve.a.annotations},e.a.createElement("label",{className:["small",o<1?Ve.a.warn:""].join(" ")},"Larger footprint"),e.a.createElement("label",{className:"small"},"Smaller footprint")))))}),uo=E(49),vt=E.n(uo),mo=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});const fo=e.a.memo(function({sample:t,sampleCache:a,pluginParamsDefs:r,pluginStatusMap:o,isPluginManagerOpen:i,editCacheInvalidator:u,onSampleUpdate:c,onSampleDuplicate:l,onSampleDelete:m,onOpenPluginManager:d,onRecheckPlugins:p,onRegenerateSampleCache:h}){const y=Object(s.useCallback)(g=>{c(t.id,({slotNumber:v})=>({slotNumber:typeof g=="function"?g(v):g}))},[t.id,c]),f=Object(s.useMemo)(()=>a?new Map().set(a.sampleContainer.id,a):new Map,[a]);return e.a.createElement(St.a,{fluid:"sm"},e.a.createElement("h2",{className:vt.a.sampleName},e.a.createElement(Ae.a,{delay:{show:400,hide:0},placement:"top-start",overlay:e.a.createElement(Ne.a,null,t.metadata.name)},e.a.createElement("span",null,t.metadata.name)),e.a.createElement(po,{sampleId:t.id,name:t.metadata.name,sourceFileId:t.metadata.sourceFileId,userFileInfo:t.metadata.userFileInfo,onSampleUpdate:c,onSampleDuplicate:l,onSampleDelete:m})),e.a.createElement("p",null,e.a.createElement("strong",null,"Sampled:")," ",aa(new Date(t.metadata.dateSampled)),e.a.createElement("br",null),e.a.createElement("strong",null,"Updated:")," ",aa(new Date(t.metadata.dateModified))),e.a.createElement("h4",null,"Configure"),e.a.createElement(lo,{sampleId:t.id,sampleCache:a,plugins:t.metadata.plugins,pluginParamsDefs:r,pluginStatusMap:o,isPluginManagerOpen:i,onSampleUpdate:c,onOpenPluginManager:d,onRecheckPlugins:p,onRegenerateSampleCache:h}),e.a.createElement(io,{sampleId:t.id,qualityBitDepth:t.metadata.qualityBitDepth,onSampleUpdate:c}),e.a.createElement(co,{sampleId:t.id,pitchAdjustment:t.metadata.pitchAdjustment,onSampleUpdate:c}),e.a.createElement(dl,{sample:t,sampleCache:a,editCacheInvalidator:u,onSampleUpdate:c}),e.a.createElement("h4",null,"Transfer"),e.a.createElement(_a,{samples:t,sampleCaches:f,onSlotNumberUpdate:y}))}),po=e.a.memo(({sampleId:n,name:t,sourceFileId:a,userFileInfo:r,onSampleUpdate:o,onSampleDuplicate:i,onSampleDelete:u})=>{const[c,l]=Object(s.useState)(!1),m=Object(s.useRef)(null),[d,p]=Object(s.useState)(t),[h,y]=Object(s.useState)(!1);Object(s.useEffect)(()=>{h&&(p(t),m.current&&m.current.select())},[h,t]);const f=d.trim(),g=Object(s.useCallback)(O=>{O.preventDefault(),f&&(o(n,{name:f}),y(!1))},[f,n,o]),v=Object(s.useCallback)(()=>i(n),[n,i]),I=Object(s.useCallback)(()=>mo(void 0,null,function*(){const O=yield oe.getSourceFileData(a),T=new Blob([O],{type:r?r.type:"audio/x-wav"});Vt(T,`${t}${r?r.ext:".wav"}`)}),[t,a,r]),A=Object(s.useCallback)(O=>{O.preventDefault(),u(n),l(!1)},[n,u]);return e.a.createElement(e.a.Fragment,null,e.a.createElement(za.a,{className:vt.a.optionsButton,variant:"secondary",align:"end",title:"Actions"},e.a.createElement(ke.a.Item,{onClick:()=>y(!0)},"Rename"),e.a.createElement(ke.a.Item,{onClick:v},"Duplicate"),e.a.createElement(ke.a.Item,{onClick:I},"Download source audio"),e.a.createElement(ke.a.Divider,null),e.a.createElement(ke.a.Item,{onClick:()=>l(!0)},"Delete")),e.a.createElement("div",{className:vt.a.actionButtons},e.a.createElement(W.a,{type:"button",variant:"outline-secondary",onClick:()=>y(!0)},"Rename"),e.a.createElement(W.a,{type:"button",variant:"outline-secondary",onClick:v},"Duplicate"),e.a.createElement(W.a,{type:"button",variant:"outline-secondary",onClick:I},"Download source audio"),e.a.createElement(W.a,{type:"button",variant:"outline-primary",onClick:()=>l(!0)},"Delete")),e.a.createElement(C.a,{onHide:()=>y(!1),show:h,"aria-labelledby":"rename-modal"},e.a.createElement(se.a,{onSubmit:g},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"rename-modal"},"Renaming sample")),e.a.createElement(C.a.Body,null,e.a.createElement("p",null,"Choose a new name for the sample ",e.a.createElement("strong",null,t),":"),e.a.createElement(se.a.Control,{ref:m,defaultValue:t,onChange:O=>p(O.target.value)})),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>y(!1)},"Cancel"),e.a.createElement(W.a,{type:"submit",variant:"primary",disabled:!f},"Rename")))),e.a.createElement(C.a,{onHide:()=>l(!1),show:c,"aria-labelledby":"delete-modal"},e.a.createElement(se.a,{onSubmit:A},e.a.createElement(C.a.Header,{className:vt.a.deleteModalHeader},e.a.createElement(ta.a,null),e.a.createElement(C.a.Title,{id:"delete-modal"},"Deleting sample")),e.a.createElement(C.a.Body,null,e.a.createElement("p",null,"Are you sure you want to delete ",e.a.createElement("strong",null,t),"? This can't be undone.")),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>l(!1)},"Cancel"),e.a.createElement(W.a,{type:"submit",variant:"primary"},"Delete")))))});var ho=fo,Zt=E(217),go=E(147),vo=E.n(go);function Eo({sample:n,sampleCache:t}){const{wavData:a,audioBuffer:r}=ya(t),{sample:{metadata:{name:o,normalize:i,trim:{frames:u}}},pluginProcessedAudioBuffer:c}=Qa(n),{monoSamples:l,waveformRef:m,peaks:d,onResize:p}=Ya(c),h=Object(s.useMemo)(()=>{if(!c)return 0;const O=It(l,u);return rt(O)},[c,l,u]),y=1/h,{isPlaybackActive:f,playbackProgress:g,displayedTime:v,togglePlayback:I,stopPlayback:A}=la(r||null,!0);return Object(s.useEffect)(()=>A,[n,A]),e.a.createElement("div",{className:vo.a.waveformContainer},e.a.createElement(Ht,{waveformRef:m,peaks:d,scaleCoefficient:i?y:1,onResize:p}),e.a.createElement(Sn,{isPlaybackActive:f,playbackProgress:g,displayedTime:v||t&&tt(t.cachedInfo.duration,1)||"",downloadFilename:`${o}.volcasample.wav`,wavFile:a||null,togglePlayback:I}))}var yo=Eo,bo=Object.defineProperty,wo=Object.defineProperties,So=Object.getOwnPropertyDescriptors,$n=Object.getOwnPropertySymbols,_o=Object.prototype.hasOwnProperty,Co=Object.prototype.propertyIsEnumerable,Qn=(n,t,a)=>t in n?bo(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,Po=(n,t)=>{for(var a in t||(t={}))_o.call(t,a)&&Qn(n,a,t[a]);if($n)for(var a of $n(t))Co.call(t,a)&&Qn(n,a,t[a]);return n},ko=(n,t)=>wo(n,So(t));function Oo(n){const t=n.metadata.slotNumber,[a,r]=Object(s.useState)(t);return Object(s.useEffect)(()=>{r(t)},[t]),{sample:Object(s.useMemo)(()=>n&&new oe(ko(Po({id:n.id},n.metadata),{slotNumber:a})),[n,a]),setSlotNumber:r}}function Mo({sample:n,sampleCache:t,onSampleDuplicate:a}){const{sample:r,setSlotNumber:o}=Oo(n),i=Object(s.useMemo)(()=>t?new Map().set(t.sampleContainer.id,t):new Map,[t]);return e.a.createElement(St.a,{fluid:"sm"},e.a.createElement("h2",{className:vt.a.sampleName},r.metadata.name),e.a.createElement("p",null,e.a.createElement("strong",null,"Sampled:")," ",aa(new Date(r.metadata.dateSampled))),e.a.createElement(Zt.a,{variant:"secondary"},e.a.createElement(Zt.a.Heading,null,"This is a factory sample."),e.a.createElement("p",null,"If you want to trim the audio, adjust quality, change the pitch or use plugins before transferring to the volca sample,"," ",e.a.createElement("span",{className:vt.a.buttonLink},e.a.createElement(W.a,{variant:"link",onClick:()=>a(r.id)},"make a duplicate"),"."))),e.a.createElement("h4",null,"Preview"),e.a.createElement(yo,{sample:r,sampleCache:t}),e.a.createElement("h4",null,"Transfer"),e.a.createElement(_a,{samples:r,sampleCaches:i,onSlotNumberUpdate:o}))}var Io=Mo,Ao=E(210),jt=E(219),No=E(79),Jt=E.n(No),Et=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});const Ia="volcasampler",Aa="user samples",Na="plugins",jo="transfer audio",Yn="volcasampler.json";function To(n,t,a){return Et(this,null,function*(){const r=n.filter(y=>y instanceof oe.Mutable?!0:(console.warn("Not exporting un-editable factory sample",y.id),!1)),o=new Jt.a,i=o.folder(Ia);if(!i)throw new Error("Failed to create root folder");const u=i.folder(Aa);if(!u)throw new Error("Failed to create samples folder");const c=i.folder(Na);if(!c)throw new Error("Failed to create plugins folder");const l=a?i.folder(jo):null;if(a&&!l)throw new Error("Failed to create transfer audio folder");const m=r.reduce((y,f)=>(y[f.id]=f.metadata,y),{});i.file(Yn,JSON.stringify({samples:m},null,2),{binary:!1});const d=new Set,p=new Set;for(const y of r){const{sourceFileId:f,userFileInfo:g,name:v,plugins:I,slotNumber:A}=y.metadata;if(!f.includes(".")&&!d.has(f)){d.add(f);const O=`${v} - ${f}${g?g.ext:".wav"}`;u.file(O,oe.getSourceFileData(f,!0).then(T=>new Blob([T],{type:g?g.type:"audio/x-wav"})))}for(const{pluginName:O}of I)if(!p.has(O)){p.add(O);const T=yield Ma(O);T&&c.file(O,new Blob([T],{type:"text/javascript"}))}if(l){const O=f.includes(".")?`FACTORY-${A}`:f,T=`[SYRO] [SLOT ${A.toString().padStart(3,"0")}] ${v} - ${O}.wav`;l.file(T,On([y],()=>null).syroBufferPromise.then(({syroBuffer:F})=>new Blob([F],{type:"audio/x-wav"})))}}d.size||i.remove(Aa),p.size||i.remove(Na);const h=o.generateInternalStream({type:"blob",compression:"DEFLATE",compressionOptions:{level:9},streamFiles:!0});return h.on("data",(y,{percent:f})=>t(f/100)),h.accumulate()})}function Kn(n){return Et(this,null,function*(){const a=(n instanceof Jt.a?n:yield Jt.a.loadAsync(n)).folder(Ia);if(!a)throw new Error("Failed to access root folder");const r=a.file(Yn);if(!r)throw new Error("Missing expected volcasampler.json file");const{samples:o}=JSON.parse(yield r.async("text"));return o})}function Ro(n){return Et(this,arguments,function*({zipFile:t,idsToImport:a,onProgress:r,onConfirmPluginName:o,onConfirmPluginReplace:i}){const u=yield Jt.a.loadAsync(t),c=yield Kn(u),l=u.folder(Ia);if(!l)throw new Error("Failed to create root folder");const m=l.folder(Aa);if(!m)throw new Error("Failed to create samples folder");const d=l.folder(Na);if(!d)throw new Error("Failed to create plugins folder");const p=new Map,h=new Map,y={},f=[],g=[],v=[],I=Array(a.length).fill(0),A=()=>r(I.reduce((O,T)=>O+T,0)/I.length);return yield Promise.all(Object.entries(c).map((O,T)=>Et(this,[O,T],function*([F,B],U){if(!!a.includes(F))try{const{sourceFileId:k,plugins:x=[]}=B;p.has(k)||p.set(k,(()=>Et(this,null,function*(){if(!k.includes(".")&&!(yield Ja(k))){const[w]=m.file(new RegExp(`${k}\\.\\w+$`));if(!w)throw new Error("Cannot find source file");const _=yield w.async("uint8array",({percent:D,currentFile:L})=>{I[U]=D/100,A()});yield Xa(_,k)}}))());for(const{pluginName:S}of x)h.has(S)||h.set(S,(()=>Et(this,null,function*(){const w=d.file(S);if(!w)throw new Error("Cannot find plugin file");const _=yield w.async("string");(yield Qt({pluginName:S,pluginSource:_,onConfirmName:o,onConfirmReplace:i}))==="replaced"&&v.push(S)}))());yield p.get(k),yield Promise.all(x.map(({pluginName:S})=>h.get(S)));const M=yield oe.importToStorage(F,B);f.push(M);const b=yield de.importToStorage(M);g.push(b)}catch(k){console.error(k),I[U]=1,y[F]={metadata:B,error:k},A()}}))),r(1),{sampleContainers:f.slice().sort(mt),sampleCaches:g,replacedPluginNames:v,failedImports:y}})}var Fo=E(148),Do=E.n(Fo),ja=E(218),xo=E(137),Bo=E(123),Zn=E.n(Bo),Jn=e.a.memo(function({pluginName:t,variant:a,onConfirmName:r,onConfirmReplace:o,onCancelRename:i}){const[u,c]=Object(s.useState)(t.replace(/\.js$/,"").toLowerCase());return Object(s.useEffect)(()=>{c(t.replace(/\.js$/,"").toLowerCase())},[t]),e.a.createElement(C.a,{className:Zn.a.pluginConfirmModal,"aria-labelledby":"plugin-confirm-modal",show:!0,centered:!0,onHide:i},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"plugin-confirm-modal"},a==="confirm-name"&&"Confirm name of new plugin",a==="replace"&&"A plugin with this name exists",a==="rename"&&"Rename plugin")),e.a.createElement(C.a.Body,null,(a==="confirm-name"||a==="rename")&&e.a.createElement(ja.a,null,e.a.createElement(xo.a,{defaultValue:u,onChange:l=>{c(l.target.value=l.target.value.toLowerCase())},placeholder:"Plugin name","aria-label":"Plugin name","aria-describedby":".js",autoFocus:!0}),e.a.createElement(ja.a.Text,{id:".js"},".js")),a==="replace"&&e.a.createElement("p",null,"Do you want to replace the existing ",e.a.createElement("strong",null,t),"?")),e.a.createElement(C.a.Footer,{className:Zn.a.footer},a==="confirm-name"&&e.a.createElement(W.a,{type:"button",variant:"primary",disabled:!u,onClick:()=>{u&&r(`${u}.js`)}},"OK"),a==="replace"&&e.a.createElement(e.a.Fragment,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>o("change-name")},"Choose new name"),e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>o("use-existing")},"Use existing"),e.a.createElement(W.a,{type:"button",variant:"primary",onClick:()=>o("replace")},"Replace")),a==="rename"&&e.a.createElement(e.a.Fragment,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>i()},"Cancel"),e.a.createElement(W.a,{type:"button",variant:"primary",disabled:!u||t.replace(/\.js$/,"")===u,onClick:()=>{r(`${u}.js`)}},"Rename"))))}),Lo=Object.defineProperty,Xn=Object.getOwnPropertySymbols,Wo=Object.prototype.hasOwnProperty,Ho=Object.prototype.propertyIsEnumerable,qn=(n,t,a)=>t in n?Lo(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,Vo=(n,t)=>{for(var a in t||(t={}))Wo.call(t,a)&&qn(n,a,t[a]);if(Xn)for(var a of Xn(t))Ho.call(t,a)&&qn(n,a,t[a]);return n},er=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())}),zo=e.a.memo(function({userSamples:t,onUpdatePluginList:a,onRegenerateSampleCache:r,onImport:o}){const i=Object(s.useRef)(null),u=Object(s.useRef)(null),[c,l]=Object(s.useState)(null),[m,d]=Object(s.useState)(null),{unknownSamples:p,knownSamplesNew:h,knownSamplesOld:y}=Object(s.useMemo)(()=>{const b=new Map,S=new Map,w=new Map;for(const[_,D]of Object.entries(m||{})){const L=t.get(_);L?L.metadata.dateModified>D.dateModified?w.set(_,D):S.set(_,D):b.set(_,D)}return{unknownSamples:b,knownSamplesNew:S,knownSamplesOld:w}},[t,m]),[f,g]=Object(s.useState)(new Set);Object(s.useEffect)(()=>{g(new Set([...p.keys(),...h.keys()]))},[p,h]);const[v,I]=Object(s.useState)(0),[A,O]=Object(s.useState)(null),[T,F]=Object(s.useState)(null),B=c===null;Object(s.useEffect)(()=>{B&&(d(null),O(null),F(null),u.current=null,i.current&&(i.current.value=""))},[B]);const[U,k]=Object(s.useState)(null),x=Object(s.useRef)(t);x.current=t;const M=Object(s.useCallback)(b=>{const S=[...x.current.values()].filter(w=>w.metadata.plugins.some(_=>_.pluginName===b));for(const{id:w}of S)r(w)},[r]);{const b=c==="import",S=Object(s.useRef)(f);S.current=f,Object(s.useEffect)(()=>{if(!u.current||!b)return;let w=!1;return Ro({zipFile:u.current,idsToImport:[...S.current],onProgress(_){w||I(_)},onConfirmPluginName(_){return new Promise(D=>{k({pluginName:_,variant:"confirm-name",onConfirmName(L){D(L),k(null)},onConfirmReplace(){},onCancelRename(){}})})},onConfirmPluginReplace(_){return new Promise(D=>{k({pluginName:_,variant:"replace",onConfirmReplace(L){D(L),k(null)},onConfirmName(){},onCancelRename(){}})})}}).then(_=>er(this,[_],function*({sampleContainers:D,sampleCaches:L,replacedPluginNames:J,failedImports:q}){a();for(const ae of J)M(ae);o(D,L),O(q),l("report")})).catch(_=>{console.error(_),F(_),l("unexpected-error")}),()=>{w=!0}},[b,o,a,M])}return e.a.createElement(e.a.Fragment,null,e.a.createElement(W.a,{type:"button",variant:"outline-secondary",onClick:b=>{const S=b.currentTarget.querySelector("input");S&&b.target!==S&&S.click()}},"Load from Volca Sampler backup",e.a.createElement("input",{hidden:!0,type:"file",accept:"*.zip",ref:i,onChange:b=>er(this,null,function*(){const S=b.target.files&&b.target.files[0];if(!!S){u.current=S;try{const w=yield Kn(S);d(w),l("confirm")}catch(w){console.error(w),l("error-parsing")}}})})),e.a.createElement(C.a,{className:Do.a.importModal,onHide:c==="import"?void 0:()=>l(null),show:Boolean(c),"aria-labelledby":"import-modal"},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"import-modal"},c==="error-parsing"?"Error parsing zip archive":c==="confirm"?"Import samples to Volca Sampler":c==="import"?"Importing samples":c==="unexpected-error"?"Unexpected error while importing":c==="report"?"Sample import finished":null)),e.a.createElement(C.a.Body,null,c==="error-parsing"?e.a.createElement("p",null,"Please make sure you attached the correct file."):c==="confirm"?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",null,"Please confirm the list of samples you wish to import."),y.size?e.a.createElement(e.a.Fragment,null,e.a.createElement("h5",null,"More recent versions exist (",[...f].filter(b=>y.has(b)).length," ","/ ",y.size,")"),e.a.createElement(Gt,{samples:y,selectedSampleIds:f,setSelectedSampleIds:g})):null,h.size?e.a.createElement(e.a.Fragment,null,e.a.createElement("h5",null,"Older versions exist (",[...f].filter(b=>h.has(b)).length," ","/ ",h.size,")"),e.a.createElement(Gt,{samples:h,selectedSampleIds:f,setSelectedSampleIds:g})):null,p.size?e.a.createElement(e.a.Fragment,null,e.a.createElement("h5",null,"New samples (",[...f].filter(b=>p.has(b)).length," ","/ ",p.size,")"),e.a.createElement(Gt,{samples:p,selectedSampleIds:f,setSelectedSampleIds:g})):null):c==="import"?e.a.createElement(ht.a,{striped:!0,animated:!0,variant:"primary",now:100*v}):c==="unexpected-error"?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",null,"An error occured. Please make sure the zip contains all the correct audio files."),T&&e.a.createElement("pre",null,T.message," ",JSON.stringify(T,null,1))):c==="report"?(()=>{const b=A&&Object.entries(A);return b&&b.length?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",null,e.a.createElement("strong",null,b.length," /"," ",f.size," samples")," ","failed to import:"),b.map(([S,{metadata:w,error:_}])=>e.a.createElement("details",{key:S},e.a.createElement("summary",null,w.name),e.a.createElement("pre",null,_.message," ",JSON.stringify(_,null,1))))):e.a.createElement("p",null,"Your samples were imported successfully.")})():null),e.a.createElement(C.a.Footer,null,c==="confirm"&&e.a.createElement(e.a.Fragment,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>l(null)},"Cancel"),e.a.createElement(W.a,{type:"button",variant:"primary",disabled:!f.size,onClick:()=>{I(0),l("import")}},"Import now")),c==="import"&&e.a.createElement(W.a,{type:"button",variant:"primary",onClick:()=>l(null)},"Cancel"),(c==="report"||c==="error-parsing"||c==="unexpected-error")&&e.a.createElement(W.a,{type:"button",variant:"primary",onClick:()=>l(null)},"OK"))),U&&e.a.createElement(Jn,Vo({},U)))}),Tt=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});let tr;function Ta(){const n=un();return tr=tr||new n(navigator.mediaDevices.getSupportedConstraints().sampleRate?{sampleRate:je}:{})}function Uo(){return Tt(this,null,function*(){{const r=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!1});for(const o of r.getTracks())o.stop()}const t=(yield navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="audioinput"),a=[];for(const r of t){const o=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:r.deviceId,channelCount:2},video:!1}),i=(yield navigator.mediaDevices.enumerateDevices()).find(({deviceId:c})=>r.deviceId===c).label;let u=1;{const c=o.getAudioTracks()[0],l=c.getSettings().channelCount;l?u=l:c.getCapabilities&&(u=(c.getCapabilities().channelCount||{}).max||u)}for(const c of o.getTracks())c.stop();a.push({device:{deviceId:r.deviceId,label:i},channelsAvailable:u})}return a})}let Ra;function Go(n){return Tt(this,arguments,function*({onData:t,onFinish:a}){const r=Ta();Ra=Ra||r.audioWorklet.addModule("recorderWorkletProcessor.js"),yield Ra;const o=new AudioWorkletNode(r,"recorder-worklet",{parameterData:{bufferSize:1024}});o.port.onmessage=u=>{if(u.data.eventType==="data"){const c=u.data.audioChannels;t(c)}u.data.eventType==="stop"&&a()};const i=o.parameters.get("isRecording");return i.setValueAtTime(1,r.currentTime),{recorderNode:o,stop(){i.setValueAtTime(0,r.currentTime)}}})}function $o({channelCount:n,onData:t,onFinish:a}){const o=Ta().createScriptProcessor(1024,n,n);let i=!1;return o.onaudioprocess=u=>{const c=Array(n).fill().map((l,m)=>u.inputBuffer.getChannelData(m));t(c),i&&a()},{recorderNode:o,stop(){i=!0}}}function Qo(n){return Tt(this,null,function*(){return typeof AudioWorkletNode=="undefined"?$o(n):yield Go(n)})}function Yo(n){return Tt(this,arguments,function*({deviceId:t,channelCount:a,onStart:r,onUpdate:o}){const i=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:t,channelCount:a,sampleRate:je,echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},video:!1}),u=Ta(),c=u.createMediaStreamSource(i),{recorderNode:l,stop:m}=yield Qo({channelCount:a,onData:f,onFinish:O});c.connect(l),l.connect(u.destination);const d=65;r(u.sampleRate,d);const p=d*u.sampleRate;let h=0;const y=Array(a).fill([]);function f(T){let F=0;const B=[];for(let x=0;x<a;x++){const M=T[x],b=M.length,S=M.slice(0,Math.min(b,p-h));sn(S),F||(F=S.length),B.push(S)}const U=Hr(B),k=cn(U);y.push(k),h+=F,h>=p&&m(),o(B)}let g,v;const I=new Promise((T,F)=>{g=T,v=F});let A=!1;function O(){return Tt(this,null,function*(){if(A)return;try{const B=yield new Blob(y).arrayBuffer(),U=new Float32Array(B),k=Ua()({channels:a,sampleRate:u.sampleRate,bitDepth:16,dataLength:U.byteLength}),x=new Uint8Array(k.length+U.byteLength);x.set(k),x.set(new Uint8Array(U.buffer),k.length),g(x)}catch(F){v(F)}const T=i.getTracks();for(const F of T)F.stop();l.disconnect(u.destination),c.disconnect(l),A=!0})}return{stop:m,mediaRecording:I}})}var Ko=E(21),Ie=E.n(Ko),Rt=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});const Zo=typeof window!="undefined"&&new URLSearchParams(window.location.search).has("any_file"),ar="capture_device_preference";let nr=null;function Jo(n,t){const a=Object(s.useRef)(JSON.parse(typeof localStorage!="undefined"&&localStorage.getItem(ar)||"null")),[r]=Object(s.useState)(a.current),[o,i]=Object(s.useState)(nr),[u,c]=Object(s.useState)(o?"ok":"pending"),[l,m]=Object(s.useState)(null),d=Object(s.useMemo)(()=>l?l.device.deviceId:"",[l]);Object(s.useEffect)(()=>{nr=o,c("ok")},[o]);const p=Object(s.useCallback)(()=>{let w=!1;return Uo().then(_=>{w||_.length&&(i(new Map(_.map(D=>[D.device.deviceId,D]))),m(D=>{if(D)return a.current=null,D;if(a.current){const L=_.find(({device:J})=>a.current.deviceId===J.deviceId);if(L)return L}return a.current=null,_[0]}))}).catch(_=>{if(!w){if(_ instanceof DOMException){if(_.name==="NotAllowedError"){c("denied");return}if(_.name==="NotFoundError"){c("unavailable");return}}throw _}}),()=>{w=!0}},[]),[h,y]=Object(s.useState)(1);Object(s.useEffect)(()=>{const w=o&&o.get(d);w&&(a.current&&a.current.deviceId===w.device.deviceId&&a.current.channelCount<=w.channelsAvailable?y(a.current.channelCount):y(w.channelsAvailable),a.current=null)},[o,d]),Object(s.useEffect)(()=>{l&&localStorage.setItem(ar,JSON.stringify({deviceId:l.device.deviceId,channelCount:h,label:l.device.label}))},[l,h]);const[f,g]=Object(s.useState)("ready"),[v,I]=Object(s.useState)(""),[A,O]=Object(s.useState)(!1);Object(s.useEffect)(()=>{f!=="ready"&&O(!1)},[f]);const T=Object(s.useCallback)(()=>{O(!1)},[]),[F,B]=Object(s.useState)({fn(w){}});Object(s.useEffect)(()=>F.fn,[F]);const[U,k]=Object(s.useState)(1/0),[x,M]=Object(s.useState)(0),b=Object(s.useCallback)(()=>Rt(this,null,function*(){let w=!1;const _=(ae,me)=>Yo({deviceId:ae,channelCount:me,onStart:(Q,ue)=>{const G=ue*Q;k(Q),M(G),g("capturing")},onUpdate:n}),D=a.current,{mediaRecording:L,stop:J}=yield D?(()=>Rt(this,null,function*(){try{return _(D.deviceId,D.channelCount)}catch(ae){if(ae instanceof DOMException&&ae.name==="NotFoundError")return _(d,h);throw ae}}))():_(d,h);B({fn(ae){J(),ae&&(w=!0)}});let q;try{q=yield L}catch(ae){I(String(ae)),g("error");return}if(w)g("ready");else{g("finalizing");const ae=yield t(q);w||(g("ready"),ae==="silent"&&O(!0))}}),[d,h,n,t]),S=Object(s.useCallback)(w=>{if(w.target.files&&w.target.files.length){const _=w.target.files[0];_.arrayBuffer().then(D=>Rt(this,null,function*(){const L=new Uint8Array(D);let J;try{J=yield ft(L)}catch(ae){alert("Unsupported audio format detected");return}if(J.length>65*J.sampleRate){alert("Please select an audio file no more than 65 seconds long");return}g("finalizing");const q=yield t(L,_);g("ready"),q==="silent"&&O(!0)}))}},[t]);return{captureDevices:o,accessState:u,selectedCaptureDevice:l,selectedChannelCount:h,captureDeviceFromStorage:r,captureState:f,recordingError:v,showSilenceWarning:A,sampleRate:U,maxSamples:x,refreshCaptureDevices:p,setSelectedCaptureDevice:m,setSelectedChannelCount:y,beginRecording:b,stopRecording:F.fn,importFile:S,dismissSilenceWarning:T}}const Xt=3;function Xo({canvas:n,peaks:t,drawUntil:a,scaleCoefficient:r}){const o="#fff",i=n.getContext("2d");i.imageSmoothingEnabled=!1;const{width:u,height:c}=n;i.clearRect(0,0,u,c),i.fillStyle=o;for(let l=0;l<a&&l<t.length;l++){const m=t[l],d=c*m,p=Math.max(Math.round(r*d),2);i.fillRect(l*Xt,c-p,Xt-1,p)}n.style.left=`min(0px, calc(var(--record-ui-width) - ${a*Xt}px))`}function qo({userSamples:n,onUpdatePluginList:t,onRegenerateSampleCache:a,onBulkImport:r,onRecordFinish:o}){const i=Object(s.useRef)(null),u=Object(s.useRef)(0),c=Object(s.useRef)(new Float32Array),l=Object(s.useRef)(0),m=Object(s.useRef)([]),d=Object(s.useRef)(1/0),p=Object(s.useRef)(0),[h,y]=Object(s.useState)(0),f=Object(s.useCallback)(Q=>Rt(this,null,function*(){const ue=u.current,G=c.current,Z=m.current;if(Z.push(Q),p.current+=Q[0].length,y(Math.floor(p.current/d.current)),Z.reduce((K,[{length:ee}])=>K+ee,0)>=ue){const K=yield Promise.all(Q.map((N,R)=>Z.reduce((j,H)=>[...j,H[R]],[])).map(N=>Rt(this,null,function*(){const R=yield new Blob(N).arrayBuffer();return new Float32Array(R)}))),ee=K.map(N=>rt(new Float32Array(N.buffer,0,ue)));G[l.current++]=Math.max(...ee),Xo({canvas:i.current,peaks:G,drawUntil:l.current,scaleCoefficient:.3}),m.current=[K.map(N=>N.slice(ue))]}}),[]),{captureDevices:g,accessState:v,selectedCaptureDevice:I,selectedChannelCount:A,captureDeviceFromStorage:O,captureState:T,recordingError:F,showSilenceWarning:B,maxSamples:U,sampleRate:k,refreshCaptureDevices:x,setSelectedCaptureDevice:M,setSelectedChannelCount:b,beginRecording:S,stopRecording:w,importFile:_,dismissSilenceWarning:D}=Jo(f,o);d.current=k,Object(s.useEffect)(()=>{const Q=i.current;Q&&(Q.width=Q.offsetWidth,Q.height=Q.offsetHeight)},[v]),Object(s.useLayoutEffect)(()=>{const Q=i.current;!Q||(T!=="finalizing"&&Q.getContext("2d").clearRect(0,0,Q.width,Q.height),T==="capturing"&&U&&(u.current=Math.floor(Xt*U/i.current.width),c.current=new Float32Array(Math.floor(U/u.current)),l.current=0,m.current=[],d.current=1/0,p.current=0,y(0)))},[U,T]);const[L,J]=Object(s.useState)(!1);Object(s.useEffect)(()=>{L&&x()},[L,x]);const q=I?A:O?O.channelCount:A,[ae,me]=Object(s.useState)(!1);return e.a.createElement(St.a,{fluid:"sm",className:Ie.a.container},v==="denied"?e.a.createElement("p",null,"Looks like you didn't grant access to your audio input device. Please give Volca Sampler access, then"," ",e.a.createElement(W.a,{type:"button",variant:"secondary",onClick:x},"try again")):v==="unavailable"?e.a.createElement("p",null,"Volca Sampler couldn't find any audio input devices. Please connect one, then"," ",e.a.createElement(W.a,{type:"button",variant:"secondary",onClick:x},"try again")):e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",null,"Send a new sound to your volca sample!",e.a.createElement("span",{style:{fontSize:"0.7em"}},e.a.createElement("br",null),e.a.createElement("span",null,"(or volca sample 2!)"))),B&&e.a.createElement("div",{className:Ie.a.alertContainer},e.a.createElement(Zt.a,{dismissible:!0,variant:"warning",onClose:D},e.a.createElement(Zt.a.Heading,null,"Your recording was totally silent."),e.a.createElement("p",null,"Check the ",e.a.createElement("strong",null,"Audio input settings")," and your connections, then try again."))),e.a.createElement(W.a,{id:"record-button",className:Ie.a.recordButton,type:"button",variant:"primary",size:"lg",onClick:T==="capturing"?()=>w():S,disabled:T==="finalizing"},e.a.createElement("canvas",{ref:i}),e.a.createElement("span",{className:Ie.a.mainText},["capturing","finalizing"].includes(T)?"Finished recording":"Start recording"),["capturing","finalizing"].includes(T)&&e.a.createElement("span",{className:Ie.a.timeRecorded},"0:",String(h).padStart(2,"0"))),T==="error"&&F&&e.a.createElement("p",null,"Recording error: ",F)||null,["capturing","finalizing"].includes(T)?e.a.createElement(e.a.Fragment,null,e.a.createElement(W.a,{size:"sm",type:"button",variant:"secondary",onClick:()=>w(!0)},"Cancel")):e.a.createElement(e.a.Fragment,null,e.a.createElement(De.a,{activeKey:L?"audioInput":"nothing"},e.a.createElement(De.a.Item,{eventKey:"audioInput"},e.a.createElement(De.a.Header,{className:Ie.a.audioInputHeader,onClick:()=>J(Q=>!Q)},e.a.createElement("div",null,e.a.createElement("span",null,"Audio input settings"),(I||O)&&e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"small"},e.a.createElement("strong",null,"Capture device:")," ",I?I.device.label||I.device.deviceId:O?O.label:""),e.a.createElement("p",{className:"small"},e.a.createElement("strong",null,"Input channels:")," ",q===1?"Mono":"Stereo")))),e.a.createElement(De.a.Body,null,e.a.createElement(se.a.Group,null,e.a.createElement(se.a.Label,null,"Capture device"),e.a.createElement(se.a.Select,{value:I?I.device.deviceId:O?O.deviceId:"",onChange:Q=>g&&v==="ok"&&M(g.get(Q.target.value)||null)},g&&v==="ok"?[...g].map(([Q,{device:ue}])=>e.a.createElement("option",{key:Q,value:Q},ue.label||Q)):O?e.a.createElement("option",{value:O.deviceId,disabled:!0},O.label||O.deviceId):e.a.createElement("option",{value:"",disabled:!0},"Loading devices..."))),e.a.createElement(se.a.Group,null,e.a.createElement(se.a.Label,null,"Input channels"),e.a.createElement(va.a,{className:Ie.a.channelOptionSelect},[1,2].map(Q=>e.a.createElement(zt.a,{id:"channels-toggle",key:Q,className:Ie.a.channelOption,type:"radio",variant:"outline-secondary",name:"channels",value:Q,checked:Q===q,disabled:q!==Q&&(I?I.channelsAvailable:1)<Q,onClick:()=>b(Number(Q))},Q===1?"Mono":"Stereo")))),e.a.createElement("p",{className:["small",Ie.a.stereoExplanation].join(" ")},"Stereo input is summed to mono.")))),e.a.createElement(W.a,{variant:"link",onClick:()=>me(!0)},"Want to record your device's audio output?"))),!["capturing","finalizing"].includes(T)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(W.a,{className:Ie.a.importFileButton,type:"button",variant:"secondary",onClick:Q=>{const ue=Q.currentTarget.querySelector("input");ue&&Q.target!==ue&&ue.click()}},"Import an audio file",e.a.createElement("input",{hidden:!0,type:"file",accept:Zo?void 0:"audio/*,video/*,.wav,.mp3,.ogg",onChange:_})),e.a.createElement(zo,{userSamples:n,onUpdatePluginList:t,onRegenerateSampleCache:a,onImport:r})),e.a.createElement(C.a,{show:ae,"aria-labelledby":"system-record-modal",onHide:()=>me(!1)},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"system-record-modal"},"Recording audio playing on your device")),e.a.createElement(C.a.Body,{onClick:Q=>{Q.target instanceof HTMLImageElement&&window.open(Q.target.src,"_blank","noreferrer")},className:Ie.a.systemRecordModalBody},e.a.createElement(Ao.a,{defaultActiveKey:_t,className:Ie.a.osTabs},e.a.createElement(jt.a,{eventKey:"windows",title:"Windows"},e.a.createElement("p",null,"Windows has a built-in capture device called"," ",e.a.createElement("strong",null,"Stereo Mix")," for recording system audio, but it needs to be enabled."," ",e.a.createElement("a",{href:"https://allthings.how/how-to-enable-missing-stereo-mix-option-in-windows-10/",target:"_blank",rel:"noreferrer"},"Follow this tutorial")," ","to enable it."),e.a.createElement("p",null,"Once the ",e.a.createElement("strong",null,"Stereo Mix")," capture device has been enabled, you can select it from Volca Sampler's"," ",e.a.createElement("strong",null,"Audio input settings"),".")),e.a.createElement(jt.a,{eventKey:"mac",title:"Mac"},e.a.createElement("p",null,"The easiest way to capture system audio on macOS is to install a free app called"," ",e.a.createElement("a",{href:"https://github.com/kyleneideck/BackgroundMusic/blob/master/README.md",target:"_blank",rel:"noreferrer"},"Background Music"),". Make sure you download the"," ",e.a.createElement("a",{href:"https://github.com/kyleneideck/BackgroundMusic/releases/tag/v0.4.0",target:"_blank",rel:"noreferrer"},"0.4.0")," ","version, since earlier versions don't work well with Volca Sampler."),e.a.createElement("p",null,"Once Background Music has been installed, you can select the"," ",e.a.createElement("strong",null,"Background Music (Virtual)")," capture device from Volca Sampler's ",e.a.createElement("strong",null,"Audio input settings"),".")),e.a.createElement(jt.a,{eventKey:"linux",title:"Linux"},e.a.createElement("p",null,"Assuming you have PulseAudio installed on your Linux system, you can run the following command to create a capture device called"," ",e.a.createElement("strong",null,"System_Output"),":"),e.a.createElement("pre",null,e.a.createElement("code",null,`pactl \\
  load-module module-remap-source \\
  master="$( \\
    pactl list \\
    | grep -A2 '^Source #' \\
    | grep 'Name: .*\\.monitor$' \\
    | awk '{print $NF}' \\
    | tail -n1 \\
  )" \\
  source_name=systemout_monitor \\
  source_properties=device.description=System_Output`)),e.a.createElement("p",null,"Once the ",e.a.createElement("strong",null,"System_Output")," capture device has been created, you can select it from Volca Sampler's"," ",e.a.createElement("strong",null,"Audio input settings"),"."),e.a.createElement("p",null,"Note that the capture device will ",e.a.createElement("i",null,"not")," persist after reboot, so if you want it to always be available, you'll need to add the above command into a bash profile file like"," ",e.a.createElement("code",null,"~/.bashrc"),".")),e.a.createElement(jt.a,{eventKey:"ios",title:"iOS"},e.a.createElement("p",null,"You can't record directly into Volca Sampler with iOS. Instead, you can capture a recording to be imported as a file. The instructions below show you how to record a screencapture video with iOS, convert it to the appropriate audio format, and import it."),e.a.createElement("h4",null,"Enable Screen Recording"),e.a.createElement("p",null,"First you'll need to go into ",e.a.createElement("strong",null,"Settings"),", choose"," ",e.a.createElement("strong",null,"Control Panel")," in the left-side menu, and tap the ",e.a.createElement("strong",null,'"+"')," button next to"," ",e.a.createElement("strong",null,"Screen Recording"),", which can be found under the"," ",e.a.createElement("strong",null,"More Controls")," list. If"," ",e.a.createElement("strong",null,"Screen Recording")," is already listed under"," ",e.a.createElement("strong",null,"Included Controls"),", you can skip this step."),e.a.createElement("img",{src:"ios_enable_screen_recording.png",alt:""}),e.a.createElement("h4",null,"Capture recording"),e.a.createElement("p",null,"Next, once you are ready to record, swipe down from the"," ",e.a.createElement("strong",null,"top-right")," and tap the"," ",e.a.createElement("strong",null,"Screen Recording")," button which will now appear in the ",e.a.createElement("strong",null,"Control Panel")," menu."),e.a.createElement("img",{src:"ios_record_start.png",alt:""}),e.a.createElement("p",null,"Once the recording has started, you'll see a small recording status button at the top of the screen. Tap this button when you've finished recording."),e.a.createElement("img",{src:"ios_stop_recording.png",alt:""}),e.a.createElement("p",null,"After finishing recording, tap the notification appearing at the top of the screen, which will take you to the"," ",e.a.createElement("strong",null,"Photos")," app to review your recording."),e.a.createElement("img",{src:"ios_go_to_saved_file.png",alt:""}),e.a.createElement("h4",null,"Trim recording"),e.a.createElement("p",null,"If your recorded video is longer than 65 seconds, you will need to trim it so it will be accepted by Volca Sampler's file import. Tap the ",e.a.createElement("strong",null,"Edit")," button..."),e.a.createElement("img",{src:"ios_edit_video_select.png",alt:""}),e.a.createElement("p",null,"...and adjust as needed, tapping ",e.a.createElement("strong",null,"Done")," to finish."),e.a.createElement("img",{src:"ios_edit_recording.png",alt:""}),e.a.createElement("h4",null,"Convert to WAV"),e.a.createElement("p",null,"You're almost done. Your video is likely saved in"," ",e.a.createElement("strong",null,"AIFF")," format, which is not supported by Volca Sampler. One of the best free iOS apps for converting AIFF video to ",e.a.createElement("strong",null,"WAV")," audio is"," ",e.a.createElement("a",{href:"https://apps.apple.com/ca/app/audio-converter-extract-mp3/id1393886341",target:"_blank",rel:"noreferrer"},"Audio Converter"),`. Don't confuse this with with "The Audio Converter", which requires payment to convert to WAV.`),e.a.createElement("p",null,"After installing and launching ",e.a.createElement("strong",null,"Audio Converter"),", tap the ",e.a.createElement("strong",null,'"+"')," button to the right and select"," ",e.a.createElement("strong",null,"Import videos")," to import your recording from your ",e.a.createElement("strong",null,"Photos")," library."),e.a.createElement("img",{src:"ios_import_video.png",alt:""}),e.a.createElement("p",null,"Tap the imported video and select ",e.a.createElement("strong",null,"Extract Audio"),"."),e.a.createElement("img",{src:"ios_extract_audio_select.png",alt:""}),e.a.createElement("p",null,"The only setting that needs to be configured is the"," ",e.a.createElement("strong",null,"Format"),", which should be ",e.a.createElement("strong",null,"wav"),". When this is selected, tap ",e.a.createElement("strong",null,"Start Conversion"),"."),e.a.createElement("img",{src:"ios_convert_to_wav.png",alt:""}),e.a.createElement("h4",null,"Import to Volca Sampler"),e.a.createElement("p",null,"Once the conversion to WAV has completed, you can choose your file for import in Volca Sampler.")),e.a.createElement(jt.a,{eventKey:"android",title:"Android"},e.a.createElement("p",null,"You can't record directly into Volca Sampler with Android. Instead, you can capture a recording to be imported as a file. The instructions below show you how to record a screencapture video with Android, convert it to a trimmed WAV file, and import it."),e.a.createElement("p",null,e.a.createElement("strong",null,"Note:")," Some apps won't allow you to record their audio. Google Chrome and Spotify, for example, block audio capture. The way to find out if an app allows audio capture is to listen to recorded files and see whether the audio is muted."),e.a.createElement("h4",null,"Enable Screen record"),e.a.createElement("p",null,"First you'll need to swipe down from the top of the screen two times to see the list of ",e.a.createElement("strong",null,"Action Tiles")," and tap the ",e.a.createElement("strong",null,"Pencil")," icon shown at the bottom-left of the overlay, which will open the ",e.a.createElement("strong",null,"Edit Tiles")," screen."),e.a.createElement("img",{src:"android_edit_tiles.png",alt:""}),e.a.createElement("p",null,"Grab the ",e.a.createElement("strong",null,"Screen record")," tile and drag it up into the list of active tiles. If ",e.a.createElement("strong",null,"Screen record")," is already active, you can skip this step."),e.a.createElement("img",{src:"android_enable_screen_recording.png",alt:""}),e.a.createElement("h4",null,"Capture recording"),e.a.createElement("p",null,"Tap the back button to return to the screen of"," ",e.a.createElement("strong",null,"Action Tiles"),", which should now include"," ",e.a.createElement("strong",null,"Screen record"),". Tap"," ",e.a.createElement("strong",null,"Screen record"),"."),e.a.createElement("img",{src:"android_selection_screen_recording.png",alt:""}),e.a.createElement("p",null,"Before recording, change the audio source from"," ",e.a.createElement("strong",null,"Microphone")," to ",e.a.createElement("strong",null,"Device audio"),". Tap ",e.a.createElement("strong",null,"Start"),"."),e.a.createElement("img",{src:"android_start_recording.png",alt:""}),e.a.createElement("p",null,"Make sure to wait for the countdown at the top of the screen before starting to play your audio."),e.a.createElement("img",{src:"android_wait_for_recording.png",alt:""}),e.a.createElement("p",null,"To finish recording, swipe down from the top of the screen and tap the recording notification."),e.a.createElement("img",{src:"android_stop_recording.png",alt:""}),e.a.createElement("h4",null,"Trim and convert to WAV"),e.a.createElement("p",null,"You're almost done. Your video is likely saved in"," ",e.a.createElement("strong",null,"MP4")," format, which can be imported directly to Volca Sampler."),e.a.createElement("p",null,"However, if your video is longer than 65 seconds, you will need to trim it, and you might prefer to import the file in"," ",e.a.createElement("strong",null,"WAV")," format. One of the best free Android apps for converting MP4 video to WAV audio, and trimming it at the same time, is"," ",e.a.createElement("a",{href:"https://play.google.com/store/apps/details?id=com.psma.audioextractor",target:"_blank",rel:"noreferrer"},"Audio Extractor"),"."),e.a.createElement("img",{src:"android_extract_audio.png",alt:""}),e.a.createElement("h4",null,"Import to Volca Sampler"),e.a.createElement("p",null,"Once your recording has been trimmed and converted as needed, you can choose your file for import in Volca Sampler.")))),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"primary",onClick:()=>me(!1)},"Close"))))}var ei=qo,yt=E(220),ti=e.a.memo(function({isPlaybackActive:t,playbackProgress:a}){return e.a.createElement("div",{className:[Ye.a.playbackOverlay,t?Ye.a.playbackActive:""].join(" "),style:{"--playback-progress":`${100*a}%`}},e.a.createElement("div",{className:Ye.a.playback}))}),ai=E(12),we=E.n(ai);const rr=typeof IntersectionObserver!="undefined",ni=e.a.memo(function({sample:t,sampleCache:a,selected:r,onSampleSelectClick:o}){const i=Object(s.useRef)(null),[u,c]=Object(s.useState)(!rr);Object(s.useLayoutEffect)(()=>{if(!rr)return;const g=i.current;if(!g)throw new Error("Waveform container should be defined");const v=g.getBoundingClientRect();if(v.top+v.height>=0&&v.bottom-v.height<=window.innerHeight){c(!0);return}const I=new IntersectionObserver(([A])=>{A.isIntersecting&&(c(!0),I.unobserve(g))});return I.observe(g),()=>I.disconnect()},[]);const[l,m]=Object(s.useState)(!1),{audioBuffer:d}=ya(a,l),{isPlaybackActive:p,playbackProgress:h,togglePlayback:y}=la(d||null),f=Object(s.useCallback)(g=>{y(g),m(!0)},[y]);return e.a.createElement("div",{className:["list-group-item",we.a.listItem,r?`active ${we.a.active}`:""].join(" "),tabIndex:-1,onClick:g=>{const v=g.currentTarget.querySelector("button");v&&v.contains(g.target)||o(t.id,g)}},e.a.createElement("span",{className:we.a.sampleTitle},e.a.createElement("div",{className:we.a.multiSelector},e.a.createElement("input",{readOnly:!0,type:"radio",checked:r})),e.a.createElement(W.a,{className:we.a.playbackButton,tabIndex:-1,variant:"dark",onClick:g=>{f(g.nativeEvent)}},p?e.a.createElement(bn.a,null):e.a.createElement(yn.a,null)),e.a.createElement("span",{className:we.a.name},t.metadata.name),e.a.createElement("span",{className:we.a.slot},"S.",t.metadata.slotNumber.toString().padStart(3,"0"))),e.a.createElement("div",{className:[we.a.waveformContainer,p?we.a.playbackActive:""].join(" "),style:{"--waveform-width":`${na}px`},ref:i},u&&a&&e.a.createElement(e.a.Fragment,null,e.a.createElement(Ht,{peaks:a.cachedInfo.waveformPeaks,scaleCoefficient:1}),e.a.createElement(ti,{isPlaybackActive:p,playbackProgress:h}))))});function ri({samples:n,sampleCaches:t,selectedSampleId:a,multipleSelection:r,onSampleSelect:o}){const i=Object(s.useRef)(null),u=Object(s.useRef)(n);u.current=n;const c=Object(s.useCallback)(v=>{const I=u.current.findIndex(B=>B.id===v),A=i.current;if(!A||I===-1)return;const O=A.children[I],T=O.closest(".accordion-collapse");if(!T)return;(T.offsetTop+T.scrollTop>O.offsetTop||T.scrollTop+T.offsetHeight<O.offsetTop-O.offsetHeight)&&O.scrollIntoView({block:"nearest"})},[]);Object(s.useEffect)(()=>{a&&c(a)},[a,c]);const l=Object(s.useRef)(o);l.current=o;const m=Object(s.useRef)(r);m.current=r;const d=Object(s.useRef)(null),p=Object(s.useRef)(null);Object(s.useEffect)(()=>{d.current=null,p.current=null},[n.length]),Object(s.useEffect)(()=>{d.current&&(!r||!r.has(d.current))&&(d.current=null),p.current&&(!r||!r.has(p.current))&&(p.current=null)},[r]);const h=Object(s.useCallback)((v,I)=>{const A=u.current.map(F=>F.id),O=m.current;let T=-1;if(I.shiftKey&&d.current&&(!O||O.has(d.current))&&(T=A.indexOf(d.current))!==-1){const F=A.indexOf(v),B=A.slice(Math.min(T,F),Math.max(T,F)+1),U=p.current?A.indexOf(p.current):-1;let k=[];return U!==-1&&(k=A.slice(Math.min(U,F),Math.max(U,F)+1).filter(x=>!B.includes(x))),l.current(...B.filter(x=>!O||!O.has(x)),...k.filter(x=>O&&O.has(x))),p.current=v,c(v),!0}return!1},[c]),y=Object(s.useCallback)(v=>{if(!i.current||v.key!=="ArrowUp"&&v.key!=="ArrowDown"&&!(m.current&&v.key===" "))return;const I=v.target.closest(`.${we.a.listItem}`);if(I)if(v.preventDefault(),v.key===" "){v.stopPropagation();const A=I.querySelector(`.${we.a.playbackButton}`);A&&A.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}else{const A=Array.prototype.indexOf.call(i.current.children,I);v.key==="ArrowUp"&&A>0&&I.previousElementSibling instanceof HTMLDivElement&&I.previousElementSibling.focus(),v.key==="ArrowDown"&&A+1<u.current.length&&I.nextElementSibling instanceof HTMLDivElement&&I.nextElementSibling.focus()}},[]),f=Object(s.useCallback)(v=>{if(!i.current||!(document.activeElement instanceof HTMLDivElement)||(m.current&&!v.shiftKey?v.key!=="Enter":v.key!=="ArrowUp"&&v.key!=="ArrowDown"))return;const I=Array.prototype.indexOf.call(i.current.children,document.activeElement);if(I===-1)return;v.preventDefault();const A=u.current[I];A&&(m.current&&v.shiftKey&&h(A.id,v)||l.current(A.id),c(A.id))},[h,c]),g=Object(s.useCallback)((v,I)=>{h(v,I)||(l.current(v),d.current=v,p.current=null,c(v))},[h,c]);return e.a.createElement("ul",{ref:i,className:["list-group list-group-flush",r?we.a.multiSelect:"",we.a.noSelect].join(" "),onKeyDown:y,onKeyUp:f},n.length?n.map(v=>e.a.createElement(ni,{key:v.id,sample:v,sampleCache:t.get(v.id)||null,selected:r?r.has(v.id):v.id===a,onSampleSelectClick:g})):e.a.createElement("li",{className:"list-group-item"},e.a.createElement(se.a.Label,{className:we.a.emptyListMessage},"No samples found.")))}var li=ri,oi=E(16),Se=E.n(oi),lr=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});function or(n,t){return t.length?n.filter(({metadata:{name:a,slotNumber:r}})=>{const o=a.toLowerCase();return t.every(i=>r===Number(i.replace(/^S\./i,""))||o.includes(i))}):n}var ii=e.a.memo(function({loading:t,focusedSampleId:a,userSamples:r,factorySamples:o,userSampleCaches:i,factorySampleCaches:u,onSampleSelect:c,onSampleDelete:l}){const[m,d]=Object(s.useState)(""),p=m.trim().toLowerCase(),[h,y]=Object(s.useState)(null);{const P=Boolean(m);Object(s.useLayoutEffect)(()=>{y(a&&o.has(a)?"factory":r.size?"user":"factory")},[r,o,a,P])}const[f,g]=Object(s.useState)(["user","factory"]);Object(s.useLayoutEffect)(()=>{p&&g(["user","factory"])},[p]);const v=Object(s.useCallback)(P=>{g(K=>K.includes(P)?K.filter(ee=>ee!==P):K.concat(P))},[]),I=Object(s.useCallback)(P=>{if(P.key==="ArrowDown"){P.preventDefault();const ee=P.target.closest(`.${Se.a.accordionItem}`);if(!ee){console.warn("Expected accordionItem class on parent.");return}const N=ee.querySelector("ul > div");N&&N.focus()}},[]),A=Object(s.useMemo)(()=>p?[...new Set(p.split(/\s+/).filter(Boolean))]:[],[p]),O=Object(s.useMemo)(()=>or([...r.values()],A),[r,A]),T=Object(s.useMemo)(()=>or([...o.values()],A),[o,A]),F=Object(s.useRef)(null);Object(s.useEffect)(()=>{const P=F.current;if(!P)return;const K=P.getElementsByClassName(we.a.name),ee=P.getElementsByClassName(we.a.slot);if(!A.length){for(let N=0;N<K.length;N++)K[N].innerHTML=K[N].textContent||"",ee[N].innerHTML=ee[N].textContent||"";return}for(let N=0;N<K.length;N++){let R=K[N].textContent||"";const j=ee[N].textContent||"",H=Number(j.slice(2));let V=!1;for(const $ of A){const te=R.toLowerCase().indexOf($);te!==-1&&(R=R.slice(0,te)+"<mark>"+R.slice(te,te+$.length)+"</mark>"+R.slice(te+$.length)),!V&&Number($.replace(/^S\./i,""))===H&&(V=!0,ee[N].innerHTML="<mark>"+j+"</mark>")}K[N].innerHTML=R}},[A]);const B=Object(s.useRef)(null),U=Object(s.useRef)(null),k=Object(s.useRef)(!1),x=Object(s.useRef)(!1);Object(s.useEffect)(()=>{if(!B.current||!U.current)return;function P(){k.current=!0}function K(){x.current=!0}function ee(){k.current=!1,x.current=!1}const N=B.current,R=U.current;return N.addEventListener("mousedown",P),R.addEventListener("mousedown",K),window.addEventListener("mouseup",ee),()=>{N.removeEventListener("mousedown",P),R.removeEventListener("mousedown",K),window.removeEventListener("mouseup",ee)}},[t]);const[M,b]=Object(s.useState)(null),S=Boolean(M),w=Object(s.useCallback)((...P)=>{S||P.length>1?b(K=>{const ee=new Set(K);for(const N of P)K&&K.has(N)?ee.delete(N):ee.add(N);return ee}):c(P[0])},[S,c]),_=Object(s.useMemo)(()=>M&&[...M].map(P=>r.get(P)||o.get(P)).filter(Boolean).sort((P,K)=>P.metadata.slotNumber-K.metadata.slotNumber),[r,o,M]),D=Object(s.useMemo)(()=>_&&_.filter(P=>r.has(P.id)),[_,r]),L=Object(s.useRef)(()=>{}),[J,q]=Object(s.useState)(!1),[ae,me]=Object(s.useState)(null),Q=P=>lr(this,null,function*(){if(q(!1),!D)return;let K=!1;L.current=()=>{K=!0,me(null)};const ee=yield To(D,N=>{K||me(N)},P);K||(Vt(ee,"volcasampler.zip"),me(null))}),[ue,G]=Object(s.useState)(!1),Z=Object(s.useMemo)(()=>new Map([...i,...u]),[i,u]);return e.a.createElement(e.a.Fragment,null,e.a.createElement(W.a,{hidden:S,className:Se.a.sampleMenuButtonFullWidth,type:"button",variant:"primary",onClick:()=>{c(null),requestAnimationFrame(()=>{const P=document.getElementById("record-button");P&&(P.focus(),requestAnimationFrame(()=>{document.activeElement!==P&&setTimeout(()=>{P.focus()},300)}))})}},"New sample"),e.a.createElement(W.a,{hidden:S,className:Se.a.sampleMenuButtonFullWidth,type:"button",variant:"outline-secondary",onClick:()=>b(new Set)},"Select multiple"),e.a.createElement(W.a,{hidden:!S,className:Se.a.sampleMenuButtonFullWidth,type:"button",variant:"secondary",onClick:()=>b(P=>P&&P.size?new Set:null)},M&&M.size?`Clear selection (${M.size})`:"Done"),e.a.createElement("div",{hidden:!S,className:Se.a.sampleMenuButtonsContainer},_&&e.a.createElement(_a,{samples:_,sampleCaches:Z,justTheButton:!0,showInfoBeforeTransfer:!0,button:e.a.createElement(W.a,{type:"button",disabled:!M||!M.size,variant:"outline-secondary"},"Transfer")})||null,e.a.createElement(W.a,{type:"button",className:ae===null?void 0:Se.a.exporting,disabled:!D||!D.length,variant:ae===null?"outline-secondary":"primary",onClick:()=>{if(ae!==null){L.current();return}q(!0)}},e.a.createElement("span",null,ae===null?"Backup":"Cancel"),ae!==null&&e.a.createElement(ht.a,{className:Se.a.progress,striped:!0,animated:!0,variant:"primary",now:100*ae})),e.a.createElement(W.a,{type:"button",disabled:!D||!D.length,variant:"outline-primary",onClick:()=>G(!0)},"Delete")),e.a.createElement(ja.a,{className:Se.a.search},e.a.createElement(se.a.Control,{placeholder:"Search for a sample...",value:m,onChange:P=>d(P.target.value)}),e.a.createElement("button",{hidden:!m,className:Se.a.clearSearch,type:"reset","aria-label":"Clear search",onClick:()=>d("")})),e.a.createElement(yt.a,{className:Se.a.listGroup,ref:F},!t&&[{eventKey:"user",filteredSamples:O,sampleCaches:i,headerRef:B,headerMouseDownRef:k},{eventKey:"factory",filteredSamples:T,sampleCaches:u,headerRef:U,headerMouseDownRef:x}].map(({eventKey:P,filteredSamples:K,sampleCaches:ee,headerRef:N,headerMouseDownRef:R})=>e.a.createElement(De.a,{key:P,style:{"--results-count":K.length,"--accordion-open":(p?f.includes(P):h===P)?"1":"0"},activeKey:p?f.filter(j=>j===P)[0]||"nothing":h===P?h:"nothing",className:Se.a.accordion},e.a.createElement(De.a.Item,{eventKey:P,className:Se.a.accordionItem},e.a.createElement(De.a.Header,{ref:N,onClick:()=>{y(j=>j===P?null:P),p&&v(P)},onFocus:()=>!R.current&&y(P),onKeyDown:I},P==="user"?"Your samples":"Factory samples"),e.a.createElement(De.a.Body,{className:Se.a.accordionBody},e.a.createElement(li,{samples:K,sampleCaches:ee,selectedSampleId:a,multipleSelection:M,onSampleSelect:w})))))),e.a.createElement(C.a,{onHide:()=>q(!1),show:J,"aria-labelledby":"export-confirm-modal"},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"export-confirm-modal"},"Sample backup")),e.a.createElement(C.a.Body,null,e.a.createElement("p",null,"Your backup will contain your selected samples (with any related settings and plugins). You can also choose to include the volca transfer audio.")),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>Q(!1)},"Just the samples"),e.a.createElement(W.a,{type:"button",variant:"primary",onClick:()=>Q(!0)},"Include transfer audio"))),e.a.createElement(C.a,{onHide:()=>G(!1),show:ue,"aria-labelledby":"delete-modal"},e.a.createElement(se.a,{className:Se.a.deleteModalForm,onSubmit:P=>lr(this,null,function*(){P.preventDefault(),D&&l(D.map(K=>K.id)),b(null),G(!1)})},e.a.createElement(C.a.Header,{className:Se.a.deleteModalHeader},e.a.createElement(ta.a,null),e.a.createElement(C.a.Title,{id:"delete-modal"},"Deleting samples")),e.a.createElement(C.a.Body,null,e.a.createElement("p",null,"Are you sure you want to delete these samples? This can't be undone."),e.a.createElement("ul",null,(D||[]).map(P=>e.a.createElement("li",{key:P.id},e.a.createElement("strong",null,P.metadata.name)," (slot"," ",P.metadata.slotNumber,")")))),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>G(!1)},"Cancel"),e.a.createElement(W.a,{type:"submit",variant:"primary"},"Delete")))))}),si=E(40),Je=E.n(si);const ci=e.a.memo(function(){const[t,a]=Object(s.useState)(!1),[r,o]=Object(s.useState)(!1);return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:Je.a.footer},e.a.createElement("p",null,e.a.createElement("strong",null,"Volca Sampler")," is an app created by"," ",e.a.createElement("a",{href:"https://benwiley.org",target:"_blank",rel:"noreferrer"},"Ben Wiley"),"."),e.a.createElement("p",null,e.a.createElement("strong",null,"volca sample")," is a trademark of"," ",e.a.createElement("strong",null,"KORG Inc."),", who is not affiliated with this app."),e.a.createElement("p",null,"The source code can be found on"," ",e.a.createElement("a",{href:"https://github.com/benwiley4000/volca-sampler",target:"_blank",rel:"noreferrer"},"GitHub"),"."),(typeof window=="undefined"||window.location.protocol!=="http:")&&e.a.createElement("p",null,e.a.createElement(W.a,{type:"button",variant:"link",onClick:()=>a(!0)},"Run this app offline"),"."),e.a.createElement(W.a,{className:`${Je.a.faqAndLicensesButton} SCRIPT_ONLY`,type:"button",variant:"link",onClick:()=>o(!0)},"FAQ / Licenses"),e.a.createElement("div",{className:Je.a.faqAndLicensesEmbedded},e.a.createElement(ir,null))),e.a.createElement(C.a,{show:t,"aria-labelledby":"offline-modal",onHide:()=>a(!1)},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"offline-modal"},"Run this app offline")),e.a.createElement(C.a.Body,null,e.a.createElement("p",null,e.a.createElement("strong",null,"Volca Sampler")," can be downloaded and run offline if you prefer!"),e.a.createElement("p",null,"How to run Volca Sampler offline:"),e.a.createElement("ol",null,e.a.createElement("li",null,"Install"," ",e.a.createElement("a",{href:"https://www.python.org/downloads/",target:"_blank",rel:"noreferrer"},"Python 3"),"."),e.a.createElement("li",null,"Download the"," ",e.a.createElement("a",{href:"Volca-Sampler-Offline.zip",download:!0},"zipped app")," ","and extract the contents."),e.a.createElement("li",null,"Run ",e.a.createElement("code",null,"VOLCASAMPLER.py")," with Python 3. You can open Command Prompt on Windows, or a Terminal on macOS and Linux, to"," ",e.a.createElement("code",null,"Volca-Sampler-Offline/")," and run"," ",e.a.createElement("code",null,"python3 VOLCASAMPLER.py"),"."),e.a.createElement("li",null,"Normally,"," ",e.a.createElement("a",{href:"http://localhost:54411",target:"_blank",rel:"noreferrer"},"http://localhost:54411")," ","should open in a web browser.")),e.a.createElement("p",null,"NOTE: Python is used for serving web assets to your browser. Opening the folder directly in your web browser will ",e.a.createElement("i",null,"not")," work 100%, because the app relies on certain features that only work in web pages served via HTTP."),e.a.createElement("p",null,"If you already have a static HTTP server utility you like to use, you're not obliged to use Python.")),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"primary",onClick:()=>a(!1)},"Close"))),e.a.createElement(C.a,{show:r,"aria-labelledby":"faq-modal",onHide:()=>o(!1)},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"faq-modal"},"About Volca Sampler")),e.a.createElement(C.a.Body,null,e.a.createElement(ir,null)),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"primary",onClick:()=>o(!1)},"Close"))))});function ir(){return e.a.createElement(e.a.Fragment,null,e.a.createElement("p",null,"This app relies on the open-source"," ",e.a.createElement("a",{href:"https://github.com/korginc/volcasample",target:"_blank",rel:"noreferrer"},"SYRO")," ","library published by ",e.a.createElement("strong",null,"KORG Inc."),", which encodes audio data to be sent to the ",e.a.createElement("strong",null,"volca sample"),"."),e.a.createElement("p",null,"Big thanks to Blairman and to"," ",e.a.createElement("a",{href:"https://soundcloud.com/southtechnique",target:"_blank",rel:"noreferrer"},"Costas Chris")," ","for helping to test the alpha version!"),e.a.createElement("p",null,"And thanks again to KORG for developing the"," ",e.a.createElement("a",{href:"https://apps.apple.com/us/app/audiopocket-for-volca-sample/id927415821",target:"_blank",rel:"noreferrer"},"AudioPocket")," ","app, which inspired the core functionality of Volca Sampler."),e.a.createElement("h3",null,"FAQ"),e.a.createElement("div",{className:Je.a.qAndA},e.a.createElement("p",null,e.a.createElement("strong",null,"Q: What platforms are supported?")),e.a.createElement("p",null,"A: Anything that can run a modern web browser with a headphone output should work (PC, Mac, Linux, Android, iOS).")),e.a.createElement("div",{className:Je.a.qAndA},e.a.createElement("p",null,e.a.createElement("strong",null,"Q: Is this compatible with the volca sample2?")),e.a.createElement("p",null,"A: Yes, but only the stereo cable connection is supported. There are no plans for supporting the USB connection.")),e.a.createElement("div",{className:Je.a.qAndA},e.a.createElement("p",null,e.a.createElement("strong",null,"Q: Where will my samples be uploaded?")),e.a.createElement("p",null,"A: Nowhere. Everything is kept on your device, in your web browser's application files. SYRO (the code that converts your samples into something the volca sample can understand) is actually running inside your web browser.")),e.a.createElement("div",{className:Je.a.qAndA},e.a.createElement("p",null,e.a.createElement("strong",null,"Q: Can I export my samples to another device?")),e.a.createElement("p",null,'A: The answer recently became "yes"! To export a zip file that can be imported from a different device and/or different web browser, choose "Select multiple" above the sample list, select the samples you want to export, and hit "backup". To import, choose "Load from Volca Sampler backup".')),e.a.createElement("div",{className:Je.a.qAndA},e.a.createElement("p",null,e.a.createElement("strong",null,"Q: Where can I contact you?")),e.a.createElement("p",null,"A:"," ",e.a.createElement("a",{href:"mailto:therealbenwiley@gmail.com?subject=Volca Sampler",target:"_blank",rel:"noreferrer"},"Email")," ","to get in touch with me personally, or"," ",e.a.createElement("a",{href:"https://github.com/benwiley4000/volca-sampler/issues",target:"_blank",rel:"noreferrer"},"GitHub")," ","to file an issue with this app.")),e.a.createElement("h3",null,"Licenses"),e.a.createElement("h5",null,"SYRO"),e.a.createElement("p",null,"Copyright (c) 2014, KORG Inc. All rights reserved."),e.a.createElement("p",null,"Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:"),e.a.createElement("p",null,"Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer."),e.a.createElement("p",null,"Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution."),e.a.createElement("p",null,"Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission."),e.a.createElement("p",null,'THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.'),e.a.createElement("h5",null,"Other open source licenses"),e.a.createElement("p",null,"See the full list"," ",e.a.createElement("a",{href:"npm-licenses.html",target:"_blank",rel:"noreferrer"},"here"),"."))}var Fa=ci,ui=E(150),mi=E(151),di=E.p+"static/media/toy-brick-remove.69a35137.svg",fi=E(8),ce=E.n(fi),Da=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});const pi=["10-percent-silence-plugin.js","delay-plugin.js","gain-plugin.js","limiter-plugin.js","lowpass-filter-plugin.js","phaser-plugin.js","timestretch-plugin.js","trim-plugin.js"];function hi(n,t,a,r){return Da(this,null,function*(){return(yield(yield fetch(`https://api.github.com/repos/${n}/${t}/contents/${r}?ref=${a}`)).json()).map(u=>u.name)})}function gi(n,t,a,r,o){return Da(this,null,function*(){return yield(yield fetch(`https://raw.githubusercontent.com/${n}/${t}/${a}/${r}/${o}`)).text()})}const sr="benwiley4000",cr="volca-sampler-plugins",ur="master",mr="plugins";function vi(){return Da(this,null,function*(){const n=yield hi(sr,cr,ur,mr).catch(()=>pi),t=yield Promise.all(n.map(a=>gi(sr,cr,ur,mr,a)));return n.map((a,r)=>({pluginName:a,pluginSource:t[r]}))})}function Ei(n){return`https://github.com/benwiley4000/volca-sampler-plugins/blob/master/plugins/${n}`}var yi=Object.defineProperty,bi=Object.defineProperties,wi=Object.getOwnPropertyDescriptors,dr=Object.getOwnPropertySymbols,Si=Object.prototype.hasOwnProperty,_i=Object.prototype.propertyIsEnumerable,fr=(n,t,a)=>t in n?yi(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,pr=(n,t)=>{for(var a in t||(t={}))Si.call(t,a)&&fr(n,a,t[a]);if(dr)for(var a of dr(t))_i.call(t,a)&&fr(n,a,t[a]);return n},Ci=(n,t)=>bi(n,wi(t)),Ft=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())}),Pi=e.a.memo(function({isOpen:t,pluginList:a,pluginStatusMap:r,userSamples:o,onUpdatePluginList:i,onSampleUpdate:u,onSampleBulkReplace:c,onRegenerateSampleCache:l,onClose:m}){const d=Object(s.useMemo)(()=>{const b={};for(const S of a)b[S]=0;for(const[,S]of o){const{plugins:w}=S.metadata;for(const _ of a)w.some(D=>D.pluginName===_)&&b[_]++}return b},[a,o]),[p,h]=Object(s.useState)(null),[y,f]=Object(s.useState)(!1),[g,v]=Object(s.useState)(!1),I=Object(s.useRef)(o);I.current=o;const A=Object(s.useCallback)(b=>{const S=[...I.current.values()].filter(w=>w.metadata.plugins.some(_=>_.pluginName===b));for(const{id:w}of S)l(w)},[l]),O=Object(s.useCallback)(b=>Ft(this,null,function*(){if(!b.target.files)return;const S=b.target.files.item(0);if(!S)return;let w=S.name;Ul({file:S,onConfirmName(_){return new Promise(D=>{h({pluginName:_,variant:"confirm-name",onConfirmName(L){w=L,D(L),h(null)},onConfirmReplace(){},onCancelRename(){}})})},onConfirmReplace(_){return new Promise(D=>{h({pluginName:_,variant:"replace",onConfirmReplace(L){D(L),h(null)},onConfirmName(){},onCancelRename(){}})})}}).then(_=>{i(),_==="exists"&&f(!0),_==="replaced"&&A(w)}).catch(()=>v(!0)),b.target.value=""}),[i,A]),T=Object(s.useCallback)((b,S)=>Ft(this,null,function*(){let w=b;try{const _=yield Qt({pluginName:b,pluginSource:S,onConfirmName(D){return new Promise(L=>{h({pluginName:D,variant:"confirm-name",onConfirmName(J){w=J,L(J),h(null)},onConfirmReplace(){},onCancelRename(){}})})},onConfirmReplace(D){return new Promise(L=>{h({pluginName:D,variant:"replace",onConfirmReplace(J){L(J),h(null)},onConfirmName(){},onCancelRename(){}})})}});i(),_==="exists"&&f(!0),_==="replaced"&&A(w)}catch(_){v(!0)}}),[i,A]),F=b=>Ft(this,null,function*(){const S=yield new Promise(L=>{h({pluginName:b,variant:"rename",onConfirmName(J){L(J),h(null)},onConfirmReplace(){},onCancelRename(){L(""),h(null)}})});if(!S)return;let w=S;const{updatedSamples:_,result:D}=yield Gl({oldPluginName:b,newPluginName:S,onConfirmName(L){return new Promise(J=>{h({pluginName:L,variant:"confirm-name",onConfirmName(q){w=q,J(q),h(null)},onConfirmReplace(){},onCancelRename(){}})})},onConfirmReplace(L){return new Promise(J=>{h({pluginName:L,variant:"replace",onConfirmReplace(q){J(q),h(null)},onConfirmName(){},onCancelRename(){}})})},userSamples:o});i(),D==="replaced"&&A(w),c(_)}),[B,U]=Object(s.useState)(""),[k,x]=Object(s.useState)([]);Object(s.useEffect)(()=>{vi().then(x)},[]);const M=Object(s.useMemo)(()=>k.filter(({pluginName:b})=>!a.includes(b)),[k,a]);return e.a.createElement(e.a.Fragment,null,e.a.createElement(C.a,{onHide:m,show:t,"aria-labelledby":"plugin-manager-modal"},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"plugin-manager-modal"},"Plugins overview")),e.a.createElement(C.a.Body,null,e.a.createElement("p",null,"Plugins use custom JavaScript to extend Volca Sampler's sample pre-processing capabilities. You only need"," ",e.a.createElement("strong",null,"basic programming knowledge")," to"," ",e.a.createElement("a",{href:"https://github.com/benwiley4000/volca-sampler-plugins",target:"_blank",rel:"noreferrer"},"get started writing your own plugins"),". You can share your plugins with others, and"," ",e.a.createElement("strong",null,"install plugins written by other Volca Sample owners"),"."),e.a.createElement("div",{className:ce.a.pluginListTitle},e.a.createElement("h5",null,"Installed plugins"),e.a.createElement(W.a,{className:ce.a.installPlugin,type:"button",variant:"primary",onClick:b=>{const S=b.currentTarget.querySelector("input");S&&b.target!==S&&S.click()}},e.a.createElement(Oa,null),e.a.createElement("span",null,"Install a plugin"),e.a.createElement("input",{hidden:!0,type:"file",accept:"text/javascript",onChange:O}))),e.a.createElement(yt.a,null,!a.length&&e.a.createElement(yt.a.Item,{className:ce.a.noneInstalled},"There are no plugins installed."),a.map(b=>e.a.createElement(yt.a.Item,{key:b,className:ce.a.pluginItem},e.a.createElement("div",{className:ce.a.nameAndInfo},e.a.createElement("div",{className:ce.a.name},e.a.createElement("span",{title:b},b),e.a.createElement("div",{className:ce.a.rename,title:"Rename plugin",onClick:()=>F(b)},e.a.createElement(ui.a,null))),e.a.createElement("div",{className:ce.a.info},"Used by ",d[b]," sample(s)")),e.a.createElement("div",{className:ce.a.actions},r&&r.get(b)==="broken"&&e.a.createElement("div",{className:ce.a.reloadPlugin,onClick:()=>Ft(this,null,function*(){yield Vn(b),i()})},e.a.createElement(Fn.a,null),"Reload plugin"),e.a.createElement("div",{title:"Download plugin",className:ce.a.downloadPlugin,onClick:()=>Ft(this,null,function*(){const S=yield Ma(b);if(!S)return;const w=new Blob([S],{type:"text/javascript"});Vt(w,b)})},e.a.createElement(wn.a,null)),e.a.createElement("div",{title:"Uninstall plugin",className:ce.a.uninstallButton,onClick:()=>U(b)},e.a.createElement(di,null)))))),Boolean(M.length)&&e.a.createElement(e.a.Fragment,null,e.a.createElement("h5",{className:ce.a.suggestedPluginsTitle},"Suggested plugins"),e.a.createElement(yt.a,{className:ce.a.suggestedPlugins},M.map(({pluginName:b,pluginSource:S})=>e.a.createElement(yt.a.Item,{key:b,className:ce.a.pluginItem},e.a.createElement("div",{className:ce.a.nameAndInfo},e.a.createElement("div",{className:ce.a.name},e.a.createElement("span",{title:b},b))),e.a.createElement("div",{className:ce.a.actions},e.a.createElement("a",{className:ce.a.viewSource,href:Ei(b),target:"_blank",rel:"noreferrer",title:"View Source"},e.a.createElement(mi.a,null)),e.a.createElement(W.a,{title:"Install plugin",className:ce.a.installSuggestedPlugin,onClick:()=>T(b,S)},e.a.createElement(Oa,null)))))))),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:m},"Close"))),e.a.createElement(C.a,{className:ce.a.uninstallModal,onHide:()=>U(""),show:Boolean(B),"aria-labelledby":"uninstall-plugin-modal",centered:!0},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"uninstall-plugin-modal"},"Uninstalling plugin")),e.a.createElement(C.a.Body,null,e.a.createElement("p",null,"Are you sure you want to uninstall"," ",e.a.createElement("strong",null,B),"?"),d[B]?e.a.createElement("p",null,"The plugin will be"," ",e.a.createElement("strong",null,"removed from ",d[B]," ","sample(s)"),". This can't be undone."):null),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"light",onClick:()=>U("")},"Cancel"),e.a.createElement(W.a,{type:"button",variant:"primary",onClick:()=>{const b=[...o.values()].filter(S=>S.metadata.plugins.some(w=>w.pluginName===B)).map(S=>S.id);b.length&&u(b,S=>Ci(pr({},S),{plugins:S.plugins.filter(w=>w.pluginName!==B)})),Yt(B).then(i),U("")}},"Uninstall"))),p&&e.a.createElement(Jn,pr({},p)),e.a.createElement(C.a,{className:ce.a.alreadyInstalledModal,onHide:()=>f(!1),show:y,"aria-labelledby":"already-installed-plugin-modal",centered:!0},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"already-installed-plugin-modal"},"Plugin already installed")),e.a.createElement(C.a.Body,null,e.a.createElement("p",null,"This plugin has already been installed.")),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"primary",onClick:()=>f(!1)},"OK"))),e.a.createElement(C.a,{className:ce.a.failedToInstallModal,onHide:()=>v(!1),show:g,"aria-labelledby":"failed-to-install-plugin-modal",centered:!0},e.a.createElement(C.a.Header,null,e.a.createElement(C.a.Title,{id:"failed-to-install-plugin-modal"},"Failed to install plugin")),e.a.createElement(C.a.Body,null,e.a.createElement("p",null,"Check the plugin source code for issues."),e.a.createElement("p",null,"You might find helpful stack traces and error logs in the browser JavaScript console (Win/Linux: ",e.a.createElement("code",null,"Ctrl+Shift+J"),", Mac:"," ",e.a.createElement("code",null,"Cmd+Option+J"),")."),e.a.createElement("p",null,"If you're not the plugin author, you can share this info with the author to help resolve the issue.")),e.a.createElement(C.a.Footer,null,e.a.createElement(W.a,{type:"button",variant:"primary",onClick:()=>v(!1)},"OK"))))});const hr=["Cool","Dope","Far-out","Chill","Wicked","Bomb","Superb","Choice","Exquisite","Righteous","Dank","Alright","Very Good","Ice Cold","Sick","Juicy","Gnarly","Grainy","Most-excellent","Fortuitous","Bodacious","Tubular","Fresh"],gr=["Sample","Cut","Quotation","Extract","Sound","Noise","Clip"];function ki(){const n=hr[Math.floor(Math.random()*hr.length)],t=gr[Math.floor(Math.random()*gr.length)];return`${n} ${t}`}var Oi=E(26),Te=E.n(Oi),Xe=(n,t,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},u=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,u);c((a=a.apply(n,t)).next())});const xa="focused_sample_id";function Mi(){const[n,t]=Object(s.useState)(new Map),[a,r]=Object(s.useState)(new Map),[o,i]=Object(s.useState)(new Map),[u,c]=Object(s.useState)(new Map),l=Object(s.useMemo)(()=>new Map([...n,...o]),[n,o]);Object(s.useEffect)(()=>{Ar().then(N=>{i(new Map([...N].map(([R,{sampleContainer:j}])=>[R,j]))),c(new Map([...N].map(([R,{sampleContainer:j,cachedInfo:H}])=>[R,new de({sampleContainer:j,cachedInfo:H})])))}).catch(console.error)},[]);const m=typeof sessionStorage=="undefined"?null:sessionStorage.getItem(xa),[d,p]=Object(s.useState)(m&&typeof m=="string"?m:null),h=Object(s.useRef)(d);h.current=d,Object(s.useEffect)(()=>{d?sessionStorage.setItem(xa,d):sessionStorage.removeItem(xa)},[d]);const[y,f]=Object(s.useState)(!0);Object(s.useEffect)(()=>{let N=Promise.resolve();if(h.current){const R=h.current;N=Promise.all([oe.getByIdsFromStorage([R]),de.getCachedInfoByIdsFromStorage([R])]).then(([[j],[H]])=>{r(V=>new Map(V).set(j.id,new de.Mutable({sampleContainer:j,cachedInfo:H})))}).catch(j=>{})}N.then(()=>oe.getAllFromStorage()).then(R=>Xe(this,[R],function*({sampleContainers:j,cachedInfos:H}){t(te=>{const le=new Map([...te,...j.map(Y=>[Y.id,Y])]);return new Map([...le].sort(([,Y],[,Ee])=>mt(Y,Ee)))});const V=yield de.getAllCachedInfoFromStore(),$=j.filter(te=>!H.has(te.id)&&!V.has(te.id));for(const te of $)de.importToStorage(te).then(le=>{r(Y=>new Map(Y).set(te.id,le))});r(te=>new Map([...te,...j.filter(le=>V.has(le.id)||H.has(le.id)).map(le=>{const Y=H.get(le.id);return Y?[le.id,new de.Mutable.Upgraded({sampleContainer:le,cachedInfo:Y})]:[le.id,new de.Mutable({sampleContainer:le,cachedInfo:V.get(le.id)})]})]))})).finally(()=>{f(!1)})},[]);const g=Object(s.useCallback)((N,R)=>Xe(this,null,function*(){const j=yield ft(N),H=[0,0],V=yield Ct(j,H);if([...V.positive,...V.negative].every(he=>he===0))return"silent";const $=yield Xa(N);let te="",le="";if(R){const he=R.name.lastIndexOf(".");he>0?(te=R.name.slice(0,he),le=R.name.slice(he)):te=R.name}else te=ki();const Y=new oe.Mutable({name:te,sourceFileId:$,trim:{frames:H},userFileInfo:R&&{type:R.type,ext:le}});yield Y.persist(),t(he=>new Map([[Y.id,Y],...he])),p(Y.id),Promise.resolve().then(()=>Ce("sample",[Y.id],"create"));const Ee=new de.Mutable({sampleContainer:Y,cachedInfo:{waveformPeaks:V,postPluginFrameCount:j.length,duration:j.duration,failedPluginIndex:-1}});return yield Ee.persist(),r(he=>new Map(he).set(Y.id,Ee)),Promise.resolve().then(()=>Ce("cache",[Y.id],"create")),"saved"}),[]),v=Object(s.useRef)(a);v.current=a;const I=Object(s.useCallback)((N,R)=>{const j=N instanceof Array?N:[N];t(H=>{const V=j.map(Y=>{const Ee=H.get(Y);return Ee&&Ee instanceof oe.Mutable&&Ee||null}).filter(Boolean);if(!V.length)return H;const $=[],te=V.map(Y=>{if(!(Y instanceof oe.Mutable))return Y;let Ee=()=>{};$.push(new Promise(Re=>Ee=Re));const he=Y.update(R,Ee);return he!==Y&&Promise.resolve().then(()=>Xe(this,null,function*(){const Re=v.current.get(Y.id);if(!(Re&&Re instanceof de.Mutable))return;yield Promise.all($);const qe=yield Re.update(he);qe!==Re&&(qe.sampleContainer!==he&&(t(ot=>{const bt=new Map(ot);return bt.delete(Y.id),new Map([[Y.id,qe.sampleContainer],...bt])}),Ce("sample",[Y.id],"edit")),r(ot=>new Map(ot).set(Y.id,qe)),Ce("cache",[Y.id],"edit"))})),he});if(te.every((Y,Ee)=>V[Ee]===Y))return H;Promise.all($).then(()=>{Ce("sample",te.map(Y=>Y.id),"edit")});const le=new Map(H);for(const{id:Y}of te)le.delete(Y);return new Map([...te.slice().sort(mt).map(Y=>[Y.id,Y]),...le])})},[]),A=Object(s.useCallback)((N,R)=>{t(j=>{const H=new Map([...j,...N.map(V=>[V.id,V])]);return new Map([...H].sort(([,V],[,$])=>mt(V,$)))}),Ce("sample",N.map(j=>j.id),"create"),r(j=>new Map([...j,...R.map(H=>[H.sampleContainer.id,H])])),Ce("cache",R.map(j=>j.sampleContainer.id),"create"),w("sampleList")},[]),O=Object(s.useCallback)(N=>{t(R=>{const j=new Map(R);for(const[H,V]of R)j.has(H)&&j.set(H,V);return j}),Ce("sample",N.map(R=>R.id),"edit")},[]),T=Object(s.useRef)(l);T.current=l;const F=Object(s.useRef)(u);F.current=u;const B=Object(s.useCallback)(N=>{const R=T.current.get(N);if(R){const j=R.duplicate(V=>{Ce("sample",[V],"create")});t(V=>new Map([[j.id,j],...V]));const H=v.current.get(N)||F.current.get(N);if(H){const V=new de.Mutable({sampleContainer:j,cachedInfo:H.cachedInfo});V.persist().then(()=>{Ce("cache",[j.id],"create")}),r($=>new Map($).set(j.id,V))}p(j.id)}},[]),U=Object(s.useRef)(n);U.current=n;const k=Object(s.useCallback)((N,R)=>{const j=N instanceof Array?N:[N],H=U.current;if(h.current&&j.includes(h.current)){const V=[...H.values()],$=V.findIndex(Y=>Y.id===h.current),te=V.slice(0,$).reverse().find(Y=>!j.includes(Y.id)),le=te||V.slice($+1).find(Y=>!j.includes(Y.id));p(le?le.id:null)}R||(Promise.all(j.map(V=>Xe(this,null,function*(){const $=H.get(V);$&&$ instanceof oe.Mutable&&(yield $.remove())}))).then(()=>Ce("sample",j,"delete")),Promise.all(j.map(V=>Xe(this,null,function*(){const $=v.current.get(V);$&&$ instanceof de.Mutable&&(yield $.remove())}))).then(()=>Ce("cache",j,"delete"))),t(V=>{const $=new Map(V);for(const te of j)$.delete(te);return $}),r(V=>{const $=new Map(V);for(const te of j)$.delete(te);return $})},[]),[x,M]=Object(s.useState)(Symbol()),b=Object(s.useCallback)(N=>{const R=U.current.get(N);!R||(M(Symbol()),de.importToStorage(R).then(j=>{r(H=>new Map(H).set(N,j))}))},[]);Object(s.useEffect)(()=>$t("sample",N=>Xe(this,null,function*(){if(N.action==="delete")k(N.ids,!0);else{const R=yield oe.getByIdsFromStorage(N.ids);t(j=>{const H=new Map([...j,...R.map(V=>[V.id,V])]);return new Map([...H].sort(([,V],[,$])=>mt(V,$)))})}})),[k]),Object(s.useEffect)(()=>$t("cache",N=>Xe(this,null,function*(){if(N.action==="delete")r(R=>{const j=new Map(R);for(const H of N.ids)j.delete(H);return j});else{const R=yield de.getCachedInfoByIdsFromStorage(N.ids);requestAnimationFrame(()=>{r(j=>{const H=U.current;return H?new Map([...j,...R.map((V,$)=>[N.ids[$],new de.Mutable({cachedInfo:V,sampleContainer:H.get(N.ids[$])})])]):j})})}})),[]);const[S,w]=Object(s.useState)("currentSample"),_=Object(s.useCallback)(N=>{p(N),w("currentSample")},[]),D=Object(s.useCallback)(()=>{p(null),w("currentSample")},[]),L=d?l.get(d):null,J=L&&(a.get(L.id)||u.get(L.id))||null,[q,ae]=Object(s.useState)(!1),me=Object(s.useCallback)(()=>ae(!0),[]),Q=Object(s.useCallback)(()=>ae(!1),[]),[ue,G]=Object(s.useState)(new Map),Z=Object(s.useCallback)(()=>Xe(this,null,function*(){const N=yield zl();G(N)}),[]);Object(s.useEffect)(()=>(Z(),$t("plugin",Z)),[Z]);const P=Object(s.useMemo)(()=>[...ue.keys()],[ue]),[K,ee]=Object(s.useState)(null);return Object(s.useEffect)(()=>{const N=new Map;let R=!1;Yl(...P).then(H=>{R||(P.forEach((V,$)=>{N.set(V,H[$])}),ee(N))});const j=P.map(H=>dt(H).onPluginError(()=>ee(V=>new Map(V).set(H,"broken"))));return()=>{R=!0;for(const H of j)H()}},[P]),e.a.createElement("div",{className:Te.a.app},e.a.createElement(Va,{onHeaderClick:D}),e.a.createElement("div",{className:`${Te.a.mobileLayoutContainer} ${Te.a[S]}`},e.a.createElement("div",{className:`${Te.a.sampleListSidebar} SCRIPT_ONLY`},e.a.createElement(ii,{loading:y,focusedSampleId:d,userSamples:n,factorySamples:o,userSampleCaches:a,factorySampleCaches:u,onSampleSelect:_,onSampleDelete:k})),e.a.createElement("div",{className:`${Te.a.mainLayout} NOSCRIPT`},e.a.createElement("h2",null,"Send a new sound to your volca sample!",e.a.createElement("span",{style:{fontSize:"0.7em"}},e.a.createElement("br",null),e.a.createElement("span",null,"(or volca sample 2!)"))),e.a.createElement("p",null,"This free web app lets you record (or select), edit, and send custom samples to your KORG Volca Sample. No installation needed \u2014 send the samples straight from your browser to the volca sample, using a 3.5mm audio cable."),e.a.createElement("p",null,"Enable JavaScript and refresh the page to get started.")),e.a.createElement("div",{className:`${Te.a.mainLayout} SCRIPT_ONLY`},L?L instanceof oe.Mutable?e.a.createElement(ho,{sample:L,sampleCache:J,pluginParamsDefs:ue,pluginStatusMap:K,isPluginManagerOpen:q,editCacheInvalidator:x,onSampleUpdate:I,onSampleDuplicate:B,onSampleDelete:k,onOpenPluginManager:me,onRecheckPlugins:Z,onRegenerateSampleCache:b}):e.a.createElement(Io,{sample:L,sampleCache:J,onSampleDuplicate:B}):null,!d&&e.a.createElement(ei,{userSamples:n,onUpdatePluginList:Z,onRegenerateSampleCache:b,onBulkImport:A,onRecordFinish:g}),(!d||L)&&e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:`${Te.a.normalFooterContainer} SCRIPT_ONLY`},e.a.createElement(Fa,null)),e.a.createElement("div",{className:`${Te.a.normalFooterContainer} ${Te.a.force} NOSCRIPT`},e.a.createElement(Fa,null)))),e.a.createElement("div",{className:Te.a.mobileFooterContainer},e.a.createElement(St.a,{fluid:"sm"},e.a.createElement("h2",null,"About Volca Sampler"),e.a.createElement(Fa,null)))),e.a.createElement(et.a,{className:Te.a.mobilePageNav,activeKey:S,variant:"underline"},e.a.createElement(et.a.Item,{onClick:()=>w("sampleList")},e.a.createElement(et.a.Link,{eventKey:"sampleList"},"List")),e.a.createElement(et.a.Item,{onClick:()=>w("currentSample")},e.a.createElement(et.a.Link,{eventKey:"currentSample"},"Sample")),e.a.createElement(et.a.Item,{onClick:()=>w("about")},e.a.createElement(et.a.Link,{eventKey:"about"},"About"))),e.a.createElement(Pi,{isOpen:q,pluginList:P,pluginStatusMap:K,userSamples:n,onUpdatePluginList:Z,onSampleUpdate:I,onSampleBulkReplace:O,onRegenerateSampleCache:b,onClose:Q}))}var Ii=Mi;class Ai extends e.a.Component{constructor(t){super(t);this.state={errorMessage:null,componentStack:""}}static getDerivedStateFromError(t){return{errorMessage:t&&t.message||""}}componentDidCatch(t,{componentStack:a}){this.setState({componentStack:a})}render(){return typeof this.state.errorMessage=="string"?e.a.createElement(e.a.Fragment,null,e.a.createElement(Va,{onHeaderClick:()=>null}),e.a.createElement("div",{className:"container-sm",style:{marginTop:"2rem",marginBottom:"2rem",maxWidth:600}},e.a.createElement("h2",null,"That's no fun.. the app crashed!"),e.a.createElement("p",{className:"fs-6"},"Something definitely went wrong..."),e.a.createElement("p",null,"But we can fix it."),e.a.createElement("p",{className:"fs-5"},e.a.createElement("a",{href:`mailto:therealbenwiley@gmail.com?subject=Volca Sample Crash Report&body=Hi, I'm a user of the Volca Sample web app and the app crashed while using it.%0A%0AThis happened when [EXPLAIN WHAT YOU DID BEFORE THE APP CRASHED].%0A%0AHere are the crash details:%0A%0A${this.state.errorMessage||"Unknown error"}${this.state.componentStack.replace(/\r?\n|\r/g,"%0A")}`,target:"_blank",rel:"noreferrer"},"Contact me")," ","so I can get you back up and running."),e.a.createElement("details",null,e.a.createElement("summary",null,"Crash details"),e.a.createElement("pre",null,this.state.errorMessage||"Unknown error",this.state.componentStack)),e.a.createElement("br",null),e.a.createElement("button",{type:"button",className:"btn btn-light",onClick:()=>window.location.reload()},"Reload the page"))):this.props.children}}var Ni=n=>{n&&n instanceof Function&&E.e(3).then(E.bind(null,221)).then(({getCLS:t,getFID:a,getFCP:r,getLCP:o,getTTFB:i})=>{t(n),a(n),r(n),o(n),i(n)})};Blob.prototype.arrayBuffer||(Blob.prototype.arrayBuffer=function(){return new Response(this).arrayBuffer()}),typeof TouchEvent=="undefined"&&(window.TouchEvent=class extends Event{}),br.a.render(e.a.createElement(e.a.StrictMode,null,e.a.createElement(Ai,null,e.a.createElement(Ur,null,e.a.createElement(Ii,null)))),document.getElementById("root")),$l(),Ni()},21:function(X,ie,E){X.exports={"form-switch":"SampleRecord_form-switch__q05a7","form-check-input":"SampleRecord_form-check-input__2QPKW","nav-pills":"SampleRecord_nav-pills__13Twr","nav-item":"SampleRecord_nav-item__2ev6Y","nav-link":"SampleRecord_nav-link__2-Nbr",active:"SampleRecord_active__15Zfs",modal:"SampleRecord_modal__38Mx7","modal-dialog":"SampleRecord_modal-dialog__3j_d9","modal-content":"SampleRecord_modal-content__1rv-K","modal-body":"SampleRecord_modal-body__3BRoG",container:"SampleRecord_container__3bdq5",audioInputHeader:"SampleRecord_audioInputHeader__1Prbd",channelOptionSelect:"SampleRecord_channelOptionSelect__235gz",channelOption:"SampleRecord_channelOption__31f9w",stereoExplanation:"SampleRecord_stereoExplanation__3SWiA",alertContainer:"SampleRecord_alertContainer__vjGNP",recordButton:"SampleRecord_recordButton__3R-KX",mainText:"SampleRecord_mainText__2dca6",timeRecorded:"SampleRecord_timeRecorded__3FGTe",importFileButton:"SampleRecord_importFileButton__3Zl2W",osTabs:"SampleRecord_osTabs__1CZdV",systemRecordModalBody:"SampleRecord_systemRecordModalBody__15hmN"}},26:function(X,ie,E){X.exports={"form-switch":"App_form-switch__3Ht4D","form-check-input":"App_form-check-input__19Z6o","nav-pills":"App_nav-pills__16LAO","nav-item":"App_nav-item__2m-_e","nav-link":"App_nav-link__32PWp",active:"App_active__2jQ78",modal:"App_modal__tC7nw","modal-dialog":"App_modal-dialog__28D_0","modal-content":"App_modal-content__1KtJW","modal-body":"App_modal-body__1JjYd",app:"App_app__2ziFi",mobileLayoutContainer:"App_mobileLayoutContainer__xakbp",sampleListSidebar:"App_sampleListSidebar__3Ks2q",sampleList:"App_sampleList__WKnRo",mainLayout:"App_mainLayout__3UKwp",currentSample:"App_currentSample__nhOND",mobileFooterContainer:"App_mobileFooterContainer__1YP8t",about:"App_about__k-55R",normalFooterContainer:"App_normalFooterContainer__hzxSk",force:"App_force__G-yOU",mobilePageNav:"App_mobilePageNav__3y_u-"}},29:function(X,ie,E){X.exports={"form-switch":"VolcaEraseSlotsModals_form-switch__1kTYD","form-check-input":"VolcaEraseSlotsModals_form-check-input__3w7HB","nav-pills":"VolcaEraseSlotsModals_nav-pills__gTOfu","nav-item":"VolcaEraseSlotsModals_nav-item__3kV63","nav-link":"VolcaEraseSlotsModals_nav-link__2Hw_2",active:"VolcaEraseSlotsModals_active__15gH2",modal:"VolcaEraseSlotsModals_modal__2rj9G","modal-dialog":"VolcaEraseSlotsModals_modal-dialog__1Pk0H","modal-content":"VolcaEraseSlotsModals_modal-content__1J4bp","modal-body":"VolcaEraseSlotsModals_modal-body__EEKPi",slotNumbersTable:"VolcaEraseSlotsModals_slotNumbersTable__2_d5O",rangeLabels:"VolcaEraseSlotsModals_rangeLabels__1ofvk",transferButton:"VolcaEraseSlotsModals_transferButton__3Me4Z",preTransferModal:"VolcaEraseSlotsModals_preTransferModal__3Dg3Q",subtask:"VolcaEraseSlotsModals_subtask__3GsHl",secondaryProgress:"VolcaEraseSlotsModals_secondaryProgress__1THFd",progressAnnotation:"VolcaEraseSlotsModals_progressAnnotation__xU3M7"}},32:function(X,ie,E){X.exports={playbackOverlay:"WaveformPlayback_playbackOverlay__Er0Rh",playbackActive:"WaveformPlayback_playbackActive__1IHxg",playback:"WaveformPlayback_playback__2heRw",playbackButtonContainer:"WaveformPlayback_playbackButtonContainer__Lhahe",downloadButton:"WaveformPlayback_downloadButton__2s-L5"}},33:function(X,ie,E){X.exports={"form-switch":"SlotNumberInput_form-switch__39Wtl","form-check-input":"SlotNumberInput_form-check-input__oNf4Z","nav-pills":"SlotNumberInput_nav-pills__1RDi_","nav-item":"SlotNumberInput_nav-item__CuVVe","nav-link":"SlotNumberInput_nav-link__1C3wo",active:"SlotNumberInput_active__2zN4D",modal:"SlotNumberInput_modal__25tRB","modal-dialog":"SlotNumberInput_modal-dialog__1vyjC","modal-content":"SlotNumberInput_modal-content__cz3DI","modal-body":"SlotNumberInput_modal-body__ZzZE0",slotNumberRow:"SlotNumberInput_slotNumberRow__kQwOw",slotNumberContainer:"SlotNumberInput_slotNumberContainer__1q7P1",arrowControls:"SlotNumberInput_arrowControls__1LPAC",slotNumber:"SlotNumberInput_slotNumber__GC-i7",digitBlinkEffect:"SlotNumberInput_digitBlinkEffect__1_u8n",point:"SlotNumberInput_point__3pJD3",warning:"SlotNumberInput_warning__3NAeN"}},34:function(X,ie,E){X.exports={"form-switch":"PitchControl_form-switch__3fMsR","form-check-input":"PitchControl_form-check-input__3f8ZW","nav-pills":"PitchControl_nav-pills__1B_i9","nav-item":"PitchControl_nav-item__jG8v5","nav-link":"PitchControl_nav-link__3aIOu",active:"PitchControl_active__QhF5J",modal:"PitchControl_modal__11Ar5","modal-dialog":"PitchControl_modal-dialog__1Yqzr","modal-content":"PitchControl_modal-content__nU86c","modal-body":"PitchControl_modal-body__lJeYS",pitchAdjustmentWrapper:"PitchControl_pitchAdjustmentWrapper__3Mlmm",label:"PitchControl_label__2mPmc",previewValue:"PitchControl_previewValue__3l1yE",expanded:"PitchControl_expanded__2QAYx",ticks:"PitchControl_ticks__32ibh",tickLabel:"PitchControl_tickLabel__2HWfR",tickMark:"PitchControl_tickMark__OVi7b",annotations:"PitchControl_annotations__q4qkl",warn:"PitchControl_warn__OsYDG"}},38:function(X,ie,E){X.exports={"form-switch":"Header_form-switch__7m8-P","form-check-input":"Header_form-check-input__3V7ik","nav-pills":"Header_nav-pills__1-obW","nav-item":"Header_nav-item__7_0FE","nav-link":"Header_nav-link__1QKsk",active:"Header_active__1pE38",modal:"Header_modal__3A4xt","modal-dialog":"Header_modal-dialog__3oG5V","modal-content":"Header_modal-content__JA7jP","modal-body":"Header_modal-body__32J1e",titleBar:"Header_titleBar__3BLa-",title:"Header_title__R3bRx",titleText:"Header_titleText__3e5ME",titleR:"Header_titleR__3QRgv",titleStarburst:"Header_titleStarburst__1oLYP",titleGraphic:"Header_titleGraphic__3S89F",tagline:"Header_tagline__6mYkP"}},39:function(X,ie,E){X.exports={"form-switch":"QualityBitDepthControl_form-switch__3nCZi","form-check-input":"QualityBitDepthControl_form-check-input__2KgZ8","nav-pills":"QualityBitDepthControl_nav-pills__lvlTW","nav-item":"QualityBitDepthControl_nav-item__MdYNK","nav-link":"QualityBitDepthControl_nav-link__2ZJvk",active:"QualityBitDepthControl_active__1J60r",modal:"QualityBitDepthControl_modal__18Jly","modal-dialog":"QualityBitDepthControl_modal-dialog__24Z0E","modal-content":"QualityBitDepthControl_modal-content__22dUY","modal-body":"QualityBitDepthControl_modal-body__3QfIn",qualityBitDepthWrapper:"QualityBitDepthControl_qualityBitDepthWrapper__2qLOe",label:"QualityBitDepthControl_label___ohmN",previewValue:"QualityBitDepthControl_previewValue__2omZY",expanded:"QualityBitDepthControl_expanded__39f73",ticks:"QualityBitDepthControl_ticks__1u5GH",tickLabel:"QualityBitDepthControl_tickLabel__2jXRm",tickMark:"QualityBitDepthControl_tickMark__24xm0",annotations:"QualityBitDepthControl_annotations__3mXj2"}},40:function(X,ie,E){X.exports={"form-switch":"Footer_form-switch__IQ8fU","form-check-input":"Footer_form-check-input__2mYiO","nav-pills":"Footer_nav-pills__11ybY","nav-item":"Footer_nav-item__3oAU2","nav-link":"Footer_nav-link__2BtNN",active:"Footer_active__cHt7c",modal:"Footer_modal__1qM8m","modal-dialog":"Footer_modal-dialog__3LU5E","modal-content":"Footer_modal-content__1xGht","modal-body":"Footer_modal-body__1PrCR",footer:"Footer_footer__yR_13",faqAndLicensesButton:"Footer_faqAndLicensesButton__eLI1R",faqAndLicensesEmbedded:"Footer_faqAndLicensesEmbedded__rqK4H",qAndA:"Footer_qAndA__bDlJB"}},49:function(X,ie,E){X.exports={"form-switch":"SampleDetail_form-switch__31CS2","form-check-input":"SampleDetail_form-check-input__1NWgi","nav-pills":"SampleDetail_nav-pills__1brjk","nav-item":"SampleDetail_nav-item__24L50","nav-link":"SampleDetail_nav-link__V6FsG",active:"SampleDetail_active__3mnV-",modal:"SampleDetail_modal__1w1ts","modal-dialog":"SampleDetail_modal-dialog__3hbcz","modal-content":"SampleDetail_modal-content__14DW-","modal-body":"SampleDetail_modal-body__2T5wL",sampleName:"SampleDetail_sampleName__1iNn9",optionsButton:"SampleDetail_optionsButton__k0UjV",actionButtons:"SampleDetail_actionButtons__nTnTP",deleteModalHeader:"SampleDetail_deleteModalHeader__3DiKA",normalizeControlWrapper:"SampleDetail_normalizeControlWrapper__1yc_t",slotNumber:"SampleDetail_slotNumber__3sgS6",point:"SampleDetail_point__3d7qL"}},50:function(X,ie,E){X.exports={"form-switch":"SampleSelectionTable_form-switch__25Smv","form-check-input":"SampleSelectionTable_form-check-input__2FloX","nav-pills":"SampleSelectionTable_nav-pills__1rfxT","nav-item":"SampleSelectionTable_nav-item__24ALs","nav-link":"SampleSelectionTable_nav-link__2FKrm",active:"SampleSelectionTable_active__3zFcz",modal:"SampleSelectionTable_modal__ydOej","modal-dialog":"SampleSelectionTable_modal-dialog__22pzO","modal-content":"SampleSelectionTable_modal-content__1SSm5","modal-body":"SampleSelectionTable_modal-body__Zy13v",samplesTable:"SampleSelectionTable_samplesTable__22wyB",check:"SampleSelectionTable_check__10k4A",slotNumber:"SampleSelectionTable_slotNumber__3EmqG",updated:"SampleSelectionTable_updated__3gISL",pluginsOk:"SampleSelectionTable_pluginsOk__2WwJQ",duplicateSlot:"SampleSelectionTable_duplicateSlot__3iAZw"}},6:function(X,ie,E){X.exports={"form-switch":"PluginsControl_form-switch__3fmtf","form-check-input":"PluginsControl_form-check-input__1Mkof","nav-pills":"PluginsControl_nav-pills__adctY","nav-item":"PluginsControl_nav-item__1SWdw","nav-link":"PluginsControl_nav-link__yhbJ-",active:"PluginsControl_active__1A5Hk",modal:"PluginsControl_modal__InGnV","modal-dialog":"PluginsControl_modal-dialog__3KCt7","modal-content":"PluginsControl_modal-content__1WdCY","modal-body":"PluginsControl_modal-body__1Uv3b",pluginsControlWrapper:"PluginsControl_pluginsControlWrapper__q5iAB",label:"PluginsControl_label__kLVrr",previewValue:"PluginsControl_previewValue__64ltB",expanded:"PluginsControl_expanded__24A6j",pluginsInfoIcon:"PluginsControl_pluginsInfoIcon__Gne2z",showOnExpanded:"PluginsControl_showOnExpanded__1TNSA",reloadPlugins:"PluginsControl_reloadPlugins__2k_Vv",pluginsErrorIcon:"PluginsControl_pluginsErrorIcon__3r2wc",pluginsControl:"PluginsControl_pluginsControl__ltvnS",pluginList:"PluginsControl_pluginList__27BYG",pluginItem:"PluginsControl_pluginItem__IoIKf",header:"PluginsControl_header__2yo7r",pluginName:"PluginsControl_pluginName__1ddse",expandable:"PluginsControl_expandable__fxu43",pluginHasError:"PluginsControl_pluginHasError__2TUBF",actions:"PluginsControl_actions__3H5Yo",actionIcon:"PluginsControl_actionIcon__2Z6dO",disabled:"PluginsControl_disabled__2aZib",toggle:"PluginsControl_toggle__2Onzw",on:"PluginsControl_on__2G9RV",errorIcon:"PluginsControl_errorIcon__1JwZ0",paramsList:"PluginsControl_paramsList__2WFN_",paramControl:"PluginsControl_paramControl__1MpEL",paramControlInputGroup:"PluginsControl_paramControlInputGroup__3mVTF",pluginOptions:"PluginsControl_pluginOptions__n5aSd",justAdded:"PluginsControl_justAdded___Z-IA",addAPlugin:"PluginsControl_addAPlugin__2uhk_",managePlugins:"PluginsControl_managePlugins__1qg0X"}},8:function(X,ie,E){X.exports={"form-switch":"PluginManager_form-switch__2AjCp","form-check-input":"PluginManager_form-check-input__1Amq0","nav-pills":"PluginManager_nav-pills__1uWgb","nav-item":"PluginManager_nav-item__2CldT","nav-link":"PluginManager_nav-link__3frFE",active:"PluginManager_active__4B263",modal:"PluginManager_modal__1Bcfx","modal-dialog":"PluginManager_modal-dialog__IgRvW","modal-content":"PluginManager_modal-content__3qv8v","modal-body":"PluginManager_modal-body__3UE84",pluginListTitle:"PluginManager_pluginListTitle__3xXAW",installPlugin:"PluginManager_installPlugin__1Jc4T",noneInstalled:"PluginManager_noneInstalled__1Z0C1",pluginItem:"PluginManager_pluginItem__3nPlB",suggestedPlugins:"PluginManager_suggestedPlugins__C5JT2",nameAndInfo:"PluginManager_nameAndInfo__38PDg",name:"PluginManager_name__3zPbE",rename:"PluginManager_rename__2UyjF",info:"PluginManager_info__2PKgu",actions:"PluginManager_actions__2givK",reloadPlugin:"PluginManager_reloadPlugin__3KHMW",uninstallButton:"PluginManager_uninstallButton__l7bgA",uninstallModal:"PluginManager_uninstallModal__l23vs",alreadyInstalledModal:"PluginManager_alreadyInstalledModal__25bdp",failedToInstallModal:"PluginManager_failedToInstallModal__3LmeI",suggestedPluginsTitle:"PluginManager_suggestedPluginsTitle__klLsm",installSuggestedPlugin:"PluginManager_installSuggestedPlugin__3QX7g",viewSource:"PluginManager_viewSource__QbkyA",downloadPlugin:"PluginManager_downloadPlugin__1q79_"}}},[[201,1,2]]]);

//# sourceMappingURL=main.7c3e1612.chunk.js.map