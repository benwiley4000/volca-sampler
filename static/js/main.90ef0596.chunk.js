(this["webpackJsonpvolca-sampler"]=this["webpackJsonpvolca-sampler"]||[]).push([[0],{109:function(L,Q,d){L.exports={"form-switch":"NormalizeSwitch_form-switch__pmDx5","form-check-input":"NormalizeSwitch_form-check-input__trt4D","nav-pills":"NormalizeSwitch_nav-pills__1ruyA","nav-item":"NormalizeSwitch_nav-item__1nWyi","nav-link":"NormalizeSwitch_nav-link__3zD0e",active:"NormalizeSwitch_active__Rj-X-",normalizeControlWrapper:"NormalizeSwitch_normalizeControlWrapper__3yf2V"}},113:function(L,Q,d){L.exports={waveformContainer:"WaveformReadonly_waveformContainer__RARS4"}},120:function(L,Q,d){},121:function(L,Q,d){},154:function(L,Q,d){"use strict";d.r(Q);var u=d(0),n=d.n(u),gt=d(12),ya=d.n(gt),nr=d(120),rr=d(121),Ke=d(169),T=d(108),ba=d(173),ue=d(168),_e=d(161),Ea=d(22),le=d.n(Ea),ga=n.a.memo(function({onMenuOpen:e,onHeaderClick:a}){return n.a.createElement("div",{className:le.a.titleBar},n.a.createElement("span",{className:le.a.menuIcon,onClick:e},"\u2630"),n.a.createElement(_e.a,{fluid:"sm",className:le.a.titleContainer},n.a.createElement("h1",{className:le.a.title,onClick:a},n.a.createElement("span",{className:le.a.titleText,"data-text":"Volca Sample"},"Volca Sample",n.a.createElement("span",{className:le.a.titleR},"r"),n.a.createElement("svg",{viewBox:"0 0 150 150",preserveAspectRatio:"none",className:le.a.titleStarburst},Array(24).fill().map((r,o,{length:i})=>n.a.createElement("polygon",{key:o,points:"75,70 75,80 150,75","transform-origin":"75 75",style:{"--rotation":`${o*360/i}deg`}})))),n.a.createElement("img",{className:le.a.titleGraphic,src:"volca_sample.png",alt:""}),n.a.createElement("div",{className:le.a.tagline},n.a.createElement("h2",null,"for volca sample")))),n.a.createElement("svg",{width:0,height:0},n.a.createElement("filter",{id:"outline"},n.a.createElement("feMorphology",{in:"SourceAlpha",result:"DILATED",operator:"dilate",radius:"1"}),n.a.createElement("feFlood",{floodColor:"var(--stroke-color)",floodOpacity:"1",result:"PINK"}),n.a.createElement("feComposite",{in:"PINK",in2:"DILATED",operator:"in",result:"OUTLINE"}),n.a.createElement("feMerge",null,n.a.createElement("feMergeNode",{in:"OUTLINE"}),n.a.createElement("feMergeNode",{in:"SourceGraphic"})))))}),X=d(165),wt=d(66),wa=d(67),St=d.n(wa),Sa=d(58),je=d.n(Sa),Ct=d(170),kt=d(95);const Ae=31250;var Ca=Object.defineProperty,ka=Object.defineProperties,Oa=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,Ot=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable,Xe=(t,e,a)=>e in t?Ca(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,q=(t,e)=>{for(var a in e||(e={}))Ot.call(e,a)&&Xe(t,a,e[a]);if(Pe)for(var a of Pe(e))Dt.call(e,a)&&Xe(t,a,e[a]);return t},ce=(t,e)=>ka(t,Oa(e)),Ne=(t,e)=>{var a={};for(var r in t)Ot.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&Pe)for(var r of Pe(t))e.indexOf(r)<0&&Dt.call(t,r)&&(a[r]=t[r]);return a},Re=(t,e,a)=>(Xe(t,typeof e!="symbol"?e+"":e,a),a),te=(t,e,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},s=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);c((a=a.apply(t,e)).next())});const Me=je.a.createInstance({name:"audio_file_data",driver:je.a.INDEXEDDB}),Be=je.a.createInstance({name:"sample_metadata",driver:je.a.INDEXEDDB});function Da(t){return te(this,null,function*(){const e=Object(Ct.a)();return yield Me.setItem(e,t),e})}const Ye="0.5.0",_a={"0.1.0":t=>{const e=t,{clip:a}=e,r=Ne(e,["clip"]);return ce(q({},r),{trimFrames:a.map(i=>Math.round(i*Ae)),metadataVersion:"0.2.0"})},"0.2.0":t=>te(void 0,null,function*(){const e=t,{trimFrames:a}=e,r=Ne(e,["trimFrames"]),o=yield Fe(r.sourceFileId,!1),i=yield et(o,a),s={frames:a,waveformPeaks:i};return ce(q({},r),{trim:s,metadataVersion:"0.3.0"})}),"0.3.0":t=>{const e=t,{dateSampled:a,dateModified:r}=e,o=Ne(e,["dateSampled","dateModified"]);return ce(q({},o),{dateSampled:new Date(a).toISOString(),dateModified:new Date(r).toISOString(),metadataVersion:"0.4.0"})},"0.4.0":t=>te(void 0,null,function*(){const e=t,{scaleCoefficient:a,trim:{frames:r,waveformPeaks:o}}=e,i=Ne(e,["scaleCoefficient","trim"]),s=yield Fe(i.sourceFileId,!1),c=Ie(s,r),l=pe(c);return ce(q({},i),{normalize:a!==1,trim:{frames:r,waveformPeaks:ce(q({},o),{normalizationCoefficient:1/l})},metadataVersion:"0.5.0"})})};function ja(t){return te(this,null,function*(){let e=t;for(;e.metadataVersion!==Ye;){const a=_a[e.metadataVersion];if(!a){console.warn(`Failed to properly upgrade metadata for sample "${e.name}"`),e={name:e.name,sourceFileId:e.sourceFileId,id:e.id,metadataVersion:Ye};break}e=yield a(e)}return e})}const fe=class{constructor({name:t,sourceFileId:e,trim:a,id:r=Object(Ct.a)(),userFileInfo:o=null,slotNumber:i=0,dateSampled:s=new Date().toISOString(),dateModified:c=s,useCompression:l=!0,qualityBitDepth:m=16,normalize:f=!0}){this.id=r,this.metadata={name:t,sourceFileId:e,trim:a,userFileInfo:o,slotNumber:i,dateSampled:s,dateModified:c,useCompression:l,qualityBitDepth:m,normalize:f,metadataVersion:Ye}}duplicate(){const t=new fe.Mutable(ce(q({},this.metadata),{name:`${this.metadata.name} (copy)`,dateModified:new Date().toISOString()}));return t.persist(),t}static cacheSourceFileData(t,e){this.sourceFileData.set(t,e),this.recentlyCachedSourceFileIds=[t,...this.recentlyCachedSourceFileIds.filter(r=>r!==t)];const a=this.recentlyCachedSourceFileIds.slice(this.MAX_CACHED);for(const r of a)this.sourceFileData.delete(r);this.recentlyCachedSourceFileIds=this.recentlyCachedSourceFileIds.slice(0,this.MAX_CACHED)}static getSourceFileData(t){return te(this,null,function*(){{const a=this.sourceFileData.get(t);if(a)return a}if(t.includes(".")){const a=yield fetch(t);if(a.status>=400)return Promise.reject(new Error(`Failed to fetch source file "${t}"`));const r=yield a.arrayBuffer(),o=new Uint8Array(r);return this.cacheSourceFileData(t,o),o}const e=yield Me.getItem(t);return e?e instanceof Uint8Array?(this.cacheSourceFileData(t,e),e):Promise.reject("Source data is of unexpected type"):Promise.reject("Missing source data")})}static getAllMetadataFromStore(){return te(this,null,function*(){const t=new Map,e=[];return yield Be.iterate((a,r)=>{a&&e.push(ja(a).then(o=>{t.set(r,o)}).catch(o=>{console.error(o),console.warn(`Failed to upgrade metadata "${r}" (${a.name}); ignoring.`)}))}),yield Promise.all(e),t})}static getAllFromStorage(){return te(this,null,function*(){const t=yield this.getAllMetadataFromStore(),e=yield _t(),a=(yield Me.keys()).concat(e.map(({sourceFileId:o})=>o));return[...t].map(([o,i])=>{const{sourceFileId:s}=i;return a.includes(s)?new fe.Mutable(q({id:o},i)):(console.warn(`Found metadata "${i.name||o}" with missing data "${s}; ignoring.`),null)}).filter(Boolean).sort(({metadata:{dateModified:o}},{metadata:{dateModified:i}})=>o>i?-1:i>o?1:0)})}};let Z=fe;Re(Z,"Mutable",class extends fe{constructor(t){super(t);setTimeout(()=>te(this,null,function*(){(yield Be.keys()).includes(this.id)||console.warn(`Expected sample metadata container ${this.id} to be persisted`)}))}persist(){return te(this,null,function*(){yield Be.setItem(this.id,this.metadata)})}update(t){const{id:e,metadata:a}=this,r=typeof t=="function"?t(a):t;if(Object.keys(r).every(s=>r[s]===a[s]))return this;const o=ce(q(q({},a),r),{dateModified:new Date().toISOString()}),i=new fe.Mutable(q({id:e},o));return i.persist(),i}remove(){return te(this,null,function*(){if(yield Be.removeItem(this.id),this.metadata.sourceFileId.includes("."))return;const t=yield fe.getAllMetadataFromStore();for(const[,{sourceFileId:e}]of t)if(e===this.metadata.sourceFileId)return;yield Me.removeItem(this.metadata.sourceFileId)})}}),Re(Z,"sourceFileData",new Map),Re(Z,"recentlyCachedSourceFileIds",[]),Re(Z,"MAX_CACHED",10);let Ze;function _t(){return Ze||(Ze=fetch("factory-samples.json").then(t=>t.json())),Ze}function Aa(){return te(this,null,function*(){const t=yield _t();return new Map(t.map(e=>[e.id,new Z(ce(q({},e),{normalize:!1,trim:{frames:[e.trim.frames[0],e.trim.frames[1]],waveformPeaks:ce(q({},e.trim.waveformPeaks),{positive:new Float32Array(Object(kt.a)(e.trim.waveformPeaks.positive)),negative:new Float32Array(Object(kt.a)(e.trim.waveformPeaks.negative))})}}))]))})}var jt=Math.pow,Je=(t,e,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},s=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);c((a=a.apply(t,e)).next())});function Le(t,e){const a=4,r=e[0]*a,o=t.length-e[0]-e[1];return new Float32Array(t.buffer,r,o)}function Ie(t,e){const a=t.length-e[0]-e[1],r=new Float32Array(a),o=Array(t.numberOfChannels).fill().map((i,s)=>Le(t.getChannelData(s),e));for(let i=0;i<a;i++){let s=0;for(let c=0;c<o.length;c++)s+=o[c][i];s/=o.length,r[i]=s}return r}function pe(t){let e=0;for(const a of t){const r=Math.abs(a);r>e&&(e=r)}return e}function Pa(t,e){if(e!==1)for(let a=0;a<t.length;a++)t[a]*=e}function Na(t){const e=pe(t);Pa(t,1/e)}function Ra(t,e){const a=jt(2,e-1);for(let r=0;r<t.length;r++)t[r]=Math.round(t[r]*a)/a}function At(t){for(let e=0;e<t.length;e++)t[e]>1?t[e]=1:t[e]<-1&&(t[e]=-1)}function Ma(t){const e=t.length,a=t[0].length,r=new Float32Array(e*a);for(let o=0;o<r.length;o++){const i=e*o;for(let s=0;s<e;s++)r[i+s]=t[s][o]}return r}function Pt(t){const e=new Int16Array(t.length),a=jt(2,15);for(let r=0;r<t.length;r++)e[r]=t[r]===1?a-1:a*t[r];return e}function Nt(){return window.AudioContext||window.webkitAudioContext}let Rt;function Mt(){const t=Nt();return Rt=Rt||new t({sampleRate:Ae})}function we(t){return Je(this,null,function*(){const e=new Uint8Array(t);return yield new Promise((r,o)=>{Mt().decodeAudioData(e.buffer,r,o)})})}function Fe(t,e){return Je(this,null,function*(){const a=yield Z.getSourceFileData(t),r=yield we(a);if(e)for(let o=0;o<r.numberOfChannels;o++)At(r.getChannelData(o));return r})}function Bt(t,e){return Je(this,null,function*(){const{qualityBitDepth:a,sourceFileId:r,userFileInfo:o,normalize:i,trim:{frames:s}}=t.metadata;if(a<8||a>16||!Number.isInteger(a))throw new Error(`Expected bit depth between 8 and 16. Received: ${a}`);const c=yield Fe(r,Boolean(o)),l=c.numberOfChannels===1?Le(c.getChannelData(0),s):Ie(c,s);i&&Na(l),e&&a<16&&Ra(l,a);const m=Pt(l),f=m.length*2,p=St()({channels:1,sampleRate:c.sampleRate,bitDepth:16,dataLength:f}),h=new Uint8Array(p.length+f);return h.set(p),h.set(new Uint8Array(m.buffer),p.length),{data:h,sampleRate:16}})}function Lt(t){const[e,a]=Object(u.useState)(null),[r,o]=Object(u.useState)(null);return Object(u.useEffect)(()=>{a(null);let i=!1;Bt(t,!0).then(({data:s})=>{i||a(s)})},[t]),Object(u.useEffect)(()=>{if(o(null),e){let i=!1;we(e).then(s=>{i||o(s)})}},[e]),{wav:e,audioBuffer:r}}const Ba={playAudioBuffer(t,e){throw new Error("Must render AudioPlaybackContextProvider")}},It=Object(u.createContext)(Ba);function La({children:t}){const e=Object(u.useRef)(()=>{}),a=Object(u.useCallback)((o,{onTimeUpdate:i=()=>null,onEnded:s=()=>null}={})=>{e.current();const c=Mt(),l=c.createBufferSource();l.buffer=o,l.connect(c.destination),l.start();const m=c.currentTime;i(0);let f=requestAnimationFrame(p);function p(){i(c.currentTime-m),f=requestAnimationFrame(p)}let h=!1;l.addEventListener("ended",()=>{h||(i(o.duration),s()),cancelAnimationFrame(f)});function g(){h||(l.stop(),cancelAnimationFrame(f),s(),h=!0)}return e.current=g,g},[]),r=Object(u.useMemo)(()=>({playAudioBuffer:a}),[a]);return Object(u.createElement)(It.Provider,{value:r},t)}function Ft(){return Object(u.useContext)(It)}function qe(t){return t.toLocaleString([],{dateStyle:"medium",timeStyle:"short"})}function xe(t,e){return`0:${t.toFixed(e).padStart(3+e,"0")}`}function Ia(t){return`${Math.floor(t/60)}m ${Math.floor(t%60)}s`}var xt=(t,e,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},s=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);c((a=a.apply(t,e)).next())});const ve=6,Wt=ve*44;function Tt(t,e){const a=Math.floor(ve*t.length/e),r=new Float32Array(Math.floor(t.length/a)),o=new Float32Array(Math.floor(t.length/a));for(let l=0;l<r.length;l++){const m=new Float32Array(t.buffer,l*a*4,a);let f=0,p=0;for(const h of m)h>f&&(f=h),h<p&&(p=h);r[l]=Math.min(1,f),o[l]=Math.max(-1,p)}const i=t.length%a,s=new Float32Array(r.length+o.length+i);s.set(r,0),s.set(o,r.length),s.set(new Float32Array(t.buffer,(t.length-i)*4,i),r.length+o.length);const c=pe(s);return{positive:r,negative:o,normalizationCoefficient:1/c}}function et(t,e){return xt(this,null,function*(){const a=Ie(t,e);return Tt(a,Wt)})}function zt(t){const[e,a]=Object(u.useState)(null);Object(u.useEffect)(()=>{let o=!1;return(()=>xt(this,null,function*(){if(o)return;const i=yield Fe(t.metadata.sourceFileId,Boolean(t.metadata.userFileInfo));o||a([t.metadata.sourceFileId,i])}))(),()=>{o=!0}},[t.metadata.sourceFileId,t.metadata.userFileInfo]);const r=Object(u.useRef)(t);return e&&t.metadata.sourceFileId===e[0]&&(r.current=t),{sample:r.current,sourceAudioBuffer:e&&e[1]}}function Ht(t){const e=Object(u.useMemo)(()=>t?Ie(t,[0,0]):new Float32Array,[t]),[a,r]=Object(u.useState)(null),[o,i]=Object(u.useState)({width:0,height:0}),s=Object(u.useMemo)(()=>a&&(o.width||a.offsetWidth),[a,o]),c=Object(u.useMemo)(()=>!s||!e.length?{positive:new Float32Array,negative:new Float32Array,normalizationCoefficient:1/0}:Tt(e,s),[s,e]);return{monoSamples:e,waveformRef:r,pixelWidth:s,peaks:c,onResize:i}}function Vt(t){const{playAudioBuffer:e}=Ft(),a=Object(u.useRef)(()=>{}),[r,o]=Object(u.useState)(null);Object(u.useEffect)(()=>{t&&r&&(o(null),r.fn())},[t,r]);const[i,s]=Object(u.useState)(0),[c,l]=Object(u.useState)(!1),[m,f]=Object(u.useState)("");Object(u.useEffect)(()=>{t&&f(xe(c?i*t.duration:t.duration,1))},[t,c,i]);const p=Object(u.useCallback)(g=>{if(c)a.current();else if(t)a.current=e(t,{onTimeUpdate(b){s(b/t.duration)},onEnded(){l(!1)}}),s(0),l(!0);else{const b=g.target;o({fn:()=>b.dispatchEvent(g)})}},[c,e,t]);Object(u.useEffect)(()=>{function g(b){document.querySelector('[role="dialog"]')||b.key===" "&&(b.preventDefault(),p(b))}return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[p]);const h=Object(u.useCallback)(()=>a.current(),[]);return{isPlaybackActive:c,playbackProgress:i,displayedTime:m,togglePlayback:p,stopPlayback:h}}var Fa=d(104),xa=Object.defineProperty,Ut=Object.getOwnPropertySymbols,Wa=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,Qt=(t,e,a)=>e in t?xa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,$t=(t,e)=>{for(var a in e||(e={}))Wa.call(e,a)&&Qt(t,a,e[a]);if(Ut)for(var a of Ut(e))Ta.call(e,a)&&Qt(t,a,e[a]);return t};const za=wt.a.canvas({width:"100%",height:"100%",display:"block",imageRendering:"pixelated"});function Ha(t,e){function a(o,i){t.width=o,t.height=i}a(t.offsetWidth,t.offsetHeight),e({width:t.offsetWidth,height:t.offsetHeight});const r=new Fa.a(([o])=>{const{width:i,height:s}=o.contentRect;a(i,s),e({width:i,height:s})});return r.observe(t),()=>r.disconnect()}function Va(t,e,a){const r=getComputedStyle(document.documentElement),o=r.getPropertyValue("--bs-primary"),i=r.getPropertyValue("--bs-primary-darkened"),s=t.getContext("2d");s.imageSmoothingEnabled=!1;const{width:c,height:l}=t;s.clearRect(0,0,c,l);const m=Math.floor(l*(2/3))+1;s.fillStyle=o,e.positive.forEach((p,h)=>{const g=m*p,b=Math.max(Math.round(a*g),1);s.fillRect(h*ve,m-b,ve-1,b)});const f=l-m;s.fillStyle=i,e.negative.forEach((p,h)=>{const g=f*p*-1,b=Math.round(a*g);s.fillRect(h*ve,m,ve-1,b)})}function Ua({peaks:t,scaleCoefficient:e,waveformRef:a,onResize:r}){const o=Object(u.useRef)(null);Object(u.useImperativeHandle)(a,()=>o.current);const[i,s]=Object(u.useState)(Symbol()),c=Object(u.useRef)({width:0,height:0});return Object(u.useLayoutEffect)(()=>{if(!o.current)throw new Error("Canvas should be defined");return c.current.width=o.current.offsetWidth,c.current.height=o.current.offsetHeight,r&&r($t({},c.current)),Ha(o.current,({width:l,height:m})=>{(l!==c.current.width||m!==c.current.height)&&(s(Symbol()),c.current.width=l,c.current.height=m,r&&r($t({},c.current)))})},[r]),Object(u.useLayoutEffect)(()=>{const l=o.current;if(!l)throw new Error("Canvas should be defined");let m=requestAnimationFrame(()=>{m=requestAnimationFrame(()=>{Va(l,t,e===void 0?t.normalizationCoefficient:e)})});return()=>cancelAnimationFrame(m)},[t,e,i]),n.a.createElement(za,{ref:o})}var tt=Ua,Qa=d(88),at=d.n(Qa);const $a=wt.a.div({width:`${Wt}px`,height:"40px"}),Gt=typeof IntersectionObserver!="undefined",Ga=n.a.memo(function({sample:e,selected:a,onSampleSelect:r}){const o=Object(u.useRef)(null),[i,s]=Object(u.useState)(!Gt);return Object(u.useLayoutEffect)(()=>{if(!Gt)return;const c=o.current;if(!c)throw new Error("Waveform container should be defined");const l=c.getBoundingClientRect();if(l.top+l.height>=0&&l.bottom-l.height<=window.innerHeight){s(!0);return}const m=new IntersectionObserver(([f])=>{f.isIntersecting&&(s(!0),m.unobserve(c))});return m.observe(c),()=>m.disconnect()},[]),n.a.createElement("li",{className:["list-group-item",at.a.listItem,a?`active ${at.a.active}`:""].join(" "),onClick:()=>r(e.id)},n.a.createElement(X.a.Label,null,e.metadata.name),n.a.createElement("div",{className:at.a.listWaveform},n.a.createElement($a,{ref:o},i&&n.a.createElement(tt,{peaks:e.metadata.trim.waveformPeaks}))))});function Ka({samples:t,selectedSampleId:e,onSampleSelect:a}){const r=Object(u.useRef)(new WeakMap),o=[];for(const i of t.values()){let s=r.current.get(i);s||(s=n.a.createElement(Ga,{key:i.id,sample:i,selected:i.id===e,onSampleSelect:a}),r.current.set(i,s)),o.push(s)}return n.a.createElement("ul",{className:"list-group list-group-flush"},o)}var Kt=Ka,Xa=d(163),Se=d(114),W=d(167),Xt=d(68),We=d(166),Te=d(162),Ya=d(105),Za=d(106),Ja=d(107);function Yt(t,e){const a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=e,r.style.display="none",document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(a)}var qa=d(49),Ce=d.n(qa),en=(t,e,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},s=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);c((a=a.apply(t,e)).next())}),Zt=n.a.memo(function({isPlaybackActive:e,playbackProgress:a,displayedTime:r,downloadFilename:o,wavFile:i,togglePlayback:s}){const c=Object(u.useCallback)(()=>en(this,null,function*(){if(i){const l=new Blob([i],{type:"audio/x-wav"});Yt(l,o)}}),[o,i]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:[Ce.a.playbackOverlay,e?Ce.a.playbackActive:""].join(" "),style:{"--playback-progress":`${100*a}%`}},n.a.createElement("div",{className:Ce.a.playback})),n.a.createElement("div",{className:Ce.a.playbackButtonContainer},n.a.createElement(We.a,{delay:{show:400,hide:0},overlay:n.a.createElement(Te.a,null,"Preview how your sample will sound on the volca sample")},n.a.createElement(T.a,{variant:"dark",onClick:l=>s(l.nativeEvent)},e?n.a.createElement(Za.a,null):n.a.createElement(Ya.a,null))),r&&n.a.createElement("span",null,r)),n.a.createElement(We.a,{delay:{show:400,hide:0},overlay:n.a.createElement(Te.a,null,"Download a copy of the audio that will be transferred to the volca sample")},n.a.createElement(T.a,{className:Ce.a.downloadButton,type:"button",variant:"dark",size:"sm",onClick:c,disabled:!i},n.a.createElement(Ja.a,null))))}),tn=d(109),an=d.n(tn),nn=n.a.memo(function({sampleId:e,normalize:a,onSampleUpdate:r}){return n.a.createElement(We.a,{delay:{show:400,hide:0},overlay:n.a.createElement(Te.a,null,"Boosts your sample's volume so its peak is at the same level as your other normalized samples")},n.a.createElement("div",{className:an.a.normalizeControlWrapper},n.a.createElement(X.a.Switch,{label:n.a.createElement("span",{onClick:()=>r(e,o=>({normalize:!o.normalize}))},"Normalize"),checked:a,onChange:o=>r(e,{normalize:o.target.checked})})))}),rn=d(8),$=d.n(rn),on=(t,e,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},s=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);c((a=a.apply(t,e)).next())}),ln=n.a.memo(function({sample:e,onSampleUpdate:a}){const{wav:r,audioBuffer:o}=Lt(e),{sample:{id:i,metadata:{name:s,trim:{frames:c},normalize:l}},sourceAudioBuffer:m}=zt(e),{monoSamples:f,waveformRef:p,pixelWidth:h,peaks:g,onResize:b}=Ht(m),_=Object(u.useMemo)(()=>{if(!m)return 0;const F=Le(f,c);return pe(F)},[m,f,c]),R=1/_,[w,O]=Object(u.useState)({trimFrames:c,cursor:null});Object(u.useEffect)(()=>{O({trimFrames:c,cursor:null})},[c]);const A=Object(u.useMemo)(()=>{if(!f.length||!h)return[0,0];const F=h/f.length;return w.trimFrames.map(x=>x*F)},[h,f.length,w.trimFrames]),M=Object(u.useRef)(w);M.current=w;const C=Object(u.useRef)(e.id);C.current=e.id;const j=Object(u.useRef)(0),D=Object(u.useCallback)(()=>on(this,null,function*(){if(!m||i!==C.current)return;let F=j.current=Math.random();const{trimFrames:x}=M.current,G=yield et(m,x);j.current===F&&a(i,{trim:{frames:x,waveformPeaks:G}})}),[i,m,a]),P=Object(u.useRef)(!1);Object(u.useEffect)(()=>{P.current&&(D(),P.current=!1)},[w,D]);const E=Object(u.useCallback)(()=>{P.current=!0,O({trimFrames:[0,0],cursor:null})},[]),N=Object(u.useRef)(null),S=Object(u.useRef)(null),k=Object(u.useRef)(null);{const F=Object(u.useRef)(null),x=Object(u.useRef)(null),G=Object(u.useRef)(null),De=Object(u.useRef)(!1),oe=Object(u.useRef)(null);Object(u.useLayoutEffect)(()=>{oe.current&&(clearTimeout(oe.current),oe.current=null)},[w]);const mt=Object(u.useMemo)(()=>{if(!h||!f.length)return null;const U=Math.max(2e3,Math.ceil(10*f.length/h));return{pixelWidth:h,monoSamplesLength:f.length,minFrameWidth:U}},[h,f.length]);Object(u.useEffect)(()=>{if(!mt||!N.current||!S.current||!k.current)return;const K=N.current,U=S.current,ee=k.current,{pixelWidth:be,monoSamplesLength:ae,minFrameWidth:Ee}=mt;let dt=0;function ar(){dt=ee.getBoundingClientRect().left}function Ue(y){y instanceof TouchEvent&&y.preventDefault(),document.body.style.userSelect="none";const{pageX:B}=y instanceof MouseEvent?y:y.touches[0];F.current=B}function Qe(y){y instanceof TouchEvent&&y.preventDefault(),document.body.style.userSelect="none";const{pageX:B}=y instanceof MouseEvent?y:y.touches[0];x.current=B}function $e(y){if(y instanceof TouchEvent&&y.preventDefault(),y.detail===2){E();return}document.body.style.userSelect="none";const{clientX:B}=y instanceof MouseEvent?y:y.touches[0];ar();const Y=Math.max(0,Math.min(be,B-dt)),J=Y/be,z=Math.round(ae*J),me=z+Ee,de=me<ae?me:z-Ee;de<0||(O({trimFrames:[Math.min(z,de),ae-1-Math.max(z,de)],cursor:Y-1}),G.current=z)}function ft(y){const B=y/be,Y=Math.round(ae*B);O(({trimFrames:J})=>{let z=J[0]+Y;return z=Math.min(z,ae-J[1]-Ee),z=Math.max(z,0),{trimFrames:[z,J[1]],cursor:null}})}function pt(y){if(F.current===null)return;y instanceof TouchEvent&&y.preventDefault();const{pageX:B}=y instanceof MouseEvent?y:y.touches[0],Y=B-F.current;Y&&(ft(Y),F.current=B)}function vt(y){const B=y/be,Y=Math.round(ae*B);O(({trimFrames:J})=>{let z=J[1]+Y;return z=Math.min(z,ae-J[0]-Ee),z=Math.max(z,0),{trimFrames:[J[0],z],cursor:null}})}function ht(y){if(x.current===null)return;y instanceof TouchEvent&&y.preventDefault();const{pageX:B}=y instanceof MouseEvent?y:y.touches[0],Y=x.current-B;Y&&(vt(Y),x.current=B)}let Ge=!1;function pa(y){if(F.current!==null)return;let B=!0;switch(y.key){case"ArrowLeft":ft(-1);break;case"ArrowRight":ft(1);break;default:B=!1;break}B&&(y.stopPropagation(),y.preventDefault(),Ge=!0)}function va(y){if(x.current!==null)return;let B=!0;switch(y.key){case"ArrowLeft":vt(1);break;case"ArrowRight":vt(-1);break;default:B=!1;break}B&&(y.stopPropagation(),y.preventDefault(),Ge=!0)}function yt(y){if(G.current===null)return;y instanceof TouchEvent&&y.preventDefault();const B=G.current,{clientX:Y}=y instanceof MouseEvent?y:y.touches[0],J=Math.max(0,Math.min(be,Y-dt)),z=J/be,me=Math.max(0,Math.min(ae-1,Math.round(ae*z)));if(me!==G.current){De.current=!0;const de=B+Ee,bt=B-Ee,Et=me>B?de<ae?Math.max(me,de):bt:bt>=0?Math.min(me,bt):de;O({trimFrames:[Math.min(B,Et),ae-1-Math.max(B,Et)],cursor:B<Et?J:J-1})}}function ha(y){pt(y),ht(y),yt(y)}function H(y){(F.current!==null||x.current!==null||G.current!==null||Ge)&&((y instanceof TouchEvent||y instanceof KeyboardEvent)&&y.preventDefault(),G.current&&!De.current&&y.detail===1?oe.current=setTimeout(()=>{oe.current=null,D()},250):D(),F.current=null,x.current=null,G.current=null,De.current=!1,Ge=!1),document.body.style.userSelect="unset"}function ge(y){y.target instanceof Node&&ee.contains(y.target)||oe.current&&(clearTimeout(oe.current),oe.current=null,D())}return K.addEventListener("touchstart",Ue),K.addEventListener("mousedown",Ue),U.addEventListener("touchstart",Qe),U.addEventListener("mousedown",Qe),ee.addEventListener("touchstart",$e),ee.addEventListener("mousedown",$e),K.addEventListener("touchmove",pt),U.addEventListener("touchmove",ht),K.addEventListener("keydown",pa),U.addEventListener("keydown",va),ee.addEventListener("touchmove",yt),window.addEventListener("mousemove",ha),K.addEventListener("touchend",H),K.addEventListener("touchcancel",H),K.addEventListener("keyup",H),U.addEventListener("touchend",H),U.addEventListener("keyup",H),U.addEventListener("touchcancel",H),ee.addEventListener("touchend",H),ee.addEventListener("touchcancel",H),window.addEventListener("mouseup",H),window.addEventListener("touchstart",ge,{capture:!0}),window.addEventListener("mousedown",ge,{capture:!0}),window.addEventListener("keydown",ge,{capture:!0}),()=>{K.removeEventListener("touchstart",Ue),K.removeEventListener("mousedown",Ue),U.removeEventListener("touchstart",Qe),U.removeEventListener("mousedown",Qe),ee.removeEventListener("touchstart",$e),ee.removeEventListener("mousedown",$e),K.removeEventListener("touchmove",pt),U.removeEventListener("touchmove",ht),K.removeEventListener("keydown",pa),U.removeEventListener("keydown",va),ee.removeEventListener("touchmove",yt),window.removeEventListener("mousemove",ha),K.removeEventListener("touchend",H),K.removeEventListener("touchcancel",H),K.removeEventListener("keyup",H),U.removeEventListener("touchend",H),U.removeEventListener("keyup",H),U.removeEventListener("touchcancel",H),ee.removeEventListener("touchend",H),ee.removeEventListener("touchcancel",H),window.removeEventListener("mouseup",H),window.removeEventListener("touchstart",ge,{capture:!0}),window.removeEventListener("mousedown",ge,{capture:!0}),window.removeEventListener("keydown",ge,{capture:!0})}},[mt,D,E])}const{isPlaybackActive:v,playbackProgress:I,displayedTime:ne,togglePlayback:re,stopPlayback:V}=Vt(o);Object(u.useEffect)(()=>V,[e,w,V]);const se=e.metadata.trim.frames.every(F=>F===0);return n.a.createElement(n.a.Fragment,null,n.a.createElement(X.a.Group,{className:$.a.waveformAdjacentControls},n.a.createElement(nn,{sampleId:e.id,normalize:e.metadata.normalize,onSampleUpdate:a}),n.a.createElement(T.a,{type:"button",variant:"secondary",disabled:se,onClick:E},se?"All audio selected":"Select all audio")),n.a.createElement("div",{className:[$.a.waveformContainer,v?$.a.playbackActive:""].join(" "),style:{"--cursor-display":w.cursor===null?"none":"unset","--cursor-left":`${w.cursor}px`,"--trim-pixels-left":`${A[0]}px`,"--trim-pixels-right":`${A[1]}px`}},n.a.createElement(tt,{waveformRef:p,peaks:g,scaleCoefficient:l?R:1,onResize:b}),n.a.createElement(Zt,{isPlaybackActive:v,playbackProgress:I,displayedTime:ne,downloadFilename:`${s}.volcasample.wav`,wavFile:r,togglePlayback:re}),n.a.createElement("div",{className:$.a.cursor}),n.a.createElement("div",{className:[$.a.trim,$.a.left].join(" ")},n.a.createElement("div",{className:$.a.bar}),n.a.createElement("div",{ref:N,className:$.a.handle,tabIndex:0}),m&&Boolean(f.length)&&n.a.createElement("span",{className:$.a.time},xe(m.duration*w.trimFrames[0]/f.length,2))),n.a.createElement("div",{className:[$.a.trim,$.a.right].join(" ")},n.a.createElement("div",{className:$.a.bar}),n.a.createElement("div",{ref:S,className:$.a.handle,tabIndex:0}),m&&Boolean(f.length)&&n.a.createElement("span",{className:$.a.time},xe(m.duration*(f.length-1-w.trimFrames[1])/f.length,2))),n.a.createElement("div",{ref:k,className:$.a.waveformOverlay})))}),cn=d(172),Jt=(t,e,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},s=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);c((a=a.apply(t,e)).next())});let qt;function sn(){return Jt(this,null,function*(){return typeof window.CREATE_SYRO_BINDINGS!="function"?Promise.reject("Expected CREATE_SYRO_BINDINGS global function to exist"):qt=qt||window.CREATE_SYRO_BINDINGS().then(t=>Jt(this,null,function*(){return{prepareSampleBufferFromWavData:t.cwrap("prepareSampleBufferFromWavData","number",["array","number","number","number","number"]),prepareSampleBufferFrom16BitPcmData(){throw new Error("This function does not work. Use prepareSampleBufferFromWavData.")},getSampleBufferChunkPointer:t.cwrap("getSampleBufferChunkPointer","number",["number"]),getSampleBufferChunkSize:t.cwrap("getSampleBufferChunkSize","number",["number"]),getSampleBufferProgress:t.cwrap("getSampleBufferProgress","number",["number"]),getSampleBufferTotalSize:t.cwrap("getSampleBufferTotalSize","number",["number"]),cancelSampleBufferWork:t.cwrap("cancelSampleBufferWork",null,["number"]),registerUpdateCallback(e){return t.addFunction(e,"vi")},unregisterUpdateCallback(e){t.removeFunction(e)},heap8Buffer(){return t.HEAP8.buffer}}}))})}var un=(t,e,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},s=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);c((a=a.apply(t,e)).next())});function mn(t,e){let a=!1,r=()=>{};return{cancelWork(){a=!0,r()},sampleBufferPromise:(()=>un(this,null,function*(){const{prepareSampleBufferFromWavData:o,getSampleBufferChunkPointer:i,getSampleBufferChunkSize:s,getSampleBufferProgress:c,getSampleBufferTotalSize:l,cancelSampleBufferWork:m,registerUpdateCallback:f,unregisterUpdateCallback:p,heap8Buffer:h}=yield sn();if(a)return new Uint8Array;const{data:g}=yield Bt(t);if(a)return new Uint8Array;let b,_=0;const R=f(O=>{if(a)return;const A=l(O);b||(b=new Uint8Array(A));const M=i(O),C=s(O),j=c(O);b.set(new Uint8Array(h(),M,C),j-C),_=j/A}),w=o(g,g.length,t.metadata.slotNumber,t.metadata.qualityBitDepth,t.metadata.useCompression?1:0,R);e(_);try{yield new Promise(O=>{let A;r=()=>{cancelAnimationFrame(A),m(w),O()},M();function M(){if(_&&(e(_),_>=1)){O();return}A=requestAnimationFrame(M)}})}finally{r=()=>{},p(R)}if(a)return new Uint8Array;if(!b)throw new Error("Unexpected condition: sampleBuffer should be defined");return b}))()}}var dn=d(89),nt=d.n(dn),fn=(t,e,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},s=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);c((a=a.apply(t,e)).next())});function pn({sample:t}){const[e,a]=Object(u.useState)(0),[r,o]=Object(u.useState)(!1),[i,s]=Object(u.useState)("idle");Object(u.useLayoutEffect)(()=>{i==="transferring"&&o(!1)},[i]);const[c,l]=Object(u.useState)(null),[m,f]=Object(u.useState)(null);Object(u.useEffect)(()=>{c instanceof AudioBuffer&&m&&(f(null),m.fn())},[c,m]);const p=Object(u.useRef)(()=>{});Object(u.useEffect)(()=>{let R=!1;a(0),s("idle"),l(null),f(null),p.current=()=>{R=!0};try{const{sampleBufferPromise:w,cancelWork:O}=mn(t,A=>{R||a(A)});p.current=()=>{O(),R=!0},w.then(A=>fn(this,null,function*(){if(R)return;p.current=()=>{R=!0};const M=yield we(A);R||l(M)}))}catch(w){console.error(w),l(new Error(String(w)))}return()=>p.current()},[t]);const{playAudioBuffer:h}=Ft(),g=Object(u.useCallback)(R=>{if(!(c instanceof AudioBuffer)){if(!c){const{target:w,nativeEvent:O}=R;f({fn:()=>w.dispatchEvent(O)})}return}try{s("transferring");const w=h(c,{onTimeUpdate:O=>a(O/c.duration)});p.current=()=>{w(),s("idle")}}catch(w){console.error(w),s("error")}},[h,c]),b=Object(u.useCallback)(()=>p.current(),[]),_=e<1;return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{className:nt.a.transferButton,type:"button",variant:"primary",onClick:()=>o(!0)},"Transfer to volca sample"),n.a.createElement(W.a,{onHide:()=>o(!1),className:nt.a.preTransferModal,show:r,"aria-labelledby":"pre-transfer-modal"},n.a.createElement(W.a.Header,null,n.a.createElement(W.a.Title,{id:"pre-transfer-modal"},"Connect volca sample before continuing")),n.a.createElement(W.a.Body,null,n.a.createElement("figure",null,n.a.createElement("img",{src:"connection.png",alt:""}),n.a.createElement("figcaption",{className:"small"},"Source:"," ",n.a.createElement("a",{href:"https://github.com/korginc/volcasample#6-transferring-syrostream-to-your-volca-sample",target:"_blank",rel:"noreferrer"},"KORG"))),n.a.createElement("p",null,"Make sure your ",n.a.createElement("strong",null,"headphone output")," is connected to the volca sample's ",n.a.createElement("strong",null,"SYNC IN")," and adjust your output volume to a high (but not overdriven) level. Your volca wants to hear this, but you don't.")),n.a.createElement(W.a.Footer,null,n.a.createElement(T.a,{type:"button",variant:"light",onClick:()=>o(!1)},"Cancel"),n.a.createElement(T.a,{type:"button",variant:"primary",disabled:!(c instanceof AudioBuffer),onClick:g},"Transfer now"))),n.a.createElement(W.a,{show:i!=="idle","aria-labelledby":"transfer-modal"},n.a.createElement(W.a.Header,null,n.a.createElement(W.a.Title,{id:"transfer-modal"},_?"Sample transfer in progress":"Sample transfer complete")),n.a.createElement(W.a.Body,null,i==="error"?n.a.createElement("p",null,"Something unexpected happening while transferring (on our end)."):_?n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,"Transferring ",n.a.createElement("strong",null,t.metadata.name)," to slot"," ",n.a.createElement("strong",null,t.metadata.slotNumber)," on your your volca sample. Don't disconnect anything."),n.a.createElement(cn.a,{striped:!0,animated:!0,variant:"primary",now:100*e}),n.a.createElement("div",{className:nt.a.progressAnnotation},c instanceof AudioBuffer&&Ia(c.duration*(1-e))," ","remaining")):n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,"The sample ",n.a.createElement("strong",null,t.metadata.name)," was transferred to slot"," ",n.a.createElement("strong",null,t.metadata.slotNumber)," on your volca sample. Press the ",n.a.createElement("strong",null,"[FUNC]")," button to finish."),n.a.createElement("p",null,"If everything worked, you will see ",n.a.createElement("strong",null,"[End]")," on the volca sample's display. If you see ",n.a.createElement("strong",null,"[Err]")," on the display, the transfer failed. Normally this means you need to either adjust your output volume or free up some memory on the volca sample. For more info, check out this"," ",n.a.createElement("a",{href:"https://www.korg.com/products/dj/volca_sample/faq.php",target:"_blank",rel:"noreferrer"},"FAQ")," ","from KORG."))),n.a.createElement(W.a.Footer,null,n.a.createElement(T.a,{type:"button",variant:"primary",onClick:b},_?"Cancel":"Done"))))}var ea=pn,vn=d(110),hn=d.n(vn),yn=d(32),he=d.n(yn),bn=n.a.memo(function({sampleId:e,qualityBitDepth:a,onSampleUpdate:r}){const[o,i]=Object(u.useState)(a);Object(u.useEffect)(()=>{i(a)},[a]);const s=Object(u.useCallback)(c=>{const l=Number(c.target.value);i(l)},[]);return n.a.createElement(X.a.Group,{className:he.a.qualityBitDepthWrapper},n.a.createElement(X.a.Label,{className:he.a.label},"Quality bit depth"),n.a.createElement("div",{className:he.a.ticks},[8,9,10,11,12,13,14,15,16].map((c,l,{length:m})=>{const f=`calc(${l*100/(m-1)}% + ${12-3*l}px)`,p=o===c;return n.a.createElement(n.a.Fragment,{key:c},n.a.createElement("label",{className:["small",he.a.tickLabel].join(" "),style:{left:f,visibility:p?"hidden":void 0},onClick:()=>r(e,{qualityBitDepth:c})},c),n.a.createElement("span",{className:he.a.tickMark,style:{left:f,visibility:p?"hidden":void 0}}))})),n.a.createElement(hn.a,{value:o,step:1,min:8,max:16,size:"lg",tooltip:"on",tooltipPlacement:"top",tooltipStyle:{zIndex:1020},onChange:s,ref:c=>c&&c.addEventListener("change",()=>{const l=Number(c.value);r(e,{qualityBitDepth:l})})}),n.a.createElement("div",{className:he.a.annotations},n.a.createElement("label",{className:"small"},"Faster transfer"),n.a.createElement("label",{className:"small"},"Higher quality")))}),ta=d(90),aa=d.n(ta),rt=d(91),ot=d(92),En=d(23),ie=d.n(En),na=Math.pow;ta.Digit.defaultProps.offOpacity=0;const ra=(t,e)=>Math.min(199,e+na(10,t)),oa=(t,e)=>Math.max(0,e-na(10,t));var la=n.a.memo(function({slotNumber:t,onSlotNumberUpdate:e}){const[a,r]=Object(u.useState)(t);Object(u.useEffect)(()=>{r(t)},[t]);const[o,i]=Object(u.useState)(null),s=Object(u.useCallback)(f=>{e(p=>ra(f,p))},[e]),c=Object(u.useCallback)(f=>{e(p=>oa(f,p))},[e]),l=Object(u.useRef)(null),m=Object(u.useRef)(null);{const f=Object(u.useRef)(o);f.current=o;const p=Object(u.useRef)(a);p.current=a,Object(u.useEffect)(()=>{if(!m.current)throw new Error("Expected elements to exist");function h(E){const N=f.current===null?0:f.current;let S=!0;const k=()=>{i(N)};switch(E.key){case"ArrowDown":k(),r(v=>oa(N,v));break;case"ArrowUp":k(),r(v=>ra(N,v));break;case"ArrowLeft":k(),i(v=>v!==null&&v<2?v+1:v);break;case"ArrowRight":k(),i(v=>v&&v-1);break;case"Enter":case"Escape":i(null);break;default:S=!1;break}S&&E.preventDefault()}function g(E){const N=f.current===null?2:f.current;E.stopPropagation(),E.preventDefault();const S=p.current;if(isNaN(Number(E.key)))e(S);else{const k=String(S).padStart(3,"0").split("");k[2-N]=E.key;const v=Math.min(199,Math.max(0,Number(k.join(""))));i(N?N-1:null),e(v)}}const b=l.current;b.addEventListener("keydown",h,!0),b.addEventListener("keyup",g,!0);let _=0,R=!1,w=!1,O=0;function A(E){document.body.style.userSelect="none",_=E instanceof MouseEvent?E.pageY:E.touches[0].pageY,R=!0,w=!1,O=p.current}b.addEventListener("mousedown",A),b.addEventListener("touchstart",E=>{E.preventDefault(),A(E)});function M(E){if(!R)return;const{pageY:N}=E instanceof MouseEvent?E:E.touches[0],S=2,k=Math.round((_-N)/S);k&&(w=!0,r(Math.min(199,Math.max(0,O+k))))}window.addEventListener("mousemove",M),b.addEventListener("touchmove",M);function C(){document.body.style.userSelect="unset",R=!1,w&&e(p.current)}window.addEventListener("mouseup",C),b.addEventListener("touchend",C),b.addEventListener("touchcancel",()=>{document.body.style.userSelect="unset"});function j(E){w||m.current&&m.current.some(N=>N.contains(E.target))||i(2)}b.addEventListener("click",j),m.current.forEach((E,N)=>{const S=N;E.addEventListener("click",()=>{w||i(S)}),E.addEventListener("touchstart",k=>{k.preventDefault()})});function D(){R||i(2)}function P(){i(null)}return b.addEventListener("focus",D),b.addEventListener("blur",P),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",C)}},[e])}return Object(u.useEffect)(()=>{if(!m.current)throw new Error("Expected elements to exist");m.current.forEach((f,p)=>{p===o?f.classList.add(ie.a.active):f.classList.remove(ie.a.active)})},[o]),n.a.createElement(n.a.Fragment,null,n.a.createElement(X.a.Label,null,"Choose destination"),n.a.createElement("br",null),n.a.createElement("div",{className:ie.a.slotNumberRow},n.a.createElement("div",{className:ie.a.slotNumberContainer},n.a.createElement("div",{className:ie.a.arrowControls},n.a.createElement("span",{onClick:()=>s(2)},n.a.createElement(rt.a,null)),n.a.createElement("span",{onClick:()=>s(1)},n.a.createElement(rt.a,null)),n.a.createElement("span",{onClick:()=>s(0)},n.a.createElement(rt.a,null))),n.a.createElement("div",{className:ie.a.slotNumber,title:`Slot ${a}`,ref:l,tabIndex:0},n.a.createElement(aa.a,{value:"8888",color:"var(--bs-gray-dark)",strokeColor:"transparent",digitCount:4}),n.a.createElement(aa.a,{ref:f=>{const p=Object(gt.findDOMNode)(f);if(p){p.querySelectorAll("circle").forEach(g=>{p.removeChild(g)});const h=document.createElementNS("http://www.w3.org/2000/svg","circle");h.classList.add(ie.a.point),h.setAttribute("cx","10.7"),h.setAttribute("cy","17"),h.setAttribute("r","1"),p.appendChild(h),m.current=[].slice.call(p.querySelectorAll("g")).reverse().slice(0,3)}},value:`5${String(a).padStart(3,"0")}`,digitProps:{color:"var(--bs-primary)"},digitCount:4})),n.a.createElement("div",{className:ie.a.arrowControls},n.a.createElement("span",{onClick:()=>c(2)},n.a.createElement(ot.a,null)),n.a.createElement("span",{onClick:()=>c(1)},n.a.createElement(ot.a,null)),n.a.createElement("span",{onClick:()=>c(0)},n.a.createElement(ot.a,null)))),t>99&&a>99&&n.a.createElement(We.a,{placement:"auto-end",overlay:n.a.createElement(Te.a,null,"To transfer to this destination, be sure you have a volca sample2. The original volca sample only supports slots 0-99.")},n.a.createElement("span",{className:ie.a.warning},n.a.createElement(Xt.a,null)))))}),gn=d(48),ze=d.n(gn),wn=(t,e,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},s=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);c((a=a.apply(t,e)).next())});const Sn=n.a.memo(function({sample:e,onSampleUpdate:a,onSampleDuplicate:r,onSampleDelete:o}){const i=Object(u.useCallback)(s=>{a(e.id,({slotNumber:c})=>({slotNumber:typeof s=="function"?s(c):s}))},[e.id,a]);return n.a.createElement(_e.a,{fluid:"sm"},n.a.createElement("h2",null,e.metadata.name,n.a.createElement(Cn,{sampleId:e.id,name:e.metadata.name,sourceFileId:e.metadata.sourceFileId,userFileInfo:e.metadata.userFileInfo,onSampleUpdate:a,onSampleDuplicate:r,onSampleDelete:o})),n.a.createElement("p",null,n.a.createElement("strong",null,"Sampled:")," ",qe(new Date(e.metadata.dateSampled)),n.a.createElement("br",null),n.a.createElement("strong",null,"Updated:")," ",qe(new Date(e.metadata.dateModified))),n.a.createElement("h4",null,"Configure"),n.a.createElement(bn,{sampleId:e.id,qualityBitDepth:e.metadata.qualityBitDepth,onSampleUpdate:a}),n.a.createElement(ln,{sample:e,onSampleUpdate:a}),n.a.createElement("h4",null,"Transfer"),n.a.createElement(la,{slotNumber:e.metadata.slotNumber,onSlotNumberUpdate:i}),n.a.createElement(ea,{sample:e}))}),Cn=n.a.memo(({sampleId:t,name:e,sourceFileId:a,userFileInfo:r,onSampleUpdate:o,onSampleDuplicate:i,onSampleDelete:s})=>{const[c,l]=Object(u.useState)(!1),m=Object(u.useRef)(null),[f,p]=Object(u.useState)(e),[h,g]=Object(u.useState)(!1);Object(u.useEffect)(()=>{h&&(p(e),m.current&&m.current.select())},[h,e]);const b=f.trim(),_=Object(u.useCallback)(A=>{A.preventDefault(),b&&(o(t,{name:b}),g(!1))},[b,t,o]),R=Object(u.useCallback)(()=>i(t),[t,i]),w=Object(u.useCallback)(()=>wn(void 0,null,function*(){const A=yield Z.getSourceFileData(a),M=new Blob([A],{type:r?r.type:"audio/x-wav"});Yt(M,`${e}${r?r.ext:".wav"}`)}),[e,a,r]),O=Object(u.useCallback)(A=>{A.preventDefault(),s(t),l(!1)},[t,s]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(Xa.a,{className:ze.a.optionsButton,variant:"secondary",align:"end",title:"Actions"},n.a.createElement(Se.a.Item,{onClick:()=>g(!0)},"Rename"),n.a.createElement(Se.a.Item,{onClick:R},"Duplicate"),n.a.createElement(Se.a.Item,{onClick:w},"Download source audio"),n.a.createElement(Se.a.Divider,null),n.a.createElement(Se.a.Item,{onClick:()=>l(!0)},"Delete")),n.a.createElement(W.a,{onHide:()=>g(!1),show:h,"aria-labelledby":"rename-modal"},n.a.createElement(X.a,{onSubmit:_},n.a.createElement(W.a.Header,null,n.a.createElement(W.a.Title,{id:"rename-modal"},"Renaming sample")),n.a.createElement(W.a.Body,null,n.a.createElement("p",null,"Choose a new name for the sample ",n.a.createElement("strong",null,e),":"),n.a.createElement(X.a.Control,{ref:m,defaultValue:e,onChange:A=>p(A.target.value)})),n.a.createElement(W.a.Footer,null,n.a.createElement(T.a,{type:"button",variant:"light",onClick:()=>g(!1)},"Cancel"),n.a.createElement(T.a,{type:"submit",variant:"primary",disabled:!b},"Rename")))),n.a.createElement(W.a,{onHide:()=>l(!1),show:c,"aria-labelledby":"delete-modal"},n.a.createElement(X.a,{onSubmit:O},n.a.createElement(W.a.Header,{className:ze.a.deleteModalHeader},n.a.createElement(Xt.a,null),n.a.createElement(W.a.Title,{id:"delete-modal"},"Deleting sample")),n.a.createElement(W.a.Body,null,n.a.createElement("p",null,"Are you sure you want to delete ",n.a.createElement("strong",null,e),"? This can't be undone.")),n.a.createElement(W.a.Footer,null,n.a.createElement(T.a,{type:"button",variant:"light",onClick:()=>l(!1)},"Cancel"),n.a.createElement(T.a,{type:"submit",variant:"primary"},"Delete")))))});var kn=Sn,He=d(164),On=d(113),Dn=d.n(On);function _n({sample:t}){const{wav:e,audioBuffer:a}=Lt(t),{sample:{metadata:{name:r,normalize:o,trim:{frames:i}}},sourceAudioBuffer:s}=zt(t),{monoSamples:c,waveformRef:l,peaks:m,onResize:f}=Ht(s),p=Object(u.useMemo)(()=>{if(!s)return 0;const O=Le(c,i);return pe(O)},[s,c,i]),h=1/p,{isPlaybackActive:g,playbackProgress:b,displayedTime:_,togglePlayback:R,stopPlayback:w}=Vt(a);return Object(u.useEffect)(()=>w,[t,w]),n.a.createElement("div",{className:Dn.a.waveformContainer},n.a.createElement(tt,{waveformRef:l,peaks:m,scaleCoefficient:o?h:1,onResize:f}),n.a.createElement(Zt,{isPlaybackActive:g,playbackProgress:b,displayedTime:_,downloadFilename:`${r}.volcasample.wav`,wavFile:e,togglePlayback:R}))}var jn=_n,An=Object.defineProperty,Pn=Object.defineProperties,Nn=Object.getOwnPropertyDescriptors,ca=Object.getOwnPropertySymbols,Rn=Object.prototype.hasOwnProperty,Mn=Object.prototype.propertyIsEnumerable,ia=(t,e,a)=>e in t?An(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,Bn=(t,e)=>{for(var a in e||(e={}))Rn.call(e,a)&&ia(t,a,e[a]);if(ca)for(var a of ca(e))Mn.call(e,a)&&ia(t,a,e[a]);return t},Ln=(t,e)=>Pn(t,Nn(e));function In(t){const e=t.metadata.slotNumber,[a,r]=Object(u.useState)(e);return Object(u.useEffect)(()=>{r(e)},[e]),{sample:Object(u.useMemo)(()=>t&&new Z(Ln(Bn({id:t.id},t.metadata),{slotNumber:a})),[t,a]),setSlotNumber:r}}function Fn({sample:t,onSampleDuplicate:e}){const{sample:a,setSlotNumber:r}=In(t);return n.a.createElement(_e.a,{fluid:"sm"},n.a.createElement("h2",null,a.metadata.name),n.a.createElement("p",null,n.a.createElement("strong",null,"Sampled:")," ",qe(new Date(a.metadata.dateSampled))),n.a.createElement(He.a,{variant:"secondary"},n.a.createElement(He.a.Heading,null,"This is a factory sample."),n.a.createElement("p",null,"If you want to trim the audio or adjust quality before transferring to the volca sample,"," ",n.a.createElement("span",{className:ze.a.buttonLink},n.a.createElement(T.a,{variant:"link",className:ze.a.duplicateButtonLink,onClick:()=>e(a.id)},"make a duplicate"),"."))),n.a.createElement("h4",null,"Preview"),n.a.createElement(jn,{sample:a}),n.a.createElement("h4",null,"Transfer"),n.a.createElement(la,{slotNumber:a.metadata.slotNumber,onSlotNumberUpdate:r}),n.a.createElement(ea,{sample:a}))}var xn=Fn,Wn=d(115),lt=d(171),ke=(t,e,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},s=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);c((a=a.apply(t,e)).next())});let sa;function ct(){const t=Nt();return sa=sa||new t(navigator.mediaDevices.getSupportedConstraints().sampleRate?{sampleRate:Ae}:{})}function Tn(){return ke(this,null,function*(){{const r=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!1});for(const o of r.getTracks())o.stop()}const e=(yield navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="audioinput"),a=[];for(const r of e){const o=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:r.deviceId,channelCount:2},video:!1}),i=(yield navigator.mediaDevices.enumerateDevices()).find(({deviceId:c})=>r.deviceId===c).label;let s=1;{const c=o.getAudioTracks()[0],l=c.getSettings().channelCount;l?s=l:c.getCapabilities&&(s=(c.getCapabilities().channelCount||{}).max||s)}for(const c of o.getTracks())c.stop();a.push({device:{deviceId:r.deviceId,label:i},channelsAvailable:s})}return a})}let it;function zn(t){return ke(this,arguments,function*({onData:e,onFinish:a}){const r=ct();it=it||r.audioWorklet.addModule("recorderWorkletProcessor.js"),yield it;const o=new AudioWorkletNode(r,"recorder-worklet",{parameterData:{bufferSize:1024}});o.port.onmessage=s=>{if(s.data.eventType==="data"){const c=s.data.audioChannels;e(c)}s.data.eventType==="stop"&&a()};const i=o.parameters.get("isRecording");return i.setValueAtTime(1,r.currentTime),{recorderNode:o,stop(){i.setValueAtTime(0,r.currentTime)}}})}function Hn({channelCount:t,onData:e,onFinish:a}){const o=ct().createScriptProcessor(1024,t,t);let i=!1;return o.onaudioprocess=s=>{const c=Array(t).fill().map((l,m)=>s.inputBuffer.getChannelData(m));e(c),i&&a()},{recorderNode:o,stop(){i=!0}}}function Vn(t){return ke(this,null,function*(){return typeof AudioWorkletNode=="undefined"?Hn(t):yield zn(t)})}function Un(t){return ke(this,arguments,function*({deviceId:e,channelCount:a,onStart:r,onUpdate:o}){const i=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:e,channelCount:a,sampleRate:Ae,echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},video:!1}),s=ct(),c=s.createMediaStreamSource(i),{recorderNode:l,stop:m}=yield Vn({channelCount:a,onData:b,onFinish:A});c.connect(l),l.connect(s.destination);const f=10;r(s.sampleRate,f);const p=f*s.sampleRate;let h=0;const g=Array(a).fill([]);function b(M){let C=0;const j=[];for(let E=0;E<a;E++){const N=M[E],S=N.length,k=N.slice(0,Math.min(S,p-h));At(k),C||(C=k.length),j.push(k)}const D=Ma(j),P=Pt(D);g.push(P),h+=C,h>=p&&m(),o(j)}let _,R;const w=new Promise((M,C)=>{_=M,R=C});let O=!1;function A(){return ke(this,null,function*(){if(O)return;try{const j=yield new Blob(g).arrayBuffer(),D=new Float32Array(j),P=St()({channels:a,sampleRate:s.sampleRate,bitDepth:16,dataLength:D.byteLength}),E=new Uint8Array(P.length+D.byteLength);E.set(P),E.set(new Uint8Array(D.buffer),P.length),_(E)}catch(C){R(C)}const M=i.getTracks();for(const C of M)C.stop();l.disconnect(s.destination),c.disconnect(l),O=!0})}return{stop:m,mediaRecording:w}})}var Qn=d(33),ye=d.n(Qn),Oe=(t,e,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},s=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);c((a=a.apply(t,e)).next())});const ua="capture_device_preference";let ma=null;function $n(t,e){const a=Object(u.useRef)(JSON.parse(localStorage.getItem(ua)||"null")),[r,o]=Object(u.useState)(ma),[i,s]=Object(u.useState)(r?"ok":"pending"),[c,l]=Object(u.useState)("");Object(u.useEffect)(()=>{ma=r,s("ok")},[r]);const m=Object(u.useCallback)(()=>{let S=!1;return Tn().then(k=>{S||k.length&&(o(new Map(k.map(v=>[v.device.deviceId,v]))),l(v=>v?(a.current=null,v):a.current&&k.find(({device:I})=>a.current.deviceId===I.deviceId)?a.current.deviceId:(a.current=null,k[0].device.deviceId)))}).catch(k=>{if(!S){if(k instanceof DOMException){if(k.name==="NotAllowedError"){s("denied");return}if(k.name==="NotFoundError"){s("unavailable");return}}throw k}}),()=>{S=!0}},[]),[f,p]=Object(u.useState)(1);Object(u.useEffect)(()=>{const S=r&&r.get(c);S&&(a.current&&a.current.deviceId===S.device.deviceId&&a.current.channelCount<=S.channelsAvailable?p(a.current.channelCount):p(S.channelsAvailable),a.current=null)},[r,c]),Object(u.useEffect)(()=>{c&&localStorage.setItem(ua,JSON.stringify({deviceId:c,channelCount:f}))},[c,f]);const[h,g]=Object(u.useState)("ready"),[b,_]=Object(u.useState)(null),[R,w]=Object(u.useState)(!1);Object(u.useEffect)(()=>{h!=="ready"&&w(!1)},[h]);const O=Object(u.useCallback)(()=>{w(!1)},[]),[A,M]=Object(u.useState)({fn(S){}});Object(u.useEffect)(()=>A.fn,[A]);const[C,j]=Object(u.useState)(1/0),[D,P]=Object(u.useState)(0),E=Object(u.useCallback)(()=>Oe(this,null,function*(){let S=!1;const k=(V,se)=>Un({deviceId:V,channelCount:se,onStart:(F,x)=>{const G=x*F;j(F),P(G),g("capturing")},onUpdate:t}),v=a.current,{mediaRecording:I,stop:ne}=yield v?(()=>Oe(this,null,function*(){try{return k(v.deviceId,v.channelCount)}catch(V){if(V instanceof DOMException&&V.name==="NotFoundError")return k(c,f);throw V}}))():k(c,f);M({fn(V){ne(),V&&(S=!0)}});let re;try{re=yield I}catch(V){_(V),g("error");return}if(S)g("ready");else{g("finalizing");const V=yield e(re);S||(g("ready"),V==="silent"&&w(!0))}}),[c,f,t,e]),N=Object(u.useCallback)(S=>{if(S.target.files&&S.target.files.length){const k=S.target.files[0];k.arrayBuffer().then(v=>Oe(this,null,function*(){const I=new Uint8Array(v);let ne;try{ne=yield we(I)}catch(V){alert("Unsupported audio format detected");return}if(ne.length>10*ne.sampleRate){alert("Please select an audio file no more than 10 seconds long");return}g("finalizing");const re=yield e(I,k);g("ready"),re==="silent"&&w(!0)}))}},[e]);return{captureDevices:r,accessState:i,selectedCaptureDeviceId:c,selectedChannelCount:f,captureState:h,recordingError:b,showSilenceWarning:R,sampleRate:C,maxSamples:D,refreshCaptureDevices:m,setSelectedCaptureDeviceId:l,setSelectedChannelCount:p,beginRecording:E,stopRecording:A.fn,importFile:N,dismissSilenceWarning:O}}const st=3;function Gn({canvas:t,peaks:e,drawUntil:a,scaleCoefficient:r}){const o="#fff",i=t.getContext("2d");i.imageSmoothingEnabled=!1;const{width:s,height:c}=t;i.clearRect(0,0,s,c),i.fillStyle=o;for(let l=0;l<a&&l<e.length;l++){const m=e[l],f=c*m,p=Math.max(Math.round(r*f),2);i.fillRect(l*st,c-p,st-1,p)}}function Kn({onRecordFinish:t}){const e=Object(u.useRef)(null),a=Object(u.useRef)(0),r=Object(u.useRef)(new Float32Array),o=Object(u.useRef)(0),i=Object(u.useRef)([]),s=Object(u.useRef)(1/0),c=Object(u.useRef)(0),[l,m]=Object(u.useState)(0),f=Object(u.useCallback)(v=>Oe(this,null,function*(){const I=a.current,ne=r.current,re=i.current;if(re.push(v),c.current+=v[0].length,m(Math.floor(c.current/s.current)),re.reduce((se,[{length:F}])=>se+F,0)>=I){const se=yield Promise.all(v.map((x,G)=>re.reduce((De,oe)=>[...De,oe[G]],[])).map(x=>Oe(this,null,function*(){const G=yield new Blob(x).arrayBuffer();return new Float32Array(G)}))),F=se.map(x=>pe(new Float32Array(x.buffer,0,I)));ne[o.current++]=Math.max(...F),Gn({canvas:e.current,peaks:ne,drawUntil:o.current,scaleCoefficient:.3}),i.current=[se.map(x=>x.slice(I))]}}),[]),{captureDevices:p,accessState:h,selectedCaptureDeviceId:g,selectedChannelCount:b,captureState:_,recordingError:R,showSilenceWarning:w,maxSamples:O,sampleRate:A,refreshCaptureDevices:M,setSelectedCaptureDeviceId:C,setSelectedChannelCount:j,beginRecording:D,stopRecording:P,importFile:E,dismissSilenceWarning:N}=$n(f,t);s.current=A,Object(u.useEffect)(()=>{const v=e.current;v&&(v.width=v.offsetWidth,v.height=v.offsetHeight)},[h]),Object(u.useLayoutEffect)(()=>{const v=e.current;!v||(_!=="finalizing"&&v.getContext("2d").clearRect(0,0,v.width,v.height),_==="capturing"&&O&&(a.current=Math.floor(st*O/e.current.width),r.current=new Float32Array(Math.floor(O/a.current)),o.current=0,i.current=[],s.current=1/0,c.current=0,m(0)))},[O,_]);const[S,k]=Object(u.useState)(!1);return Object(u.useEffect)(()=>{S&&M()},[S,M]),n.a.createElement(_e.a,{fluid:"sm",className:ye.a.container},h==="denied"?n.a.createElement("p",null,"Looks like you didn't grant access to your audio input device. Please give Volca Sampler access, then"," ",n.a.createElement(T.a,{type:"button",variant:"secondary",onClick:M},"try again")):h==="unavailable"?n.a.createElement("p",null,"Volca Sampler couldn't find any audio input devices. Please connect one, then"," ",n.a.createElement(T.a,{type:"button",variant:"secondary",onClick:M},"try again")):n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",null,"Send a new sound to your volca sample!"),w&&n.a.createElement("div",{className:ye.a.alertContainer},n.a.createElement(He.a,{dismissible:!0,variant:"warning",onClose:N},n.a.createElement(He.a.Heading,null,"Your recording was totally silent."),n.a.createElement("p",null,"Check the audio input settings and your connections, then try again."))),n.a.createElement(T.a,{className:ye.a.recordButton,type:"button",variant:"primary",size:"lg",style:{width:250},onClick:_==="capturing"?()=>P():D,disabled:_==="finalizing"},n.a.createElement("canvas",{ref:e}),n.a.createElement("span",{className:ye.a.mainText},["capturing","finalizing"].includes(_)?"Finished recording":"Start recording"),["capturing","finalizing"].includes(_)&&n.a.createElement("span",{className:ye.a.timeRecorded},"0:",String(l).padStart(2,"0"))),["capturing","finalizing"].includes(_)?n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{style:{width:250},size:"sm",type:"button",variant:"secondary",onClick:()=>P(!0)},"Cancel")):n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{style:{width:250},type:"button",variant:"light",size:"sm",onClick:()=>k(v=>!v)},"Audio input settings ",S?"\u25B2":"\u25BC"),n.a.createElement(Wn.a,{in:S},n.a.createElement("div",null,n.a.createElement(X.a.Group,null,n.a.createElement(X.a.Label,null,"Capture Device"),n.a.createElement(X.a.Select,{style:{width:250},value:g,onChange:v=>C(v.target.value)},p&&h==="ok"?[...p].map(([v,{device:I}])=>n.a.createElement("option",{key:v,value:v},I.label||v)):n.a.createElement("option",{value:"",disabled:!0},"Loading devices..."))),n.a.createElement(X.a.Group,null,n.a.createElement(X.a.Label,null,"Input channels"),n.a.createElement(lt.a,{variant:"pills",defaultActiveKey:b,onSelect:v=>j(Number(v))},[1,2].map(v=>n.a.createElement(lt.a.Item,{key:v},n.a.createElement(lt.a.Link,{className:ye.a.channelOption,eventKey:v,disabled:!p||!p.has(g)||p.get(g).channelsAvailable<v},v===1?"Mono":"Stereo"))))),n.a.createElement("p",{className:"small"},"Stereo input will be summed to mono."))))),_==="error"&&R||null,n.a.createElement(T.a,{style:{width:250},type:"button",variant:"secondary",onClick:v=>{const I=v.currentTarget.querySelector("input");I&&v.target!==I&&I.click()}},"Or import an audio file",n.a.createElement("input",{hidden:!0,type:"file",accept:"audio/*,.wav,.mp3,.ogg",onChange:E})))}var Xn=Kn;const da=["Cool","Dope","Far-out","Chill","Wicked","Bomb","Superb","Choice","Exquisite","Righteous","Dank","Alright","Very Good","Ice Cold"],fa=["Sample","Cut","Quotation","Extract","Sound","Noise","Clip"];function Yn(){const t=da[Math.floor(Math.random()*da.length)],e=fa[Math.floor(Math.random()*fa.length)];return`${t} ${e}`}var Zn=d(59),Ve=d.n(Zn),Jn=(t,e,a)=>new Promise((r,o)=>{var i=l=>{try{c(a.next(l))}catch(m){o(m)}},s=l=>{try{c(a.throw(l))}catch(m){o(m)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);c((a=a.apply(t,e)).next())});const ut="focused_sample_id";function qn(){const[t,e]=Object(u.useState)(new Map),[a,r]=Object(u.useState)(new Map),o=Object(u.useMemo)(()=>new Map([...t,...a]),[t,a]);Object(u.useEffect)(()=>{Aa().then(r).catch(console.error)},[]);const i=sessionStorage.getItem(ut),[s,c]=Object(u.useState)(i&&typeof i=="string"?i:null);Object(u.useEffect)(()=>{s?sessionStorage.setItem(ut,s):sessionStorage.removeItem(ut)},[s]);const[l,m]=Object(u.useState)(!0);Object(u.useEffect)(()=>{Z.getAllFromStorage().then(C=>{e(j=>new Map([...j,...C.map(D=>[D.id,D])]))}).finally(()=>{m(!1)})},[]);const f=Object(u.useCallback)((C,j)=>Jn(this,null,function*(){const D=yield we(C),P=[0,0],E=yield et(D,P);if([...E.positive,...E.negative].every(I=>I===0))return"silent";const N=yield Da(C);let S="",k="";if(j){const I=j.name.lastIndexOf(".");I>0?(S=j.name.slice(0,I),k=j.name.slice(I)):S=j.name}else S=Yn();const v=new Z.Mutable({name:S,sourceFileId:N,trim:{frames:P,waveformPeaks:E},userFileInfo:j&&{type:j.type,ext:k}});return yield v.persist(),e(I=>new Map([[v.id,v],...I])),c(v.id),"saved"}),[]),p=Object(u.useCallback)((C,j)=>{e(D=>{const P=D.get(C);if(P&&P instanceof Z.Mutable){const E=P.update(j);if(E!==P)return new Map(D).set(P.id,E)}return D})},[]),h=Object(u.useRef)(o);h.current=o;const g=Object(u.useCallback)(C=>{const j=h.current.get(C);if(j){const D=j.duplicate();e(P=>new Map([[D.id,D],...P])),c(D.id)}},[]),b=Object(u.useRef)(t);b.current=t;const _=Object(u.useCallback)(C=>{const j=b.current,D=j.get(C);if(D&&D instanceof Z.Mutable){D.remove();let P=null,E=!1;for(const[,N]of j){if(E){P=N.id;break}if(N.id===C){if(!P){E=!0;continue}break}P=N.id}c(P),e(N=>{const S=new Map(N);return S.delete(D.id),S})}},[]),[R,w]=Object(u.useState)(!1),O=Object(u.useCallback)(C=>{c(C),w(!1)},[]),A=Object(u.useCallback)(()=>w(!0),[]),M=Object(u.useCallback)(()=>c(null),[]);return n.a.createElement("div",null,n.a.createElement(ga,{onMenuOpen:A,onHeaderClick:M}),n.a.createElement(Ke.a,{className:Ve.a.sidebar,show:R,onHide:()=>w(!1)},n.a.createElement(Ke.a.Header,{closeButton:!0}),n.a.createElement(Ke.a.Body,null,n.a.createElement(T.a,{className:Ve.a.newSampleButton,type:"button",variant:"primary",onClick:()=>O(null)},"New sample"),n.a.createElement(ba.a,null,l?"Loading...":null,!l&&n.a.createElement(ue.a,{defaultActiveKey:s&&a.has(s)?"factory":t.size?"user":"factory"},n.a.createElement(ue.a.Item,{eventKey:"user"},n.a.createElement(ue.a.Header,null,"Your Samples"),n.a.createElement(ue.a.Body,{style:{padding:0}},n.a.createElement(Kt,{samples:t,selectedSampleId:s,onSampleSelect:O}))),n.a.createElement(ue.a.Item,{eventKey:"factory"},n.a.createElement(ue.a.Header,null,"Factory Samples"),n.a.createElement(ue.a.Body,{style:{padding:0}},n.a.createElement(Kt,{samples:a,selectedSampleId:s,onSampleSelect:O}))))))),n.a.createElement("div",{className:Ve.a.mainLayout},n.a.createElement("div",{className:Ve.a.focusedSampleContainer},s&&(()=>{const C=o.get(s)||null;return C?C instanceof Z.Mutable?n.a.createElement(kn,{sample:C,onSampleUpdate:p,onSampleDuplicate:g,onSampleDelete:_}):n.a.createElement(xn,{sample:C,onSampleDuplicate:g}):null})(),!s&&n.a.createElement(Xn,{onRecordFinish:f}))))}var er=qn,tr=t=>{t&&t instanceof Function&&d.e(3).then(d.bind(null,174)).then(({getCLS:e,getFID:a,getFCP:r,getLCP:o,getTTFB:i})=>{e(t),a(t),r(t),o(t),i(t)})};Blob.prototype.arrayBuffer||(Blob.prototype.arrayBuffer=function(){return new Response(this).arrayBuffer()}),ya.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(La,null,n.a.createElement(er,null))),document.getElementById("root")),tr()},22:function(L,Q,d){L.exports={titleBar:"Header_titleBar__3BLa-",menuIcon:"Header_menuIcon__swn7p",title:"Header_title__R3bRx",titleText:"Header_titleText__3e5ME",titleR:"Header_titleR__3QRgv",titleStarburst:"Header_titleStarburst__1oLYP",titleGraphic:"Header_titleGraphic__3S89F",tagline:"Header_tagline__6mYkP"}},23:function(L,Q,d){L.exports={"form-switch":"SlotNumberInput_form-switch__39Wtl","form-check-input":"SlotNumberInput_form-check-input__oNf4Z","nav-pills":"SlotNumberInput_nav-pills__1RDi_","nav-item":"SlotNumberInput_nav-item__CuVVe","nav-link":"SlotNumberInput_nav-link__1C3wo",active:"SlotNumberInput_active__2zN4D",slotNumberRow:"SlotNumberInput_slotNumberRow__kQwOw",slotNumberContainer:"SlotNumberInput_slotNumberContainer__1q7P1",arrowControls:"SlotNumberInput_arrowControls__1LPAC",slotNumber:"SlotNumberInput_slotNumber__GC-i7",digitBlinkEffect:"SlotNumberInput_digitBlinkEffect__1_u8n",point:"SlotNumberInput_point__3pJD3",warning:"SlotNumberInput_warning__3NAeN"}},32:function(L,Q,d){L.exports={"form-switch":"QualityBitDepthControl_form-switch__3nCZi","form-check-input":"QualityBitDepthControl_form-check-input__2KgZ8","nav-pills":"QualityBitDepthControl_nav-pills__lvlTW","nav-item":"QualityBitDepthControl_nav-item__MdYNK","nav-link":"QualityBitDepthControl_nav-link__2ZJvk",active:"QualityBitDepthControl_active__1J60r",qualityBitDepthWrapper:"QualityBitDepthControl_qualityBitDepthWrapper__2qLOe",label:"QualityBitDepthControl_label___ohmN",ticks:"QualityBitDepthControl_ticks__1u5GH",tickLabel:"QualityBitDepthControl_tickLabel__2jXRm",tickMark:"QualityBitDepthControl_tickMark__24xm0",annotations:"QualityBitDepthControl_annotations__3mXj2"}},33:function(L,Q,d){L.exports={container:"SampleRecord_container__3bdq5",alertContainer:"SampleRecord_alertContainer__vjGNP",recordButton:"SampleRecord_recordButton__3R-KX",mainText:"SampleRecord_mainText__2dca6",timeRecorded:"SampleRecord_timeRecorded__3FGTe",channelOption:"SampleRecord_channelOption__31f9w"}},48:function(L,Q,d){L.exports={"form-switch":"SampleDetail_form-switch__31CS2","form-check-input":"SampleDetail_form-check-input__1NWgi","nav-pills":"SampleDetail_nav-pills__1brjk","nav-item":"SampleDetail_nav-item__24L50","nav-link":"SampleDetail_nav-link__V6FsG",active:"SampleDetail_active__3mnV-",optionsButton:"SampleDetail_optionsButton__k0UjV",duplicateButtonLink:"SampleDetail_duplicateButtonLink__3CZZy",deleteModalHeader:"SampleDetail_deleteModalHeader__3DiKA",normalizeControlWrapper:"SampleDetail_normalizeControlWrapper__1yc_t",slotNumber:"SampleDetail_slotNumber__3sgS6",point:"SampleDetail_point__3d7qL"}},49:function(L,Q,d){L.exports={playbackOverlay:"WaveformPlayback_playbackOverlay__Er0Rh",playbackActive:"WaveformPlayback_playbackActive__1IHxg",playback:"WaveformPlayback_playback__2heRw",playbackButtonContainer:"WaveformPlayback_playbackButtonContainer__Lhahe",downloadButton:"WaveformPlayback_downloadButton__2s-L5"}},59:function(L,Q,d){L.exports={"form-switch":"App_form-switch__3Ht4D","form-check-input":"App_form-check-input__19Z6o","nav-pills":"App_nav-pills__16LAO","nav-item":"App_nav-item__2m-_e","nav-link":"App_nav-link__32PWp",active:"App_active__2jQ78",mainLayout:"App_mainLayout__3UKwp",sidebar:"App_sidebar__3IISB",newSampleButton:"App_newSampleButton__3OaZl",focusedSampleContainer:"App_focusedSampleContainer__1lol8"}},8:function(L,Q,d){L.exports={"form-switch":"WaveformEdit_form-switch__2DZid","form-check-input":"WaveformEdit_form-check-input__2TImp","nav-pills":"WaveformEdit_nav-pills__3uv7V","nav-item":"WaveformEdit_nav-item__1Cy-X","nav-link":"WaveformEdit_nav-link__rjUB_",active:"WaveformEdit_active__3qc2K",waveformAdjacentControls:"WaveformEdit_waveformAdjacentControls__12b8z",waveformContainer:"WaveformEdit_waveformContainer__Qq3MI",cursor:"WaveformEdit_cursor__1Ntb3",trim:"WaveformEdit_trim__1GV76",playbackActive:"WaveformEdit_playbackActive__hTwgX",bar:"WaveformEdit_bar__1KFgt",handle:"WaveformEdit_handle__23NoG",time:"WaveformEdit_time__YX5rg",left:"WaveformEdit_left__3Jfpn",right:"WaveformEdit_right__35CjW",waveformOverlay:"WaveformEdit_waveformOverlay__3oZfw"}},88:function(L,Q,d){L.exports={listWaveform:"SampleList_listWaveform__11RYh",listItem:"SampleList_listItem__1w0uC",active:"SampleList_active__4LCL3"}},89:function(L,Q,d){L.exports={"form-switch":"VolcaTransferControl_form-switch__1ZS81","form-check-input":"VolcaTransferControl_form-check-input__REQsM","nav-pills":"VolcaTransferControl_nav-pills__8dM77","nav-item":"VolcaTransferControl_nav-item__1lZOI","nav-link":"VolcaTransferControl_nav-link__3vJ08",active:"VolcaTransferControl_active__39Z84",transferButton:"VolcaTransferControl_transferButton__11MBQ",preTransferModal:"VolcaTransferControl_preTransferModal__fLiiV",progressAnnotation:"VolcaTransferControl_progressAnnotation__2zJ9A"}}},[[154,1,2]]]);

//# sourceMappingURL=main.90ef0596.chunk.js.map