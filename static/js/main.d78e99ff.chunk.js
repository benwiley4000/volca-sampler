(this["webpackJsonpvolca-sampler"]=this["webpackJsonpvolca-sampler"]||[]).push([[0],{105:function(L,Q,d){L.exports={"form-switch":"App_form-switch__3Ht4D","form-check-input":"App_form-check-input__19Z6o","nav-pills":"App_nav-pills__16LAO","nav-item":"App_nav-item__2m-_e","nav-link":"App_nav-link__32PWp",active:"App_active__2jQ78",modal:"App_modal__tC7nw","modal-dialog":"App_modal-dialog__28D_0","modal-content":"App_modal-content__1KtJW","modal-body":"App_modal-body__1JjYd",app:"App_app__2ziFi",persistentSidebar:"App_persistentSidebar__1QeV5",mainLayout:"App_mainLayout__3UKwp"}},109:function(L,Q,d){L.exports={sidebar:"SampleMenuSidebar_sidebar__3hrJX",offcanvasBody:"SampleMenuSidebar_offcanvasBody__2cUNc"}},122:function(L,Q,d){L.exports={"form-switch":"NormalizeSwitch_form-switch__pmDx5","form-check-input":"NormalizeSwitch_form-check-input__trt4D","nav-pills":"NormalizeSwitch_nav-pills__1ruyA","nav-item":"NormalizeSwitch_nav-item__1nWyi","nav-link":"NormalizeSwitch_nav-link__3zD0e",active:"NormalizeSwitch_active__Rj-X-",modal:"NormalizeSwitch_modal__W4W97","modal-dialog":"NormalizeSwitch_modal-dialog__5EoUU","modal-content":"NormalizeSwitch_modal-content__B5Su2","modal-body":"NormalizeSwitch_modal-body__2_WMd",normalizeControlWrapper:"NormalizeSwitch_normalizeControlWrapper__3yf2V"}},127:function(L,Q,d){L.exports={waveformContainer:"WaveformReadonly_waveformContainer__RARS4"}},136:function(L,Q,d){},137:function(L,Q,d){},170:function(L,Q,d){"use strict";d.r(Q);var i=d(0),e=d.n(i),Ot=d(12),wa=d.n(Ot),vr=d(136),hr=d(137),Le=d(176),_a=d(24),ue=d.n(_a),Ca=e.a.memo(function({onMenuOpen:a,onHeaderClick:n}){return e.a.createElement("div",{className:ue.a.titleBar},e.a.createElement("button",{className:ue.a.menuIcon,onClick:a},"\u2630"),e.a.createElement(Le.a,{fluid:"sm",className:ue.a.titleContainer},e.a.createElement("h1",{className:ue.a.title,onClick:n},e.a.createElement("span",{className:ue.a.titleText,"data-text":"Volca Sample"},"Volca Sample",e.a.createElement("span",{className:ue.a.titleR},"r"),e.a.createElement("svg",{viewBox:"0 0 150 150",preserveAspectRatio:"none",className:ue.a.titleStarburst},Array(24).fill().map((r,l,{length:u})=>e.a.createElement("polygon",{key:l,points:"75,70 75,80 150,75","transform-origin":"75 75",style:{"--rotation":`${l*360/u}deg`}})))),e.a.createElement("img",{className:ue.a.titleGraphic,src:"volca_sample.png",alt:""}),e.a.createElement("div",{className:ue.a.tagline},e.a.createElement("h2",null,"for volca sample")))),e.a.createElement("svg",{width:0,height:0},e.a.createElement("filter",{id:"outline"},e.a.createElement("feMorphology",{in:"SourceAlpha",result:"DILATED",operator:"dilate",radius:"1"}),e.a.createElement("feFlood",{floodColor:"var(--stroke-color)",floodOpacity:"1",result:"PINK"}),e.a.createElement("feComposite",{in:"PINK",in2:"DILATED",operator:"in",result:"OUTLINE"}),e.a.createElement("feMerge",null,e.a.createElement("feMergeNode",{in:"OUTLINE"}),e.a.createElement("feMergeNode",{in:"SourceGraphic"})))))}),qe=d(187),T=d(120),X=d(182),Oa=d(188),fe=d(183),kt=d(72),At=d(73),ka=d(74),Dt=d.n(ka),Aa=d(64),Pe=d.n(Aa),Rt=d(186),Nt=d(108);const Te=31250;var Da=Object.defineProperty,Ra=Object.defineProperties,Na=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,It=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable,et=(t,a,n)=>a in t?Da(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,oe=(t,a)=>{for(var n in a||(a={}))It.call(a,n)&&et(t,n,a[n]);if(Fe)for(var n of Fe(a))jt.call(a,n)&&et(t,n,a[n]);return t},me=(t,a)=>Ra(t,Na(a)),xe=(t,a)=>{var n={};for(var r in t)It.call(t,r)&&a.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Fe)for(var r of Fe(t))a.indexOf(r)<0&&jt.call(t,r)&&(n[r]=t[r]);return n},We=(t,a,n)=>(et(t,typeof a!="symbol"?a+"":a,n),n),ce=(t,a,n)=>new Promise((r,l)=>{var u=o=>{try{c(n.next(o))}catch(m){l(m)}},s=o=>{try{c(n.throw(o))}catch(m){l(m)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(u,s);c((n=n.apply(t,a)).next())});const He=Pe.a.createInstance({name:"audio_file_data",driver:Pe.a.INDEXEDDB}),ze=Pe.a.createInstance({name:"sample_metadata",driver:Pe.a.INDEXEDDB});function Ia(t){return ce(this,null,function*(){const a=Object(Rt.a)();return yield He.setItem(a,t),a})}const tt="0.5.0",ja={"0.1.0":t=>{const a=t,{clip:n}=a,r=xe(a,["clip"]);return me(oe({},r),{trimFrames:n.map(u=>Math.round(u*Te)),metadataVersion:"0.2.0"})},"0.2.0":t=>ce(void 0,null,function*(){const a=t,{trimFrames:n}=a,r=xe(a,["trimFrames"]),l=yield Qe(r.sourceFileId,!1),u=yield lt(l,n),s={frames:n,waveformPeaks:u};return me(oe({},r),{trim:s,metadataVersion:"0.3.0"})}),"0.3.0":t=>{const a=t,{dateSampled:n,dateModified:r}=a,l=xe(a,["dateSampled","dateModified"]);return me(oe({},l),{dateSampled:new Date(n).toISOString(),dateModified:new Date(r).toISOString(),metadataVersion:"0.4.0"})},"0.4.0":t=>ce(void 0,null,function*(){const a=t,{scaleCoefficient:n,trim:{frames:r,waveformPeaks:l}}=a,u=xe(a,["scaleCoefficient","trim"]),s=yield Qe(u.sourceFileId,!1),c=Ue(s,r),o=ge(c);return me(oe({},u),{normalize:n!==1,trim:{frames:r,waveformPeaks:me(oe({},l),{normalizationCoefficient:1/o})},metadataVersion:"0.5.0"})})};function Ma(t){return ce(this,null,function*(){let a=t;for(;a.metadataVersion!==tt;){const n=ja[a.metadataVersion];if(!n){console.warn(`Failed to properly upgrade metadata for sample "${a.name}"`),a={name:a.name,sourceFileId:a.sourceFileId,id:a.id,metadataVersion:tt};break}a=yield n(a)}return a})}const be=class{constructor({name:t,sourceFileId:a,trim:n,id:r=Object(Rt.a)(),userFileInfo:l=null,slotNumber:u=0,dateSampled:s=new Date().toISOString(),dateModified:c=s,useCompression:o=!0,qualityBitDepth:m=16,normalize:f=!0}){this.id=r,this.metadata={name:t,sourceFileId:a,trim:n,userFileInfo:l,slotNumber:u,dateSampled:s,dateModified:c,useCompression:o,qualityBitDepth:m,normalize:f,metadataVersion:tt}}duplicate(){const t=new be.Mutable(me(oe({},this.metadata),{name:`${this.metadata.name} (copy)`,dateModified:new Date().toISOString()}));return t.persist(),t}static cacheSourceFileData(t,a){this.sourceFileData.set(t,a),this.recentlyCachedSourceFileIds=[t,...this.recentlyCachedSourceFileIds.filter(r=>r!==t)];const n=this.recentlyCachedSourceFileIds.slice(this.MAX_CACHED);for(const r of n)this.sourceFileData.delete(r);this.recentlyCachedSourceFileIds=this.recentlyCachedSourceFileIds.slice(0,this.MAX_CACHED)}static getSourceFileData(t){return ce(this,null,function*(){{const n=this.sourceFileData.get(t);if(n)return n}if(t.includes(".")){const n=yield fetch(t);if(n.status>=400)return Promise.reject(new Error(`Failed to fetch source file "${t}"`));const r=yield n.arrayBuffer(),l=new Uint8Array(r);return this.cacheSourceFileData(t,l),l}const a=yield He.getItem(t);return a?a instanceof Uint8Array?(this.cacheSourceFileData(t,a),a):Promise.reject("Source data is of unexpected type"):Promise.reject("Missing source data")})}static getAllMetadataFromStore(){return ce(this,null,function*(){const t=new Map,a=[];return yield ze.iterate((n,r)=>{n&&a.push(Ma(n).then(l=>{t.set(r,l)}).catch(l=>{console.error(l),console.warn(`Failed to upgrade metadata "${r}" (${n.name}); ignoring.`)}))}),yield Promise.all(a),t})}static getAllFromStorage(){return ce(this,null,function*(){const t=yield this.getAllMetadataFromStore(),a=yield Mt(),n=(yield He.keys()).concat(a.map(({sourceFileId:l})=>l));return[...t].map(([l,u])=>{const{sourceFileId:s}=u;return n.includes(s)?new be.Mutable(oe({id:l},u)):(console.warn(`Found metadata "${u.name||l}" with missing data "${s}; ignoring.`),null)}).filter(Boolean).sort(({metadata:{dateModified:l}},{metadata:{dateModified:u}})=>l>u?-1:u>l?1:0)})}};let ee=be;We(ee,"Mutable",class extends be{constructor(t){super(t);setTimeout(()=>ce(this,null,function*(){(yield ze.keys()).includes(this.id)||console.warn(`Expected sample metadata container ${this.id} to be persisted`)}))}persist(){return ce(this,null,function*(){yield ze.setItem(this.id,this.metadata)})}update(t){const{id:a,metadata:n}=this,r=typeof t=="function"?t(n):t;if(Object.keys(r).every(s=>r[s]===n[s]))return this;const l=me(oe(oe({},n),r),{dateModified:new Date().toISOString()}),u=new be.Mutable(oe({id:a},l));return u.persist(),u}remove(){return ce(this,null,function*(){if(yield ze.removeItem(this.id),this.metadata.sourceFileId.includes("."))return;const t=yield be.getAllMetadataFromStore();for(const[,{sourceFileId:a}]of t)if(a===this.metadata.sourceFileId)return;yield He.removeItem(this.metadata.sourceFileId)})}}),We(ee,"sourceFileData",new Map),We(ee,"recentlyCachedSourceFileIds",[]),We(ee,"MAX_CACHED",10);let at;function Mt(){return at||(at=fetch("factory-samples.json").then(t=>t.json())),at}function Ba(){return ce(this,null,function*(){const t=yield Mt();return new Map(t.map(a=>[a.id,new ee(me(oe({},a),{normalize:!1,trim:{frames:[a.trim.frames[0],a.trim.frames[1]],waveformPeaks:me(oe({},a.trim.waveformPeaks),{positive:new Float32Array(Object(Nt.a)(a.trim.waveformPeaks.positive)),negative:new Float32Array(Object(Nt.a)(a.trim.waveformPeaks.negative))})}}))]))})}var Bt=Math.pow,nt=(t,a,n)=>new Promise((r,l)=>{var u=o=>{try{c(n.next(o))}catch(m){l(m)}},s=o=>{try{c(n.throw(o))}catch(m){l(m)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(u,s);c((n=n.apply(t,a)).next())});function Ve(t,a){const n=4,r=a[0]*n,l=t.length-a[0]-a[1];return new Float32Array(t.buffer,r,l)}function Ue(t,a){const n=t.length-a[0]-a[1],r=new Float32Array(n),l=Array(t.numberOfChannels).fill().map((u,s)=>Ve(t.getChannelData(s),a));for(let u=0;u<n;u++){let s=0;for(let c=0;c<l.length;c++)s+=l[c][u];s/=l.length,r[u]=s}return r}function ge(t){let a=0;for(const n of t){const r=Math.abs(n);r>a&&(a=r)}return a}function La(t,a){if(a!==1)for(let n=0;n<t.length;n++)t[n]*=a}function Pa(t){const a=ge(t);La(t,1/a)}function Ta(t,a){const n=Bt(2,a-1);for(let r=0;r<t.length;r++)t[r]=Math.round(t[r]*n)/n}function Lt(t){for(let a=0;a<t.length;a++)t[a]>1?t[a]=1:t[a]<-1&&(t[a]=-1)}function Fa(t){const a=t.length,n=t[0].length,r=new Float32Array(a*n);for(let l=0;l<r.length;l++){const u=a*l;for(let s=0;s<a;s++)r[u+s]=t[s][l]}return r}function Pt(t){const a=new Int16Array(t.length),n=Bt(2,15);for(let r=0;r<t.length;r++)a[r]=t[r]===1?n-1:n*t[r];return a}function Tt(){return window.AudioContext||window.webkitAudioContext}let Ft;function xt(){const t=Tt();return Ft=Ft||new t({sampleRate:Te})}function De(t){return nt(this,null,function*(){const a=new Uint8Array(t);return yield new Promise((r,l)=>{xt().decodeAudioData(a.buffer,r,l)})})}function Qe(t,a){return nt(this,null,function*(){const n=yield ee.getSourceFileData(t),r=yield De(n);if(a)for(let l=0;l<r.numberOfChannels;l++)Lt(r.getChannelData(l));return r})}function Wt(t,a){return nt(this,null,function*(){const{qualityBitDepth:n,sourceFileId:r,userFileInfo:l,normalize:u,trim:{frames:s}}=t.metadata;if(n<8||n>16||!Number.isInteger(n))throw new Error(`Expected bit depth between 8 and 16. Received: ${n}`);const c=yield Qe(r,Boolean(l)),o=c.numberOfChannels===1?Ve(c.getChannelData(0),s):Ue(c,s);u&&Pa(o),a&&n<16&&Ta(o,n);const m=Pt(o),f=m.length*2,v=Dt()({channels:1,sampleRate:c.sampleRate,bitDepth:16,dataLength:f}),p=new Uint8Array(v.length+f);return p.set(v),p.set(new Uint8Array(m.buffer),v.length),{data:p,sampleRate:16}})}function rt(t,a=!0){const[n,r]=Object(i.useState)(null),[l,u]=Object(i.useState)(null);return Object(i.useEffect)(()=>{if(!a)return;r(null);let s=!1;Wt(t,!0).then(({data:c})=>{s||r(c)})},[t,a]),Object(i.useEffect)(()=>{if(u(null),n){let s=!1;De(n).then(c=>{s||u(c)})}},[n]),{wav:n,audioBuffer:l}}const xa={playAudioBuffer(t,a){throw new Error("Must render AudioPlaybackContextProvider")}},Ht=Object(i.createContext)(xa);function Wa({children:t}){const a=Object(i.useRef)(()=>{}),n=Object(i.useCallback)((l,{onTimeUpdate:u=()=>null,onEnded:s=()=>null}={})=>{a.current();const c=xt(),o=c.createBufferSource();o.buffer=l,o.connect(c.destination),o.start();const m=c.currentTime;u(0);let f=requestAnimationFrame(v);function v(){u(c.currentTime-m),f=requestAnimationFrame(v)}let p=!1;o.addEventListener("ended",()=>{p||(u(l.duration),s()),cancelAnimationFrame(f)});function S(){p||(o.stop(),cancelAnimationFrame(f),s(),p=!0)}return a.current=S,S},[]),r=Object(i.useMemo)(()=>({playAudioBuffer:n}),[n]);return Object(i.createElement)(Ht.Provider,{value:r},t)}function zt(){return Object(i.useContext)(Ht)}function ot(t){return t.toLocaleString([],{dateStyle:"medium",timeStyle:"short"})}function Ge(t,a){return`0:${t.toFixed(a).padStart(3+a,"0")}`}function Vt(t){return`${Math.floor(t/60)}m ${Math.floor(t%60)}s`}var Ut=(t,a,n)=>new Promise((r,l)=>{var u=o=>{try{c(n.next(o))}catch(m){l(m)}},s=o=>{try{c(n.throw(o))}catch(m){l(m)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(u,s);c((n=n.apply(t,a)).next())});const Se=6,Qt=Se*44;function Gt(t,a){const n=Math.floor(Se*t.length/a),r=new Float32Array(Math.floor(t.length/n)),l=new Float32Array(Math.floor(t.length/n));for(let o=0;o<r.length;o++){const m=new Float32Array(t.buffer,o*n*4,n);let f=0,v=0;for(const p of m)p>f&&(f=p),p<v&&(v=p);r[o]=Math.min(1,f),l[o]=Math.max(-1,v)}const u=t.length%n,s=new Float32Array(r.length+l.length+u);s.set(r,0),s.set(l,r.length),s.set(new Float32Array(t.buffer,(t.length-u)*4,u),r.length+l.length);const c=ge(s);return{positive:r,negative:l,normalizationCoefficient:1/c}}function lt(t,a){return Ut(this,null,function*(){const n=Ue(t,a);return Gt(n,Qt)})}function Kt(t){const[a,n]=Object(i.useState)(null);Object(i.useEffect)(()=>{let l=!1;return(()=>Ut(this,null,function*(){if(l)return;const u=yield Qe(t.metadata.sourceFileId,Boolean(t.metadata.userFileInfo));l||n([t.metadata.sourceFileId,u])}))(),()=>{l=!0}},[t.metadata.sourceFileId,t.metadata.userFileInfo]);const r=Object(i.useRef)(t);return a&&t.metadata.sourceFileId===a[0]&&(r.current=t),{sample:r.current,sourceAudioBuffer:a&&a[1]}}function Yt(t){const a=Object(i.useMemo)(()=>t?Ue(t,[0,0]):new Float32Array,[t]),[n,r]=Object(i.useState)(null),[l,u]=Object(i.useState)({width:0,height:0}),s=Object(i.useMemo)(()=>n&&(l.width||n.offsetWidth),[n,l]),c=Object(i.useMemo)(()=>!s||!a.length?{positive:new Float32Array,negative:new Float32Array,normalizationCoefficient:1/0}:Gt(a,s),[s,a]);return{monoSamples:a,waveformRef:r,pixelWidth:s,peaks:c,onResize:u}}function ct(t,a=!1){const{playAudioBuffer:n}=zt(),r=Object(i.useRef)(()=>{}),[l,u]=Object(i.useState)(null);Object(i.useEffect)(()=>{t&&l&&(u(null),l.fn())},[t,l]);const[s,c]=Object(i.useState)(0),[o,m]=Object(i.useState)(!1),[f,v]=Object(i.useState)("");Object(i.useEffect)(()=>{t&&v(Ge(o?s*t.duration:t.duration,1))},[t,o,s]);const p=Object(i.useCallback)(g=>{if(o)r.current();else if(t)r.current=n(t,{onTimeUpdate(y){c(y/t.duration)},onEnded(){m(!1)}}),c(0),m(!0);else{const y=g.target;u({fn:()=>y.dispatchEvent(g)})}},[o,n,t]);Object(i.useEffect)(()=>{if(!a)return;function g(y){document.querySelector('[role="dialog"]')||y.key===" "&&(y.preventDefault(),p(y))}return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[a,p]);const S=Object(i.useCallback)(()=>r.current(),[]);return{isPlaybackActive:o,playbackProgress:s,displayedTime:f,togglePlayback:p,stopPlayback:S}}var Ha=d(118),za=d(119),Va=Object.defineProperty,$t=Object.getOwnPropertySymbols,Ua=Object.prototype.hasOwnProperty,Qa=Object.prototype.propertyIsEnumerable,Xt=(t,a,n)=>a in t?Va(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,Jt=(t,a)=>{for(var n in a||(a={}))Ua.call(a,n)&&Xt(t,n,a[n]);if($t)for(var n of $t(a))Qa.call(a,n)&&Xt(t,n,a[n]);return t};const Ga=Ha.a.canvas({width:"100%",height:"100%",display:"block",imageRendering:"pixelated"});function Ka(t,a){function n(l,u){t.width=l,t.height=u}n(t.offsetWidth,t.offsetHeight),a({width:t.offsetWidth,height:t.offsetHeight});const r=new za.a(([l])=>{const{width:u,height:s}=l.contentRect;n(u,s),a({width:u,height:s})});return r.observe(t),()=>r.disconnect()}function Ya(t,a,n){const r=getComputedStyle(document.documentElement),l=r.getPropertyValue("--bs-primary"),u=r.getPropertyValue("--bs-primary-darkened"),s=t.getContext("2d");s.imageSmoothingEnabled=!1;const{width:c,height:o}=t;s.clearRect(0,0,c,o);const m=Math.floor(o*(2/3))+1;s.fillStyle=l,a.positive.forEach((v,p)=>{const S=m*v,g=Math.max(Math.round(n*S),1);s.fillRect(p*Se,m-g,Se-1,g)});const f=o-m;s.fillStyle=u,a.negative.forEach((v,p)=>{const S=f*v*-1,g=Math.round(n*S);s.fillRect(p*Se,m,Se-1,g)})}function $a({peaks:t,scaleCoefficient:a,waveformRef:n,onResize:r}){const l=Object(i.useRef)(null);Object(i.useImperativeHandle)(n,()=>l.current);const[u,s]=Object(i.useState)(Symbol()),c=Object(i.useRef)({width:0,height:0});return Object(i.useLayoutEffect)(()=>{if(!l.current)throw new Error("Canvas should be defined");return c.current.width=l.current.offsetWidth,c.current.height=l.current.offsetHeight,r&&r(Jt({},c.current)),Ka(l.current,({width:o,height:m})=>{(o!==c.current.width||m!==c.current.height)&&(s(Symbol()),c.current.width=o,c.current.height=m,r&&r(Jt({},c.current)))})},[r]),Object(i.useLayoutEffect)(()=>{const o=l.current;if(!o)throw new Error("Canvas should be defined");let m=requestAnimationFrame(()=>{m=requestAnimationFrame(()=>{Ya(o,t,a===void 0?t.normalizationCoefficient:a)})});return()=>cancelAnimationFrame(m)},[t,a,u]),e.a.createElement(Ga,{ref:l})}var it=$a,Xa=d(23),pe=d.n(Xa),Ja=e.a.memo(function({isPlaybackActive:a,playbackProgress:n}){return e.a.createElement("div",{className:[pe.a.playbackOverlay,a?pe.a.playbackActive:""].join(" "),style:{"--playback-progress":`${100*n}%`}},e.a.createElement("div",{className:pe.a.playback}))}),Za=d(27),ve=d.n(Za);const Zt=typeof IntersectionObserver!="undefined",qa=e.a.memo(function({sample:a,selected:n,onSampleSelect:r}){const l=Object(i.useRef)(null),[u,s]=Object(i.useState)(!Zt);Object(i.useLayoutEffect)(()=>{if(!Zt)return;const y=l.current;if(!y)throw new Error("Waveform container should be defined");const w=y.getBoundingClientRect();if(w.top+w.height>=0&&w.bottom-w.height<=window.innerHeight){s(!0);return}const O=new IntersectionObserver(([M])=>{M.isIntersecting&&(s(!0),O.unobserve(y))});return O.observe(y),()=>O.disconnect()},[]);const c=Object(i.useRef)(null);Object(i.useEffect)(()=>{if(!n||!c.current)return;const y=c.current,w=y.closest(".accordion-collapse");if(!w)return;(w.scrollTop>y.offsetTop||w.scrollTop+w.offsetHeight<y.offsetTop-y.offsetHeight)&&y.scrollIntoView({block:"center"})},[n]);const[o,m]=Object(i.useState)(!1),{audioBuffer:f}=rt(a,o),{isPlaybackActive:v,playbackProgress:p,togglePlayback:S}=ct(f),g=Object(i.useCallback)(y=>{S(y),m(!0)},[S]);return e.a.createElement("div",{className:["list-group-item",ve.a.listItem,n?`active ${ve.a.active}`:""].join(" "),tabIndex:-1,onClick:y=>{const w=y.currentTarget.querySelector("button");w&&w.contains(y.target)||r(a.id)},ref:c},e.a.createElement("span",{className:ve.a.sampleTitle},e.a.createElement(T.a,{className:ve.a.playbackButton,tabIndex:-1,variant:"dark",onClick:y=>{g(y.nativeEvent)}},v?e.a.createElement(At.a,null):e.a.createElement(kt.a,null)),e.a.createElement("span",null,a.metadata.name)),e.a.createElement("div",{className:[ve.a.waveformContainer,v?ve.a.playbackActive:""].join(" "),style:{"--waveform-width":`${Qt}px`},ref:l},u&&e.a.createElement(e.a.Fragment,null,e.a.createElement(it,{peaks:a.metadata.trim.waveformPeaks,scaleCoefficient:a.metadata.normalize?void 0:1}),e.a.createElement(Ja,{isPlaybackActive:v,playbackProgress:p}))))});function en({samples:t,selectedSampleId:a,onSampleSelect:n}){const r=Object(i.useRef)(null),l=Object(i.useCallback)(s=>{if(!r.current||s.key!=="ArrowUp"&&s.key!=="ArrowDown")return;const c=s.target.closest(`.${ve.a.listItem}`);if(c){s.preventDefault();const o=Array.prototype.indexOf.call(r.current.children,c);s.key==="ArrowUp"&&o>0&&c.previousElementSibling instanceof HTMLDivElement&&c.previousElementSibling.focus(),s.key==="ArrowDown"&&o+1<t.length&&c.nextElementSibling instanceof HTMLDivElement&&c.nextElementSibling.focus()}},[t]),u=Object(i.useCallback)(s=>{if(!r.current||!(document.activeElement instanceof HTMLDivElement)||s.key!=="ArrowUp"&&s.key!=="ArrowDown")return;const c=Array.prototype.indexOf.call(r.current.children,document.activeElement);if(c===-1)return;s.preventDefault();const o=t[c];o&&n(o.id)},[t,n]);return e.a.createElement("ul",{ref:r,className:"list-group list-group-flush",onKeyDown:l,onKeyUp:u},t.length?t.map(s=>e.a.createElement(qa,{key:s.id,sample:s,selected:s.id===a,onSampleSelect:n})):e.a.createElement("li",{className:"list-group-item"},e.a.createElement(X.a.Label,{className:ve.a.emptyListMessage},"No samples found.")))}var tn=en,an=d(33),he=d.n(an),qt=e.a.memo(function({visible:a,loading:n,focusedSampleId:r,userSamples:l,factorySamples:u,onSampleSelect:s}){const[c,o]=Object(i.useState)(""),m=c.trim().toLowerCase(),[f,v]=Object(i.useState)(null);{const h=Boolean(c);Object(i.useLayoutEffect)(()=>{v(r&&u.has(r)?"factory":l.size?"user":"factory")},[l,u,r,h])}const[p,S]=Object(i.useState)(["user","factory"]);Object(i.useLayoutEffect)(()=>{m&&S(["user","factory"])},[m]);const g=Object(i.useCallback)(h=>{S(_=>_.includes(h)?_.filter(A=>A!==h):_.concat(h))},[]),y=Object(i.useCallback)(h=>{if(h.key==="ArrowDown"){h.preventDefault();const A=h.target.closest(`.${he.a.accordionItem}`);if(!A){console.warn("Expected accordionItem class on parent.");return}const E=A.querySelector("ul > div");E&&E.focus()}},[]),w=Object(i.useMemo)(()=>[...l.values()].filter(h=>!c||h.metadata.name.toLowerCase().includes(c)),[l,c]),O=Object(i.useMemo)(()=>[...u.values()].filter(h=>!c||h.metadata.name.toLowerCase().includes(c)),[u,c]),M=Object(i.useRef)(null),C=Object(i.useRef)(null),R=Object(i.useRef)(!1),k=Object(i.useRef)(!1);return Object(i.useEffect)(()=>{if(!M.current||!C.current)return;function h(){R.current=!0}function _(){k.current=!0}function A(){R.current=!1,k.current=!1}const E=M.current,N=C.current;return E.addEventListener("mousedown",h),N.addEventListener("mousedown",_),window.addEventListener("mouseup",A),()=>{E.removeEventListener("mousedown",h),N.removeEventListener("mousedown",_),window.removeEventListener("mouseup",A)}},[n]),e.a.createElement(e.a.Fragment,null,e.a.createElement(T.a,{className:he.a.newSampleButton,type:"button",variant:"primary",onClick:()=>{s(null),requestAnimationFrame(()=>{const h=document.getElementById("record-button");h&&(h.focus(),requestAnimationFrame(()=>{document.activeElement!==h&&setTimeout(()=>{h.focus()},300)}))})}},"New sample"),e.a.createElement(X.a.Control,{className:he.a.search,placeholder:"Search for a sample...",value:c,onChange:h=>o(h.target.value)}),e.a.createElement(Oa.a,{className:he.a.listGroup},!n&&[{eventKey:"user",filteredSamples:w,headerRef:M,headerMouseDownRef:R},{eventKey:"factory",filteredSamples:O,headerRef:C,headerMouseDownRef:k}].map(({eventKey:h,filteredSamples:_,headerRef:A,headerMouseDownRef:E})=>e.a.createElement(fe.a,{key:h,style:{"--results-count":_.length,"--accordion-open":(m?p.includes(h):f===h)?"1":"0"},activeKey:m?p.filter(N=>N===h)[0]||"nothing":f===h?f:"nothing",className:he.a.accordion},e.a.createElement(fe.a.Item,{eventKey:h,className:he.a.accordionItem},e.a.createElement(fe.a.Header,{ref:A,onClick:()=>{v(N=>N===h?null:h),m&&g(h)},onFocus:()=>!E.current&&v(h),onKeyDown:y},h==="user"?"Your samples":"Factory samples"),e.a.createElement(fe.a.Body,{className:he.a.accordionBody},e.a.createElement(tn,{samples:_,selectedSampleId:r,onSampleSelect:s})))))))}),nn=d(109),ea=d.n(nn),rn=e.a.memo(function({open:a,loading:n,focusedSampleId:r,userSamples:l,factorySamples:u,setOpen:s,onSampleSelect:c}){return e.a.createElement(qe.a,{className:ea.a.sidebar,show:a,onHide:()=>s(!1)},e.a.createElement(qe.a.Header,{closeButton:!0}),e.a.createElement(qe.a.Body,{className:ea.a.offcanvasBody},e.a.createElement(qt,{visible:a,loading:n,focusedSampleId:r,userSamples:l,factorySamples:u,onSampleSelect:c})))}),on=d(179),Re=d(128),j=d(185),ta=d(82),Ne=d(184),Ie=d(177),ln=d(121);function aa(t,a){const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=a,r.style.display="none",document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}var cn=(t,a,n)=>new Promise((r,l)=>{var u=o=>{try{c(n.next(o))}catch(m){l(m)}},s=o=>{try{c(n.throw(o))}catch(m){l(m)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(u,s);c((n=n.apply(t,a)).next())}),na=e.a.memo(function({isPlaybackActive:a,playbackProgress:n,displayedTime:r,downloadFilename:l,wavFile:u,togglePlayback:s}){const c=Object(i.useCallback)(()=>cn(this,null,function*(){if(u){const o=new Blob([u],{type:"audio/x-wav"});aa(o,l)}}),[l,u]);return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:[pe.a.playbackOverlay,a?pe.a.playbackActive:""].join(" "),style:{"--playback-progress":`${100*n}%`}},e.a.createElement("div",{className:pe.a.playback})),e.a.createElement("div",{className:pe.a.playbackButtonContainer},e.a.createElement(Ne.a,{delay:{show:400,hide:0},overlay:e.a.createElement(Ie.a,null,"Preview how your sample will sound on the volca sample")},e.a.createElement(T.a,{variant:"dark",onClick:o=>s(o.nativeEvent)},a?e.a.createElement(At.a,null):e.a.createElement(kt.a,null))),r&&e.a.createElement("span",null,r)),e.a.createElement(Ne.a,{delay:{show:400,hide:0},overlay:e.a.createElement(Ie.a,null,"Download a copy of the audio that will be transferred to the volca sample")},e.a.createElement(T.a,{className:pe.a.downloadButton,type:"button",variant:"dark",size:"sm",onClick:c,disabled:!u},e.a.createElement(ln.a,null))))}),sn=d(122),un=d.n(sn),mn=e.a.memo(function({sampleId:a,normalize:n,onSampleUpdate:r}){return e.a.createElement(Ne.a,{delay:{show:400,hide:0},overlay:e.a.createElement(Ie.a,null,"Boosts your sample's volume so its peak is at the same level as your other normalized samples")},e.a.createElement("div",{className:un.a.normalizeControlWrapper},e.a.createElement(X.a.Switch,{label:e.a.createElement("span",{onClick:()=>r(a,l=>({normalize:!l.normalize}))},"Normalize"),checked:n,onChange:l=>r(a,{normalize:l.target.checked})})))}),dn=d(9),J=d.n(dn),fn=(t,a,n)=>new Promise((r,l)=>{var u=o=>{try{c(n.next(o))}catch(m){l(m)}},s=o=>{try{c(n.throw(o))}catch(m){l(m)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(u,s);c((n=n.apply(t,a)).next())}),pn=e.a.memo(function({sample:a,onSampleUpdate:n}){const{wav:r,audioBuffer:l}=rt(a),{sample:{id:u,metadata:{name:s,trim:{frames:c},normalize:o}},sourceAudioBuffer:m}=Kt(a),{monoSamples:f,waveformRef:v,pixelWidth:p,peaks:S,onResize:g}=Yt(m),y=Object(i.useMemo)(()=>{if(!m)return 0;const P=Ve(f,c);return ge(P)},[m,f,c]),w=1/y,[O,M]=Object(i.useState)({trimFrames:c,cursor:null});Object(i.useEffect)(()=>{M({trimFrames:c,cursor:null})},[c]);const C=Object(i.useMemo)(()=>{if(!f.length||!p)return[0,0];const P=p/f.length;return O.trimFrames.map(z=>z*P)},[p,f.length,O.trimFrames]),R=Object(i.useRef)(O);R.current=O;const k=Object(i.useRef)(a.id);k.current=a.id;const h=Object(i.useRef)(0),_=Object(i.useCallback)(()=>fn(this,null,function*(){if(!m||u!==k.current)return;let P=h.current=Math.random();const{trimFrames:z}=R.current,ae=yield lt(m,z);h.current===P&&n(u,ne=>ne.trim.frames.every(($,le)=>z[le]===$)?ne:{trim:{frames:z,waveformPeaks:ae}})}),[u,m,n]),A=Object(i.useRef)(!1);Object(i.useEffect)(()=>{A.current&&(_(),A.current=!1)},[O,_]);const E=Object(i.useCallback)(()=>{A.current=!0,M({trimFrames:[0,0],cursor:null})},[]),N=Object(i.useRef)(null),x=Object(i.useRef)(null),B=Object(i.useRef)(null);{const P=Object(i.useRef)(null),z=Object(i.useRef)(null),ae=Object(i.useRef)(null),ne=Object(i.useRef)(!1),$=Object(i.useRef)(null);Object(i.useLayoutEffect)(()=>{$.current&&(clearTimeout($.current),$.current=null)},[O]);const le=Object(i.useMemo)(()=>{if(!p||!f.length)return null;const G=Math.max(2e3,Math.ceil(10*f.length/p));return{pixelWidth:p,monoSamplesLength:f.length,minFrameWidth:G}},[p,f.length]);Object(i.useEffect)(()=>{if(!le||!N.current||!x.current||!B.current)return;const V=N.current,G=x.current,Z=B.current,{pixelWidth:Oe,monoSamplesLength:ie,minFrameWidth:ke}=le;let yt=0;function pr(){yt=Z.getBoundingClientRect().left}function $e(b){b instanceof TouchEvent&&b.preventDefault(),document.body.style.userSelect="none";const{pageX:F}=b instanceof MouseEvent?b:b.touches[0];P.current=F}function Xe(b){b instanceof TouchEvent&&b.preventDefault(),document.body.style.userSelect="none";const{pageX:F}=b instanceof MouseEvent?b:b.touches[0];z.current=F}function Je(b){if(b instanceof TouchEvent&&b.preventDefault(),b.detail===2){E();return}document.body.style.userSelect="none";const{clientX:F}=b instanceof MouseEvent?b:b.touches[0];pr();const q=Math.max(0,Math.min(Oe,F-yt)),re=q/Oe,U=Math.round(ie*re),ye=U+ke,Ee=ye<ie?ye:U-ke;Ee<0||(M({trimFrames:[Math.min(U,Ee),ie-1-Math.max(U,Ee)],cursor:q-1}),ae.current=U)}function Et(b){const F=b/Oe,q=Math.round(ie*F);M(({trimFrames:re})=>{let U=re[0]+q;return U=Math.min(U,ie-re[1]-ke),U=Math.max(U,0),{trimFrames:[U,re[1]],cursor:null}})}function bt(b){if(P.current===null)return;b instanceof TouchEvent&&b.preventDefault();const{pageX:F}=b instanceof MouseEvent?b:b.touches[0],q=F-P.current;q&&(Et(q),P.current=F)}function gt(b){const F=b/Oe,q=Math.round(ie*F);M(({trimFrames:re})=>{let U=re[1]+q;return U=Math.min(U,ie-re[0]-ke),U=Math.max(U,0),{trimFrames:[re[0],U],cursor:null}})}function St(b){if(z.current===null)return;b instanceof TouchEvent&&b.preventDefault();const{pageX:F}=b instanceof MouseEvent?b:b.touches[0],q=z.current-F;q&&(gt(q),z.current=F)}let Ze=!1;function ba(b){if(P.current!==null)return;let F=!0;switch(b.key){case"ArrowLeft":Et(-1);break;case"ArrowRight":Et(1);break;default:F=!1;break}F&&(b.stopPropagation(),b.preventDefault(),Ze=!0)}function ga(b){if(z.current!==null)return;let F=!0;switch(b.key){case"ArrowLeft":gt(1);break;case"ArrowRight":gt(-1);break;default:F=!1;break}F&&(b.stopPropagation(),b.preventDefault(),Ze=!0)}function wt(b){if(ae.current===null)return;b instanceof TouchEvent&&b.preventDefault();const F=ae.current,{clientX:q}=b instanceof MouseEvent?b:b.touches[0],re=Math.max(0,Math.min(Oe,q-yt)),U=re/Oe,ye=Math.max(0,Math.min(ie-1,Math.round(ie*U)));if(ye!==ae.current){ne.current=!0;const Ee=F+ke,_t=F-ke,Ct=ye>F?Ee<ie?Math.max(ye,Ee):_t:_t>=0?Math.min(ye,_t):Ee;M({trimFrames:[Math.min(F,Ct),ie-1-Math.max(F,Ct)],cursor:F<Ct?re:re-1})}}function Sa(b){bt(b),St(b),wt(b)}function K(b){(P.current!==null||z.current!==null||ae.current!==null||Ze)&&((b instanceof TouchEvent||b instanceof KeyboardEvent)&&b.preventDefault(),ae.current&&!ne.current&&b.detail===1?$.current=setTimeout(()=>{$.current=null,_()},250):_(),P.current=null,z.current=null,ae.current=null,ne.current=!1,Ze=!1),document.body.style.userSelect="unset"}function Ae(b){b.target instanceof Node&&Z.contains(b.target)||$.current&&(clearTimeout($.current),$.current=null,_())}return V.addEventListener("touchstart",$e),V.addEventListener("mousedown",$e),G.addEventListener("touchstart",Xe),G.addEventListener("mousedown",Xe),Z.addEventListener("touchstart",Je),Z.addEventListener("mousedown",Je),V.addEventListener("touchmove",bt),G.addEventListener("touchmove",St),V.addEventListener("keydown",ba),G.addEventListener("keydown",ga),Z.addEventListener("touchmove",wt),window.addEventListener("mousemove",Sa),V.addEventListener("touchend",K),V.addEventListener("touchcancel",K),V.addEventListener("keyup",K),G.addEventListener("touchend",K),G.addEventListener("keyup",K),G.addEventListener("touchcancel",K),Z.addEventListener("touchend",K),Z.addEventListener("touchcancel",K),window.addEventListener("mouseup",K),window.addEventListener("touchstart",Ae,{capture:!0}),window.addEventListener("mousedown",Ae,{capture:!0}),window.addEventListener("keydown",Ae,{capture:!0}),()=>{V.removeEventListener("touchstart",$e),V.removeEventListener("mousedown",$e),G.removeEventListener("touchstart",Xe),G.removeEventListener("mousedown",Xe),Z.removeEventListener("touchstart",Je),Z.removeEventListener("mousedown",Je),V.removeEventListener("touchmove",bt),G.removeEventListener("touchmove",St),V.removeEventListener("keydown",ba),G.removeEventListener("keydown",ga),Z.removeEventListener("touchmove",wt),window.removeEventListener("mousemove",Sa),V.removeEventListener("touchend",K),V.removeEventListener("touchcancel",K),V.removeEventListener("keyup",K),G.removeEventListener("touchend",K),G.removeEventListener("keyup",K),G.removeEventListener("touchcancel",K),Z.removeEventListener("touchend",K),Z.removeEventListener("touchcancel",K),window.removeEventListener("mouseup",K),window.removeEventListener("touchstart",Ae,{capture:!0}),window.removeEventListener("mousedown",Ae,{capture:!0}),window.removeEventListener("keydown",Ae,{capture:!0})}},[le,_,E])}const{isPlaybackActive:I,playbackProgress:W,displayedTime:H,togglePlayback:te,stopPlayback:D}=ct(l,!0);Object(i.useEffect)(()=>D,[a,O,D]);const Y=a.metadata.trim.frames.every(P=>P===0);return e.a.createElement(e.a.Fragment,null,e.a.createElement(X.a.Group,{className:J.a.waveformAdjacentControls},e.a.createElement(mn,{sampleId:a.id,normalize:a.metadata.normalize,onSampleUpdate:n}),e.a.createElement(T.a,{type:"button",variant:"secondary",disabled:Y,onClick:E},Y?"All audio selected":"Select all audio")),e.a.createElement("div",{className:[J.a.waveformContainer,I?J.a.playbackActive:""].join(" "),style:{"--cursor-display":O.cursor===null?"none":"unset","--cursor-left":`${O.cursor}px`,"--trim-pixels-left":`${C[0]}px`,"--trim-pixels-right":`${C[1]}px`}},e.a.createElement(it,{waveformRef:v,peaks:S,scaleCoefficient:o?w:1,onResize:g}),e.a.createElement(na,{isPlaybackActive:I,playbackProgress:W,displayedTime:H,downloadFilename:`${s}.volcasample.wav`,wavFile:r,togglePlayback:te}),e.a.createElement("div",{className:J.a.cursor}),e.a.createElement("div",{className:[J.a.trim,J.a.left].join(" ")},e.a.createElement("div",{className:J.a.bar}),e.a.createElement("div",{ref:N,className:J.a.handle,tabIndex:0}),m&&Boolean(f.length)&&e.a.createElement("span",{className:J.a.time},Ge(m.duration*O.trimFrames[0]/f.length,2))),e.a.createElement("div",{className:[J.a.trim,J.a.right].join(" ")},e.a.createElement("div",{className:J.a.bar}),e.a.createElement("div",{ref:x,className:J.a.handle,tabIndex:0}),m&&Boolean(f.length)&&e.a.createElement("span",{className:J.a.time},Ge(m.duration*(f.length-1-O.trimFrames[1])/f.length,2))),e.a.createElement("div",{ref:B,className:J.a.waveformOverlay})))}),vn=d(178),hn=d(123),ra=(t,a,n)=>new Promise((r,l)=>{var u=o=>{try{c(n.next(o))}catch(m){l(m)}},s=o=>{try{c(n.throw(o))}catch(m){l(m)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(u,s);c((n=n.apply(t,a)).next())});let oa;function yn(){return ra(this,null,function*(){return typeof window.CREATE_SYRO_BINDINGS!="function"?Promise.reject("Expected CREATE_SYRO_BINDINGS global function to exist"):oa=oa||window.CREATE_SYRO_BINDINGS().then(t=>ra(this,null,function*(){return{prepareSampleBufferFromWavData:t.cwrap("prepareSampleBufferFromWavData","number",["array","number","number","number","number"]),prepareSampleBufferFrom16BitPcmData(){throw new Error("This function does not work. Use prepareSampleBufferFromWavData.")},getSampleBufferChunkPointer:t.cwrap("getSampleBufferChunkPointer","number",["number"]),getSampleBufferChunkSize:t.cwrap("getSampleBufferChunkSize","number",["number"]),getSampleBufferProgress:t.cwrap("getSampleBufferProgress","number",["number"]),getSampleBufferTotalSize:t.cwrap("getSampleBufferTotalSize","number",["number"]),cancelSampleBufferWork:t.cwrap("cancelSampleBufferWork",null,["number"]),registerUpdateCallback(n){return t.addFunction(n,"vi")},unregisterUpdateCallback(n){t.removeFunction(n)},heap8Buffer(){return t.HEAP8.buffer}}}))})}var En=(t,a,n)=>new Promise((r,l)=>{var u=o=>{try{c(n.next(o))}catch(m){l(m)}},s=o=>{try{c(n.throw(o))}catch(m){l(m)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(u,s);c((n=n.apply(t,a)).next())});function bn(t,a){let n=!1,r=()=>{};return{cancelWork(){n=!0,r()},sampleBufferPromise:(()=>En(this,null,function*(){const{prepareSampleBufferFromWavData:l,getSampleBufferChunkPointer:u,getSampleBufferChunkSize:s,getSampleBufferProgress:c,getSampleBufferTotalSize:o,cancelSampleBufferWork:m,registerUpdateCallback:f,unregisterUpdateCallback:v,heap8Buffer:p}=yield yn(),S={sampleBuffer:new Uint8Array,dataSize:0};if(n)return S;const{data:g}=yield Wt(t);if(n)return S;let y,w=0;const O=f(C=>{if(n)return;const R=o(C);y||(y=new Uint8Array(R));const k=u(C),h=s(C),_=c(C);y.set(new Uint8Array(p(),k,h),_-h),w=_/R}),M=l(g,g.length,t.metadata.slotNumber,t.metadata.qualityBitDepth,t.metadata.useCompression?1:0,O);a(w);try{yield new Promise(C=>{let R;r=()=>{cancelAnimationFrame(R),m(M),C()},k();function k(){if(w&&(a(w),w>=1)){C();return}R=requestAnimationFrame(k)}})}finally{r=()=>{},v(O)}if(n)return S;if(!y)throw new Error("Unexpected condition: sampleBuffer should be defined");return{sampleBuffer:y,dataSize:g.length}}))()}}var gn=d(65),Ke=d.n(gn),la=d(102),ca=d.n(la),st=d(103),ut=d(104),Sn=d(25),de=d.n(Sn),ia=Math.pow;la.Digit.defaultProps.offOpacity=0;const sa=(t,a)=>Math.min(199,a+ia(10,t)),ua=(t,a)=>Math.max(0,a-ia(10,t));var wn=e.a.memo(function({slotNumber:t,onSlotNumberUpdate:a}){const[n,r]=Object(i.useState)(t);Object(i.useEffect)(()=>{r(t)},[t]);const[l,u]=Object(i.useState)(null),s=Object(i.useCallback)(f=>{a(v=>sa(f,v))},[a]),c=Object(i.useCallback)(f=>{a(v=>ua(f,v))},[a]),o=Object(i.useRef)(null),m=Object(i.useRef)(null);{const f=Object(i.useRef)(l);f.current=l;const v=Object(i.useRef)(n);v.current=n,Object(i.useEffect)(()=>{if(!m.current)throw new Error("Expected elements to exist");function p(E){const N=f.current===null?0:f.current;let x=!0;const B=()=>{u(N)};switch(E.key){case"ArrowDown":B(),r(I=>ua(N,I));break;case"ArrowUp":B(),r(I=>sa(N,I));break;case"ArrowLeft":B(),u(I=>I!==null&&I<2?I+1:I);break;case"ArrowRight":B(),u(I=>I&&I-1);break;case"Enter":case"Escape":u(null);break;default:x=!1;break}x&&E.preventDefault()}function S(E){const N=f.current===null?2:f.current;E.stopPropagation(),E.preventDefault();const x=v.current;if(isNaN(Number(E.key)))a(x);else{const B=String(x).padStart(3,"0").split("");B[2-N]=E.key;const I=Math.min(199,Math.max(0,Number(B.join(""))));u(N?N-1:null),a(I)}}const g=o.current;g.addEventListener("keydown",p,!0),g.addEventListener("keyup",S,!0);let y=0,w=!1,O=!1,M=0;function C(E){document.body.style.userSelect="none",y=E instanceof MouseEvent?E.pageY:E.touches[0].pageY,w=!0,O=!1,M=v.current}g.addEventListener("mousedown",C),g.addEventListener("touchstart",E=>{E.preventDefault(),C(E)});function R(E){if(!w)return;const{pageY:N}=E instanceof MouseEvent?E:E.touches[0],x=2,B=Math.round((y-N)/x);B&&(O=!0,r(Math.min(199,Math.max(0,M+B))))}window.addEventListener("mousemove",R),g.addEventListener("touchmove",R);function k(){document.body.style.userSelect="unset",w=!1,O&&a(v.current)}window.addEventListener("mouseup",k),g.addEventListener("touchend",k),g.addEventListener("touchcancel",()=>{document.body.style.userSelect="unset"});function h(E){O||m.current&&m.current.some(N=>N.contains(E.target))||u(2)}g.addEventListener("click",h),m.current.forEach((E,N)=>{const x=N;E.addEventListener("click",()=>{O||u(x)}),E.addEventListener("touchstart",B=>{B.preventDefault()})});function _(){w||u(2)}function A(){u(null)}return g.addEventListener("focus",_),g.addEventListener("blur",A),()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",k)}},[a])}return Object(i.useEffect)(()=>{if(!m.current)throw new Error("Expected elements to exist");m.current.forEach((f,v)=>{v===l?f.classList.add(de.a.active):f.classList.remove(de.a.active)})},[l]),e.a.createElement(e.a.Fragment,null,e.a.createElement(X.a.Label,null,"Choose destination"),e.a.createElement("br",null),e.a.createElement("div",{className:de.a.slotNumberRow},e.a.createElement("div",{className:de.a.slotNumberContainer},e.a.createElement("div",{className:de.a.arrowControls},e.a.createElement("span",{onClick:()=>s(2)},e.a.createElement(st.a,null)),e.a.createElement("span",{onClick:()=>s(1)},e.a.createElement(st.a,null)),e.a.createElement("span",{onClick:()=>s(0)},e.a.createElement(st.a,null))),e.a.createElement("div",{className:de.a.slotNumber,title:`Slot ${n}`,ref:o,tabIndex:0},e.a.createElement(ca.a,{value:"8888",color:"var(--bs-gray-dark)",strokeColor:"transparent",digitCount:4}),e.a.createElement(ca.a,{ref:f=>{const v=Object(Ot.findDOMNode)(f);if(v){v.querySelectorAll("circle").forEach(S=>{v.removeChild(S)});const p=document.createElementNS("http://www.w3.org/2000/svg","circle");p.classList.add(de.a.point),p.setAttribute("cx","10.7"),p.setAttribute("cy","17"),p.setAttribute("r","1"),v.appendChild(p),m.current=[].slice.call(v.querySelectorAll("g")).reverse().slice(0,3)}},value:`5${String(n).padStart(3,"0")}`,digitProps:{color:"var(--bs-primary)"},digitCount:4})),e.a.createElement("div",{className:de.a.arrowControls},e.a.createElement("span",{onClick:()=>c(2)},e.a.createElement(ut.a,null)),e.a.createElement("span",{onClick:()=>c(1)},e.a.createElement(ut.a,null)),e.a.createElement("span",{onClick:()=>c(0)},e.a.createElement(ut.a,null)))),t>99&&n>99&&e.a.createElement(Ne.a,{placement:"auto-end",overlay:e.a.createElement(Ie.a,null,"To transfer to this destination, be sure you have a volca sample2. The original volca sample only supports slots 0-99.")},e.a.createElement("span",{className:de.a.warning},e.a.createElement(ta.a,null)))))}),_n=(t,a,n)=>new Promise((r,l)=>{var u=o=>{try{c(n.next(o))}catch(m){l(m)}},s=o=>{try{c(n.throw(o))}catch(m){l(m)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(u,s);c((n=n.apply(t,a)).next())});function Cn({sample:t,onSlotNumberUpdate:a}){const[n,r]=Object(i.useState)(0),[l,u]=Object(i.useState)(!1),[s,c]=Object(i.useState)("idle");Object(i.useLayoutEffect)(()=>{s==="transferring"&&u(!1)},[s]);const[o,m]=Object(i.useState)(null),[f,v]=Object(i.useState)(null),[p,S]=Object(i.useState)(null);Object(i.useEffect)(()=>{f instanceof AudioBuffer&&p&&(S(null),p.fn())},[f,p]);const g=Object(i.useRef)(()=>{});Object(i.useEffect)(()=>{let C=!1;r(0),c("idle"),m(null),v(null),S(null),g.current=()=>{C=!0};try{const{sampleBufferPromise:R,cancelWork:k}=bn(t,h=>{C||r(h)});g.current=()=>{k(),C=!0},R.then(h=>_n(this,[h],function*({sampleBuffer:_,dataSize:A}){if(C)return;m(A),g.current=()=>{C=!0};const E=yield De(_);C||v(E)}))}catch(R){console.error(R),v(new Error(String(R)))}return()=>g.current()},[t]);const{playAudioBuffer:y}=zt(),w=Object(i.useCallback)(C=>{if(!(f instanceof AudioBuffer)){if(!f){const{target:R,nativeEvent:k}=C;S({fn:()=>R.dispatchEvent(k)})}return}try{c("transferring");const R=y(f,{onTimeUpdate:k=>r(k/f.duration)});g.current=()=>{R(),c("idle")}}catch(R){console.error(R),c("error")}},[y,f]),O=Object(i.useCallback)(()=>g.current(),[]),M=s==="transferring"&&n<1;return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:Ke.a.transferInfo},e.a.createElement("strong",null,"Memory footprint:")," ",typeof o=="number"?Object(hn.a)(o).toString():"checking...",e.a.createElement("br",null),e.a.createElement("strong",null,"Time to transfer:")," ",f instanceof AudioBuffer?Vt(f.duration):f instanceof Error?"error":"checking..."),e.a.createElement(wn,{slotNumber:t.metadata.slotNumber,onSlotNumberUpdate:a}),e.a.createElement(T.a,{className:Ke.a.transferButton,type:"button",variant:"primary",onClick:()=>u(!0)},"Transfer to volca sample"),e.a.createElement(j.a,{onHide:()=>u(!1),className:Ke.a.preTransferModal,show:l,"aria-labelledby":"pre-transfer-modal"},e.a.createElement(j.a.Header,null,e.a.createElement(j.a.Title,{id:"pre-transfer-modal"},"Connect volca sample before continuing")),e.a.createElement(j.a.Body,null,e.a.createElement("figure",null,e.a.createElement("img",{src:"connection.png",alt:""}),e.a.createElement("figcaption",{className:"small"},"Source:"," ",e.a.createElement("a",{href:"https://github.com/korginc/volcasample#6-transferring-syrostream-to-your-volca-sample",target:"_blank",rel:"noreferrer"},"KORG"))),e.a.createElement("p",null,"Make sure your ",e.a.createElement("strong",null,"headphone output")," is connected to the volca sample's ",e.a.createElement("strong",null,"SYNC IN")," and adjust your output volume to a high (but not overdriven) level. Your volca wants to hear this, but you don't.")),e.a.createElement(j.a.Footer,null,e.a.createElement(T.a,{type:"button",variant:"light",onClick:()=>u(!1)},"Cancel"),e.a.createElement(T.a,{type:"button",variant:"primary",disabled:!(f instanceof AudioBuffer),onClick:w},"Transfer now"))),e.a.createElement(j.a,{show:M,"aria-labelledby":"transfer-modal"},e.a.createElement(j.a.Header,null,e.a.createElement(j.a.Title,{id:"transfer-modal"},"Sample transfer in progress")),e.a.createElement(j.a.Body,null,e.a.createElement("p",null,"Transferring ",e.a.createElement("strong",null,t.metadata.name)," to slot"," ",e.a.createElement("strong",null,t.metadata.slotNumber)," on your your volca sample. Don't disconnect anything."),e.a.createElement(vn.a,{striped:!0,animated:!0,variant:"primary",now:100*n}),e.a.createElement("div",{className:Ke.a.progressAnnotation},f instanceof AudioBuffer&&Vt(f.duration*(1-n))," ","remaining")),e.a.createElement(j.a.Footer,null,e.a.createElement(T.a,{type:"button",variant:"primary",onClick:O},"Cancel"))),e.a.createElement(j.a,{onHide:O,show:s!=="idle"&&!M,"aria-labelledby":"after-transfer-modal"},e.a.createElement(j.a.Header,null,e.a.createElement(j.a.Title,{id:"after-transfer-modal"},s==="error"?"Error transferring":"Sample transfer complete")),e.a.createElement(j.a.Body,null,s==="error"?e.a.createElement("p",null,"Something unexpected happening while transferring (on our end)."):e.a.createElement(e.a.Fragment,null,e.a.createElement("p",null,e.a.createElement("strong",null,t.metadata.name)," was transferred to slot"," ",e.a.createElement("strong",null,t.metadata.slotNumber)," on your volca sample."),e.a.createElement("h5",null,"If you see ",e.a.createElement("strong",null,"[End]"),":"),e.a.createElement("p",null,"The transfer was successful. Press the blinking"," ",e.a.createElement("strong",null,"[FUNC]")," button to finish."),e.a.createElement("h5",null,"If you see ",e.a.createElement("strong",null,"[Err dcod]"),":"),e.a.createElement("p",null,"Check your volume level and make sure no other application is creating noise, then try again. If your volume is at a decent level but the transfer failed, you might also want to try a new audio cable."),e.a.createElement("h5",null,"If you see ",e.a.createElement("strong",null,"[Err FuLL]"),":"),e.a.createElement("p",null,"Free up some memory on the volca sample (or cut down your sample size), then try again."),e.a.createElement("p",null,"For more info, check out this"," ",e.a.createElement("a",{href:"https://www.korg.com/products/dj/volca_sample/faq.php",target:"_blank",rel:"noreferrer"},"FAQ")," ","from KORG."))),e.a.createElement(j.a.Footer,null,e.a.createElement(T.a,{type:"button",variant:"primary",onClick:O},"Done"))))}var ma=Cn,On=d(124),kn=d.n(On),An=d(38),we=d.n(An),Dn=e.a.memo(function({sampleId:a,qualityBitDepth:n,onSampleUpdate:r}){const[l,u]=Object(i.useState)(n);Object(i.useEffect)(()=>{u(n)},[n]);const s=Object(i.useCallback)(c=>{const o=Number(c.target.value);u(o)},[]);return e.a.createElement(X.a.Group,{className:we.a.qualityBitDepthWrapper},e.a.createElement(Ne.a,{delay:{show:400,hide:0},overlay:e.a.createElement(Ie.a,null,"Lowering quality reduces transfer time. It will ",e.a.createElement("i",null,"not")," reduce the memory footprint.")},e.a.createElement(X.a.Label,{className:we.a.label},"Quality bit depth")),e.a.createElement("div",{className:we.a.ticks},[8,9,10,11,12,13,14,15,16].map((c,o,{length:m})=>{const f=`calc(${o*100/(m-1)}% + ${12-3*o}px)`,v=l===c;return e.a.createElement(e.a.Fragment,{key:c},e.a.createElement("label",{className:["small",we.a.tickLabel].join(" "),style:{left:f,visibility:v?"hidden":void 0},onClick:()=>r(a,{qualityBitDepth:c})},c),e.a.createElement("span",{className:we.a.tickMark,style:{left:f,visibility:v?"hidden":void 0}}))})),e.a.createElement(kn.a,{value:l,step:1,min:8,max:16,size:"lg",tooltip:"on",tooltipPlacement:"top",tooltipStyle:{zIndex:1020},onChange:s,ref:c=>c&&c.addEventListener("change",()=>{const o=Number(c.value);r(a,{qualityBitDepth:o})})}),e.a.createElement("div",{className:we.a.annotations},e.a.createElement("label",{className:"small"},"Faster transfer"),e.a.createElement("label",{className:"small"},"Higher quality")))}),Rn=d(32),_e=d.n(Rn),Nn=(t,a,n)=>new Promise((r,l)=>{var u=o=>{try{c(n.next(o))}catch(m){l(m)}},s=o=>{try{c(n.throw(o))}catch(m){l(m)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(u,s);c((n=n.apply(t,a)).next())});const In=e.a.memo(function({sample:a,onSampleUpdate:n,onSampleDuplicate:r,onSampleDelete:l}){const u=Object(i.useCallback)(s=>{n(a.id,({slotNumber:c})=>({slotNumber:typeof s=="function"?s(c):s}))},[a.id,n]);return e.a.createElement(Le.a,{fluid:"sm"},e.a.createElement("h2",{className:_e.a.sampleName},a.metadata.name,e.a.createElement(jn,{sampleId:a.id,name:a.metadata.name,sourceFileId:a.metadata.sourceFileId,userFileInfo:a.metadata.userFileInfo,onSampleUpdate:n,onSampleDuplicate:r,onSampleDelete:l})),e.a.createElement("p",null,e.a.createElement("strong",null,"Sampled:")," ",ot(new Date(a.metadata.dateSampled)),e.a.createElement("br",null),e.a.createElement("strong",null,"Updated:")," ",ot(new Date(a.metadata.dateModified))),e.a.createElement("h4",null,"Configure"),e.a.createElement(Dn,{sampleId:a.id,qualityBitDepth:a.metadata.qualityBitDepth,onSampleUpdate:n}),e.a.createElement(pn,{sample:a,onSampleUpdate:n}),e.a.createElement("h4",null,"Transfer"),e.a.createElement(ma,{sample:a,onSlotNumberUpdate:u}))}),jn=e.a.memo(({sampleId:t,name:a,sourceFileId:n,userFileInfo:r,onSampleUpdate:l,onSampleDuplicate:u,onSampleDelete:s})=>{const[c,o]=Object(i.useState)(!1),m=Object(i.useRef)(null),[f,v]=Object(i.useState)(a),[p,S]=Object(i.useState)(!1);Object(i.useEffect)(()=>{p&&(v(a),m.current&&m.current.select())},[p,a]);const g=f.trim(),y=Object(i.useCallback)(C=>{C.preventDefault(),g&&(l(t,{name:g}),S(!1))},[g,t,l]),w=Object(i.useCallback)(()=>u(t),[t,u]),O=Object(i.useCallback)(()=>Nn(void 0,null,function*(){const C=yield ee.getSourceFileData(n),R=new Blob([C],{type:r?r.type:"audio/x-wav"});aa(R,`${a}${r?r.ext:".wav"}`)}),[a,n,r]),M=Object(i.useCallback)(C=>{C.preventDefault(),s(t),o(!1)},[t,s]);return e.a.createElement(e.a.Fragment,null,e.a.createElement(on.a,{className:_e.a.optionsButton,variant:"secondary",align:"end",title:"Actions"},e.a.createElement(Re.a.Item,{onClick:()=>S(!0)},"Rename"),e.a.createElement(Re.a.Item,{onClick:w},"Duplicate"),e.a.createElement(Re.a.Item,{onClick:O},"Download source audio"),e.a.createElement(Re.a.Divider,null),e.a.createElement(Re.a.Item,{onClick:()=>o(!0)},"Delete")),e.a.createElement("div",{className:_e.a.actionButtons},e.a.createElement(T.a,{type:"button",variant:"outline-secondary",onClick:()=>S(!0)},"Rename"),e.a.createElement(T.a,{type:"button",variant:"outline-secondary",onClick:w},"Duplicate"),e.a.createElement(T.a,{type:"button",variant:"outline-secondary",onClick:O},"Download source audio"),e.a.createElement(T.a,{type:"button",variant:"outline-primary",onClick:()=>o(!0)},"Delete")),e.a.createElement(j.a,{onHide:()=>S(!1),show:p,"aria-labelledby":"rename-modal"},e.a.createElement(X.a,{onSubmit:y},e.a.createElement(j.a.Header,null,e.a.createElement(j.a.Title,{id:"rename-modal"},"Renaming sample")),e.a.createElement(j.a.Body,null,e.a.createElement("p",null,"Choose a new name for the sample ",e.a.createElement("strong",null,a),":"),e.a.createElement(X.a.Control,{ref:m,defaultValue:a,onChange:C=>v(C.target.value)})),e.a.createElement(j.a.Footer,null,e.a.createElement(T.a,{type:"button",variant:"light",onClick:()=>S(!1)},"Cancel"),e.a.createElement(T.a,{type:"submit",variant:"primary",disabled:!g},"Rename")))),e.a.createElement(j.a,{onHide:()=>o(!1),show:c,"aria-labelledby":"delete-modal"},e.a.createElement(X.a,{onSubmit:M},e.a.createElement(j.a.Header,{className:_e.a.deleteModalHeader},e.a.createElement(ta.a,null),e.a.createElement(j.a.Title,{id:"delete-modal"},"Deleting sample")),e.a.createElement(j.a.Body,null,e.a.createElement("p",null,"Are you sure you want to delete ",e.a.createElement("strong",null,a),"? This can't be undone.")),e.a.createElement(j.a.Footer,null,e.a.createElement(T.a,{type:"button",variant:"light",onClick:()=>o(!1)},"Cancel"),e.a.createElement(T.a,{type:"submit",variant:"primary"},"Delete")))))});var Mn=In,Ye=d(180),Bn=d(127),Ln=d.n(Bn);function Pn({sample:t}){const{wav:a,audioBuffer:n}=rt(t),{sample:{metadata:{name:r,normalize:l,trim:{frames:u}}},sourceAudioBuffer:s}=Kt(t),{monoSamples:c,waveformRef:o,peaks:m,onResize:f}=Yt(s),v=Object(i.useMemo)(()=>{if(!s)return 0;const M=Ve(c,u);return ge(M)},[s,c,u]),p=1/v,{isPlaybackActive:S,playbackProgress:g,displayedTime:y,togglePlayback:w,stopPlayback:O}=ct(n,!0);return Object(i.useEffect)(()=>O,[t,O]),e.a.createElement("div",{className:Ln.a.waveformContainer},e.a.createElement(it,{waveformRef:o,peaks:m,scaleCoefficient:l?p:1,onResize:f}),e.a.createElement(na,{isPlaybackActive:S,playbackProgress:g,displayedTime:y,downloadFilename:`${r}.volcasample.wav`,wavFile:a,togglePlayback:w}))}var Tn=Pn,Fn=Object.defineProperty,xn=Object.defineProperties,Wn=Object.getOwnPropertyDescriptors,da=Object.getOwnPropertySymbols,Hn=Object.prototype.hasOwnProperty,zn=Object.prototype.propertyIsEnumerable,fa=(t,a,n)=>a in t?Fn(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,Vn=(t,a)=>{for(var n in a||(a={}))Hn.call(a,n)&&fa(t,n,a[n]);if(da)for(var n of da(a))zn.call(a,n)&&fa(t,n,a[n]);return t},Un=(t,a)=>xn(t,Wn(a));function Qn(t){const a=t.metadata.slotNumber,[n,r]=Object(i.useState)(a);return Object(i.useEffect)(()=>{r(a)},[a]),{sample:Object(i.useMemo)(()=>t&&new ee(Un(Vn({id:t.id},t.metadata),{slotNumber:n})),[t,n]),setSlotNumber:r}}function Gn({sample:t,onSampleDuplicate:a}){const{sample:n,setSlotNumber:r}=Qn(t);return e.a.createElement(Le.a,{fluid:"sm"},e.a.createElement("h2",{className:_e.a.sampleName},n.metadata.name),e.a.createElement("p",null,e.a.createElement("strong",null,"Sampled:")," ",ot(new Date(n.metadata.dateSampled))),e.a.createElement(Ye.a,{variant:"secondary"},e.a.createElement(Ye.a.Heading,null,"This is a factory sample."),e.a.createElement("p",null,"If you want to trim the audio or adjust quality before transferring to the volca sample,"," ",e.a.createElement("span",{className:_e.a.buttonLink},e.a.createElement(T.a,{variant:"link",onClick:()=>a(n.id)},"make a duplicate"),"."))),e.a.createElement("h4",null,"Preview"),e.a.createElement(Tn,{sample:n}),e.a.createElement("h4",null,"Transfer"),e.a.createElement(ma,{sample:n,onSlotNumberUpdate:r}))}var Kn=Gn,mt=d(129),Yn=d(181),je=d(189),Me=(t,a,n)=>new Promise((r,l)=>{var u=o=>{try{c(n.next(o))}catch(m){l(m)}},s=o=>{try{c(n.throw(o))}catch(m){l(m)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(u,s);c((n=n.apply(t,a)).next())});let pa;function dt(){const t=Tt();return pa=pa||new t(navigator.mediaDevices.getSupportedConstraints().sampleRate?{sampleRate:Te}:{})}function $n(){return Me(this,null,function*(){{const r=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!1});for(const l of r.getTracks())l.stop()}const a=(yield navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="audioinput"),n=[];for(const r of a){const l=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:r.deviceId,channelCount:2},video:!1}),u=(yield navigator.mediaDevices.enumerateDevices()).find(({deviceId:c})=>r.deviceId===c).label;let s=1;{const c=l.getAudioTracks()[0],o=c.getSettings().channelCount;o?s=o:c.getCapabilities&&(s=(c.getCapabilities().channelCount||{}).max||s)}for(const c of l.getTracks())c.stop();n.push({device:{deviceId:r.deviceId,label:u},channelsAvailable:s})}return n})}let ft;function Xn(t){return Me(this,arguments,function*({onData:a,onFinish:n}){const r=dt();ft=ft||r.audioWorklet.addModule("recorderWorkletProcessor.js"),yield ft;const l=new AudioWorkletNode(r,"recorder-worklet",{parameterData:{bufferSize:1024}});l.port.onmessage=s=>{if(s.data.eventType==="data"){const c=s.data.audioChannels;a(c)}s.data.eventType==="stop"&&n()};const u=l.parameters.get("isRecording");return u.setValueAtTime(1,r.currentTime),{recorderNode:l,stop(){u.setValueAtTime(0,r.currentTime)}}})}function Jn({channelCount:t,onData:a,onFinish:n}){const l=dt().createScriptProcessor(1024,t,t);let u=!1;return l.onaudioprocess=s=>{const c=Array(t).fill().map((o,m)=>s.inputBuffer.getChannelData(m));a(c),u&&n()},{recorderNode:l,stop(){u=!0}}}function Zn(t){return Me(this,null,function*(){return typeof AudioWorkletNode=="undefined"?Jn(t):yield Xn(t)})}function qn(t){return Me(this,arguments,function*({deviceId:a,channelCount:n,onStart:r,onUpdate:l}){const u=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:a,channelCount:n,sampleRate:Te,echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},video:!1}),s=dt(),c=s.createMediaStreamSource(u),{recorderNode:o,stop:m}=yield Zn({channelCount:n,onData:g,onFinish:C});c.connect(o),o.connect(s.destination);const f=10;r(s.sampleRate,f);const v=f*s.sampleRate;let p=0;const S=Array(n).fill([]);function g(R){let k=0;const h=[];for(let E=0;E<n;E++){const N=R[E],x=N.length,B=N.slice(0,Math.min(x,v-p));Lt(B),k||(k=B.length),h.push(B)}const _=Fa(h),A=Pt(_);S.push(A),p+=k,p>=v&&m(),l(h)}let y,w;const O=new Promise((R,k)=>{y=R,w=k});let M=!1;function C(){return Me(this,null,function*(){if(M)return;try{const h=yield new Blob(S).arrayBuffer(),_=new Float32Array(h),A=Dt()({channels:n,sampleRate:s.sampleRate,bitDepth:16,dataLength:_.byteLength}),E=new Uint8Array(A.length+_.byteLength);E.set(A),E.set(new Uint8Array(_.buffer),A.length),y(E)}catch(k){w(k)}const R=u.getTracks();for(const k of R)k.stop();o.disconnect(s.destination),c.disconnect(o),M=!0})}return{stop:m,mediaRecording:O}})}var er=d(20),se=d.n(er),Be=(t,a,n)=>new Promise((r,l)=>{var u=o=>{try{c(n.next(o))}catch(m){l(m)}},s=o=>{try{c(n.throw(o))}catch(m){l(m)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(u,s);c((n=n.apply(t,a)).next())});const tr=(()=>{const t=navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")||t.includes("mac")&&navigator.maxTouchPoints>1?"ios":t.includes("android")?"android":t.includes("mac")?"mac":t.includes("linux")?"linux":"windows"})(),va="capture_device_preference";let ha=null;function ar(t,a){const n=Object(i.useRef)(JSON.parse(localStorage.getItem(va)||"null")),[r]=Object(i.useState)(n.current),[l,u]=Object(i.useState)(ha),[s,c]=Object(i.useState)(l?"ok":"pending"),[o,m]=Object(i.useState)(null),f=Object(i.useMemo)(()=>o?o.device.deviceId:"",[o]);Object(i.useEffect)(()=>{ha=l,c("ok")},[l]);const v=Object(i.useCallback)(()=>{let I=!1;return $n().then(W=>{I||W.length&&(u(new Map(W.map(H=>[H.device.deviceId,H]))),m(H=>{if(H)return n.current=null,H;if(n.current){const te=W.find(({device:D})=>n.current.deviceId===D.deviceId);if(te)return te}return n.current=null,W[0]}))}).catch(W=>{if(!I){if(W instanceof DOMException){if(W.name==="NotAllowedError"){c("denied");return}if(W.name==="NotFoundError"){c("unavailable");return}}throw W}}),()=>{I=!0}},[]),[p,S]=Object(i.useState)(1);Object(i.useEffect)(()=>{const I=l&&l.get(f);I&&(n.current&&n.current.deviceId===I.device.deviceId&&n.current.channelCount<=I.channelsAvailable?S(n.current.channelCount):S(I.channelsAvailable),n.current=null)},[l,f]),Object(i.useEffect)(()=>{o&&localStorage.setItem(va,JSON.stringify({deviceId:o.device.deviceId,channelCount:p,label:o.device.label}))},[o,p]);const[g,y]=Object(i.useState)("ready"),[w,O]=Object(i.useState)(""),[M,C]=Object(i.useState)(!1);Object(i.useEffect)(()=>{g!=="ready"&&C(!1)},[g]);const R=Object(i.useCallback)(()=>{C(!1)},[]),[k,h]=Object(i.useState)({fn(I){}});Object(i.useEffect)(()=>k.fn,[k]);const[_,A]=Object(i.useState)(1/0),[E,N]=Object(i.useState)(0),x=Object(i.useCallback)(()=>Be(this,null,function*(){let I=!1;const W=(P,z)=>qn({deviceId:P,channelCount:z,onStart:(ae,ne)=>{const $=ne*ae;A(ae),N($),y("capturing")},onUpdate:t}),H=n.current,{mediaRecording:te,stop:D}=yield H?(()=>Be(this,null,function*(){try{return W(H.deviceId,H.channelCount)}catch(P){if(P instanceof DOMException&&P.name==="NotFoundError")return W(f,p);throw P}}))():W(f,p);h({fn(P){D(),P&&(I=!0)}});let Y;try{Y=yield te}catch(P){O(String(P)),y("error");return}if(I)y("ready");else{y("finalizing");const P=yield a(Y);I||(y("ready"),P==="silent"&&C(!0))}}),[f,p,t,a]),B=Object(i.useCallback)(I=>{if(I.target.files&&I.target.files.length){const W=I.target.files[0];W.arrayBuffer().then(H=>Be(this,null,function*(){const te=new Uint8Array(H);let D;try{D=yield De(te)}catch(P){alert("Unsupported audio format detected");return}if(D.length>10*D.sampleRate){alert("Please select an audio file no more than 10 seconds long");return}y("finalizing");const Y=yield a(te,W);y("ready"),Y==="silent"&&C(!0)}))}},[a]);return{captureDevices:l,accessState:s,selectedCaptureDevice:o,selectedChannelCount:p,captureDeviceFromStorage:r,captureState:g,recordingError:w,showSilenceWarning:M,sampleRate:_,maxSamples:E,refreshCaptureDevices:v,setSelectedCaptureDevice:m,setSelectedChannelCount:S,beginRecording:x,stopRecording:k.fn,importFile:B,dismissSilenceWarning:R}}const pt=3;function nr({canvas:t,peaks:a,drawUntil:n,scaleCoefficient:r}){const l="#fff",u=t.getContext("2d");u.imageSmoothingEnabled=!1;const{width:s,height:c}=t;u.clearRect(0,0,s,c),u.fillStyle=l;for(let o=0;o<n&&o<a.length;o++){const m=a[o],f=c*m,v=Math.max(Math.round(r*f),2);u.fillRect(o*pt,c-v,pt-1,v)}}function rr({onRecordFinish:t}){const a=Object(i.useRef)(null),n=Object(i.useRef)(0),r=Object(i.useRef)(new Float32Array),l=Object(i.useRef)(0),u=Object(i.useRef)([]),s=Object(i.useRef)(1/0),c=Object(i.useRef)(0),[o,m]=Object(i.useState)(0),f=Object(i.useCallback)(D=>Be(this,null,function*(){const Y=n.current,P=r.current,z=u.current;if(z.push(D),c.current+=D[0].length,m(Math.floor(c.current/s.current)),z.reduce((ne,[{length:$}])=>ne+$,0)>=Y){const ne=yield Promise.all(D.map((le,V)=>z.reduce((G,Z)=>[...G,Z[V]],[])).map(le=>Be(this,null,function*(){const V=yield new Blob(le).arrayBuffer();return new Float32Array(V)}))),$=ne.map(le=>ge(new Float32Array(le.buffer,0,Y)));P[l.current++]=Math.max(...$),nr({canvas:a.current,peaks:P,drawUntil:l.current,scaleCoefficient:.3}),u.current=[ne.map(le=>le.slice(Y))]}}),[]),{captureDevices:v,accessState:p,selectedCaptureDevice:S,selectedChannelCount:g,captureDeviceFromStorage:y,captureState:w,recordingError:O,showSilenceWarning:M,maxSamples:C,sampleRate:R,refreshCaptureDevices:k,setSelectedCaptureDevice:h,setSelectedChannelCount:_,beginRecording:A,stopRecording:E,importFile:N,dismissSilenceWarning:x}=ar(f,t);s.current=R,Object(i.useEffect)(()=>{const D=a.current;D&&(D.width=D.offsetWidth,D.height=D.offsetHeight)},[p]),Object(i.useLayoutEffect)(()=>{const D=a.current;!D||(w!=="finalizing"&&D.getContext("2d").clearRect(0,0,D.width,D.height),w==="capturing"&&C&&(n.current=Math.floor(pt*C/a.current.width),r.current=new Float32Array(Math.floor(C/n.current)),l.current=0,u.current=[],s.current=1/0,c.current=0,m(0)))},[C,w]);const[B,I]=Object(i.useState)(!1);Object(i.useEffect)(()=>{B&&k()},[B,k]);const W=S?g:y?y.channelCount:g,[H,te]=Object(i.useState)(!1);return e.a.createElement(Le.a,{fluid:"sm",className:se.a.container},p==="denied"?e.a.createElement("p",null,"Looks like you didn't grant access to your audio input device. Please give Volca Sampler access, then"," ",e.a.createElement(T.a,{type:"button",variant:"secondary",onClick:k},"try again")):p==="unavailable"?e.a.createElement("p",null,"Volca Sampler couldn't find any audio input devices. Please connect one, then"," ",e.a.createElement(T.a,{type:"button",variant:"secondary",onClick:k},"try again")):e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",null,"Send a new sound to your volca sample!"),M&&e.a.createElement("div",{className:se.a.alertContainer},e.a.createElement(Ye.a,{dismissible:!0,variant:"warning",onClose:x},e.a.createElement(Ye.a.Heading,null,"Your recording was totally silent."),e.a.createElement("p",null,"Check the ",e.a.createElement("strong",null,"Audio input settings")," and your connections, then try again."))),e.a.createElement(T.a,{id:"record-button",className:se.a.recordButton,type:"button",variant:"primary",size:"lg",onClick:w==="capturing"?()=>E():A,disabled:w==="finalizing"},e.a.createElement("canvas",{ref:a}),e.a.createElement("span",{className:se.a.mainText},["capturing","finalizing"].includes(w)?"Finished recording":"Start recording"),["capturing","finalizing"].includes(w)&&e.a.createElement("span",{className:se.a.timeRecorded},"0:",String(o).padStart(2,"0"))),w==="error"&&O&&e.a.createElement("p",null,"Recording error: ",O)||null,["capturing","finalizing"].includes(w)?e.a.createElement(e.a.Fragment,null,e.a.createElement(T.a,{size:"sm",type:"button",variant:"secondary",onClick:()=>E(!0)},"Cancel")):e.a.createElement(e.a.Fragment,null,e.a.createElement(fe.a,{activeKey:B?"audioInput":"nothing"},e.a.createElement(fe.a.Item,{eventKey:"audioInput"},e.a.createElement(fe.a.Header,{className:se.a.audioInputHeader,onClick:()=>I(D=>!D)},e.a.createElement("div",null,e.a.createElement("span",null,"Audio input settings"),(S||y)&&e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"small"},e.a.createElement("strong",null,"Capture device:")," ",S?S.device.label||S.device.deviceId:y?y.label:""),e.a.createElement("p",{className:"small"},e.a.createElement("strong",null,"Input channels:")," ",W===1?"Mono":"Stereo")))),e.a.createElement(fe.a.Body,null,e.a.createElement(X.a.Group,null,e.a.createElement(X.a.Label,null,"Capture device"),e.a.createElement(X.a.Select,{value:S?S.device.deviceId:y?y.deviceId:"",onChange:D=>v&&p==="ok"&&h(v.get(D.target.value)||null)},v&&p==="ok"?[...v].map(([D,{device:Y}])=>e.a.createElement("option",{key:D,value:D},Y.label||D)):y?e.a.createElement("option",{value:y.deviceId,disabled:!0},y.label||y.deviceId):e.a.createElement("option",{value:"",disabled:!0},"Loading devices..."))),e.a.createElement(X.a.Group,null,e.a.createElement(X.a.Label,null,"Input channels"),e.a.createElement(mt.a,{variant:"pills",activeKey:W,onSelect:D=>_(Number(D))},[1,2].map(D=>e.a.createElement(mt.a.Item,{key:D},e.a.createElement(mt.a.Link,{as:"button",className:se.a.channelOption,eventKey:D,disabled:W!==D&&(S?S.channelsAvailable:1)<D},D===1?"Mono":"Stereo"))))),e.a.createElement("p",{className:["small",se.a.stereoExplanation].join(" ")},"Stereo input is summed to mono.")))),e.a.createElement(T.a,{variant:"link",onClick:()=>te(!0)},"Want to record your device's audio output?"))),!["capturing","finalizing"].includes(w)&&e.a.createElement(T.a,{className:se.a.importFileButton,type:"button",variant:"secondary",onClick:D=>{const Y=D.currentTarget.querySelector("input");Y&&D.target!==Y&&Y.click()}},"Or import an audio file",e.a.createElement("input",{hidden:!0,type:"file",accept:"audio/*,video/*,.wav,.mp3,.ogg",onChange:N})),e.a.createElement(j.a,{show:H,"aria-labelledby":"system-record-modal",onHide:()=>te(!1)},e.a.createElement(j.a.Header,null,e.a.createElement(j.a.Title,{id:"system-record-modal"},"Recording audio playing on your device")),e.a.createElement(j.a.Body,null,e.a.createElement(Yn.a,{defaultActiveKey:tr,className:se.a.osTabs},e.a.createElement(je.a,{eventKey:"windows",title:"Windows"},e.a.createElement("p",null,"Windows has a built-in feature for capturing system audio, but it needs to be enabled."),e.a.createElement("p",null,"TODO")),e.a.createElement(je.a,{eventKey:"mac",title:"Mac"},e.a.createElement("p",null,"The easiest way to capture system audio on macOS is to install a free app called"," ",e.a.createElement("a",{href:"https://github.com/kyleneideck/BackgroundMusic/blob/master/README.md",target:"_blank",rel:"noreferrer"},"Background Music"),". Make sure you download the"," ",e.a.createElement("a",{href:"https://github.com/kyleneideck/BackgroundMusic/releases/tag/0.4.0-SNAPSHOT-b38f6dd",target:"_blank",rel:"noreferrer"},"4.0.0-SNAPSHOT")," ","version, as version 3 doesn't seem to work well with Volca Sampler."),e.a.createElement("p",null,"Background Music also allows audio level management for different apps and prevents apps from playing audio on top of one another."),e.a.createElement("p",null,"Once Background Music has been installed, you can select the"," ",e.a.createElement("strong",null,"Background Music (Virtual)")," capture device from Volca Sampler's ",e.a.createElement("strong",null,"Audio input settings"),".")),e.a.createElement(je.a,{eventKey:"linux",title:"Linux"},e.a.createElement("p",null,"Assuming you have PulseAudio installed on your system, you can run this command to create an audio input device called"," ",e.a.createElement("strong",null,"System_Output"),":"),e.a.createElement("pre",null,e.a.createElement("code",null,`pactl \\
  load-module module-remap-source \\
  master="$( \\
    pactl list \\
    | grep -A2 '^Source #' \\
    | grep 'Name: .*\\.monitor$' \\
    | awk '{print $NF}' \\
    | tail -n1 \\
  )" \\
  source_name=systemout_monitor \\
  source_properties=device.description=System_Output`)),e.a.createElement("p",null,"Once the ",e.a.createElement("strong",null,"System_Output")," capture device has been created, you can select it from Volca Sampler's"," ",e.a.createElement("strong",null,"Audio input settings"),"."),e.a.createElement("p",null,"Note that the audio input device will ",e.a.createElement("strong",null,"not")," ","persist after reboot, so if you want it to always be available, you'll need to add the above command into a bash profile file like ",e.a.createElement("code",null,"~/.bashrc"),".")),e.a.createElement(je.a,{eventKey:"ios",title:"iOS"},e.a.createElement("p",null,`To capture system audio on iOS you'll need to record a screencapture video. There's no "audio only" option. This is OK, since you can import a video file into Volca Sampler, and just the audio will be extracted.`),e.a.createElement("p",null,"First you'll need to go into ",e.a.createElement("strong",null,"Settings"),", select"," ",e.a.createElement("strong",null,"Control Panel"),", and hit the"," ",e.a.createElement("strong",null,'"+"')," button next to"," ",e.a.createElement("strong",null,"Screen Recording"),", which can be found under the"," ",e.a.createElement("strong",null,"More Controls")," list. If"," ",e.a.createElement("strong",null,"Screen Recording")," is already listed under"," ",e.a.createElement("strong",null,"Included Controls"),", you can skip this step."),e.a.createElement("p",null,"Next, once you are ready to record, swipe down from the top and tap the ",e.a.createElement("strong",null,"Screen Recording")," button which will now appear in the ",e.a.createElement("strong",null,"Control Panel")," menu.")),e.a.createElement(je.a,{eventKey:"android",title:"Android"},e.a.createElement("p",null,"Options for recording system audio on Android are a bit limited, and some apps won't allow you to record their audio (Google Chrome and Spotify, for example, block audio capture by other apps). Other apps work fine."),e.a.createElement("p",null,"With that caveat, the best option is to install"," ",e.a.createElement("a",{href:"https://play.google.com/store/apps/details?id=io.sbaud.stereomix",target:"_blank",rel:"noreferrer"},"StereoMix Recorder"),"."),e.a.createElement("p",null,"You won't be able to record directly into Volca Sampler. Instead, you can use StereoMix Recorder to record an audio file, make sure it's trimmed down to less than 10 seconds, and import the file into Volca Sampler.")))),e.a.createElement(j.a.Footer,null,e.a.createElement(T.a,{type:"button",variant:"primary",onClick:()=>te(!1)},"Close"))))}var or=rr,lr=d(39),Ce=d.n(lr),cr=e.a.memo(function(){const[a,n]=Object(i.useState)(!1);return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:Ce.a.footer},e.a.createElement("p",null,e.a.createElement("strong",null,"Volca Sampler")," is an app created by"," ",e.a.createElement("a",{href:"https://benwiley.org",target:"_blank",rel:"noreferrer"},"Ben Wiley"),"."),e.a.createElement("p",null,e.a.createElement("strong",null,"volca sample")," is a trademark of"," ",e.a.createElement("strong",null,"KORG Inc."),", who is not affiliated with this app."),e.a.createElement("p",null,"The source code can be found on"," ",e.a.createElement("a",{href:"https://github.com/benwiley4000/volca-sampler",target:"_blank",rel:"noreferrer"},"GitHub"),"."),e.a.createElement(T.a,{type:"button",variant:"link",onClick:()=>n(!0)},"FAQ / Licenses")),e.a.createElement(j.a,{show:a,"aria-labelledby":"faq-modal",onHide:()=>n(!1)},e.a.createElement(j.a.Header,null,e.a.createElement(j.a.Title,{id:"faq-modal"},"About Volca Sampler")),e.a.createElement(j.a.Body,null,e.a.createElement("p",null,"This app relies on the open-source"," ",e.a.createElement("a",{href:"https://github.com/korginc/volcasample",target:"_blank",rel:"noreferrer"},"SYRO")," ","library published by ",e.a.createElement("strong",null,"KORG Inc."),", which encodes audio data to be sent to the ",e.a.createElement("strong",null,"volca sample"),"."),e.a.createElement("h3",null,"FAQ"),e.a.createElement("div",{className:Ce.a.qAndA},e.a.createElement("p",null,e.a.createElement("strong",null,"Q: What platforms are supported?")),e.a.createElement("p",null,"A: Anything that can run a modern web browser with a headphone output should work (PC, Mac, Linux, Android, iOS).")),e.a.createElement("div",{className:Ce.a.qAndA},e.a.createElement("p",null,e.a.createElement("strong",null,"Q: Is this compatible with the volca sample2?")),e.a.createElement("p",null,"A: Yes, but only the stereo cable connection is supported. There are no plans for supporting the USB connection.")),e.a.createElement("div",{className:Ce.a.qAndA},e.a.createElement("p",null,e.a.createElement("strong",null,"Q: Where will my samples be uploaded?")),e.a.createElement("p",null,"A: Nowhere. Everything is kept on your device, in your web browser's application files. SYRO (the code that converts your samples into something the volca sample can understand) is actually running inside your web browser.")),e.a.createElement("div",{className:Ce.a.qAndA},e.a.createElement("p",null,e.a.createElement("strong",null,"Q: Can I export my samples to another device?")),e.a.createElement("p",null,"A: You can download the audio for any sample (either the source audio or the optimized audio with your settings applied), but we don't currently support any type of bulk export of your samples and configurations. Some type of peer-to-peer syncing support might be coming in the near future if there's interest from users.")),e.a.createElement("div",{className:Ce.a.qAndA},e.a.createElement("p",null,e.a.createElement("strong",null,"Q: Where can I contact you?")),e.a.createElement("p",null,"A:"," ",e.a.createElement("a",{href:"mailto:therealbenwiley@gmail.com?subject=Volca Sampler"},"Email")," ","to get in touch with me personally, or"," ",e.a.createElement("a",{href:"https://github.com/benwiley4000/volca-sampler/issues",target:"_blank",rel:"noreferrer"},"GitHub")," ","to file an issue with this app.")),e.a.createElement("h3",null,"Licenses"),e.a.createElement("h5",null,"SYRO"),e.a.createElement("p",null,"Copyright (c) 2014, KORG Inc. All rights reserved."),e.a.createElement("p",null,"Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:"),e.a.createElement("p",null,"Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer."),e.a.createElement("p",null,"Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution."),e.a.createElement("p",null,"Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission."),e.a.createElement("p",null,'THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.')),e.a.createElement(j.a.Footer,null,e.a.createElement(T.a,{type:"button",variant:"primary",onClick:()=>n(!1)},"Close"))))});const ya=["Cool","Dope","Far-out","Chill","Wicked","Bomb","Superb","Choice","Exquisite","Righteous","Dank","Alright","Very Good","Ice Cold","Sick","Juicy","Gnarly","Grainy","Most-excellent","Fortuitous","Bodacious","Tubular","Fresh"],Ea=["Sample","Cut","Quotation","Extract","Sound","Noise","Clip"];function ir(){const t=ya[Math.floor(Math.random()*ya.length)],a=Ea[Math.floor(Math.random()*Ea.length)];return`${t} ${a}`}var sr=d(105),vt=d.n(sr),ur=(t,a,n)=>new Promise((r,l)=>{var u=o=>{try{c(n.next(o))}catch(m){l(m)}},s=o=>{try{c(n.throw(o))}catch(m){l(m)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(u,s);c((n=n.apply(t,a)).next())});const ht="focused_sample_id";function mr(){const[t,a]=Object(i.useState)(new Map),[n,r]=Object(i.useState)(new Map),l=Object(i.useMemo)(()=>new Map([...t,...n]),[t,n]);Object(i.useEffect)(()=>{Ba().then(r).catch(console.error)},[]);const u=sessionStorage.getItem(ht),[s,c]=Object(i.useState)(u&&typeof u=="string"?u:null);Object(i.useEffect)(()=>{s?sessionStorage.setItem(ht,s):sessionStorage.removeItem(ht)},[s]);const[o,m]=Object(i.useState)(!0);Object(i.useEffect)(()=>{ee.getAllFromStorage().then(h=>{a(_=>new Map([..._,...h.map(A=>[A.id,A])]))}).finally(()=>{m(!1)})},[]);const f=Object(i.useCallback)((h,_)=>ur(this,null,function*(){const A=yield De(h),E=[0,0],N=yield lt(A,E);if([...N.positive,...N.negative].every(H=>H===0))return"silent";const x=yield Ia(h);let B="",I="";if(_){const H=_.name.lastIndexOf(".");H>0?(B=_.name.slice(0,H),I=_.name.slice(H)):B=_.name}else B=ir();const W=new ee.Mutable({name:B,sourceFileId:x,trim:{frames:E,waveformPeaks:N},userFileInfo:_&&{type:_.type,ext:I}});return yield W.persist(),a(H=>new Map([[W.id,W],...H])),c(W.id),"saved"}),[]),v=Object(i.useCallback)((h,_)=>{a(A=>{const E=A.get(h);if(E&&E instanceof ee.Mutable){const N=E.update(_);if(N!==E)return new Map(A).set(E.id,N)}return A})},[]),p=Object(i.useRef)(l);p.current=l;const S=Object(i.useCallback)(h=>{const _=p.current.get(h);if(_){const A=_.duplicate();a(E=>new Map([[A.id,A],...E])),c(A.id)}},[]),g=Object(i.useRef)(t);g.current=t;const y=Object(i.useCallback)(h=>{const _=g.current,A=_.get(h);if(A&&A instanceof ee.Mutable){A.remove();let E=null,N=!1;for(const[,x]of _){if(N){E=x.id;break}if(x.id===h){if(!E){N=!0;continue}break}E=x.id}c(E),a(x=>{const B=new Map(x);return B.delete(A.id),B})}},[]),[w,O]=Object(i.useState)(!1),M=Object(i.useCallback)(h=>{c(h),O(!1)},[]),C=Object(i.useCallback)(()=>O(!0),[]),R=Object(i.useCallback)(()=>c(null),[]),k=s?l.get(s):null;return e.a.createElement("div",{className:vt.a.app},e.a.createElement(Ca,{onMenuOpen:C,onHeaderClick:R}),e.a.createElement(rn,{open:w,loading:o,focusedSampleId:s,userSamples:t,factorySamples:n,setOpen:O,onSampleSelect:M}),e.a.createElement("div",{className:vt.a.persistentSidebar},e.a.createElement(qt,{visible:!0,loading:o,focusedSampleId:s,userSamples:t,factorySamples:n,onSampleSelect:M})),e.a.createElement("div",{className:vt.a.mainLayout},k?k instanceof ee.Mutable?e.a.createElement(Mn,{sample:k,onSampleUpdate:v,onSampleDuplicate:S,onSampleDelete:y}):e.a.createElement(Kn,{sample:k,onSampleDuplicate:S}):null,!s&&e.a.createElement(or,{onRecordFinish:f}),(!s||k)&&e.a.createElement(cr,null)))}var dr=mr,fr=t=>{t&&t instanceof Function&&d.e(3).then(d.bind(null,190)).then(({getCLS:a,getFID:n,getFCP:r,getLCP:l,getTTFB:u})=>{a(t),n(t),r(t),l(t),u(t)})};Blob.prototype.arrayBuffer||(Blob.prototype.arrayBuffer=function(){return new Response(this).arrayBuffer()}),typeof TouchEvent=="undefined"&&(window.TouchEvent=class extends Event{}),wa.a.render(e.a.createElement(e.a.StrictMode,null,e.a.createElement(Wa,null,e.a.createElement(dr,null))),document.getElementById("root")),fr()},20:function(L,Q,d){L.exports={"form-switch":"SampleRecord_form-switch__q05a7","form-check-input":"SampleRecord_form-check-input__2QPKW","nav-pills":"SampleRecord_nav-pills__13Twr","nav-item":"SampleRecord_nav-item__2ev6Y","nav-link":"SampleRecord_nav-link__2-Nbr",active:"SampleRecord_active__15Zfs",modal:"SampleRecord_modal__38Mx7","modal-dialog":"SampleRecord_modal-dialog__3j_d9","modal-content":"SampleRecord_modal-content__1rv-K","modal-body":"SampleRecord_modal-body__3BRoG",container:"SampleRecord_container__3bdq5",audioInputHeader:"SampleRecord_audioInputHeader__1Prbd",channelOption:"SampleRecord_channelOption__31f9w",stereoExplanation:"SampleRecord_stereoExplanation__3SWiA",alertContainer:"SampleRecord_alertContainer__vjGNP",recordButton:"SampleRecord_recordButton__3R-KX",mainText:"SampleRecord_mainText__2dca6",timeRecorded:"SampleRecord_timeRecorded__3FGTe",importFileButton:"SampleRecord_importFileButton__3Zl2W",osTabs:"SampleRecord_osTabs__1CZdV"}},23:function(L,Q,d){L.exports={playbackOverlay:"WaveformPlayback_playbackOverlay__Er0Rh",playbackActive:"WaveformPlayback_playbackActive__1IHxg",playback:"WaveformPlayback_playback__2heRw",playbackButtonContainer:"WaveformPlayback_playbackButtonContainer__Lhahe",downloadButton:"WaveformPlayback_downloadButton__2s-L5"}},24:function(L,Q,d){L.exports={"form-switch":"Header_form-switch__7m8-P","form-check-input":"Header_form-check-input__3V7ik","nav-pills":"Header_nav-pills__1-obW","nav-item":"Header_nav-item__7_0FE","nav-link":"Header_nav-link__1QKsk",active:"Header_active__1pE38",modal:"Header_modal__3A4xt","modal-dialog":"Header_modal-dialog__3oG5V","modal-content":"Header_modal-content__JA7jP","modal-body":"Header_modal-body__32J1e",titleBar:"Header_titleBar__3BLa-",menuIcon:"Header_menuIcon__swn7p",title:"Header_title__R3bRx",titleText:"Header_titleText__3e5ME",titleR:"Header_titleR__3QRgv",titleStarburst:"Header_titleStarburst__1oLYP",titleGraphic:"Header_titleGraphic__3S89F",tagline:"Header_tagline__6mYkP"}},25:function(L,Q,d){L.exports={"form-switch":"SlotNumberInput_form-switch__39Wtl","form-check-input":"SlotNumberInput_form-check-input__oNf4Z","nav-pills":"SlotNumberInput_nav-pills__1RDi_","nav-item":"SlotNumberInput_nav-item__CuVVe","nav-link":"SlotNumberInput_nav-link__1C3wo",active:"SlotNumberInput_active__2zN4D",modal:"SlotNumberInput_modal__25tRB","modal-dialog":"SlotNumberInput_modal-dialog__1vyjC","modal-content":"SlotNumberInput_modal-content__cz3DI","modal-body":"SlotNumberInput_modal-body__ZzZE0",slotNumberRow:"SlotNumberInput_slotNumberRow__kQwOw",slotNumberContainer:"SlotNumberInput_slotNumberContainer__1q7P1",arrowControls:"SlotNumberInput_arrowControls__1LPAC",slotNumber:"SlotNumberInput_slotNumber__GC-i7",digitBlinkEffect:"SlotNumberInput_digitBlinkEffect__1_u8n",point:"SlotNumberInput_point__3pJD3",warning:"SlotNumberInput_warning__3NAeN"}},27:function(L,Q,d){L.exports={"form-switch":"SampleList_form-switch__17ijL","form-check-input":"SampleList_form-check-input__3yTwH","nav-pills":"SampleList_nav-pills__DLID5","nav-item":"SampleList_nav-item__2lSgQ","nav-link":"SampleList_nav-link__sUmO0",active:"SampleList_active__4LCL3",modal:"SampleList_modal__J3ctB","modal-dialog":"SampleList_modal-dialog__3VaNW","modal-content":"SampleList_modal-content__1R10B","modal-body":"SampleList_modal-body__1INLi",waveformContainer:"SampleList_waveformContainer__2xxew",playbackActive:"SampleList_playbackActive__jKTC1",listItem:"SampleList_listItem__1w0uC",sampleTitle:"SampleList_sampleTitle__QV9QT",playbackButton:"SampleList_playbackButton__j3RJ-",emptyListMessage:"SampleList_emptyListMessage__3ji4v"}},32:function(L,Q,d){L.exports={"form-switch":"SampleDetail_form-switch__31CS2","form-check-input":"SampleDetail_form-check-input__1NWgi","nav-pills":"SampleDetail_nav-pills__1brjk","nav-item":"SampleDetail_nav-item__24L50","nav-link":"SampleDetail_nav-link__V6FsG",active:"SampleDetail_active__3mnV-",modal:"SampleDetail_modal__1w1ts","modal-dialog":"SampleDetail_modal-dialog__3hbcz","modal-content":"SampleDetail_modal-content__14DW-","modal-body":"SampleDetail_modal-body__2T5wL",sampleName:"SampleDetail_sampleName__1iNn9",optionsButton:"SampleDetail_optionsButton__k0UjV",actionButtons:"SampleDetail_actionButtons__nTnTP",deleteModalHeader:"SampleDetail_deleteModalHeader__3DiKA",normalizeControlWrapper:"SampleDetail_normalizeControlWrapper__1yc_t",slotNumber:"SampleDetail_slotNumber__3sgS6",point:"SampleDetail_point__3d7qL"}},33:function(L,Q,d){L.exports={sidebar:"SampleMenu_sidebar__T0T00",newSampleButton:"SampleMenu_newSampleButton__1VGxr",search:"SampleMenu_search__2EscQ",offcanvasBody:"SampleMenu_offcanvasBody__1rgj6",listGroup:"SampleMenu_listGroup__IWtv7",accordion:"SampleMenu_accordion__1Igxo",accordionItem:"SampleMenu_accordionItem__1GO98",accordionBody:"SampleMenu_accordionBody__yBt0g"}},38:function(L,Q,d){L.exports={"form-switch":"QualityBitDepthControl_form-switch__3nCZi","form-check-input":"QualityBitDepthControl_form-check-input__2KgZ8","nav-pills":"QualityBitDepthControl_nav-pills__lvlTW","nav-item":"QualityBitDepthControl_nav-item__MdYNK","nav-link":"QualityBitDepthControl_nav-link__2ZJvk",active:"QualityBitDepthControl_active__1J60r",modal:"QualityBitDepthControl_modal__18Jly","modal-dialog":"QualityBitDepthControl_modal-dialog__24Z0E","modal-content":"QualityBitDepthControl_modal-content__22dUY","modal-body":"QualityBitDepthControl_modal-body__3QfIn",qualityBitDepthWrapper:"QualityBitDepthControl_qualityBitDepthWrapper__2qLOe",label:"QualityBitDepthControl_label___ohmN",ticks:"QualityBitDepthControl_ticks__1u5GH",tickLabel:"QualityBitDepthControl_tickLabel__2jXRm",tickMark:"QualityBitDepthControl_tickMark__24xm0",annotations:"QualityBitDepthControl_annotations__3mXj2"}},39:function(L,Q,d){L.exports={footer:"Footer_footer__yR_13",qAndA:"Footer_qAndA__bDlJB"}},65:function(L,Q,d){L.exports={"form-switch":"VolcaTransferControl_form-switch__1ZS81","form-check-input":"VolcaTransferControl_form-check-input__REQsM","nav-pills":"VolcaTransferControl_nav-pills__8dM77","nav-item":"VolcaTransferControl_nav-item__1lZOI","nav-link":"VolcaTransferControl_nav-link__3vJ08",active:"VolcaTransferControl_active__39Z84",modal:"VolcaTransferControl_modal__2ltkP","modal-dialog":"VolcaTransferControl_modal-dialog__oCJNH","modal-content":"VolcaTransferControl_modal-content__2DCx8","modal-body":"VolcaTransferControl_modal-body__3hAAt",transferInfo:"VolcaTransferControl_transferInfo__2pr1v",transferButton:"VolcaTransferControl_transferButton__11MBQ",preTransferModal:"VolcaTransferControl_preTransferModal__fLiiV",progressAnnotation:"VolcaTransferControl_progressAnnotation__2zJ9A"}},9:function(L,Q,d){L.exports={"form-switch":"WaveformEdit_form-switch__2DZid","form-check-input":"WaveformEdit_form-check-input__2TImp","nav-pills":"WaveformEdit_nav-pills__3uv7V","nav-item":"WaveformEdit_nav-item__1Cy-X","nav-link":"WaveformEdit_nav-link__rjUB_",active:"WaveformEdit_active__3qc2K",modal:"WaveformEdit_modal__18zXt","modal-dialog":"WaveformEdit_modal-dialog__3Bo89","modal-content":"WaveformEdit_modal-content___UGgZ","modal-body":"WaveformEdit_modal-body__33fKo",waveformAdjacentControls:"WaveformEdit_waveformAdjacentControls__12b8z",waveformContainer:"WaveformEdit_waveformContainer__Qq3MI",cursor:"WaveformEdit_cursor__1Ntb3",trim:"WaveformEdit_trim__1GV76",playbackActive:"WaveformEdit_playbackActive__hTwgX",bar:"WaveformEdit_bar__1KFgt",handle:"WaveformEdit_handle__23NoG",time:"WaveformEdit_time__YX5rg",left:"WaveformEdit_left__3Jfpn",right:"WaveformEdit_right__35CjW",waveformOverlay:"WaveformEdit_waveformOverlay__3oZfw"}}},[[170,1,2]]]);

//# sourceMappingURL=main.d78e99ff.chunk.js.map