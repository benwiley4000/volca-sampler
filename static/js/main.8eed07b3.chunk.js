(this["webpackJsonpvolca-sampler"]=this["webpackJsonpvolca-sampler"]||[]).push([[0],{19:function(e){e.exports=JSON.parse('[{"name":"Kick 1","sourceFileId":"/factory-samples/00 Kick 1.wav","id":"674c0b49-9b56-4f86-a422-03bc6f3596e9","slotNumber":0,"dateSampled":1412121600000},{"name":"Kick 2","sourceFileId":"/factory-samples/01 Kick 2.wav","id":"d04126c9-639f-4577-81ae-c9d423ce2301","slotNumber":1,"dateSampled":1412121600000},{"name":"Kick 3","sourceFileId":"/factory-samples/02 Kick 3.wav","id":"8acc8b27-6712-4923-b5dc-2d4e05bf4570","slotNumber":2,"dateSampled":1412121600000},{"name":"Kick 4","sourceFileId":"/factory-samples/03 Kick 4.wav","id":"195873d4-fb05-45ae-b19c-70637fa83eac","slotNumber":3,"dateSampled":1412121600000},{"name":"Kick 5","sourceFileId":"/factory-samples/04 Kick 5.wav","id":"63be9e7e-8529-4b1e-91e5-6ca4f1231013","slotNumber":4,"dateSampled":1412121600000},{"name":"Kick 6","sourceFileId":"/factory-samples/05 Kick 6.wav","id":"728799b3-c6e0-4186-8841-fe00d98fd67a","slotNumber":5,"dateSampled":1412121600000},{"name":"Kick 7","sourceFileId":"/factory-samples/06 Kick 7.wav","id":"17b37b2b-3630-4d9b-bf32-9efd805330de","slotNumber":6,"dateSampled":1412121600000},{"name":"Kick 8","sourceFileId":"/factory-samples/07 Kick 8.wav","id":"7c0145ec-c7e7-4ab9-b6d6-59a703a9f06d","slotNumber":7,"dateSampled":1412121600000},{"name":"Kick 9","sourceFileId":"/factory-samples/08 Kick 9.wav","id":"e9bc7f89-8b7a-4da0-9f20-c4f817c95b1e","slotNumber":8,"dateSampled":1412121600000},{"name":"Kick 10","sourceFileId":"/factory-samples/09 Kick 10.wav","id":"e37943db-0060-48a0-a384-2c3212d522a8","slotNumber":9,"dateSampled":1412121600000},{"name":"Snare 1","sourceFileId":"/factory-samples/10 Snare 1.wav","id":"2e4ffebc-cc2d-4aa7-90b5-95416038dca9","slotNumber":10,"dateSampled":1412121600000},{"name":"Snare 2","sourceFileId":"/factory-samples/11 Snare 2.wav","id":"a4c72f41-920b-4b40-a1e5-d017e95d4124","slotNumber":11,"dateSampled":1412121600000},{"name":"Snare 3","sourceFileId":"/factory-samples/12 Snare 3.wav","id":"b58c7d3f-9be0-431c-9a5d-2a501644db23","slotNumber":12,"dateSampled":1412121600000},{"name":"Snare 4","sourceFileId":"/factory-samples/13 Snare 4.wav","id":"17a95762-fe48-48dc-a9fc-15341be23a61","slotNumber":13,"dateSampled":1412121600000},{"name":"Snare 5","sourceFileId":"/factory-samples/14 Snare 5.wav","id":"a54bb1f8-b869-4528-bc14-ed2798c217b6","slotNumber":14,"dateSampled":1412121600000},{"name":"Snare 6","sourceFileId":"/factory-samples/15 Snare 6.wav","id":"f3c668ad-bb01-4906-aadd-875ac9241ec3","slotNumber":15,"dateSampled":1412121600000},{"name":"Snare 7","sourceFileId":"/factory-samples/16 Snare 7.wav","id":"b7c3796d-8ab1-45c1-a87c-84a50995245f","slotNumber":16,"dateSampled":1412121600000},{"name":"Snare 8","sourceFileId":"/factory-samples/17 Snare 8.wav","id":"79ad9fca-3d6b-426f-919c-de7b8c61a48f","slotNumber":17,"dateSampled":1412121600000},{"name":"Snare 9","sourceFileId":"/factory-samples/18 Snare 9.wav","id":"1543519d-76b3-420d-963c-34412bb216ea","slotNumber":18,"dateSampled":1412121600000},{"name":"Snare 10","sourceFileId":"/factory-samples/19 Snare 10.wav","id":"15e7ca6d-d2f1-46ff-892a-7f2db29eafb5","slotNumber":19,"dateSampled":1412121600000},{"name":"Snare 11","sourceFileId":"/factory-samples/20 Snare 11.wav","id":"13f7e51c-6056-446a-9c19-5f160da195ca","slotNumber":20,"dateSampled":1412121600000},{"name":"Snare 12","sourceFileId":"/factory-samples/21 Snare 12.wav","id":"9492caba-2718-4be3-9a2d-1ebb383453c4","slotNumber":21,"dateSampled":1412121600000},{"name":"Clap 1","sourceFileId":"/factory-samples/22 Clap 1.wav","id":"daedf4eb-a8aa-413d-bdaf-718b917dcd04","slotNumber":22,"dateSampled":1412121600000},{"name":"Clap 2","sourceFileId":"/factory-samples/23 Clap 2.wav","id":"cf514145-abf7-4b45-acb0-54490562499b","slotNumber":23,"dateSampled":1412121600000},{"name":"Clap 3","sourceFileId":"/factory-samples/24 Clap 3.wav","id":"a1f39f29-4c13-43ba-9226-21ab01797af0","slotNumber":24,"dateSampled":1412121600000},{"name":"Clap 4","sourceFileId":"/factory-samples/25 Clap 4.wav","id":"9f9e05bf-74f0-40e9-aecc-63d25ccd3747","slotNumber":25,"dateSampled":1412121600000},{"name":"Clap 5","sourceFileId":"/factory-samples/26 Clap 5.wav","id":"f222b3b0-2863-4d7b-ba54-5476e44eda48","slotNumber":26,"dateSampled":1412121600000},{"name":"Clap 6","sourceFileId":"/factory-samples/27 Clap 6.wav","id":"708b133c-c5df-4130-8718-0cc4c2403a4a","slotNumber":27,"dateSampled":1412121600000},{"name":"Clap 7","sourceFileId":"/factory-samples/28 Clap 7.wav","id":"f8ffe081-5d8a-470c-bd55-98adb7b69841","slotNumber":28,"dateSampled":1412121600000},{"name":"Clap 8","sourceFileId":"/factory-samples/29 Clap 8.wav","id":"11d520f7-8345-40c4-ba25-d9c91a97451d","slotNumber":29,"dateSampled":1412121600000},{"name":"Hihat 1","sourceFileId":"/factory-samples/30 Hihat 1.wav","id":"0736ceaf-0c54-4b2f-b54c-25eb6c62a89d","slotNumber":30,"dateSampled":1412121600000},{"name":"Hihat 2","sourceFileId":"/factory-samples/31 Hihat 2.wav","id":"af6a1b14-66d8-4aa6-a37e-93db0a8dba0f","slotNumber":31,"dateSampled":1412121600000},{"name":"Hihat 3","sourceFileId":"/factory-samples/32 Hihat 3.wav","id":"343586fd-e5c1-4fc4-97a7-935feaf4c57f","slotNumber":32,"dateSampled":1412121600000},{"name":"Hihat 4","sourceFileId":"/factory-samples/33 Hihat 4.wav","id":"d5305d0d-37d6-4b94-8ce8-2b7af93b9b0f","slotNumber":33,"dateSampled":1412121600000},{"name":"Hihat 5","sourceFileId":"/factory-samples/34 Hihat 5.wav","id":"0745de06-1e97-4901-bc94-e16bb1457335","slotNumber":34,"dateSampled":1412121600000},{"name":"Hihat 6","sourceFileId":"/factory-samples/35 Hihat 6.wav","id":"85f33cec-cac7-4e23-b202-b1d309503c7b","slotNumber":35,"dateSampled":1412121600000},{"name":"Hihat 7","sourceFileId":"/factory-samples/36 Hihat 7.wav","id":"9be1ede4-d827-43cd-901a-c3a2d7641862","slotNumber":36,"dateSampled":1412121600000},{"name":"Hihat 8","sourceFileId":"/factory-samples/37 Hihat 8.wav","id":"ffb997b7-e7a8-4641-91e2-2e30ee540184","slotNumber":37,"dateSampled":1412121600000},{"name":"Hihat 9","sourceFileId":"/factory-samples/38 Hihat 9.wav","id":"1fdba9e9-1a49-4369-862b-3365da315b8a","slotNumber":38,"dateSampled":1412121600000},{"name":"Hihat 10","sourceFileId":"/factory-samples/39 Hihat 10.wav","id":"cf2d322c-0ef0-42d3-909b-5e13c06a0830","slotNumber":39,"dateSampled":1412121600000},{"name":"Crash","sourceFileId":"/factory-samples/40 Crash.wav","id":"7413762c-1469-4285-943e-1c51c12694ee","slotNumber":40,"dateSampled":1412121600000},{"name":"Ride","sourceFileId":"/factory-samples/41 Ride.wav","id":"135bc122-dd1a-445a-a8f4-00d493bc77b1","slotNumber":41,"dateSampled":1412121600000},{"name":"Swoosh","sourceFileId":"/factory-samples/42 Swoosh.wav","id":"47f82612-ac7b-4ec9-94d3-92c2abadeca9","slotNumber":42,"dateSampled":1412121600000},{"name":"SynthRim","sourceFileId":"/factory-samples/43 SynthRim.wav","id":"0dde4fcf-9ad4-4e62-80d0-9c297f4b9a3f","slotNumber":43,"dateSampled":1412121600000},{"name":"SynthTom 1","sourceFileId":"/factory-samples/44 SynthTom 1.wav","id":"2d66d78e-c28d-4dbb-b13f-6bd6acf5b1e7","slotNumber":44,"dateSampled":1412121600000},{"name":"SynthTom 2","sourceFileId":"/factory-samples/45 SynthTom 2.wav","id":"94fca74f-fbfb-4345-a18f-3f136afd5336","slotNumber":45,"dateSampled":1412121600000},{"name":"SynthTom 3","sourceFileId":"/factory-samples/46 SynthTom 3.wav","id":"676aa9e2-438c-4ef5-b2a0-2eb0daa28f29","slotNumber":46,"dateSampled":1412121600000},{"name":"SynthTom 4","sourceFileId":"/factory-samples/47 SynthTom 4.wav","id":"eec1fe3b-e414-4b5c-9391-840c080c620a","slotNumber":47,"dateSampled":1412121600000},{"name":"Tom 1","sourceFileId":"/factory-samples/48 Tom 1.wav","id":"149536bb-6f01-4212-a331-7880ff273ad6","slotNumber":48,"dateSampled":1412121600000},{"name":"Tom 2","sourceFileId":"/factory-samples/49 Tom 2.wav","id":"28199438-1200-4e93-aa76-aa274120c478","slotNumber":49,"dateSampled":1412121600000},{"name":"SynthCow","sourceFileId":"/factory-samples/50 SynthCow.wav","id":"031af0c9-d02f-4deb-bda6-627e25b47959","slotNumber":50,"dateSampled":1412121600000},{"name":"Bongo","sourceFileId":"/factory-samples/51 Bongo.wav","id":"1fe1ba0b-9183-4327-8f43-766b69b04eb9","slotNumber":51,"dateSampled":1412121600000},{"name":"DoncaClaves","sourceFileId":"/factory-samples/52 DoncaClaves.wav","id":"edd2dee1-9a54-4f8e-b9b7-9ecfde191a52","slotNumber":52,"dateSampled":1412121600000},{"name":"SynthShaker","sourceFileId":"/factory-samples/53 SynthShaker.wav","id":"3b20b2b5-c220-4f57-8b40-1eb93417c90d","slotNumber":53,"dateSampled":1412121600000},{"name":"Tambourine","sourceFileId":"/factory-samples/54 Tambourine.wav","id":"a16dea7c-25aa-4ba5-98d3-4d723c5ab59d","slotNumber":54,"dateSampled":1412121600000},{"name":"Cowbell","sourceFileId":"/factory-samples/55 Cowbell.wav","id":"963d006a-4673-43a8-b8ce-167d127cb524","slotNumber":55,"dateSampled":1412121600000},{"name":"DoncaSConga","sourceFileId":"/factory-samples/56 DoncaSConga.wav","id":"7112d02a-7084-4959-9f97-d7636de5b984","slotNumber":56,"dateSampled":1412121600000},{"name":"DoncaLBongo","sourceFileId":"/factory-samples/57 DoncaLBongo.wav","id":"33563087-8b03-41ec-881c-8d94ad224a07","slotNumber":57,"dateSampled":1412121600000},{"name":"SynthPerc","sourceFileId":"/factory-samples/58 SynthPerc.wav","id":"c5280095-99b4-4b8a-ab8a-c50c89df7485","slotNumber":58,"dateSampled":1412121600000},{"name":"WhiteNoise","sourceFileId":"/factory-samples/59 WhiteNoise.wav","id":"299af12e-b028-441d-ad26-8cc286b0dbf0","slotNumber":59,"dateSampled":1412121600000},{"name":"SynthHit 1","sourceFileId":"/factory-samples/60 SynthHit 1.wav","id":"6dcc045f-3165-4c70-9d14-7e95ebd271c0","slotNumber":60,"dateSampled":1412121600000},{"name":"SynthHit 2","sourceFileId":"/factory-samples/61 SynthHit 2.wav","id":"4a788daf-90be-4eec-8ce0-7d839798072e","slotNumber":61,"dateSampled":1412121600000},{"name":"SynthHit 3","sourceFileId":"/factory-samples/62 SynthHit 3.wav","id":"e2bac4cf-b4e0-424d-87c2-9bdc0395f3f3","slotNumber":62,"dateSampled":1412121600000},{"name":"SynthHit 4","sourceFileId":"/factory-samples/63 SynthHit 4.wav","id":"9a27ac71-8f54-4a32-8fb5-a83b25be76c8","slotNumber":63,"dateSampled":1412121600000},{"name":"SynthHit 5","sourceFileId":"/factory-samples/64 SynthHit 5.wav","id":"9784441b-06da-425e-a7b7-95994e77517e","slotNumber":64,"dateSampled":1412121600000},{"name":"SynthHit 6","sourceFileId":"/factory-samples/65 SynthHit 6.wav","id":"b4f6b321-176c-46f8-ad08-3c231d219711","slotNumber":65,"dateSampled":1412121600000},{"name":"SynthHit 7","sourceFileId":"/factory-samples/66 SynthHit 7.wav","id":"595e50ca-bc55-4c1a-9c00-67b5be711a5d","slotNumber":66,"dateSampled":1412121600000},{"name":"SynthHit 8","sourceFileId":"/factory-samples/67 SynthHit 8.wav","id":"7510c919-37fd-4ac5-9679-56d10d7cc769","slotNumber":67,"dateSampled":1412121600000},{"name":"SynthHit 9","sourceFileId":"/factory-samples/68 SynthHit 9.wav","id":"54c53b7a-0917-4955-9edc-98a55000bc15","slotNumber":68,"dateSampled":1412121600000},{"name":"SynthHit 10","sourceFileId":"/factory-samples/69 SynthHit 10.wav","id":"bfe483a2-511e-49ef-bec5-a0d6054ef7e6","slotNumber":69,"dateSampled":1412121600000},{"name":"PianoChord 1","sourceFileId":"/factory-samples/70 PianoChord 1.wav","id":"4a412fff-1037-4b62-bc3c-6a9c792ca6ee","slotNumber":70,"dateSampled":1412121600000},{"name":"PianoChord 2","sourceFileId":"/factory-samples/71 PianoChord 2.wav","id":"9549856b-4b78-45be-b9d1-011bb6331172","slotNumber":71,"dateSampled":1412121600000},{"name":"PianoChord 3","sourceFileId":"/factory-samples/72 PianoChord 3.wav","id":"02e65257-9e44-4d3b-b2eb-76e28ffc3582","slotNumber":72,"dateSampled":1412121600000},{"name":"EPChord 1","sourceFileId":"/factory-samples/73 EPChord 1.wav","id":"552a2757-603c-4787-9b5e-a8d85de7eb63","slotNumber":73,"dateSampled":1412121600000},{"name":"EPChord 2","sourceFileId":"/factory-samples/74 EPChord 2.wav","id":"13ef1c2d-a8fc-4916-bfd3-4ed9a99edc7b","slotNumber":74,"dateSampled":1412121600000},{"name":"EPChord 3","sourceFileId":"/factory-samples/75 EPChord 3.wav","id":"34cd91af-ae29-4113-9756-d0d02b584929","slotNumber":75,"dateSampled":1412121600000},{"name":"EPChord 4","sourceFileId":"/factory-samples/76 EPChord 4.wav","id":"6e1aa299-2f1b-4fde-9fee-5c5949c6ede5","slotNumber":76,"dateSampled":1412121600000},{"name":"OrganChord","sourceFileId":"/factory-samples/77 OrganChord.wav","id":"69aff7ae-c19c-4643-a984-79e5bec72d06","slotNumber":77,"dateSampled":1412121600000},{"name":"BandHit 1","sourceFileId":"/factory-samples/78 BandHit 1.wav","id":"f1a09a44-30e2-451d-88c7-2a70a2d87378","slotNumber":78,"dateSampled":1412121600000},{"name":"BandHit 2","sourceFileId":"/factory-samples/79 BandHit 2.wav","id":"90020385-3479-4551-8354-dcd559efb80f","slotNumber":79,"dateSampled":1412121600000},{"name":"BandHit 3","sourceFileId":"/factory-samples/80 BandHit 3.wav","id":"44eaf71d-2099-468b-9528-83758d164036","slotNumber":80,"dateSampled":1412121600000},{"name":"StringsHit 1","sourceFileId":"/factory-samples/81 StringsHit 1.wav","id":"2649fd35-d87c-4cdc-84ad-c03545763c0b","slotNumber":81,"dateSampled":1412121600000},{"name":"Choir","sourceFileId":"/factory-samples/82 Choir.wav","id":"c6206ad1-2f1f-41e4-aadd-7bf59d685aea","slotNumber":82,"dateSampled":1412121600000},{"name":"GuitarHit 1","sourceFileId":"/factory-samples/83 GuitarHit 1.wav","id":"8e43279d-4324-4af2-8a46-39a6393903ca","slotNumber":83,"dateSampled":1412121600000},{"name":"GuitarHit 2","sourceFileId":"/factory-samples/84 GuitarHit 2.wav","id":"50d4e1ff-180e-4cad-b3c1-2c801f013f9e","slotNumber":84,"dateSampled":1412121600000},{"name":"KalimbaChord","sourceFileId":"/factory-samples/85 KalimbaChord.wav","id":"d1f33352-5e51-42de-b135-77f350e0c639","slotNumber":85,"dateSampled":1412121600000},{"name":"SynChord","sourceFileId":"/factory-samples/86 SynChord.wav","id":"65a60241-3392-4917-9ba9-7c2080719d9b","slotNumber":86,"dateSampled":1412121600000},{"name":"BellChord","sourceFileId":"/factory-samples/87 BellChord.wav","id":"3419b335-a772-4af1-99cc-7f3c75d83feb","slotNumber":87,"dateSampled":1412121600000},{"name":"WindChime","sourceFileId":"/factory-samples/88 WindChime.wav","id":"3ab7c545-2e53-4a97-a466-8a3f3ed8aad9","slotNumber":88,"dateSampled":1412121600000},{"name":"Airhorn","sourceFileId":"/factory-samples/89 Airhorn.wav","id":"ae736115-1905-401c-b298-df470fe00bd3","slotNumber":89,"dateSampled":1412121600000},{"name":"VocalHit 1","sourceFileId":"/factory-samples/90 VocalHit 1.wav","id":"b77622cb-542e-4b29-8bf3-8c24425c7a96","slotNumber":90,"dateSampled":1412121600000},{"name":"VocalHit 2","sourceFileId":"/factory-samples/91 VocalHit 2.wav","id":"6c05da7e-ecc8-47de-b2cd-fa1cc353b72e","slotNumber":91,"dateSampled":1412121600000},{"name":"VocalHit 3","sourceFileId":"/factory-samples/92 VocalHit 3.wav","id":"547e92d5-f8e2-4be7-8a84-1949d8cb9c46","slotNumber":92,"dateSampled":1412121600000},{"name":"VocalHit 4","sourceFileId":"/factory-samples/93 VocalHit 4.wav","id":"df4e7830-04ce-419a-bd11-a5c539758d65","slotNumber":93,"dateSampled":1412121600000},{"name":"VocalHit 5","sourceFileId":"/factory-samples/94 VocalHit 5.wav","id":"2a6386f9-9e7f-4c7e-9daa-3982c9a39c1b","slotNumber":94,"dateSampled":1412121600000},{"name":"VocalHit 6","sourceFileId":"/factory-samples/95 VocalHit 6.wav","id":"c3a623f0-cd4b-4e1d-8946-08d48cce6f3c","slotNumber":95,"dateSampled":1412121600000},{"name":"VocalHit 7","sourceFileId":"/factory-samples/96 VocalHit 7.wav","id":"3219c1d3-6a46-44c6-8f71-04575ced990d","slotNumber":96,"dateSampled":1412121600000},{"name":"VocalHit 8","sourceFileId":"/factory-samples/97 VocalHit 8.wav","id":"00e02e92-1cc9-4c09-9a3e-66f8398e9b8f","slotNumber":97,"dateSampled":1412121600000},{"name":"VocalHit 9","sourceFileId":"/factory-samples/98 VocalHit 9.wav","id":"82da24c3-6571-4117-8762-03c883b6bca9","slotNumber":98,"dateSampled":1412121600000},{"name":"Doncamatic","sourceFileId":"/factory-samples/99 Doncamatic.wav","id":"3e7868e7-8064-4a11-b050-5f78711f0e12","slotNumber":99,"dateSampled":1412121600000}]')},29:function(e,a,t){},39:function(e,a,t){"use strict";t.r(a);var r=t(2),n=t.n(r),c=t(21),i=t.n(c),d=(t(29),t(1)),o=t.n(d),s=t(3),l=t(10),u=t(6),m=t(12),f=t(7),p=t(0),b=document.createElement("style");b.innerHTML="\n.sampleList {\n  height: 100%;\n  overflow: auto;\n}\n\n.sampleListItem {\n  padding: 0.5rem;\n  border: 1px solid grey;\n  cursor: pointer;\n}\n\n.sampleListItem:not:nth-child(1) {\n  margin-top: 1rem;\n}\n  ",document.body.appendChild(b);var h=["sampleList","sampleListItem"].reduce((function(e,a){return Object(f.a)(Object(f.a)({},e),{},Object(m.a)({},a,a))}),{});var v=function(e){var a=e.samples,t=e.selectedSampleId,r=e.readonly,n=e.onNewSample,c=e.onSampleSelect;return Object(p.jsxs)("div",{className:h.sampleList,children:[Object(p.jsx)("div",{"data-disabled":r,className:h.sampleListItem,onClick:function(){return!r&&n()},children:"New Sample"}),Object(l.a)(a).map((function(e){var a=Object(u.a)(e,2),n=a[0],i=a[1];return Object(p.jsxs)("div",{className:h.sampleListItem,style:{backgroundColor:n===t?"#f3f3f3":void 0},"data-disabled":r,onClick:function(){return!r&&c(n)},children:[Object(p.jsx)("div",{children:i.metadata.name}),Object(p.jsxs)("div",{children:["Updated ",new Date(i.metadata.dateModified).toLocaleString()]})]},n)}))]})},S=t(11),y=t(22),w=t.n(y),j=t(9),g=t(8),O=t(4),x=t(5),I=t(16),F=t.n(I),N=t(41),C=t(19),k=F.a.createInstance({name:"wav_data",driver:F.a.INDEXEDDB}),D=F.a.createInstance({name:"sample_metadata",driver:F.a.INDEXEDDB});function H(e){return B.apply(this,arguments)}function B(){return(B=Object(s.a)(o.a.mark((function e(a){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(N.a)(),e.next=3,k.setItem(t,a);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M="0.1.0",R=function(){function e(a){var t=a.name,r=a.sourceFileId,n=a.id,c=void 0===n?Object(N.a)():n,i=a.slotNumber,d=void 0===i?0:i,o=a.dateSampled,s=void 0===o?Date.now():o,l=a.dateModified,u=void 0===l?s:l,m=a.useCompression,f=void 0!==m&&m,p=a.qualityBitDepth,b=void 0===p?16:p,h=a.normalize,v=void 0!==h&&h,S=a.clip,y=void 0===S?[0,0]:S;Object(O.a)(this,e),this.id=c,this.metadata={name:t,sourceFileId:r,slotNumber:d,dateSampled:s,dateModified:u,useCompression:f,qualityBitDepth:b,normalize:v,clip:y,metadataVersion:M}}return Object(x.a)(e,[{key:"duplicate",value:function(){var a=new e.Mutable(Object(f.a)(Object(f.a)({},this.metadata),{},{name:"".concat(this.metadata.name," (copy)"),dateModified:Date.now()}));return a.persist(),a}}],[{key:"cacheSourceFileData",value:function(e,a){this.sourceFileData.set(e,a),this.recentlyCachedSourceFileIds=[e].concat(Object(l.a)(this.recentlyCachedSourceFileIds.filter((function(a){return a!==e}))));var t,r=this.recentlyCachedSourceFileIds.slice(this.MAX_CACHED),n=Object(S.a)(r);try{for(n.s();!(t=n.n()).done;){var c=t.value;this.sourceFileData.delete(c)}}catch(i){n.e(i)}finally{n.f()}this.recentlyCachedSourceFileIds=this.recentlyCachedSourceFileIds.slice(0,this.MAX_CACHED)}},{key:"getSourceFileData",value:function(){var e=Object(s.a)(o.a.mark((function e(a){var t,r,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.sourceFileData.get(a))){e.next=3;break}return e.abrupt("return",t);case 3:if(!a.includes(".")){e.next=12;break}return e.next=6,fetch(a);case 6:return e.next=8,e.sent.arrayBuffer();case 8:return r=e.sent,n=new Uint8Array(r),this.cacheSourceFileData(a,n),e.abrupt("return",n);case 12:return e.next=14,k.getItem(a);case 14:if(!(c=e.sent)){e.next=20;break}if(!(c instanceof Uint8Array)){e.next=19;break}return this.cacheSourceFileData(a,c),e.abrupt("return",c);case 19:return e.abrupt("return",Promise.reject("Source data is of unexpected type"));case 20:return e.abrupt("return",Promise.reject("Missing source data"));case 21:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"getAllFromStorage",value:function(){var a=Object(s.a)(o.a.mark((function a(){var t,r,n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=new Map,a.next=3,D.iterate((function(e,a){e&&e.metadataVersion===M?t.set(a,e):console.warn('Found metadata "'.concat(e.name||a," with unhandled version ").concat(e.metadataVersion,'"; ignoring.'))}));case 3:return a.next=5,k.keys();case 5:return r=a.sent.concat(C.map((function(e){return e.sourceFileId}))),n=Object(l.a)(t).map((function(a){var t=Object(u.a)(a,2),n=t[0],c=t[1],i=c.sourceFileId;return r.includes(i)?new e.Mutable(Object(f.a)({id:n},c)):(console.warn('Found metadata "'.concat(c.name||n,'" with missing data "').concat(i,"; ignoring.")),null)})).filter(Boolean).sort((function(e,a){return a.metadata.dateModified-e.metadata.dateModified})),a.abrupt("return",n);case 8:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()}]),e}();R.Mutable=function(e){Object(j.a)(t,e);var a=Object(g.a)(t);function t(e){var r;return Object(O.a)(this,t),r=a.call(this,e),setTimeout(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.keys();case 2:e.sent.includes(r.id)||console.warn("Expected sample metadata container ".concat(r.id," to be persisted"));case 4:case"end":return e.stop()}}),e)})))),r}return Object(x.a)(t,[{key:"persist",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.setItem(this.id,this.metadata);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(e){var a=this.id,t=this.metadata,r=Object(f.a)(Object(f.a)(Object(f.a)({},t),e),{},{dateModified:Date.now()}),n=new R.Mutable(Object(f.a)({id:a},r));return n.persist(),n}},{key:"remove",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.removeItem(this.id);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(R),R.sourceFileData=new Map,R.recentlyCachedSourceFileIds=[],R.MAX_CACHED=10;var A,E=new Map(C.map((function(e){return[e.id,new R(e)]}))),P=31250;function L(e){return T.apply(this,arguments)}function T(){return(T=Object(s.a)(o.a.mark((function e(a){var t,r,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.sampleRate!==P){e.next=2;break}return e.abrupt("return",a);case 2:return t=P/a.sampleRate,r=new OfflineAudioContext(a.numberOfChannels,a.length*t,P),(n=r.createBufferSource()).buffer=a,n.connect(r.destination),n.start(),e.next=10,r.startRendering();case 10:return c=e.sent,e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,a){var t=4*a[0],r=e.length-a[0]-a[1];return new Float32Array(e.buffer,t,r)}function K(e,a){for(var t=e.length-a[0]-a[1],r=new Float32Array(t),n=Array(e.numberOfChannels).fill().map((function(t,r){return V(e.getChannelData(r),a)})),c=0;c<t;c++){for(var i=0,d=0;d<n.length;d++)i+=n[d][c];i/=n.length,r[c]=i}return r}function U(e){var a,t=0,r=Object(S.a)(e);try{for(r.s();!(a=r.n()).done;){var n=a.value,c=Math.abs(n);c>t&&(t=c)}}catch(i){r.e(i)}finally{r.f()}return t}function z(e,a){if(1!==a)for(var t=0;t<e.length;t++)e[t]*=a}function _(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=a/U(e);z(e,t)}function W(e,a){for(var t=Math.pow(2,a-1),r=0;r<e.length;r++)e[r]=Math.round(e[r]*t)/t}function q(e){for(var a=new Int16Array(e.length),t=Math.pow(2,15),r=0;r<e.length;r++)a[r]=1===e[r]?t-1:t*e[r];return a}function G(){return A=A||new AudioContext({sampleRate:P})}function J(e){return X.apply(this,arguments)}function X(){return(X=Object(s.a)(o.a.mark((function e(a){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Uint8Array(a),e.next=3,new Promise((function(e,a){G().decodeAudioData(t.buffer,e,a)}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(s.a)(o.a.mark((function e(a){var t,r,n,c,i,d,s,l,u,m,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.metadata,r=t.qualityBitDepth,n=t.normalize,c=t.clip,!(r<8||r>16)&&Number.isInteger(r)){e.next=3;break}throw new Error("Expected bit depth between 8 and 16. Received: ".concat(r));case 3:return e.t0=L,e.t1=J,e.next=7,R.getSourceFileData(a.metadata.sourceFileId);case 7:return e.t2=e.sent,e.next=10,(0,e.t1)(e.t2);case 10:return e.t3=e.sent,e.next=13,(0,e.t0)(e.t3);case 13:return i=e.sent,d=c.map((function(e){return Math.round(e*i.sampleRate)})),s=1===i.numberOfChannels?V(i.getChannelData(0),d):K(i,d),n&&_(s,n),r<16&&W(s,r),l=q(s),u=2*l.length,m=w()({channels:1,sampleRate:i.sampleRate,bitDepth:16,dataLength:u}),(f=new Uint8Array(m.length+u)).set(m),f.set(new Uint8Array(l.buffer),m.length),e.abrupt("return",{data:f,sampleRate:16});case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z,$=function(e){var a=e.sample,t=(e.onSetClip,e.onSetNormalize),n=Object(r.useState)(new Float32Array),c=Object(u.a)(n,2),i=c[0],d=c[1];Object(r.useEffect)((function(){var e=!1;return Object(s.a)(o.a.mark((function t(){var r,n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,R.getSourceFileData(a.metadata.sourceFileId);case 4:if(r=t.sent,!e){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,J(r);case 9:if(n=t.sent,!e){t.next=12;break}return t.abrupt("return");case 12:c=K(n,[0,0]),d(c);case 14:case"end":return t.stop()}}),t)})))(),function(){e=!0}}),[a.metadata.sourceFileId]);var l=Object(r.useRef)(null),m=Object(r.useMemo)((function(){var e=l.current&&l.current.offsetWidth;if(!e||!i.length)return{positive:new Float32Array,negative:new Float32Array};var a=Math.floor(6*i.length/e);return function(e,a){for(var t=new Float32Array(Math.floor(e.length/a)),r=new Float32Array(Math.floor(e.length/a)),n=0;n<t.length;n++){var c,i=new Float32Array(e.buffer,n*a*4,a),d=0,o=0,s=Object(S.a)(i);try{for(s.s();!(c=s.n()).done;){var l=c.value;l>d&&(d=l),l<o&&(o=l)}}catch(u){s.e(u)}finally{s.f()}t[n]=d,r[n]=o}return{positive:t,negative:r}}(i,a)}),[i]),f=Object(r.useMemo)((function(){return Math.max(U(m.negative),U(m.positive))}),[m]),b=(a.metadata.normalize||f)/f;return Object(p.jsxs)("div",{className:"waveform",style:{width:"100%",height:"100%",position:"relative",overflow:"hidden"},ref:l,children:[Object(p.jsx)("div",{className:"positive",style:{width:"100%",height:"67%",display:"flex",alignItems:"flex-end"},children:Object(p.jsx)("div",{className:"scaled",style:{width:"100%",height:"".concat(100*b,"%"),willChange:"height",display:"flex",alignItems:"flex-end"},children:[].map.call(m.positive,(function(e,a){return Object(p.jsx)("div",{className:"bar",style:{width:6,height:"".concat(100*e,"%"),paddingRight:1},children:Object(p.jsx)("div",{className:"bar_inner",style:{backgroundColor:"red",height:"100%"}})},a)}))})}),Object(p.jsx)("div",{className:"negative",style:{width:"100%",height:"33%",display:"flex",alignItems:"flex-start"},children:Object(p.jsx)("div",{className:"scaled",style:{width:"100%",height:"".concat(100*b,"%"),willChange:"height",display:"flex",alignItems:"flex-start"},children:[].map.call(m.negative,(function(e,a){return Object(p.jsx)("div",{className:"bar",style:{width:6,height:"".concat(100*-e,"%"),paddingRight:1},children:Object(p.jsx)("div",{className:"bar_inner",style:{backgroundColor:"darkred",height:"100%"}})},a)}))})}),Object(p.jsx)("input",{style:{position:"absolute",top:0,left:0},type:"range",value:a.metadata.normalize||void 0,min:.1,max:1,step:.01,onChange:function(e){return t(Number(e.target.value))}})]})};function ee(){return ae.apply(this,arguments)}function ae(){return(ae=Object(s.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"===typeof window.CREATE_SYRO_BINDINGS){e.next=2;break}return e.abrupt("return",Promise.reject("Expected CREATE_SYRO_BINDINGS global function to exist"));case 2:return e.next=4,window.CREATE_SYRO_BINDINGS();case 4:return a=e.sent,e.abrupt("return",Z=Z||new Promise((function(e,t){var r;try{r={prepareSampleBufferFromWavData:a.cwrap("prepareSampleBufferFromWavData","number",["array","number","number","number"]),prepareSampleBufferFrom16BitPcmData:a.cwrap("prepareSampleBufferFrom16BitPcmData","number",["array","number","number","number","number"]),startSampleBufferFrom16BitPcmData:a.cwrap("startSampleBufferFrom16BitPcmData","number",["array","number","number","number","number"]),iterateSampleBuffer:a.cwrap("iterateSampleBuffer",null,["number"]),getSampleBufferPointer:a.cwrap("getSampleBufferPointer","number",[]),getSampleBufferSize:a.cwrap("getSampleBufferSize","number",[]),getSampleBufferProgress:a.cwrap("getSampleBufferProgress","number",[]),freeSampleBuffer:a.cwrap("freeSampleBuffer",null,[]),heap8Buffer:function(){return a.HEAP8.buffer}}}catch(n){return void t(n)}e(r)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,a){return re.apply(this,arguments)}function re(){return(re=Object(s.a)(o.a.mark((function e(a,t){var r,n,c,i,d,s,l,u,m,f,p,b,h,v,S,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return r=e.sent,n=r.startSampleBufferFrom16BitPcmData,c=r.iterateSampleBuffer,i=r.getSampleBufferPointer,d=r.getSampleBufferSize,s=r.getSampleBufferProgress,l=r.freeSampleBuffer,u=r.heap8Buffer,e.next=12,Y(a);case 12:if(m=e.sent,f=m.data,p=m.sampleRate,b=f.slice(44),!n(b,b.length,p,a.metadata.slotNumber,a.metadata.qualityBitDepth,a.metadata.useCompression?1:0)){e.next=19;break}return e.abrupt("return",Promise.reject("Failed to prepare sample buffer"));case 19:return h=i(),v=d(),S=new Uint8Array(u(),h,v),t(s()/v),e.next=25,new Promise((function(e,a){var r=20,n=1e5;requestAnimationFrame((function i(){if(s()>=v)return void e();var d=10/r,o=Math.max(Math.round(n*d),1),l=performance.now();try{c(o)}catch(u){return void a(u)}0===(r=performance.now()-l)&&(r=.5);n=o,t(s()/v),requestAnimationFrame(i)}))}));case 25:return y=new Uint8Array(S),l(),e.abrupt("return",y);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=document.createElement("style");ne.innerHTML="\n.sampleDetail {\n  padding-left: 2rem;\n}\n  ",document.body.appendChild(ne);var ce=["sampleDetail"].reduce((function(e,a){return Object(f.a)(Object(f.a)({},e),{},Object(m.a)({},a,a))}),{});function ie(e){var a=new Blob([e],{type:"audio/x-wav"}),t=document.createElement("audio");t.src=URL.createObjectURL(a),t.play(),t.onended=function(){URL.revokeObjectURL(t.src)}}var de,oe,se=function(e){var a=e.sample,t=e.onSampleUpdate,r=e.onSampleDuplicate,n=e.onSampleDelete;return a?Object(p.jsxs)("div",{className:ce.sampleDetail,children:[Object(p.jsx)("h3",{children:a.metadata.name}),Object(p.jsx)("button",{type:"button",onClick:function(){return r(a.id)},children:"Duplicate"}),Object(p.jsx)("button",{type:"button",onClick:function(){window.confirm("Are you sure you want to delete ".concat(a.metadata.name,"?"))&&n(a.id)},children:"Remove"}),Object(p.jsxs)("h4",{children:["Last edited: ",new Date(a.metadata.dateModified).toLocaleString()]}),Object(p.jsxs)("h4",{children:["Sampled: ",new Date(a.metadata.dateSampled).toLocaleString()]}),Object(p.jsxs)("label",{children:[Object(p.jsx)("h4",{children:"Clip start"}),Object(p.jsx)("input",{type:"number",value:a.metadata.clip[0],step:.1,min:0,onChange:function(e){var r=Number(e.target.value);t(a.id,{clip:[r,a.metadata.clip[1]]})}})]}),Object(p.jsxs)("label",{children:[Object(p.jsx)("h4",{children:"Clip end"}),Object(p.jsx)("input",{type:"number",value:a.metadata.clip[1],step:.1,min:0,onChange:function(e){var r=Number(e.target.value);t(a.id,{clip:[a.metadata.clip[0],r]})}})]}),Object(p.jsxs)("div",{style:{height:200,backgroundColor:"#f3f3f3",maxWidth:400},children:[Object(p.jsx)($,{onSetClip:function(){return null},onSetNormalize:function(e){return t(a.id,{normalize:e})},sample:a}),Object(p.jsx)("button",{type:"button",disabled:1===a.metadata.normalize,onClick:function(){return t(a.id,{normalize:1})},children:"Normalize"}),Object(p.jsx)("button",{type:"button",disabled:!a.metadata.normalize,onClick:function(){return t(a.id,{normalize:!1})},children:"Original level"}),Object(p.jsx)("button",{type:"button",onClick:Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(a);case 2:t=e.sent,ie(t.data);case 5:case"end":return e.stop()}}),e)}))),children:"regular play"}),Object(p.jsx)("button",{type:"button",onClick:Object(s.a)(o.a.mark((function e(){var t,r,n,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(a);case 2:t=e.sent,r=t.data,n=new Blob([r],{type:"audio/x-wav"}),c=URL.createObjectURL(n),(i=document.createElement("a")).href=c,i.download="".concat(a.metadata.name,".wav"),i.style.display="none",document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(c);case 14:case"end":return e.stop()}}),e)}))),children:"download"})]}),Object(p.jsxs)("h4",{children:["Quality bit depth: ",a.metadata.qualityBitDepth]}),Object(p.jsx)("input",{type:"range",value:a.metadata.qualityBitDepth,step:1,min:8,max:16,onChange:function(e){var r=Number(e.target.value);t(a.id,{qualityBitDepth:r})}}),Object(p.jsxs)("label",{children:[Object(p.jsx)("h4",{children:"Slot number"}),Object(p.jsx)("input",{type:"number",value:a.metadata.slotNumber,step:1,min:0,max:99,onChange:function(e){var r=Number(e.target.value);t(a.id,{slotNumber:r})}})]}),Object(p.jsx)("button",{type:"button",onClick:Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te(a,console.log);case 3:ie(e.sent),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),children:"transfer to volca sample"})]}):null},le=t(24),ue=t(23);function me(){return de=de||new AudioContext(navigator.mediaDevices.getSupportedConstraints().sampleRate?{sampleRate:P}:{})}function fe(){return(fe=Object(s.a)(o.a.mark((function e(){var a,t,r,n,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:a=e.sent,t=a.filter((function(e){return"audioinput"===e.kind})),r=[],n=Object(S.a)(t),e.prev=6,i=o.a.mark((function e(){var a,t,n,i,d,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.value,e.next=3,navigator.mediaDevices.getUserMedia({audio:{deviceId:a.deviceId,channelCount:2},video:!1});case 3:return t=e.sent,e.next=6,navigator.mediaDevices.enumerateDevices();case 6:n=e.sent.find((function(e){var t=e.deviceId;return a.deviceId===t})).label,i=t.getAudioTracks().length,d=Object(S.a)(t.getTracks());try{for(d.s();!(s=d.n()).done;)s.value.stop()}catch(o){d.e(o)}finally{d.f()}r.push({device:{deviceId:a.deviceId,label:n},channelsAvailable:i});case 11:case"end":return e.stop()}}),e)})),n.s();case 9:if((c=n.n()).done){e.next=13;break}return e.delegateYield(i(),"t0",11);case 11:e.next=9;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),n.e(e.t1);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,null,[[6,15,18,21]])})))).apply(this,arguments)}function pe(e){return be.apply(this,arguments)}function be(){return(be=Object(s.a)(o.a.mark((function e(a){var t,r,n,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.onData,r=a.onFinish,n=me(),oe=oe||n.audioWorklet.addModule("/recorderWorkletProcessor.js"),e.next=5,oe;case 5:return(c=new AudioWorkletNode(n,"recorder-worklet",{parameterData:{bufferSize:1024}})).port.onmessage=function(e){if("data"===e.data.eventType){var a=e.data.audioChannels;t(a)}"stop"===e.data.eventType&&r()},(i=c.parameters.get("isRecording")).setValueAtTime(1,n.currentTime),e.abrupt("return",{recorderNode:c,stop:function(){i.setValueAtTime(0,n.currentTime)}});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){var a=e.channelCount,t=e.onData,r=e.onFinish,n=me().createScriptProcessor(1024,a,a),c=!1;return n.onaudioprocess=function(e){var n=Array(a).fill().map((function(a,t){return e.inputBuffer.getChannelData(t)}));t(n),c&&r()},{recorderNode:n,stop:function(){c=!0}}}function ve(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(s.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof AudioWorkletNode){e.next=2;break}return e.abrupt("return",he(a));case 2:return e.next=4,pe(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){return we.apply(this,arguments)}function we(){return(we=Object(s.a)(o.a.mark((function e(a){var t,r,n,c,i,d,s,l,u,m,f,p,b,h,v,y,w,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j=function(){if(!w){try{var e=p.map((function(e){var a,t=new Float32Array(e.reduce((function(e,a){return e+a.length}),0)),r=0,n=Object(S.a)(e);try{for(n.s();!(a=n.n()).done;){var c=a.value;t.set(c,r),r+=c.length}}catch(i){n.e(i)}finally{n.f()}return t})),a=new ue.a;a.fromScratch(e.length,i.sampleRate,"32f",e),h(a.toBuffer())}catch(o){v(o)}var t,r=c.getTracks(),n=Object(S.a)(r);try{for(n.s();!(t=n.n()).done;){t.value.stop()}}catch(o){n.e(o)}finally{n.f()}l.disconnect(i.destination),d.disconnect(l),w=!0}},b=function(e){for(var a=0,t=0;t<r;t++){for(var n=e[t],c=n.length,i=n.slice(0,Math.min(c,m-f)),d=0;d<i.length;d++)i[d]>1?i[d]=1:i[d]<-1&&(i[d]=-1);a||(a=i.length),p[t].push(i)}(f+=a)>=m&&(j(),u())},t=a.deviceId,r=a.channelCount,n=a.onStart,e.next=5,navigator.mediaDevices.getUserMedia({audio:{deviceId:t,channelCount:r,sampleRate:P,echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},video:!1});case 5:return c=e.sent,i=me(),d=i.createMediaStreamSource(c),e.next=10,ve({channelCount:r,onData:b,onFinish:j});case 10:return s=e.sent,l=s.recorderNode,u=s.stop,d.connect(l),l.connect(i.destination),n(),10,m=10*i.sampleRate,f=0,p=Array(r).fill([]),y=new Promise((function(e,a){h=e,v=a})),w=!1,e.abrupt("return",{stop:u,mediaRecording:y});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je=["captureState"];function ge(e){var a=e.onRecordStart,t=e.onRecordFinish,n=e.onRecordError,c=Object(r.useState)(null),i=Object(u.a)(c,2),d=i[0],l=i[1],m=Object(r.useState)(""),f=Object(u.a)(m,2),p=f[0],b=f[1];Object(r.useEffect)((function(){(function(){return fe.apply(this,arguments)})().then((function(e){e.length&&(l(new Map(e.map((function(e){return[e.device.deviceId,e]})))),b((function(a){return a||e[0].device.deviceId})))}))}),[]);var h=Object(r.useState)(1),v=Object(u.a)(h,2),S=v[0],y=v[1];Object(r.useEffect)((function(){var e=d&&d.get(p);e&&y(e.channelsAvailable)}),[d,p]);var w=Object(r.useState)(null),j=Object(u.a)(w,2),g=j[0],O=j[1];Object(r.useEffect)((function(){g&&n(g)}),[g,n]);var x=Object(r.useState)({fn:function(){}}),I=Object(u.a)(x,2),F=I[0],N=I[1],C=Object(r.useCallback)(Object(s.a)(o.a.mark((function e(){var r,n,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye({deviceId:p,channelCount:S,onStart:a});case 2:return r=e.sent,n=r.mediaRecording,c=r.stop,N({fn:c}),e.prev=6,e.next=9,n;case 9:i=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(6),O(e.t0),e.abrupt("return");case 16:t(i);case 17:case"end":return e.stop()}}),e,null,[[6,12]])}))),[p,S,a,t]);return{captureDevices:d,selectedCaptureDeviceId:p,selectedChannelCount:S,recordingError:g,setSelectedCaptureDeviceId:b,setSelectedChannelCount:y,beginRecording:C,stopRecording:F.fn}}var Oe=function(e){var a=e.captureState,t=ge(Object(le.a)(e,je)),r=t.captureDevices,n=t.selectedCaptureDeviceId,c=t.selectedChannelCount,i=(t.recordingError,t.setSelectedCaptureDeviceId),d=t.setSelectedChannelCount,o=t.beginRecording,s=t.stopRecording;return"idle"===a?null:Object(p.jsxs)("div",{style:{paddingLeft:"2rem"},children:[r?Object(p.jsxs)("div",{children:[Object(p.jsxs)("label",{children:["Capture Device",Object(p.jsx)("select",{value:n,onChange:function(e){return i(e.target.value)},children:Object(l.a)(r).map((function(e){var a=Object(u.a)(e,2),t=a[0],r=a[1].device;return Object(p.jsx)("option",{value:t,children:r.label||t},t)}))})]}),Object(p.jsxs)("label",{children:["Channel count",Object(p.jsx)("select",{value:c,onChange:function(e){return d(Number(e.target.value))},children:[1,2].map((function(e){return Object(p.jsx)("option",{value:e,disabled:!r.has(n)||r.get(n).channelsAvailable<e,children:e},e)}))})]})]}):"Loading capture devices...",Object(p.jsx)("button",{type:"button",onClick:"capturing"===a?s:o,disabled:"preparing"===a,children:["capturing","preparing"].includes(a)?"Stop":"Record"})]})},xe=document.createElement("style");xe.innerHTML="\n.volcaSampler {\n  padding: 2rem;\n  display: flex;\n  height: 100%;\n}\n\n.sampleListContainer {\n  width: 200px;\n  flex-shrink: 0;\n  padding-right: 0.5rem;\n  height: 100%;\n}\n\n.focusedSampleContainer {\n  flex-grow: 1;\n}\n\n.focusedSample {\n  padding-left: 2rem;\n}\n  ",document.body.appendChild(xe);var Ie=["volcaSampler","sampleListContainer","sampleList","sampleListItem","focusedSampleContainer","focusedSample"].reduce((function(e,a){return Object(f.a)(Object(f.a)({},e),{},Object(m.a)({},a,a))}),{});var Fe=function(){var e=Object(r.useState)(!1),a=Object(u.a)(e,2),t=a[0],n=a[1],c=Object(r.useState)(new Map),i=Object(u.a)(c,2),d=i[0],m=i[1],f=Object(r.useState)(null),b=Object(u.a)(f,2),h=b[0],S=b[1],y=Object(r.useState)(!0),w=Object(u.a)(y,2),j=(w[0],w[1]),g=Object(r.useState)("idle"),O=Object(u.a)(g,2),x=O[0],I=O[1],F=t?E:d;Object(r.useEffect)((function(){R.getAllFromStorage().then((function(e){m((function(a){return new Map([].concat(Object(l.a)(a),Object(l.a)(e.map((function(e){return[e.id,e]})))))}))})).finally((function(){j(!1)}))}),[]),Object(r.useEffect)((function(){!F.size||h&&F.has(h)||S(Object(l.a)(F.values())[0].id)}),[F,h]);var N=Object(r.useCallback)((function(){return I("capturing")}),[]),C=Object(r.useCallback)(function(){var e=Object(s.a)(o.a.mark((function e(a){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("preparing"),e.next=3,H(a);case 3:return t=e.sent,r=new R.Mutable({name:"New one",sourceFileId:t}),e.next=7,r.persist();case 7:m((function(e){return new Map([[r.id,r]].concat(Object(l.a)(e)))})),n(!1),S(r.id),I("idle");case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[]),k=Object(r.useCallback)((function(e){console.error(e),I("error")}),[]);return Object(p.jsxs)("div",{className:Ie.volcaSampler,children:[Object(p.jsxs)("select",{value:JSON.stringify(t),onChange:function(e){return n(JSON.parse(e.target.value))},children:[Object(p.jsx)("option",{value:"false",children:"Your Samples"}),Object(p.jsx)("option",{value:"true",children:"Factory Samples"})]}),Object(p.jsx)("div",{className:Ie.sampleListContainer,children:Object(p.jsx)(v,{samples:F,selectedSampleId:"idle"===x?h:null,readonly:["capturing","preparing"].includes(x),onNewSample:function(){return I("ready")},onSampleSelect:function(e){S(e),I("idle")}})}),Object(p.jsxs)("div",{className:Ie.focusedSampleContainer,children:["idle"===x&&Object(p.jsx)(se,{sample:h&&F.get(h)||null,onSampleUpdate:function(e,a){var t=F.get(e);t&&t instanceof R.Mutable&&m((function(e){return new Map(e).set(t.id,t.update(a))}))},onSampleDuplicate:function(e){var a=F.get(e);if(a){var t=a.duplicate();m((function(e){return new Map([[t.id,t]].concat(Object(l.a)(e)))})),n(!1)}},onSampleDelete:function(e){var a=F.get(e);a&&a instanceof R.Mutable&&(a.remove(),m((function(e){var t=new Map(e);return t.delete(a.id),t})))}}),Object(p.jsx)(Oe,{captureState:x,onRecordStart:N,onRecordFinish:C,onRecordError:k})]})]})},Ne=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(a){var t=a.getCLS,r=a.getFID,n=a.getFCP,c=a.getLCP,i=a.getTTFB;t(e),r(e),n(e),c(e),i(e)}))};i.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(Fe,{})}),document.getElementById("root")),Ne()}},[[39,1,2]]]);
//# sourceMappingURL=main.8eed07b3.chunk.js.map