(this["webpackJsonpvolca-sampler"]=this["webpackJsonpvolca-sampler"]||[]).push([[0],{13:function(Ie,q,I){},21:function(Ie,q,I){"use strict";I.r(q);var m=I(0),c=I.n(m),Ce=I(6),Ee=I.n(Ce),Ua=I(13),F=I(1);const Ne=F.a.div({height:"100%",overflow:"auto"}),ee=F.a.div({padding:"0.5rem",border:"1px solid grey",cursor:"pointer",backgroundColor:({$selected:e})=>e?"#f3f3f3":"unset"});function Pe({samples:e,selectedSampleId:t,readonly:a,onNewSample:r,onSampleSelect:n}){return c.a.createElement(Ne,null,c.a.createElement(ee,{"data-disabled":a,onClick:()=>!a&&r()},"New Sample"),[...e].map(([o,s])=>c.a.createElement(ee,{key:o,$selected:o===t,"data-disabled":a,onClick:()=>!a&&n(o)},c.a.createElement("div",null,s.metadata.name),c.a.createElement("div",null,"Updated ",new Date(s.metadata.dateModified).toLocaleString()))))}var Oe=Pe,De=I(7),Ae=I.n(De),ke=I(2),k=I.n(ke),ae=I(23),te=[{name:"Kick 1",sourceFileId:"/factory-samples/00 Kick 1.wav",id:"c3a5e718-93fe-45b0-aa3a-84e9344858a8",slotNumber:0,dateSampled:14121216e5},{name:"Kick 2",sourceFileId:"/factory-samples/01 Kick 2.wav",id:"c8fe6009-5c00-4eae-a7fb-372113dfefdd",slotNumber:1,dateSampled:14121216e5},{name:"Kick 3",sourceFileId:"/factory-samples/02 Kick 3.wav",id:"0c82172f-dabf-4542-b595-cf0b18780830",slotNumber:2,dateSampled:14121216e5},{name:"Kick 4",sourceFileId:"/factory-samples/03 Kick 4.wav",id:"58165a92-302a-44fe-ae6a-b124f7656c29",slotNumber:3,dateSampled:14121216e5},{name:"Kick 5",sourceFileId:"/factory-samples/04 Kick 5.wav",id:"753849ce-28d7-4fc2-88fc-936b176fc67f",slotNumber:4,dateSampled:14121216e5},{name:"Kick 6",sourceFileId:"/factory-samples/05 Kick 6.wav",id:"80224241-8842-435e-9334-f69f1e3731c5",slotNumber:5,dateSampled:14121216e5},{name:"Kick 7",sourceFileId:"/factory-samples/06 Kick 7.wav",id:"0741ff60-2985-48a6-a423-4b536473dc97",slotNumber:6,dateSampled:14121216e5},{name:"Kick 8",sourceFileId:"/factory-samples/07 Kick 8.wav",id:"5eff557a-905a-4ed1-a219-5c109295c02b",slotNumber:7,dateSampled:14121216e5},{name:"Kick 9",sourceFileId:"/factory-samples/08 Kick 9.wav",id:"9906043e-1bea-4e7a-ae12-704f55c9c683",slotNumber:8,dateSampled:14121216e5},{name:"Kick 10",sourceFileId:"/factory-samples/09 Kick 10.wav",id:"c866c6a1-55ad-4d3e-8e55-512b23320911",slotNumber:9,dateSampled:14121216e5},{name:"Snare 1",sourceFileId:"/factory-samples/10 Snare 1.wav",id:"76db6924-b2b9-46cc-b0df-6f4bf94fd49e",slotNumber:10,dateSampled:14121216e5},{name:"Snare 2",sourceFileId:"/factory-samples/11 Snare 2.wav",id:"0c48ddff-2725-4cea-a6e2-c38222d31d14",slotNumber:11,dateSampled:14121216e5},{name:"Snare 3",sourceFileId:"/factory-samples/12 Snare 3.wav",id:"bfcf4b40-8e49-4bf2-b546-99ebb7b7ba2e",slotNumber:12,dateSampled:14121216e5},{name:"Snare 4",sourceFileId:"/factory-samples/13 Snare 4.wav",id:"a5c7973c-8ed7-4094-88c0-4976c9280293",slotNumber:13,dateSampled:14121216e5},{name:"Snare 5",sourceFileId:"/factory-samples/14 Snare 5.wav",id:"9d5266f0-fbba-4192-9547-d2d3c887cb08",slotNumber:14,dateSampled:14121216e5},{name:"Snare 6",sourceFileId:"/factory-samples/15 Snare 6.wav",id:"9e29af6d-c53f-47f3-b9ec-2798519f6312",slotNumber:15,dateSampled:14121216e5},{name:"Snare 7",sourceFileId:"/factory-samples/16 Snare 7.wav",id:"3a1e2a43-8480-480d-8ba8-b5bfd95016d5",slotNumber:16,dateSampled:14121216e5},{name:"Snare 8",sourceFileId:"/factory-samples/17 Snare 8.wav",id:"e62116b9-e831-42d4-8ca9-5dd62c5d420d",slotNumber:17,dateSampled:14121216e5},{name:"Snare 9",sourceFileId:"/factory-samples/18 Snare 9.wav",id:"69a710aa-5b51-4425-978d-0e02f59d60ab",slotNumber:18,dateSampled:14121216e5},{name:"Snare 10",sourceFileId:"/factory-samples/19 Snare 10.wav",id:"3dd15272-0318-49c8-a0dc-192d197754c5",slotNumber:19,dateSampled:14121216e5},{name:"Snare 11",sourceFileId:"/factory-samples/20 Snare 11.wav",id:"ec6bb7e9-00bd-4c20-8c5e-e34f647705ef",slotNumber:20,dateSampled:14121216e5},{name:"Snare 12",sourceFileId:"/factory-samples/21 Snare 12.wav",id:"1fea35cb-6784-4043-98dc-a96bdeda47e4",slotNumber:21,dateSampled:14121216e5},{name:"Clap 1",sourceFileId:"/factory-samples/22 Clap 1.wav",id:"641659d5-9f8a-4607-a488-cedddd73e8fd",slotNumber:22,dateSampled:14121216e5},{name:"Clap 2",sourceFileId:"/factory-samples/23 Clap 2.wav",id:"fff9c3cd-1056-4efa-9ee8-ddecabbd1a4d",slotNumber:23,dateSampled:14121216e5},{name:"Clap 3",sourceFileId:"/factory-samples/24 Clap 3.wav",id:"a8803ea8-39df-4126-b4d1-b36741198477",slotNumber:24,dateSampled:14121216e5},{name:"Clap 4",sourceFileId:"/factory-samples/25 Clap 4.wav",id:"575e31e6-b96d-492f-abad-36e55e20b217",slotNumber:25,dateSampled:14121216e5},{name:"Clap 5",sourceFileId:"/factory-samples/26 Clap 5.wav",id:"8575d8ca-9da8-4b01-9cf7-46052c20d66f",slotNumber:26,dateSampled:14121216e5},{name:"Clap 6",sourceFileId:"/factory-samples/27 Clap 6.wav",id:"27137596-3081-4949-ac7b-b641b38e79e6",slotNumber:27,dateSampled:14121216e5},{name:"Clap 7",sourceFileId:"/factory-samples/28 Clap 7.wav",id:"d8039e0b-b820-4c55-bbe1-87bce0b13deb",slotNumber:28,dateSampled:14121216e5},{name:"Clap 8",sourceFileId:"/factory-samples/29 Clap 8.wav",id:"12f3b86b-df2f-45cc-b333-029ef5d38a4e",slotNumber:29,dateSampled:14121216e5},{name:"Hihat 1",sourceFileId:"/factory-samples/30 Hihat 1.wav",id:"db6b26e5-32cd-4731-9525-70cc3ab260d5",slotNumber:30,dateSampled:14121216e5},{name:"Hihat 2",sourceFileId:"/factory-samples/31 Hihat 2.wav",id:"15fe1fb5-c531-40b7-b16f-c5edf02f8e87",slotNumber:31,dateSampled:14121216e5},{name:"Hihat 3",sourceFileId:"/factory-samples/32 Hihat 3.wav",id:"89b3d573-3ce5-4e79-9bc3-3809b8fee237",slotNumber:32,dateSampled:14121216e5},{name:"Hihat 4",sourceFileId:"/factory-samples/33 Hihat 4.wav",id:"851774ee-3c0e-4735-8182-a6ded807a1a5",slotNumber:33,dateSampled:14121216e5},{name:"Hihat 5",sourceFileId:"/factory-samples/34 Hihat 5.wav",id:"798e7e2c-eeee-49ed-b1c5-b97aee3cdc1a",slotNumber:34,dateSampled:14121216e5},{name:"Hihat 6",sourceFileId:"/factory-samples/35 Hihat 6.wav",id:"cb36a1ed-7589-4414-8c90-b73b8e5e9f26",slotNumber:35,dateSampled:14121216e5},{name:"Hihat 7",sourceFileId:"/factory-samples/36 Hihat 7.wav",id:"00d13b31-ca04-4827-bf64-3694d64c10c0",slotNumber:36,dateSampled:14121216e5},{name:"Hihat 8",sourceFileId:"/factory-samples/37 Hihat 8.wav",id:"dbf8d9c8-ca04-4f52-97ec-b7657303eaf2",slotNumber:37,dateSampled:14121216e5},{name:"Hihat 9",sourceFileId:"/factory-samples/38 Hihat 9.wav",id:"d6a2e0a0-ac3f-4b16-a4f8-704b6876032d",slotNumber:38,dateSampled:14121216e5},{name:"Hihat 10",sourceFileId:"/factory-samples/39 Hihat 10.wav",id:"e4531c1b-1d67-4988-b250-0592dd55f601",slotNumber:39,dateSampled:14121216e5},{name:"Crash",sourceFileId:"/factory-samples/40 Crash.wav",id:"5061d7ce-174a-4342-96c6-a430ef6c15fa",slotNumber:40,dateSampled:14121216e5},{name:"Ride",sourceFileId:"/factory-samples/41 Ride.wav",id:"7a17b132-c1b2-481b-906c-5865e3693dd2",slotNumber:41,dateSampled:14121216e5},{name:"Swoosh",sourceFileId:"/factory-samples/42 Swoosh.wav",id:"2130a215-1d7e-40bb-880f-04f5481e1cb3",slotNumber:42,dateSampled:14121216e5},{name:"SynthRim",sourceFileId:"/factory-samples/43 SynthRim.wav",id:"53761d06-469d-471d-afee-9a58fd963a26",slotNumber:43,dateSampled:14121216e5},{name:"SynthTom 1",sourceFileId:"/factory-samples/44 SynthTom 1.wav",id:"476ff548-77e4-4a3b-89fa-96bf21efa019",slotNumber:44,dateSampled:14121216e5},{name:"SynthTom 2",sourceFileId:"/factory-samples/45 SynthTom 2.wav",id:"40f24417-76d5-4a6f-9ece-17d7af07a3e2",slotNumber:45,dateSampled:14121216e5},{name:"SynthTom 3",sourceFileId:"/factory-samples/46 SynthTom 3.wav",id:"74f32e07-0ec0-4e3e-b5c1-9f3225d99a9b",slotNumber:46,dateSampled:14121216e5},{name:"SynthTom 4",sourceFileId:"/factory-samples/47 SynthTom 4.wav",id:"44759a95-5826-4f8c-9433-6bbd229a2712",slotNumber:47,dateSampled:14121216e5},{name:"Tom 1",sourceFileId:"/factory-samples/48 Tom 1.wav",id:"a7b74a2a-525d-4dc9-8f8b-b69bdb489252",slotNumber:48,dateSampled:14121216e5},{name:"Tom 2",sourceFileId:"/factory-samples/49 Tom 2.wav",id:"4b3fbb4c-8d61-47a8-8b29-b867de7c0517",slotNumber:49,dateSampled:14121216e5},{name:"SynthCow",sourceFileId:"/factory-samples/50 SynthCow.wav",id:"0bf25365-4100-4216-8e2a-381b5993fec3",slotNumber:50,dateSampled:14121216e5},{name:"Bongo",sourceFileId:"/factory-samples/51 Bongo.wav",id:"7d941c8b-09fb-4e15-b6db-bd64140c3cca",slotNumber:51,dateSampled:14121216e5},{name:"DoncaClaves",sourceFileId:"/factory-samples/52 DoncaClaves.wav",id:"b4d17220-30eb-49c3-8922-7af750063739",slotNumber:52,dateSampled:14121216e5},{name:"SynthShaker",sourceFileId:"/factory-samples/53 SynthShaker.wav",id:"dd933f75-025f-4fd7-91f2-04721c923dd3",slotNumber:53,dateSampled:14121216e5},{name:"Tambourine",sourceFileId:"/factory-samples/54 Tambourine.wav",id:"394f6a51-2a70-45e3-bf6e-f3f90c4bfd88",slotNumber:54,dateSampled:14121216e5},{name:"Cowbell",sourceFileId:"/factory-samples/55 Cowbell.wav",id:"4edd1bad-e4e4-4d5e-b98b-9efb4075d44b",slotNumber:55,dateSampled:14121216e5},{name:"DoncaSConga",sourceFileId:"/factory-samples/56 DoncaSConga.wav",id:"7dcf2b8f-5857-4527-8bf6-59aa4c1db7b5",slotNumber:56,dateSampled:14121216e5},{name:"DoncaLBongo",sourceFileId:"/factory-samples/57 DoncaLBongo.wav",id:"ada2c20d-a8ed-4fb2-b42b-fa871e3311dc",slotNumber:57,dateSampled:14121216e5},{name:"SynthPerc",sourceFileId:"/factory-samples/58 SynthPerc.wav",id:"4c31f0c5-1469-4935-ab7a-8da41552d172",slotNumber:58,dateSampled:14121216e5},{name:"WhiteNoise",sourceFileId:"/factory-samples/59 WhiteNoise.wav",id:"b3f5b7eb-b368-4def-827d-0cf36d902ad3",slotNumber:59,dateSampled:14121216e5},{name:"SynthHit 1",sourceFileId:"/factory-samples/60 SynthHit 1.wav",id:"313f9a0a-d272-49c1-9fc3-6bb87193dc19",slotNumber:60,dateSampled:14121216e5},{name:"SynthHit 2",sourceFileId:"/factory-samples/61 SynthHit 2.wav",id:"bee629c6-912c-4a2b-b5bf-f9fdb5eb2384",slotNumber:61,dateSampled:14121216e5},{name:"SynthHit 3",sourceFileId:"/factory-samples/62 SynthHit 3.wav",id:"d03bc032-92d0-4932-9cd4-3baa3ac4ffa0",slotNumber:62,dateSampled:14121216e5},{name:"SynthHit 4",sourceFileId:"/factory-samples/63 SynthHit 4.wav",id:"7b9fad4c-746a-4efd-8941-950bacf5d9ef",slotNumber:63,dateSampled:14121216e5},{name:"SynthHit 5",sourceFileId:"/factory-samples/64 SynthHit 5.wav",id:"0935e36f-7bad-40d3-bab5-11fdcb9dfdf6",slotNumber:64,dateSampled:14121216e5},{name:"SynthHit 6",sourceFileId:"/factory-samples/65 SynthHit 6.wav",id:"626218d7-5e19-4479-9c74-7eaaf0e0eb2f",slotNumber:65,dateSampled:14121216e5},{name:"SynthHit 7",sourceFileId:"/factory-samples/66 SynthHit 7.wav",id:"e1606490-2834-4fd4-8309-4c882391b5c5",slotNumber:66,dateSampled:14121216e5},{name:"SynthHit 8",sourceFileId:"/factory-samples/67 SynthHit 8.wav",id:"f295376a-2daa-4cc0-acab-4fd464da90ff",slotNumber:67,dateSampled:14121216e5},{name:"SynthHit 9",sourceFileId:"/factory-samples/68 SynthHit 9.wav",id:"53912431-d56b-474b-9378-aa65cc28180c",slotNumber:68,dateSampled:14121216e5},{name:"SynthHit 10",sourceFileId:"/factory-samples/69 SynthHit 10.wav",id:"647142e7-8f5b-49cd-a531-849dfcb351ca",slotNumber:69,dateSampled:14121216e5},{name:"PianoChord 1",sourceFileId:"/factory-samples/70 PianoChord 1.wav",id:"62283634-ecdd-4cee-9fec-05bbe60fec29",slotNumber:70,dateSampled:14121216e5},{name:"PianoChord 2",sourceFileId:"/factory-samples/71 PianoChord 2.wav",id:"d30db2ed-2159-4455-b963-95d1be12833f",slotNumber:71,dateSampled:14121216e5},{name:"PianoChord 3",sourceFileId:"/factory-samples/72 PianoChord 3.wav",id:"856dd799-db15-454c-b5c5-03909ce12515",slotNumber:72,dateSampled:14121216e5},{name:"EPChord 1",sourceFileId:"/factory-samples/73 EPChord 1.wav",id:"5b200dd1-1798-4ac1-b34a-d3bb26222624",slotNumber:73,dateSampled:14121216e5},{name:"EPChord 2",sourceFileId:"/factory-samples/74 EPChord 2.wav",id:"3de19b05-14d8-460b-b5f7-375cc5e5bd83",slotNumber:74,dateSampled:14121216e5},{name:"EPChord 3",sourceFileId:"/factory-samples/75 EPChord 3.wav",id:"dfb27e58-5444-4eae-9b38-e0a38d52e8df",slotNumber:75,dateSampled:14121216e5},{name:"EPChord 4",sourceFileId:"/factory-samples/76 EPChord 4.wav",id:"10db774f-3a68-4c95-8d7b-b3fcc7ca13de",slotNumber:76,dateSampled:14121216e5},{name:"OrganChord",sourceFileId:"/factory-samples/77 OrganChord.wav",id:"e55a38e7-4be0-4386-980b-46bf588bbd2b",slotNumber:77,dateSampled:14121216e5},{name:"BandHit 1",sourceFileId:"/factory-samples/78 BandHit 1.wav",id:"a7bb9e34-5a9e-4a87-9a3c-70b93b384f3d",slotNumber:78,dateSampled:14121216e5},{name:"BandHit 2",sourceFileId:"/factory-samples/79 BandHit 2.wav",id:"b61beed4-ef19-45c4-b01d-8db3eafebc94",slotNumber:79,dateSampled:14121216e5},{name:"BandHit 3",sourceFileId:"/factory-samples/80 BandHit 3.wav",id:"fb6731b9-d28b-4ea9-9dc3-b99eb0ab194a",slotNumber:80,dateSampled:14121216e5},{name:"StringsHit 1",sourceFileId:"/factory-samples/81 StringsHit 1.wav",id:"cc894cfb-2308-4feb-9c7d-75813de40d4b",slotNumber:81,dateSampled:14121216e5},{name:"Choir",sourceFileId:"/factory-samples/82 Choir.wav",id:"dedc4530-f12f-4839-bbd7-76f787a2f61b",slotNumber:82,dateSampled:14121216e5},{name:"GuitarHit 1",sourceFileId:"/factory-samples/83 GuitarHit 1.wav",id:"291039b3-55b2-4201-9e92-4a26c7a1d731",slotNumber:83,dateSampled:14121216e5},{name:"GuitarHit 2",sourceFileId:"/factory-samples/84 GuitarHit 2.wav",id:"0e356fb4-cb29-4730-b33c-90cd681bbd0f",slotNumber:84,dateSampled:14121216e5},{name:"KalimbaChord",sourceFileId:"/factory-samples/85 KalimbaChord.wav",id:"f0a7ff5e-e05e-44fe-ae4f-d3aede598da5",slotNumber:85,dateSampled:14121216e5},{name:"SynChord",sourceFileId:"/factory-samples/86 SynChord.wav",id:"9aaf01df-3c7e-4b58-8fbf-384f0e5039ec",slotNumber:86,dateSampled:14121216e5},{name:"BellChord",sourceFileId:"/factory-samples/87 BellChord.wav",id:"d6e9e1b3-a1ff-4fdc-8510-7e31bc89b1fb",slotNumber:87,dateSampled:14121216e5},{name:"WindChime",sourceFileId:"/factory-samples/88 WindChime.wav",id:"815cded1-afbd-490e-8fec-2e4ba9fe460e",slotNumber:88,dateSampled:14121216e5},{name:"Airhorn",sourceFileId:"/factory-samples/89 Airhorn.wav",id:"07241689-20d1-4e8c-8bf0-e4030f16e36b",slotNumber:89,dateSampled:14121216e5},{name:"VocalHit 1",sourceFileId:"/factory-samples/90 VocalHit 1.wav",id:"d0cf3454-e12e-4123-9644-baf2737e6103",slotNumber:90,dateSampled:14121216e5},{name:"VocalHit 2",sourceFileId:"/factory-samples/91 VocalHit 2.wav",id:"8a4a7f44-de73-4e08-80d6-331705838184",slotNumber:91,dateSampled:14121216e5},{name:"VocalHit 3",sourceFileId:"/factory-samples/92 VocalHit 3.wav",id:"441f3fbf-c9ff-4319-aabd-e64ea1010951",slotNumber:92,dateSampled:14121216e5},{name:"VocalHit 4",sourceFileId:"/factory-samples/93 VocalHit 4.wav",id:"828fadbc-fda7-426e-b721-a5b35f384c87",slotNumber:93,dateSampled:14121216e5},{name:"VocalHit 5",sourceFileId:"/factory-samples/94 VocalHit 5.wav",id:"8d926dd6-7e26-44d8-a69e-a6b7aa48aa81",slotNumber:94,dateSampled:14121216e5},{name:"VocalHit 6",sourceFileId:"/factory-samples/95 VocalHit 6.wav",id:"3c0afc37-c129-42b1-80d9-2f063096c7c3",slotNumber:95,dateSampled:14121216e5},{name:"VocalHit 7",sourceFileId:"/factory-samples/96 VocalHit 7.wav",id:"5aa1a2c7-e915-43f3-9a0c-ac454a36b83b",slotNumber:96,dateSampled:14121216e5},{name:"VocalHit 8",sourceFileId:"/factory-samples/97 VocalHit 8.wav",id:"e66f6143-84a6-41cc-8330-cead0cf41bb1",slotNumber:97,dateSampled:14121216e5},{name:"VocalHit 9",sourceFileId:"/factory-samples/98 VocalHit 9.wav",id:"12c0e631-a1f9-473c-a526-3730dce26343",slotNumber:98,dateSampled:14121216e5},{name:"Doncamatic",sourceFileId:"/factory-samples/99 Doncamatic.wav",id:"1b59d21e-e140-454d-a02c-d71012669747",slotNumber:99,dateSampled:14121216e5}];const B=31250;var Be=Object.defineProperty,xe=Object.defineProperties,He=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,K=(e,t,a)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,O=(e,t)=>{for(var a in t||(t={}))re.call(t,a)&&K(e,a,t[a]);if(x)for(var a of x(t))ne.call(t,a)&&K(e,a,t[a]);return e},$=(e,t)=>xe(e,He(t)),Me=(e,t)=>{var a={};for(var r in e)re.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&x)for(var r of x(e))t.indexOf(r)<0&&ne.call(e,r)&&(a[r]=e[r]);return a},H=(e,t,a)=>(K(e,typeof t!="symbol"?t+"":t,a),a),P=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{d(a.next(l))}catch(i){n(i)}},s=l=>{try{d(a.throw(l))}catch(i){n(i)}},d=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);d((a=a.apply(e,t)).next())});const M=k.a.createInstance({name:"audio_file_data",driver:k.a.INDEXEDDB}),j=k.a.createInstance({name:"sample_metadata",driver:k.a.INDEXEDDB});function je(e){return P(this,null,function*(){const t=Object(ae.a)();return yield M.setItem(t,e),t})}const U="0.2.0",Re={"0.1.0":e=>{const t=e,{clip:a}=t,r=Me(t,["clip"]);return $(O({},r),{trimFrames:a.map(o=>Math.round(o*B)),metadataVersion:"0.2.0"})}};function Te(e){let t=e;for(;t.metadataVersion!==U;){const a=Re[e.metadataVersion];if(!a){console.warn(`Failed to properly upgrade metadata for sample "${t.name}"`),t={name:t.name,sourceFileId:t.sourceFileId,id:t.id,metadataVersion:U};break}t=a(t)}return t}const D=class{constructor({name:e,sourceFileId:t,id:a=Object(ae.a)(),userFileInfo:r=null,slotNumber:n=0,dateSampled:o=Date.now(),dateModified:s=o,useCompression:d=!0,qualityBitDepth:l=16,scaleCoefficient:i=1,trimFrames:p=[0,0]}){this.id=a,this.metadata={name:e,sourceFileId:t,userFileInfo:r,slotNumber:n,dateSampled:o,dateModified:s,useCompression:d,qualityBitDepth:l,scaleCoefficient:i,trimFrames:p,metadataVersion:U}}duplicate(){const e=new D.Mutable($(O({},this.metadata),{name:`${this.metadata.name} (copy)`,dateModified:Date.now()}));return e.persist(),e}static cacheSourceFileData(e,t){this.sourceFileData.set(e,t),this.recentlyCachedSourceFileIds=[e,...this.recentlyCachedSourceFileIds.filter(r=>r!==e)];const a=this.recentlyCachedSourceFileIds.slice(this.MAX_CACHED);for(const r of a)this.sourceFileData.delete(r);this.recentlyCachedSourceFileIds=this.recentlyCachedSourceFileIds.slice(0,this.MAX_CACHED)}static getSourceFileData(e){return P(this,null,function*(){{const a=this.sourceFileData.get(e);if(a)return a}if(e.includes(".")){const a=yield fetch(e);if(a.status>=400)return Promise.reject(new Error(`Failed to fetch source file "${e}"`));const r=yield a.arrayBuffer(),n=new Uint8Array(r);return this.cacheSourceFileData(e,n),n}const t=yield M.getItem(e);return t?t instanceof Uint8Array?(this.cacheSourceFileData(e,t),t):Promise.reject("Source data is of unexpected type"):Promise.reject("Missing source data")})}static getAllMetadataFromStore(){return P(this,null,function*(){const e=new Map;return yield j.iterate((t,a)=>{if(t){const r=Te(t);e.set(a,r)}}),e})}static getAllFromStorage(){return P(this,null,function*(){const e=yield this.getAllMetadataFromStore(),t=(yield M.keys()).concat(te.map(({sourceFileId:r})=>r));return[...e].map(([r,n])=>{const{sourceFileId:o}=n;return t.includes(o)?new D.Mutable(O({id:r},n)):(console.warn(`Found metadata "${n.name||r}" with missing data "${o}; ignoring.`),null)}).filter(Boolean).sort((r,n)=>n.metadata.dateModified-r.metadata.dateModified)})}};let N=D;H(N,"Mutable",class extends D{constructor(e){super(e);setTimeout(()=>P(this,null,function*(){(yield j.keys()).includes(this.id)||console.warn(`Expected sample metadata container ${this.id} to be persisted`)}))}persist(){return P(this,null,function*(){yield j.setItem(this.id,this.metadata)})}update(e){const{id:t,metadata:a}=this;if(Object.keys(e).every(o=>e[o]===a[o]))return this;const r=$(O(O({},a),e),{dateModified:Date.now()}),n=new D.Mutable(O({id:t},r));return n.persist(),n}remove(){return P(this,null,function*(){if(yield j.removeItem(this.id),this.metadata.sourceFileId.includes("."))return;const e=yield D.getAllMetadataFromStore();for(const[,{sourceFileId:t}]of e)if(t===this.metadata.sourceFileId)return;yield M.removeItem(this.metadata.sourceFileId)})}}),H(N,"sourceFileData",new Map),H(N,"recentlyCachedSourceFileIds",[]),H(N,"MAX_CACHED",10);const Ve=new Map(te.map(e=>[e.id,new N(e)]));var le=Math.pow,G=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{d(a.next(l))}catch(i){n(i)}},s=l=>{try{d(a.throw(l))}catch(i){n(i)}},d=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);d((a=a.apply(e,t)).next())});function z(e,t){const a=4,r=t[0]*a,n=e.length-t[0]-t[1];return new Float32Array(e.buffer,r,n)}function oe(e,t){const a=e.length-t[0]-t[1],r=new Float32Array(a),n=Array(e.numberOfChannels).fill().map((o,s)=>z(e.getChannelData(s),t));for(let o=0;o<a;o++){let s=0;for(let d=0;d<n.length;d++)s+=n[d][o];s/=n.length,r[o]=s}return r}function We(e){let t=0;for(const a of e){const r=Math.abs(a);r>t&&(t=r)}return t}function Le(e,t){if(t!==1)for(let a=0;a<e.length;a++)e[a]*=t}function _e(e,t){const a=le(2,t-1);for(let r=0;r<e.length;r++)e[r]=Math.round(e[r]*a)/a}function de(e){for(let t=0;t<e.length;t++)e[t]>1?e[t]=1:e[t]<-1&&(e[t]=-1)}function Ke(e){const t=new Int16Array(e.length),a=le(2,15);for(let r=0;r<e.length;r++)t[r]=e[r]===1?a-1:a*e[r];return t}let ce;function ie(){return ce=ce||new AudioContext({sampleRate:B})}function R(e){return G(this,null,function*(){const t=new Uint8Array(e);return yield new Promise((r,n)=>{ie().decodeAudioData(t.buffer,r,n)})})}function X(e,t){return G(this,null,function*(){const a=yield N.getSourceFileData(e),r=yield R(a);if(t)for(let n=0;n<r.numberOfChannels;n++)de(r.getChannelData(n));return r})}function J(e){return G(this,null,function*(){const{qualityBitDepth:t,sourceFileId:a,userFileInfo:r,scaleCoefficient:n,trimFrames:o}=e.metadata;if(t<8||t>16||!Number.isInteger(t))throw new Error(`Expected bit depth between 8 and 16. Received: ${t}`);const s=yield X(a,Boolean(r)),d=s.numberOfChannels===1?z(s.getChannelData(0),o):oe(s,o);n!==1&&Le(d,n),t<16&&_e(d,t);const l=Ke(d),i=l.length*2,p=Ae()({channels:1,sampleRate:s.sampleRate,bitDepth:16,dataLength:i}),f=new Uint8Array(p.length+i);return f.set(p),f.set(new Uint8Array(l.buffer),p.length),{data:f,sampleRate:16}})}const $e={playAudioBuffer(e,t){throw new Error("Must render AudioPlaybackContextProvider")},isAudioBusy:!1},se=Object(m.createContext)($e);function Ue({children:e}){const[t,a]=Object(m.useState)(!1),r=Object(m.useCallback)((o,{onTimeUpdate:s=()=>null,onEnded:d=()=>null}={})=>{if(t)throw new Error("Wait until audio playback has finished to start new playback");a(!0);let l,i;try{l=ie(),i=l.createBufferSource(),i.buffer=o,i.connect(l.destination),i.start()}catch(u){throw a(!1),u}const p=l.currentTime;s(0);let f=requestAnimationFrame(y);function y(){s(l.currentTime-p),f=requestAnimationFrame(y)}let b=!1;return i.addEventListener("ended",()=>{b||(s(o.duration),d()),a(!1),cancelAnimationFrame(f)}),function(){i.stop(),b=!0}},[t]),n=Object(m.useMemo)(()=>({playAudioBuffer:r,isAudioBusy:t}),[r,t]);return Object(m.createElement)(se.Provider,{value:n},e)}function ue(){return Object(m.useContext)(se)}var Ge=Object.defineProperty,ze=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,pe=(e,t,a)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Je=(e,t)=>{for(var a in t||(t={}))me.call(t,a)&&pe(e,a,t[a]);if(T)for(var a of T(t))fe.call(t,a)&&pe(e,a,t[a]);return e},Ye=(e,t)=>ze(e,Xe(t)),Qe=(e,t)=>{var a={};for(var r in e)me.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&T)for(var r of T(e))t.indexOf(r)<0&&fe.call(e,r)&&(a[r]=e[r]);return a},Ze=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{d(a.next(l))}catch(i){n(i)}},s=l=>{try{d(a.throw(l))}catch(i){n(i)}},d=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);d((a=a.apply(e,t)).next())});const be=6,qe=F.a.div({width:"100%",height:"100%",position:"relative",overflow:"hidden"}),ea=F.a.div({width:"100%",height:({$positive:e})=>e?"67%":"33%",display:"flex",alignItems:({$positive:e})=>e?"flex-end":"flex-start"}),aa=F.a.div({width:"100%",height:({$scaleCoefficient:e})=>`${100*e}%`,willChange:"height",display:"flex",alignItems:({$positive:e})=>e?"flex-end":"flex-start"}),ta=F.a.div({width:`${be}px`,height:({$amplitude:e,$positive:t})=>`${100*(t?1:-1)*e}%`,paddingRight:"1px"}),ra=F.a.div({backgroundColor:({$positive:e})=>e?"red":"darkred",height:"100%"}),na=F.a.input({position:"absolute",top:0,left:0});function la(e,t){const a=new Float32Array(Math.floor(e.length/t)),r=new Float32Array(Math.floor(e.length/t));for(let n=0;n<a.length;n++){const o=new Float32Array(e.buffer,n*t*4,t);let s=0,d=0;for(const l of o)l>s&&(s=l),l<d&&(d=l);a[n]=s,r[n]=d}return{positive:a,negative:r}}function oa({sourceAudioBuffer:e,sample:{metadata:{trimFrames:t,scaleCoefficient:a}},onSetTrimFrames:r,onSetScaleCoefficient:n}){const o=Object(m.useMemo)(()=>e?oe(e,[0,0]):new Float32Array,[e]),s=Object(m.useRef)(null),d=Object(m.useMemo)(()=>{const f=s.current&&s.current.offsetWidth;if(!f||!o.length)return{positive:new Float32Array,negative:new Float32Array};const y=Math.floor(be*o.length/f);return la(o,y)},[o]),l=Object(m.useMemo)(()=>{if(!e)return 0;const f=z(o,t);return We(f)},[e,o,t]),i=1/l;Object(m.useLayoutEffect)(()=>{a>i&&n(i)},[a,i,n]);const p=a*l;return c.a.createElement(c.a.Fragment,null,c.a.createElement(qe,{ref:s},[!0,!1].map(f=>{const y=f?"positive":"negative";return c.a.createElement(ea,{key:y,$positive:f},c.a.createElement(aa,{$scaleCoefficient:a,$positive:f},[].map.call(d[y],(b,u)=>c.a.createElement(ta,{key:u,$amplitude:b,$positive:f},c.a.createElement(ra,{$positive:f})))))}),c.a.createElement(na,{type:"range",disabled:l===0,value:p,min:.1,max:1,step:.01,onChange:f=>{l!==0&&n(Number(f.target.value)/l)}})),c.a.createElement("button",{type:"button",disabled:a===i,onClick:()=>n(i)},"Normalize"),c.a.createElement("button",{type:"button",disabled:a===1,onClick:()=>n(1)},"Original level"))}function da(e){var t=e,{sample:a}=t,r=Qe(t,["sample"]);const[n,o]=Object(m.useState)(null);Object(m.useEffect)(()=>{let d=!1;return(()=>Ze(this,null,function*(){if(d)return;const l=yield X(a.metadata.sourceFileId,Boolean(a.metadata.userFileInfo));d||o([a.metadata.sourceFileId,l])}))(),()=>{d=!0}},[a.metadata.sourceFileId,a.metadata.userFileInfo]);const s=Object(m.useRef)(a);return n&&a.metadata.sourceFileId===n[0]&&(s.current=a),c.a.createElement(oa,Ye(Je({},r),{sample:s.current,sourceAudioBuffer:n&&n[1]}))}var ca=da,ia=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{d(a.next(l))}catch(i){n(i)}},s=l=>{try{d(a.throw(l))}catch(i){n(i)}},d=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);d((a=a.apply(e,t)).next())});let ve;function sa(){return ia(this,null,function*(){if(typeof window.CREATE_SYRO_BINDINGS!="function")return Promise.reject("Expected CREATE_SYRO_BINDINGS global function to exist");const e=yield window.CREATE_SYRO_BINDINGS();return ve=ve||new Promise((t,a)=>{let r;try{r={prepareSampleBufferFromWavData:e.cwrap("prepareSampleBufferFromWavData",null,["array","number","number","number","number"]),prepareSampleBufferFrom16BitPcmData(){throw new Error("This function does not work. Use prepareSampleBufferFromWavData.")},getSampleBufferPointer:e.cwrap("getSampleBufferPointer","number",["number"]),getSampleBufferSize:e.cwrap("getSampleBufferSize","number",["number"]),getSampleBufferProgress:e.cwrap("getSampleBufferProgress","number",["number"]),registerUpdateCallback(n){return e.addFunction(n,"vi")},unregisterUpdateCallback(n){e.removeFunction(n)},heap8Buffer(){return e.HEAP8.buffer}}}catch(n){a(n);return}t(r)})})}var ua=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{d(a.next(l))}catch(i){n(i)}},s=l=>{try{d(a.throw(l))}catch(i){n(i)}},d=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);d((a=a.apply(e,t)).next())});function ma(e,t){return ua(this,null,function*(){const{prepareSampleBufferFromWavData:a,getSampleBufferPointer:r,getSampleBufferSize:n,getSampleBufferProgress:o,registerUpdateCallback:s,unregisterUpdateCallback:d,heap8Buffer:l}=yield sa(),{data:i}=yield J(e);let p,f=0;const y=s(b=>{const u=r(b),h=n(b);p||(p=new Uint8Array(h)),p.set(new Uint8Array(l(),u,h)),f=o(b)/h});a(i,i.length,e.metadata.slotNumber,e.metadata.qualityBitDepth,e.metadata.useCompression?1:0,y),t(f);try{yield new Promise(b=>{u();function u(){if(f&&(t(f),f>=1)){b();return}requestAnimationFrame(u)}})}finally{d(y)}if(!p)throw new Error("Unexpected condition: sampleBuffer should be defined");return p})}var fa=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{d(a.next(l))}catch(i){n(i)}},s=l=>{try{d(a.throw(l))}catch(i){n(i)}},d=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);d((a=a.apply(e,t)).next())});function pa({sample:e}){const[t,a]=Object(m.useState)(0),[r,n]=Object(m.useState)("idle"),o=Object(m.useRef)(()=>{});Object(m.useEffect)(()=>()=>o.current(),[e]);const{playAudioBuffer:s,isAudioBusy:d}=ue();return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{type:"button",onClick:()=>fa(this,null,function*(){try{let l=!1;o.current=()=>{n("idle"),l=!0},a(0),n("loading");const i=yield ma(e,y=>{l||a(y)});if(l)return;n("transferring");const p=yield R(i);if(l)return;const f=s(p,{onTimeUpdate:y=>a(y/p.duration),onEnded:()=>n("idle")});o.current=()=>{f(),n("idle")}}catch(l){console.error(l),n("error")}}),disabled:d||r==="loading"||r==="transferring"},"transfer to volca sample"),c.a.createElement("br",null),r==="idle"?null:r==="error"?"Error transferring":c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,r==="loading"?"Preparing sample transfer...":"Transferring to Volca Sample..."),c.a.createElement("progress",{value:t}),c.a.createElement("br",null),c.a.createElement("button",{onClick:()=>o.current()},"Cancel")),c.a.createElement("br",null))}var ba=pa,Y=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{d(a.next(l))}catch(i){n(i)}},s=l=>{try{d(a.throw(l))}catch(i){n(i)}},d=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);d((a=a.apply(e,t)).next())});const va=F.a.div({paddingLeft:"2rem"}),ha=F.a.div({height:"200px",backgroundColor:"#f3f3f3",maxWidth:"400px"});function he(e,t){const a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download=t,r.style.display="none",document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(a)}function ya({sample:e,onSampleUpdate:t,onSampleDuplicate:a,onSampleDelete:r}){const[n,o]=Object(m.useState)(0),s=e&&e.metadata.sourceFileId;Object(m.useEffect)(()=>{o(0),s&&X(s,!1).then(b=>o(b.length))},[s]);const d=e&&e.id,l=Object(m.useCallback)(b=>d&&t(d,{scaleCoefficient:b}),[d,t]),{playAudioBuffer:i,isAudioBusy:p}=ue();if(!e)return null;const f=Math.max(0,n-e.metadata.trimFrames[1]),y=Math.max(0,n-e.metadata.trimFrames[0]);return c.a.createElement(va,null,c.a.createElement("h3",null,e.metadata.name),c.a.createElement("button",{type:"button",onClick:()=>a(e.id)},"Duplicate"),c.a.createElement("button",{type:"button",onClick:()=>{window.confirm(`Are you sure you want to delete ${e.metadata.name}?`)&&r(e.id)}},"Remove"),c.a.createElement("h4",null,"Last edited: ",new Date(e.metadata.dateModified).toLocaleString()),c.a.createElement("h4",null,"Sampled: ",new Date(e.metadata.dateSampled).toLocaleString()),c.a.createElement("label",null,c.a.createElement("h4",null,"Trim start"),c.a.createElement("input",{type:"number",value:e.metadata.trimFrames[0],step:1,min:0,max:f,onChange:b=>{if(n){const u=Number(b.target.value);t(e.id,{trimFrames:[Math.min(u,f),e.metadata.trimFrames[1]]})}else t(e.id,{trimFrames:[...e.metadata.trimFrames]})}})),c.a.createElement("label",null,c.a.createElement("h4",null,"Trim end"),c.a.createElement("input",{type:"number",value:e.metadata.trimFrames[1],step:1,min:0,max:y,onChange:b=>{if(n){const u=Number(b.target.value);t(e.id,{trimFrames:[e.metadata.trimFrames[0],Math.min(u,y)]})}else t(e.id,{trimFrames:[...e.metadata.trimFrames]})}})),c.a.createElement(ha,null,c.a.createElement(ca,{onSetTrimFrames:()=>null,onSetScaleCoefficient:l,sample:e}),c.a.createElement("button",{type:"button",onClick:()=>Y(this,null,function*(){const{data:b}=yield J(e),u=yield R(b);i(u)}),disabled:p},"play"),c.a.createElement("button",{type:"button",onClick:()=>Y(this,null,function*(){const{data:b}=yield J(e),u=new Blob([b],{type:"audio/x-wav"});he(u,`${e.metadata.name}.wav`)})},"download"),c.a.createElement("button",{type:"button",onClick:()=>Y(this,null,function*(){const{sourceFileId:b,userFileInfo:u}=e.metadata,h=yield N.getSourceFileData(b),w=new Blob([h],{type:u?u.type:"audio/x-wav"});he(w,`${e.metadata.name}${u?u.ext:".wav"}`)})},"download (orig)")),c.a.createElement("h4",null,"Quality bit depth: ",e.metadata.qualityBitDepth),c.a.createElement("input",{type:"range",value:e.metadata.qualityBitDepth,step:1,min:8,max:16,onChange:b=>{const u=Number(b.target.value);t(e.id,{qualityBitDepth:u})}}),c.a.createElement("label",null,c.a.createElement("h4",null,"Slot number"),c.a.createElement("input",{type:"number",value:e.metadata.slotNumber,step:1,min:0,max:99,onChange:b=>{const u=Number(b.target.value);t(e.id,{slotNumber:u})}})),c.a.createElement(ba,{sample:e}))}var Sa=ya,wa=I(8),V=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{d(a.next(l))}catch(i){n(i)}},s=l=>{try{d(a.throw(l))}catch(i){n(i)}},d=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);d((a=a.apply(e,t)).next())});let ye;function Q(){return ye=ye||new AudioContext(navigator.mediaDevices.getSupportedConstraints().sampleRate?{sampleRate:B}:{})}function ga(){return V(this,null,function*(){const t=(yield navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="audioinput"),a=[];for(const r of t){const n=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:r.deviceId,channelCount:2},video:!1}),o=(yield navigator.mediaDevices.enumerateDevices()).find(({deviceId:d})=>r.deviceId===d).label,s=n.getAudioTracks().length;for(const d of n.getTracks())d.stop();a.push({device:{deviceId:r.deviceId,label:o},channelsAvailable:s})}return a})}let Z;function Fa(e){return V(this,arguments,function*({onData:t,onFinish:a}){const r=Q();Z=Z||r.audioWorklet.addModule("recorderWorkletProcessor.js"),yield Z;const n=new AudioWorkletNode(r,"recorder-worklet",{parameterData:{bufferSize:1024}});n.port.onmessage=s=>{if(s.data.eventType==="data"){const d=s.data.audioChannels;t(d)}s.data.eventType==="stop"&&a()};const o=n.parameters.get("isRecording");return o.setValueAtTime(1,r.currentTime),{recorderNode:n,stop(){o.setValueAtTime(0,r.currentTime)}}})}function Ia({channelCount:e,onData:t,onFinish:a}){const n=Q().createScriptProcessor(1024,e,e);let o=!1;return n.onaudioprocess=s=>{const d=Array(e).fill().map((l,i)=>s.inputBuffer.getChannelData(i));t(d),o&&a()},{recorderNode:n,stop(){o=!0}}}function Ca(e){return V(this,null,function*(){return typeof AudioWorkletNode=="undefined"?Ia(e):yield Fa(e)})}function Ea(e){return V(this,arguments,function*({deviceId:t,channelCount:a,onStart:r}){const n=yield navigator.mediaDevices.getUserMedia({audio:{deviceId:t,channelCount:a,sampleRate:B,echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},video:!1}),o=Q(),s=o.createMediaStreamSource(n),{recorderNode:d,stop:l}=yield Ca({channelCount:a,onData:b,onFinish:S});s.connect(d),d.connect(o.destination),r();const p=10*o.sampleRate;let f=0;const y=Array(a).fill([]);function b(C){let g=0;for(let E=0;E<a;E++){const W=C[E],L=W.length,A=W.slice(0,Math.min(L,p-f));de(A),g||(g=A.length),y[E].push(A)}f+=g,f>=p&&(S(),l())}let u,h;const w=new Promise((C,g)=>{u=C,h=g});let v=!1;function S(){if(v)return;try{const g=y.map(L=>{const A=new Float32Array(L.reduce((_,$a)=>_+$a.length,0));let Fe=0;for(const _ of L)A.set(_,Fe),Fe+=_.length;return A}),E=new wa.a;E.fromScratch(g.length,o.sampleRate,"32f",g);const W=E.toBuffer();u(W)}catch(g){h(g)}const C=n.getTracks();for(const g of C)g.stop();d.disconnect(o.destination),s.disconnect(d),v=!0}return{stop:l,mediaRecording:w}})}var Se=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,Oa=(e,t)=>{var a={};for(var r in e)Na.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&Se)for(var r of Se(e))t.indexOf(r)<0&&Pa.call(e,r)&&(a[r]=e[r]);return a},we=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{d(a.next(l))}catch(i){n(i)}},s=l=>{try{d(a.throw(l))}catch(i){n(i)}},d=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);d((a=a.apply(e,t)).next())});const Da=F.a.div({padding:"2rem"});let ge=null;function Aa({onRecordStart:e,onRecordFinish:t,onRecordError:a}){const[r,n]=Object(m.useState)(ge),[o,s]=Object(m.useState)(r?"ok":"pending"),[d,l]=Object(m.useState)("");Object(m.useEffect)(()=>{ge=r,s("ok")},[r]);const i=Object(m.useCallback)(()=>{ga().then(v=>{v.length&&(n(new Map(v.map(S=>[S.device.deviceId,S]))),l(S=>S||v[0].device.deviceId))}).catch(v=>{if(v instanceof DOMException){if(v.name==="NotAllowedError"){s("denied");return}if(v.name==="NotFoundError"){s("unavailable");return}}throw v})},[]);Object(m.useEffect)(i,[i]);const[p,f]=Object(m.useState)(1);Object(m.useEffect)(()=>{const v=r&&r.get(d);v&&f(v.channelsAvailable)},[r,d]);const[y,b]=Object(m.useState)(null);Object(m.useEffect)(()=>{y&&a(y)},[y,a]);const[u,h]=Object(m.useState)({fn:()=>{}}),w=Object(m.useCallback)(()=>we(this,null,function*(){const{mediaRecording:v,stop:S}=yield Ea({deviceId:d,channelCount:p,onStart:e});h({fn:S});let C;try{C=yield v}catch(g){b(g);return}t(C)}),[d,p,e,t]);return{captureDevices:r,accessState:o,selectedCaptureDeviceId:d,selectedChannelCount:p,recordingError:y,refreshCaptureDevices:i,setSelectedCaptureDeviceId:l,setSelectedChannelCount:f,beginRecording:w,stopRecording:u.fn}}function ka(e){var t=e,{captureState:a}=t,r=Oa(t,["captureState"]);const{captureDevices:n,accessState:o,selectedCaptureDeviceId:s,selectedChannelCount:d,recordingError:l,refreshCaptureDevices:i,setSelectedCaptureDeviceId:p,setSelectedChannelCount:f,beginRecording:y,stopRecording:b}=Aa(r);return c.a.createElement(Da,null,o==="denied"?c.a.createElement("p",null,"Looks like you didn't grant access to your audio input device. Please give Volca Sampler access, then"," ",c.a.createElement("button",{type:"button",onClick:i},"try again")):o==="unavailable"?c.a.createElement("p",null,"Volca Sampler couldn't find any audio input devices. Please connect one, then"," ",c.a.createElement("button",{type:"button",onClick:i},"try again")):c.a.createElement("div",null,c.a.createElement("label",null,"Capture Device",c.a.createElement("select",{value:s,onChange:u=>p(u.target.value)},n&&o==="ok"?[...n].map(([u,{device:h}])=>c.a.createElement("option",{key:u,value:u},h.label||u)):c.a.createElement("option",{value:"",disabled:!0},"Loading devices..."))),c.a.createElement("label",null,"Channel count",c.a.createElement("select",{value:d,onChange:u=>f(Number(u.target.value))},[1,2].map(u=>c.a.createElement("option",{key:u,value:u,disabled:!n||!n.has(s)||n.get(s).channelsAvailable<u},u))))),c.a.createElement("button",{type:"button",onClick:a==="capturing"?b:y,disabled:a==="preparing"},["capturing","preparing"].includes(a)?"Stop":"Record"),c.a.createElement("input",{type:"file",accept:"audio/*,.wav,.mp3,.ogg",onChange:u=>{if(u.target.files&&u.target.files.length){const h=u.target.files[0];h.arrayBuffer().then(w=>we(this,null,function*(){const v=new Uint8Array(w);let S;try{S=yield R(v)}catch(C){alert("Unsupported audio format detected");return}if(S.length>10*S.sampleRate){alert("Please select an audio file no more than 10 seconds long");return}r.onRecordFinish(v,h)}))}}}),a==="error"&&l||null)}var Ba=ka,xa=(e,t,a)=>new Promise((r,n)=>{var o=l=>{try{d(a.next(l))}catch(i){n(i)}},s=l=>{try{d(a.throw(l))}catch(i){n(i)}},d=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);d((a=a.apply(e,t)).next())});const Ha=F.a.h1({display:"flex",alignItems:"center",padding:"2rem",paddingBottom:"0px",marginBottom:"0px"}),Ma=F.a.span({color:"red"}),ja=F.a.span({textTransform:"uppercase",textDecoration:"underline"}),Ra=F.a.img({height:"1.6em",paddingLeft:"1rem"}),Ta=F.a.div({padding:"2rem",display:"flex",height:"100%"}),Va=F.a.div({width:"200px",flexShrink:0,paddingRight:"0.5rem",height:"100%"}),Wa=F.a.div({flexGrow:1});function La(){const[e,t]=Object(m.useState)(!1),[a,r]=Object(m.useState)(new Map),[n,o]=Object(m.useState)(null),[s,d]=Object(m.useState)(!0),[l,i]=Object(m.useState)("idle"),p=e?Ve:a;Object(m.useEffect)(()=>{N.getAllFromStorage().then(h=>{r(w=>new Map([...w,...h.map(v=>[v.id,v])]))}).finally(()=>{d(!1)})},[]),Object(m.useEffect)(()=>{p.size&&!(n&&p.has(n))&&o([...p.values()][0].id)},[p,n]);const f=Object(m.useCallback)(()=>i("capturing"),[]),y=Object(m.useCallback)((h,w)=>xa(this,null,function*(){i("preparing");const v=yield je(h);let S="",C="";if(w){const E=w.name.lastIndexOf(".");E>0?(S=w.name.slice(0,E),C=w.name.slice(E)):S=w.name}else S="New one";const g=new N.Mutable({name:S,sourceFileId:v,userFileInfo:w&&{type:w.type,ext:C}});yield g.persist(),r(E=>new Map([[g.id,g],...E])),t(!1),o(g.id),i("idle")}),[]),b=Object(m.useCallback)(h=>{console.error(h),i("error")},[]),u=Object(m.useCallback)((h,w)=>{r(v=>{const S=v.get(h);if(S&&S instanceof N.Mutable){const C=S.update(w);if(C!==S)return new Map(v).set(S.id,C)}return v})},[]);return c.a.createElement("div",null,c.a.createElement(Ha,null,c.a.createElement(Ma,null,"Volca Sample",c.a.createElement(ja,null,"r")),c.a.createElement(Ra,{src:"volca_sample.png",alt:""})),c.a.createElement(Ta,null,c.a.createElement("select",{value:JSON.stringify(e),onChange:h=>t(JSON.parse(h.target.value))},c.a.createElement("option",{value:"false"},"Your Samples"),c.a.createElement("option",{value:"true"},"Factory Samples")),c.a.createElement(Va,null,s?"Loading...":null,c.a.createElement(Oe,{samples:p,selectedSampleId:l==="idle"?n:null,readonly:["capturing","preparing"].includes(l),onNewSample:()=>i("ready"),onSampleSelect:h=>{o(h),i("idle")}})),c.a.createElement(Wa,null,l==="idle"&&c.a.createElement(Sa,{sample:n&&p.get(n)||null,onSampleUpdate:u,onSampleDuplicate:h=>{const w=p.get(h);if(w){const v=w.duplicate();r(S=>new Map([[v.id,v],...S])),t(!1),o(v.id)}},onSampleDelete:h=>{const w=p.get(h);w&&w instanceof N.Mutable&&(w.remove(),r(v=>{const S=new Map(v);return S.delete(w.id),S}))}}),l!=="idle"&&c.a.createElement(Ba,{captureState:l,onRecordStart:f,onRecordFinish:y,onRecordError:b}))))}var _a=La,Ka=e=>{e&&e instanceof Function&&I.e(3).then(I.bind(null,24)).then(({getCLS:t,getFID:a,getFCP:r,getLCP:n,getTTFB:o})=>{t(e),a(e),r(e),n(e),o(e)})};Ee.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Ue,null,c.a.createElement(_a,null))),document.getElementById("root")),Ka()}},[[21,1,2]]]);

//# sourceMappingURL=main.ce252304.chunk.js.map